{"file_name": "/home/qj213/afp-2021-10-22/thys/Random_Graph_Subgraph_Threshold/Subgraph_Threshold.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Random_Graph_Subgraph_Threshold", "problem_names": ["lemma (in edge_space) measurable_pred[measurable]: \"Measurable.pred P Q\"", "theorem\n  assumes nonempty: \"nonempty_graph H\" and finite: \"finite_graph H\" and wellformed: \"uwellformed H\"\n  shows \"is_threshold {G. H \\<sqsubseteq> G} (subgraph_threshold H)\""], "translations": [["", "lemma (in edge_space) measurable_pred[measurable]: \"Measurable.pred P Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. random_variable (count_space UNIV) Q", "by (simp add: P_def sets_point_measure space_point_measure subset_eq)"], ["", "text\\<open>This section contains the main theorem. For a fixed nonempty graph $H$, we consider the graph\nproperty of `containing an isomorphic subgraph of $H$'. This is obviously a valid property, since\nit is closed under isomorphism.\n\nThe corresponding threshold function is\n\n  \\[ t(n) = n^{-\\frac{1}{\\rho'(H)}}, \\]\n\nwhere $\\rho'$ denotes @{term max_density}.\\<close>"], ["", "definition subgraph_threshold :: \"ugraph \\<Rightarrow> nat \\<Rightarrow> real\" where\n\"subgraph_threshold H n = n powr (-(1 / max_density H))\""], ["", "theorem\n  assumes nonempty: \"nonempty_graph H\" and finite: \"finite_graph H\" and wellformed: \"uwellformed H\"\n  shows \"is_threshold {G. H \\<sqsubseteq> G} (subgraph_threshold H)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_threshold {G. H \\<sqsubseteq> G} (subgraph_threshold H)", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. ugraph_property {G. H \\<sqsubseteq> G}\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 3. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "show \"ugraph_property {G. H \\<sqsubseteq> G}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ugraph_property {G. H \\<sqsubseteq> G}", "unfolding ugraph_property_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>G\\<in>Collect (subgraph_isomorphic H).\n       \\<forall>G'.\n          G \\<simeq> G' \\<longrightarrow>\n          G' \\<in> Collect (subgraph_isomorphic H)", "using subgraph_isomorphic_closed"], ["proof (prove)\nusing this:\n  \\<lbrakk>uwellformed ?G\\<^sub>1; subgraph ?G\\<^sub>1 ?G\\<^sub>2;\n   ?G\\<^sub>2 \\<sqsubseteq> ?G\\<^sub>3\\<rbrakk>\n  \\<Longrightarrow> ?G\\<^sub>1 \\<sqsubseteq> ?G\\<^sub>3\n  \\<lbrakk>?G\\<^sub>1 \\<simeq> ?G\\<^sub>2;\n   ?G\\<^sub>2 \\<sqsubseteq> ?G\\<^sub>3\\<rbrakk>\n  \\<Longrightarrow> ?G\\<^sub>1 \\<sqsubseteq> ?G\\<^sub>3\n  \\<lbrakk>?H \\<sqsubseteq> ?G; ?G \\<simeq> ?G'\\<rbrakk>\n  \\<Longrightarrow> ?H \\<sqsubseteq> ?G'\n\ngoal (1 subgoal):\n 1. \\<forall>G\\<in>Collect (subgraph_isomorphic H).\n       \\<forall>G'.\n          G \\<simeq> G' \\<longrightarrow>\n          G' \\<in> Collect (subgraph_isomorphic H)", "by blast"], ["proof (state)\nthis:\n  ugraph_property {G. H \\<sqsubseteq> G}\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "next\n\n  \\<comment> \\<open>To prove the 0-statement, we introduce the subgraph with the maximum density as $H_0$. Note\n       that $\\rho(H_0) = \\rho'(H)$.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix p :: \"nat \\<Rightarrow> real\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "obtain H\\<^sub>0 where H\\<^sub>0: \"density H\\<^sub>0 = max_density H\" \"subgraph H\\<^sub>0 H\" \"nonempty_graph H\\<^sub>0\" \"finite_graph H\\<^sub>0\" \"uwellformed H\\<^sub>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>H\\<^sub>0.\n        \\<lbrakk>Ugraph_Lemmas.density H\\<^sub>0 = max_density H;\n         subgraph H\\<^sub>0 H; nonempty_graph H\\<^sub>0;\n         finite_graph H\\<^sub>0; uwellformed H\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using subgraph_has_max_density assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite_graph ?G; nonempty_graph ?G; uwellformed ?G\\<rbrakk>\n  \\<Longrightarrow> \\<exists>G'.\n                       Ugraph_Lemmas.density G' = max_density ?G \\<and>\n                       subgraph G' ?G \\<and>\n                       nonempty_graph G' \\<and>\n                       finite_graph G' \\<and> uwellformed G'\n  nonempty_graph H\n  finite_graph H\n  uwellformed H\n\ngoal (1 subgoal):\n 1. (\\<And>H\\<^sub>0.\n        \\<lbrakk>Ugraph_Lemmas.density H\\<^sub>0 = max_density H;\n         subgraph H\\<^sub>0 H; nonempty_graph H\\<^sub>0;\n         finite_graph H\\<^sub>0; uwellformed H\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density H\\<^sub>0 = max_density H\n  subgraph H\\<^sub>0 H\n  nonempty_graph H\\<^sub>0\n  finite_graph H\\<^sub>0\n  uwellformed H\\<^sub>0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence card: \"0 < card (uverts H\\<^sub>0)\" \"0 < card (uedges H\\<^sub>0)\""], ["proof (prove)\nusing this:\n  Ugraph_Lemmas.density H\\<^sub>0 = max_density H\n  subgraph H\\<^sub>0 H\n  nonempty_graph H\\<^sub>0\n  finite_graph H\\<^sub>0\n  uwellformed H\\<^sub>0\n\ngoal (1 subgoal):\n 1. 0 < card (uverts H\\<^sub>0) &&& 0 < card (uedges H\\<^sub>0)", "unfolding nonempty_graph_def finite_graph_def"], ["proof (prove)\nusing this:\n  Ugraph_Lemmas.density H\\<^sub>0 = max_density H\n  subgraph H\\<^sub>0 H\n  uverts H\\<^sub>0 \\<noteq> {} \\<and> uedges H\\<^sub>0 \\<noteq> {}\n  finite (uverts H\\<^sub>0) \\<and> finite (uedges H\\<^sub>0)\n  uwellformed H\\<^sub>0\n\ngoal (1 subgoal):\n 1. 0 < card (uverts H\\<^sub>0) &&& 0 < card (uedges H\\<^sub>0)", "by auto"], ["proof (state)\nthis:\n  0 < card (uverts H\\<^sub>0)\n  0 < card (uedges H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?v = \"card (uverts H\\<^sub>0)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?e = \"card (uedges H\\<^sub>0)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume p_nz: \"nonzero_prob_fun p\""], ["proof (state)\nthis:\n  nonzero_prob_fun p\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence p: \"valid_prob_fun p\""], ["proof (prove)\nusing this:\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. valid_prob_fun p", "by (fact nonzero_fun_is_valid_fun)\n\n  \\<comment> \\<open>Firstly, we follow from the assumption that @{term p} is asympotically less than the\n       threshold function that the product\n       \\[ p(n)^{|E(H_0)|} \\cdot n^{|V(H_0)|} \\]\n       tends to $0$.\\<close>"], ["proof (state)\nthis:\n  valid_prob_fun p\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume \"p \\<lless> subgraph_threshold H\""], ["proof (state)\nthis:\n  p \\<lless> subgraph_threshold H\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "moreover"], ["proof (state)\nthis:\n  p \\<lless> subgraph_threshold H\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  p \\<lless> subgraph_threshold H\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"p n / n powr (-(1 / max_density H)) = p n * n powr (1 / max_density H)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n / real n powr - (1 / max_density H) =\n    p n * real n powr (1 / max_density H)", "by (simp add: powr_minus_divide)"], ["proof (state)\nthis:\n  p n / real n powr - (1 / max_density H) =\n  p n * real n powr (1 / max_density H)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  p n / real n powr - (1 / max_density H) =\n  p n * real n powr (1 / max_density H)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n * n powr (1 / density H\\<^sub>0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n * real n powr (1 / max_density H) =\n    p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0)", "using H\\<^sub>0"], ["proof (prove)\nusing this:\n  Ugraph_Lemmas.density H\\<^sub>0 = max_density H\n  subgraph H\\<^sub>0 H\n  nonempty_graph H\\<^sub>0\n  finite_graph H\\<^sub>0\n  uwellformed H\\<^sub>0\n\ngoal (1 subgoal):\n 1. p n * real n powr (1 / max_density H) =\n    p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0)", "by simp"], ["proof (state)\nthis:\n  p n * real n powr (1 / max_density H) =\n  p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  p n * real n powr (1 / max_density H) =\n  p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n * n powr (?v / ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0) =\n    p n *\n    real n powr\n    (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "using card"], ["proof (prove)\nusing this:\n  0 < card (uverts H\\<^sub>0)\n  0 < card (uedges H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0) =\n    p n *\n    real n powr\n    (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "unfolding density_def"], ["proof (prove)\nusing this:\n  0 < card (uverts H\\<^sub>0)\n  0 < card (uedges H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. p n *\n    real n powr\n    (1 /\n     (real (card (uedges H\\<^sub>0)) / real (card (uverts H\\<^sub>0)))) =\n    p n *\n    real n powr\n    (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "by simp"], ["proof (state)\nthis:\n  p n * real n powr (1 / Ugraph_Lemmas.density H\\<^sub>0) =\n  p n *\n  real n powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  p n / real n powr - (1 / max_density H) =\n  p n *\n  real n powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "have \"p n / n powr (-(1 / max_density H)) = \\<dots>\""], ["proof (prove)\nusing this:\n  p n / real n powr - (1 / max_density H) =\n  p n *\n  real n powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. p n / real n powr - (1 / max_density H) =\n    p n *\n    real n powr\n    (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "."], ["proof (state)\nthis:\n  p n / real n powr - (1 / max_density H) =\n  p n *\n  real n powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  p ?n2 / real ?n2 powr - (1 / max_density H) =\n  p ?n2 *\n  real ?n2 powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "ultimately"], ["proof (chain)\npicking this:\n  p \\<lless> subgraph_threshold H\n  p ?n2 / real ?n2 powr - (1 / max_density H) =\n  p ?n2 *\n  real ?n2 powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "have \"(\\<lambda>n. p n * n powr (?v / ?e)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  p \\<lless> subgraph_threshold H\n  p ?n2 / real ?n2 powr - (1 / max_density H) =\n  p ?n2 *\n  real ?n2 powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        p n *\n        real n powr\n        (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n    \\<longlonglongrightarrow> 0", "unfolding subgraph_threshold_def"], ["proof (prove)\nusing this:\n  p \\<lless> (\\<lambda>n. real n powr - (1 / max_density H))\n  p ?n2 / real ?n2 powr - (1 / max_density H) =\n  p ?n2 *\n  real ?n2 powr\n  (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        p n *\n        real n powr\n        (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      p n *\n      real n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      p n *\n      real n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<And>n. 1 \\<le> n \\<Longrightarrow> 0 < p n * n powr (?v / ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       1 \\<le> n \\<Longrightarrow>\n       0 < p n *\n           real n powr\n           (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "by (auto simp: p_nz)"], ["proof (state)\nthis:\n  1 \\<le> ?n \\<Longrightarrow>\n  0 < p ?n *\n      real ?n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      p n *\n      real n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n  \\<longlonglongrightarrow> 0\n  1 \\<le> ?n \\<Longrightarrow>\n  0 < p ?n *\n      real ?n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))", "have \"(\\<lambda>n. (p n * n powr (?v / ?e)) powr ?e) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      p n *\n      real n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n  \\<longlonglongrightarrow> 0\n  1 \\<le> ?n \\<Longrightarrow>\n  0 < p ?n *\n      real ?n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (p n *\n         real n powr\n         (real (card (uverts H\\<^sub>0)) /\n          real (card (uedges H\\<^sub>0)))) powr\n        real (card (uedges H\\<^sub>0)))\n    \\<longlonglongrightarrow> 0", "using card(2) p"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      p n *\n      real n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0))))\n  \\<longlonglongrightarrow> 0\n  1 \\<le> ?n \\<Longrightarrow>\n  0 < p ?n *\n      real ?n powr\n      (real (card (uverts H\\<^sub>0)) / real (card (uedges H\\<^sub>0)))\n  0 < card (uedges H\\<^sub>0)\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (p n *\n         real n powr\n         (real (card (uverts H\\<^sub>0)) /\n          real (card (uedges H\\<^sub>0)))) powr\n        real (card (uedges H\\<^sub>0)))\n    \\<longlonglongrightarrow> 0", "by (force intro: tendsto_zero_powrI)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (p n *\n       real n powr\n       (real (card (uverts H\\<^sub>0)) /\n        real (card (uedges H\\<^sub>0)))) powr\n      real (card (uedges H\\<^sub>0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence limit: \"(\\<lambda>n. p n powr ?e * n powr ?v) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (p n *\n       real n powr\n       (real (card (uverts H\\<^sub>0)) /\n        real (card (uedges H\\<^sub>0)))) powr\n      real (card (uedges H\\<^sub>0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        p n powr real (card (uedges H\\<^sub>0)) *\n        real n powr real (card (uverts H\\<^sub>0)))\n    \\<longlonglongrightarrow> 0", "by (rule LIMSEQ_cong[OF _ eventually_sequentiallyI[where c = 1]])\n       (auto simp: p card p_nz powr_powr powr_mult)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      p n powr real (card (uedges H\\<^sub>0)) *\n      real n powr real (card (uverts H\\<^sub>0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      p n powr real (card (uedges H\\<^sub>0)) *\n      real n powr real (card (uverts H\\<^sub>0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume n: \"?v \\<le> n\""], ["proof (state)\nthis:\n  card (uverts H\\<^sub>0) \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "interpret ES: edge_space n \"(p n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. edge_space (p n)", "by unfold_locales (auto simp: p)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?graph_of = \"ES.edge_ugraph\"\n\n    \\<comment> \\<open>After fixing an @{term n}, we define a family of random variables $X$ indexed by a set of\n         vertices $v$ and a set of edges $e$. Each $X$ is an indicator for the event that $(v, e)$\n         is isomorphic to $H_0$ and a subgraph of a random graph. The sum of all these variables\n         is denoted by $Y$ and counts the total number of copies of $H_0$ in a random graph.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?X = \"\\<lambda>H\\<^sub>0'. rind {es \\<in> space ES.P. subgraph H\\<^sub>0' (?graph_of es) \\<and> H\\<^sub>0 \\<simeq> H\\<^sub>0'}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?I = \"{(v, e). v \\<subseteq> {1..n} \\<and> card v = ?v \\<and> e \\<subseteq> all_edges v \\<and> card e = ?e}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?Y = \"\\<lambda>es. \\<Sum>H\\<^sub>0' \\<in> ?I. ?X H\\<^sub>0' es\"\n\n    \\<comment> \\<open>Now we prove an upper bound for the probability that a random graph contains a copy of\n         @{term H}. Observe that in that case, $Y$ takes a value greater or equal than $1$.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"prob_in_class p {G. H \\<sqsubseteq> G} n = probGn p n (\\<lambda>es. H \\<sqsubseteq> ?graph_of es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob\n     {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}} =\n    ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}", "by simp"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}} =\n  ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}} =\n  ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> probGn p n (\\<lambda>es. 1 \\<le> ?Y es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}\n    \\<le> ES.prob\n           {es \\<in> space ES.P.\n            1 \\<le> (\\<Sum>H\\<^sub>0'\n                           \\<in>{(v, e).\n                                 v \\<subseteq> {1..n} \\<and>\n                                 card v = card (uverts H\\<^sub>0) \\<and>\n                                 e \\<subseteq> all_edges v \\<and>\n                                 card e = card (uedges H\\<^sub>0)}.\n                       rind\n                        {es \\<in> space ES.P.\n                         subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                         H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                        es)}", "proof (rule ES.finite_measure_mono, safe)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "fix es"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "assume es: \"es \\<in> space (MGn p n)\""], ["proof (state)\nthis:\n  es \\<in> space ES.P\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "assume \"H \\<sqsubseteq> ?graph_of es\""], ["proof (state)\nthis:\n  H \\<sqsubseteq> ES.edge_ugraph es\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "hence \"H\\<^sub>0 \\<sqsubseteq> ?graph_of es\" \\<comment> \\<open>since @{term H\\<^sub>0} is a subgraph of @{term H}\\<close>"], ["proof (prove)\nusing this:\n  H \\<sqsubseteq> ES.edge_ugraph es\n\ngoal (1 subgoal):\n 1. H\\<^sub>0 \\<sqsubseteq> ES.edge_ugraph es", "using H\\<^sub>0"], ["proof (prove)\nusing this:\n  H \\<sqsubseteq> ES.edge_ugraph es\n  Ugraph_Lemmas.density H\\<^sub>0 = max_density H\n  subgraph H\\<^sub>0 H\n  nonempty_graph H\\<^sub>0\n  finite_graph H\\<^sub>0\n  uwellformed H\\<^sub>0\n\ngoal (1 subgoal):\n 1. H\\<^sub>0 \\<sqsubseteq> ES.edge_ugraph es", "by (fast intro: subgraph_isomorphic_pre_subgraph_closed)"], ["proof (state)\nthis:\n  H\\<^sub>0 \\<sqsubseteq> ES.edge_ugraph es\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "then"], ["proof (chain)\npicking this:\n  H\\<^sub>0 \\<sqsubseteq> ES.edge_ugraph es", "obtain H\\<^sub>0' where H\\<^sub>0': \"subgraph H\\<^sub>0' (?graph_of es)\" \"H\\<^sub>0 \\<simeq> H\\<^sub>0'\""], ["proof (prove)\nusing this:\n  H\\<^sub>0 \\<sqsubseteq> ES.edge_ugraph es\n\ngoal (1 subgoal):\n 1. (\\<And>H\\<^sub>0'.\n        \\<lbrakk>subgraph H\\<^sub>0' (ES.edge_ugraph es);\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding subgraph_isomorphic_def"], ["proof (prove)\nusing this:\n  uwellformed (ES.edge_ugraph es) \\<and>\n  (\\<exists>G''.\n      H\\<^sub>0 \\<simeq> G'' \\<and> subgraph G'' (ES.edge_ugraph es))\n\ngoal (1 subgoal):\n 1. (\\<And>H\\<^sub>0'.\n        \\<lbrakk>subgraph H\\<^sub>0' (ES.edge_ugraph es);\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  subgraph H\\<^sub>0' (ES.edge_ugraph es)\n  H\\<^sub>0 \\<simeq> H\\<^sub>0'\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space ES.P;\n        H \\<sqsubseteq> ES.edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> (\\<Sum>H\\<^sub>0'\n  \\<in>{(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}.\n                                    rind\n                                     {es \\<in> space ES.P.\nsubgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\nH\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                                     x)\n 2. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "show \"1 \\<le> ?Y es\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>H\\<^sub>0'\n                   \\<in>{(v, e).\n                         v \\<subseteq> {1..n} \\<and>\n                         card v = card (uverts H\\<^sub>0) \\<and>\n                         e \\<subseteq> all_edges v \\<and>\n                         card e = card (uedges H\\<^sub>0)}.\n               rind\n                {es \\<in> space ES.P.\n                 subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                 H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                es)", "proof (rule sum_lower_or_eq)\n            \\<comment> \\<open>The only relevant step here is to provide the specific instance of $(v, e)$ such\n                 that $X_{(v, e)}$ takes a value greater or equal than $1$. This is trivial, as we\n                 already obtained that one above (i.e. @{term H\\<^sub>0'}). The remainder of the proof is\n                 just bookkeeping.\\<close>"], ["proof (state)\ngoal (4 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. ?i \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es\n 4. 1 \\<le> rind\n             {es \\<in> space ES.P.\n              subgraph ?i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> ?i}\n             es", "show \"1 \\<le> ?X H\\<^sub>0' es\" \\<comment> \\<open>by definition of $X$\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> rind\n             {es \\<in> space ES.P.\n              subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n              H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n             es", "using H\\<^sub>0' es"], ["proof (prove)\nusing this:\n  subgraph H\\<^sub>0' (ES.edge_ugraph es)\n  H\\<^sub>0 \\<simeq> H\\<^sub>0'\n  es \\<in> space ES.P\n\ngoal (1 subgoal):\n 1. 1 \\<le> rind\n             {es \\<in> space ES.P.\n              subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n              H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n             es", "by simp"], ["proof (state)\nthis:\n  1 \\<le> rind\n           {es \\<in> space ES.P.\n            subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n            H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n           es\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "have \"uverts H\\<^sub>0' \\<subseteq> {1..n}\" \"uedges H\\<^sub>0' \\<subseteq> es\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uverts H\\<^sub>0' \\<subseteq> {1..n} &&&\n    uedges H\\<^sub>0' \\<subseteq> es", "using H\\<^sub>0'(1)"], ["proof (prove)\nusing this:\n  subgraph H\\<^sub>0' (ES.edge_ugraph es)\n\ngoal (1 subgoal):\n 1. uverts H\\<^sub>0' \\<subseteq> {1..n} &&&\n    uedges H\\<^sub>0' \\<subseteq> es", "unfolding subgraph_def ES.edge_ugraph_def ES.S_verts_def ES.S_edges_def"], ["proof (prove)\nusing this:\n  uverts H\\<^sub>0'\n  \\<subseteq> uverts ({1..n}, es \\<inter> all_edges {1..n}) \\<and>\n  uedges H\\<^sub>0'\n  \\<subseteq> uedges ({1..n}, es \\<inter> all_edges {1..n})\n\ngoal (1 subgoal):\n 1. uverts H\\<^sub>0' \\<subseteq> {1..n} &&&\n    uedges H\\<^sub>0' \\<subseteq> es", "by simp+"], ["proof (state)\nthis:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> es\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "moreover"], ["proof (state)\nthis:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> es\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "have \"card (uverts H\\<^sub>0') = ?v\" \"card (uedges H\\<^sub>0') = ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (uverts H\\<^sub>0') = card (uverts H\\<^sub>0) &&&\n    card (uedges H\\<^sub>0') = card (uedges H\\<^sub>0)", "by (simp add: isomorphic_cards[OF \\<open>H\\<^sub>0 \\<simeq> H\\<^sub>0'\\<close>])+"], ["proof (state)\nthis:\n  card (uverts H\\<^sub>0') = card (uverts H\\<^sub>0)\n  card (uedges H\\<^sub>0') = card (uedges H\\<^sub>0)\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "moreover"], ["proof (state)\nthis:\n  card (uverts H\\<^sub>0') = card (uverts H\\<^sub>0)\n  card (uedges H\\<^sub>0') = card (uedges H\\<^sub>0)\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "have \"uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')", "using H\\<^sub>0'"], ["proof (prove)\nusing this:\n  subgraph H\\<^sub>0' (ES.edge_ugraph es)\n  H\\<^sub>0 \\<simeq> H\\<^sub>0'\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')", "by (simp add: wellformed_all_edges)"], ["proof (state)\nthis:\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\n\ngoal (3 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}\n 3. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "ultimately"], ["proof (chain)\npicking this:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> es\n  card (uverts H\\<^sub>0') = card (uverts H\\<^sub>0)\n  card (uedges H\\<^sub>0') = card (uedges H\\<^sub>0)\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')", "show \"H\\<^sub>0' \\<in> ?I\""], ["proof (prove)\nusing this:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> es\n  card (uverts H\\<^sub>0') = card (uverts H\\<^sub>0)\n  card (uedges H\\<^sub>0') = card (uedges H\\<^sub>0)\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\n\ngoal (1 subgoal):\n 1. H\\<^sub>0'\n    \\<in> {(v, e).\n           v \\<subseteq> {1..n} \\<and>\n           card v = card (uverts H\\<^sub>0) \\<and>\n           e \\<subseteq> all_edges v \\<and>\n           card e = card (uedges H\\<^sub>0)}", "by auto"], ["proof (state)\nthis:\n  H\\<^sub>0'\n  \\<in> {(v, e).\n         v \\<subseteq> {1..n} \\<and>\n         card v = card (uverts H\\<^sub>0) \\<and>\n         e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n\ngoal (2 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "have \"?I \\<subseteq> subgraphs (complete {1..n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(v, e).\n     v \\<subseteq> {1..n} \\<and>\n     card v = card (uverts H\\<^sub>0) \\<and>\n     e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n    \\<subseteq> subgraphs (Ugraph_Lemmas.complete {1..n})", "unfolding complete_def subgraphs_def subgraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(v, e).\n     v \\<subseteq> {1..n} \\<and>\n     card v = card (uverts H\\<^sub>0) \\<and>\n     e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n    \\<subseteq> {G'.\n                 uverts G'\n                 \\<subseteq> uverts ({1..n}, all_edges {1..n}) \\<and>\n                 uedges G' \\<subseteq> uedges ({1..n}, all_edges {1..n})}", "using all_edges_mono"], ["proof (prove)\nusing this:\n  ?vs \\<subseteq> ?ws \\<Longrightarrow>\n  all_edges ?vs \\<subseteq> all_edges ?ws\n\ngoal (1 subgoal):\n 1. {(v, e).\n     v \\<subseteq> {1..n} \\<and>\n     card v = card (uverts H\\<^sub>0) \\<and>\n     e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n    \\<subseteq> {G'.\n                 uverts G'\n                 \\<subseteq> uverts ({1..n}, all_edges {1..n}) \\<and>\n                 uedges G' \\<subseteq> uedges ({1..n}, all_edges {1..n})}", "by auto blast"], ["proof (state)\nthis:\n  {(v, e).\n   v \\<subseteq> {1..n} \\<and>\n   card v = card (uverts H\\<^sub>0) \\<and>\n   e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n  \\<subseteq> subgraphs (Ugraph_Lemmas.complete {1..n})\n\ngoal (2 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "moreover"], ["proof (state)\nthis:\n  {(v, e).\n   v \\<subseteq> {1..n} \\<and>\n   card v = card (uverts H\\<^sub>0) \\<and>\n   e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n  \\<subseteq> subgraphs (Ugraph_Lemmas.complete {1..n})\n\ngoal (2 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "have \"finite (subgraphs (complete {1..n}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (subgraphs (Ugraph_Lemmas.complete {1..n}))", "by (simp add: complete_finite subgraphs_finite)"], ["proof (state)\nthis:\n  finite (subgraphs (Ugraph_Lemmas.complete {1..n}))\n\ngoal (2 subgoals):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n 2. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "ultimately"], ["proof (chain)\npicking this:\n  {(v, e).\n   v \\<subseteq> {1..n} \\<and>\n   card v = card (uverts H\\<^sub>0) \\<and>\n   e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n  \\<subseteq> subgraphs (Ugraph_Lemmas.complete {1..n})\n  finite (subgraphs (Ugraph_Lemmas.complete {1..n}))", "show \"finite ?I\""], ["proof (prove)\nusing this:\n  {(v, e).\n   v \\<subseteq> {1..n} \\<and>\n   card v = card (uverts H\\<^sub>0) \\<and>\n   e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n  \\<subseteq> subgraphs (Ugraph_Lemmas.complete {1..n})\n  finite (subgraphs (Ugraph_Lemmas.complete {1..n}))\n\ngoal (1 subgoal):\n 1. finite\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}", "by (fact finite_subset)"], ["proof (state)\nthis:\n  finite\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> {(v, e).\n                v \\<subseteq> {1..n} \\<and>\n                card v = card (uverts H\\<^sub>0) \\<and>\n                e \\<subseteq> all_edges v \\<and>\n                card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       0 \\<le> rind\n                {es \\<in> space ES.P.\n                 subgraph i (ES.edge_ugraph es) \\<and> H\\<^sub>0 \\<simeq> i}\n                es", "qed simp"], ["proof (state)\nthis:\n  1 \\<le> (\\<Sum>H\\<^sub>0'\n                 \\<in>{(v, e).\n                       v \\<subseteq> {1..n} \\<and>\n                       card v = card (uverts H\\<^sub>0) \\<and>\n                       e \\<subseteq> all_edges v \\<and>\n                       card e = card (uedges H\\<^sub>0)}.\n             rind\n              {es \\<in> space ES.P.\n               subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n               H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n              es)\n\ngoal (1 subgoal):\n 1. {es \\<in> space ES.P.\n     1 \\<le> (\\<Sum>H\\<^sub>0'\n                    \\<in>{(v, e).\n                          v \\<subseteq> {1..n} \\<and>\n                          card v = card (uverts H\\<^sub>0) \\<and>\n                          e \\<subseteq> all_edges v \\<and>\n                          card e = card (uedges H\\<^sub>0)}.\n                rind\n                 {es \\<in> space ES.P.\n                  subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                  H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                 es)}\n    \\<in> ES.events", "qed simp\n\n    \\<comment> \\<open>Applying Markov's inequality leaves us with estimating the expectation of $Y$, which is\n         the sum of the individual $X$.\\<close>"], ["proof (state)\nthis:\n  ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}\n  \\<le> ES.prob\n         {es \\<in> space ES.P.\n          1 \\<le> (\\<Sum>H\\<^sub>0'\n                         \\<in>{(v, e).\n                               v \\<subseteq> {1..n} \\<and>\n                               card v = card (uverts H\\<^sub>0) \\<and>\n                               e \\<subseteq> all_edges v \\<and>\n                               card e = card (uedges H\\<^sub>0)}.\n                     rind\n                      {es \\<in> space ES.P.\n                       subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                       H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                      es)}\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  ES.prob {es \\<in> space ES.P. H \\<sqsubseteq> ES.edge_ugraph es}\n  \\<le> ES.prob\n         {es \\<in> space ES.P.\n          1 \\<le> (\\<Sum>H\\<^sub>0'\n                         \\<in>{(v, e).\n                               v \\<subseteq> {1..n} \\<and>\n                               card v = card (uverts H\\<^sub>0) \\<and>\n                               e \\<subseteq> all_edges v \\<and>\n                               card e = card (uedges H\\<^sub>0)}.\n                     rind\n                      {es \\<in> space ES.P.\n                       subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                       H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                      es)}\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> ES.expectation ?Y / 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob\n     {es \\<in> space ES.P.\n      1 \\<le> (\\<Sum>H\\<^sub>0'\n                     \\<in>{(v, e).\n                           v \\<subseteq> {1..n} \\<and>\n                           card v = card (uverts H\\<^sub>0) \\<and>\n                           e \\<subseteq> all_edges v \\<and>\n                           card e = card (uedges H\\<^sub>0)}.\n                 rind\n                  {es \\<in> space ES.P.\n                   subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                   H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                  es)}\n    \\<le> ES.expectation\n           (\\<lambda>es.\n               \\<Sum>H\\<^sub>0'\n                     \\<in>{(v, e).\n                           v \\<subseteq> {1..n} \\<and>\n                           card v = card (uverts H\\<^sub>0) \\<and>\n                           e \\<subseteq> all_edges v \\<and>\n                           card e = card (uedges H\\<^sub>0)}.\n                 rind\n                  {es \\<in> space ES.P.\n                   subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                   H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                  es) /\n          1", "by (rule prob_space.markov_inequality) (auto simp: ES.prob_space_P sum_nonneg)"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P.\n    1 \\<le> (\\<Sum>H\\<^sub>0'\n                   \\<in>{(v, e).\n                         v \\<subseteq> {1..n} \\<and>\n                         card v = card (uverts H\\<^sub>0) \\<and>\n                         e \\<subseteq> all_edges v \\<and>\n                         card e = card (uedges H\\<^sub>0)}.\n               rind\n                {es \\<in> space ES.P.\n                 subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                 H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                es)}\n  \\<le> ES.expectation\n         (\\<lambda>es.\n             \\<Sum>H\\<^sub>0'\n                   \\<in>{(v, e).\n                         v \\<subseteq> {1..n} \\<and>\n                         card v = card (uverts H\\<^sub>0) \\<and>\n                         e \\<subseteq> all_edges v \\<and>\n                         card e = card (uedges H\\<^sub>0)}.\n               rind\n                {es \\<in> space ES.P.\n                 subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                 H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                es) /\n        1\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P.\n    1 \\<le> (\\<Sum>H\\<^sub>0'\n                   \\<in>{(v, e).\n                         v \\<subseteq> {1..n} \\<and>\n                         card v = card (uverts H\\<^sub>0) \\<and>\n                         e \\<subseteq> all_edges v \\<and>\n                         card e = card (uedges H\\<^sub>0)}.\n               rind\n                {es \\<in> space ES.P.\n                 subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                 H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                es)}\n  \\<le> ES.expectation\n         (\\<lambda>es.\n             \\<Sum>H\\<^sub>0'\n                   \\<in>{(v, e).\n                         v \\<subseteq> {1..n} \\<and>\n                         card v = card (uverts H\\<^sub>0) \\<and>\n                         e \\<subseteq> all_edges v \\<and>\n                         card e = card (uedges H\\<^sub>0)}.\n               rind\n                {es \\<in> space ES.P.\n                 subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n                 H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n                es) /\n        1\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = ES.expectation ?Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.expectation\n     (\\<lambda>es.\n         \\<Sum>H\\<^sub>0'\n               \\<in>{(v, e).\n                     v \\<subseteq> {1..n} \\<and>\n                     card v = card (uverts H\\<^sub>0) \\<and>\n                     e \\<subseteq> all_edges v \\<and>\n                     card e = card (uedges H\\<^sub>0)}.\n           rind\n            {es \\<in> space ES.P.\n             subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n             H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n            es) /\n    1 =\n    ES.expectation\n     (\\<lambda>es.\n         \\<Sum>H\\<^sub>0'\n               \\<in>{(v, e).\n                     v \\<subseteq> {1..n} \\<and>\n                     card v = card (uverts H\\<^sub>0) \\<and>\n                     e \\<subseteq> all_edges v \\<and>\n                     card e = card (uedges H\\<^sub>0)}.\n           rind\n            {es \\<in> space ES.P.\n             subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n             H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n            es)", "by simp"], ["proof (state)\nthis:\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es) /\n  1 =\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es) /\n  1 =\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>H\\<^sub>0' \\<in> ?I. ES.expectation (?X H\\<^sub>0'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.expectation\n     (\\<lambda>es.\n         \\<Sum>H\\<^sub>0'\n               \\<in>{(v, e).\n                     v \\<subseteq> {1..n} \\<and>\n                     card v = card (uverts H\\<^sub>0) \\<and>\n                     e \\<subseteq> all_edges v \\<and>\n                     card e = card (uedges H\\<^sub>0)}.\n           rind\n            {es \\<in> space ES.P.\n             subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n             H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n            es) =\n    (\\<Sum>H\\<^sub>0'\n           \\<in>{(v, e).\n                 v \\<subseteq> {1..n} \\<and>\n                 card v = card (uverts H\\<^sub>0) \\<and>\n                 e \\<subseteq> all_edges v \\<and>\n                 card e = card (uedges H\\<^sub>0)}.\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}))", "by (rule Bochner_Integration.integral_sum(1)) simp\n\n    \\<comment> \\<open>Each expectation is bound by $p(n)^{|E(H_0)|}$. For the proof, we ignore the fact that the\n         corresponding graph has to be isomorphic to @{term H\\<^sub>0}, which only increases the\n         probability and thus the expectation. This only leaves us to compute the probability that\n         all edges are present, which is given by @{thm [source] edge_space.cylinder_prob}.\\<close>"], ["proof (state)\nthis:\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es) =\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     ES.expectation\n      (rind\n        {es \\<in> space ES.P.\n         subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'}))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  ES.expectation\n   (\\<lambda>es.\n       \\<Sum>H\\<^sub>0'\n             \\<in>{(v, e).\n                   v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0) \\<and>\n                   e \\<subseteq> all_edges v \\<and>\n                   card e = card (uedges H\\<^sub>0)}.\n         rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n          es) =\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     ES.expectation\n      (rind\n        {es \\<in> space ES.P.\n         subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'}))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (\\<Sum>H\\<^sub>0' \\<in> ?I. p n ^ ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>H\\<^sub>0'\n           \\<in>{(v, e).\n                 v \\<subseteq> {1..n} \\<and>\n                 card v = card (uverts H\\<^sub>0) \\<and>\n                 e \\<subseteq> all_edges v \\<and>\n                 card e = card (uedges H\\<^sub>0)}.\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'}))\n    \\<le> (\\<Sum>H\\<^sub>0'\n                 \\<in>{(v, e).\n                       v \\<subseteq> {1..n} \\<and>\n                       card v = card (uverts H\\<^sub>0) \\<and>\n                       e \\<subseteq> all_edges v \\<and>\n                       card e = card (uedges H\\<^sub>0)}.\n             p n ^ card (uedges H\\<^sub>0))", "proof (rule sum_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "fix H\\<^sub>0'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "assume H\\<^sub>0': \"H\\<^sub>0' \\<in> ?I\""], ["proof (state)\nthis:\n  H\\<^sub>0'\n  \\<in> {(v, e).\n         v \\<subseteq> {1..n} \\<and>\n         card v = card (uverts H\\<^sub>0) \\<and>\n         e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "have \"ES.expectation (?X H\\<^sub>0') = ES.prob {es \\<in> space ES.P. subgraph H\\<^sub>0' (?graph_of es) \\<and> H\\<^sub>0 \\<simeq> H\\<^sub>0'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.expectation\n     (rind\n       {es \\<in> space ES.P.\n        subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n        H\\<^sub>0 \\<simeq> H\\<^sub>0'}) =\n    ES.prob\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'}", "by (rule ES.expectation_indicator) (auto simp: ES.sets_eq ES.space_eq)"], ["proof (state)\nthis:\n  ES.expectation\n   (rind\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'}) =\n  ES.prob\n   {es \\<in> space ES.P.\n    subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n    H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "also"], ["proof (state)\nthis:\n  ES.expectation\n   (rind\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'}) =\n  ES.prob\n   {es \\<in> space ES.P.\n    subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n    H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "have \"\\<dots> \\<le> ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n    \\<le> ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es}", "unfolding subgraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob\n     {es \\<in> space ES.P.\n      (uverts H\\<^sub>0' \\<subseteq> uverts (ES.edge_ugraph es) \\<and>\n       uedges H\\<^sub>0' \\<subseteq> uedges (ES.edge_ugraph es)) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n    \\<le> ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es}", "by (rule ES.finite_measure_mono) (auto simp: ES.sets_eq ES.space_eq)"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P.\n    subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n    H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n  \\<le> ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es}\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "also"], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P.\n    subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n    H\\<^sub>0 \\<simeq> H\\<^sub>0'}\n  \\<le> ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es}\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "have \"\\<dots> = ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es} =\n    ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {})", "unfolding cylinder_def ES.space_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob {es \\<in> Pow ES.S_edges. uedges H\\<^sub>0' \\<subseteq> es} =\n    ES.prob\n     {T \\<in> Pow ES.S_edges.\n      uedges H\\<^sub>0' \\<subseteq> T \\<and> {} \\<inter> T = {}}", "by simp"], ["proof (state)\nthis:\n  ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es} =\n  ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {})\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "also"], ["proof (state)\nthis:\n  ES.prob {es \\<in> space ES.P. uedges H\\<^sub>0' \\<subseteq> es} =\n  ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {})\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "have \"\\<dots> = p n ^ card (uedges H\\<^sub>0')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {}) =\n    p n ^ card (uedges H\\<^sub>0')", "proof (rule ES.cylinder_empty_prob)"], ["proof (state)\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> ES.S_edges", "have \"uverts H\\<^sub>0' \\<subseteq> {1..n}\" \"uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uverts H\\<^sub>0' \\<subseteq> {1..n} &&&\n    uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')", "using H\\<^sub>0'"], ["proof (prove)\nusing this:\n  H\\<^sub>0'\n  \\<in> {(v, e).\n         v \\<subseteq> {1..n} \\<and>\n         card v = card (uverts H\\<^sub>0) \\<and>\n         e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n\ngoal (1 subgoal):\n 1. uverts H\\<^sub>0' \\<subseteq> {1..n} &&&\n    uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')", "by auto"], ["proof (state)\nthis:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> ES.S_edges", "hence \"uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}\""], ["proof (prove)\nusing this:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}", "using all_edges_mono"], ["proof (prove)\nusing this:\n  uverts H\\<^sub>0' \\<subseteq> {1..n}\n  uedges H\\<^sub>0' \\<subseteq> all_edges (uverts H\\<^sub>0')\n  ?vs \\<subseteq> ?ws \\<Longrightarrow>\n  all_edges ?vs \\<subseteq> all_edges ?ws\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}", "by blast"], ["proof (state)\nthis:\n  uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> ES.S_edges", "thus \"uedges H\\<^sub>0' \\<subseteq> ES.S_edges\""], ["proof (prove)\nusing this:\n  uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> ES.S_edges", "unfolding ES.S_edges_def ES.S_verts_def"], ["proof (prove)\nusing this:\n  uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}\n\ngoal (1 subgoal):\n 1. uedges H\\<^sub>0' \\<subseteq> all_edges {1..n}", "by simp"], ["proof (state)\nthis:\n  uedges H\\<^sub>0' \\<subseteq> ES.S_edges\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {}) =\n  p n ^ card (uedges H\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "also"], ["proof (state)\nthis:\n  ES.prob (cylinder ES.S_edges (uedges H\\<^sub>0') {}) =\n  p n ^ card (uedges H\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "have \"\\<dots> = p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^ card (uedges H\\<^sub>0') = p n ^ card (uedges H\\<^sub>0)", "using H\\<^sub>0'"], ["proof (prove)\nusing this:\n  H\\<^sub>0'\n  \\<in> {(v, e).\n         v \\<subseteq> {1..n} \\<and>\n         card v = card (uverts H\\<^sub>0) \\<and>\n         e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}\n\ngoal (1 subgoal):\n 1. p n ^ card (uedges H\\<^sub>0') = p n ^ card (uedges H\\<^sub>0)", "by fastforce"], ["proof (state)\nthis:\n  p n ^ card (uedges H\\<^sub>0') = p n ^ card (uedges H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. \\<And>H\\<^sub>0'.\n       H\\<^sub>0'\n       \\<in> {(v, e).\n              v \\<subseteq> {1..n} \\<and>\n              card v = card (uverts H\\<^sub>0) \\<and>\n              e \\<subseteq> all_edges v \\<and>\n              card e = card (uedges H\\<^sub>0)} \\<Longrightarrow>\n       ES.expectation\n        (rind\n          {es \\<in> space ES.P.\n           subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n           H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n       \\<le> p n ^ card (uedges H\\<^sub>0)", "finally"], ["proof (chain)\npicking this:\n  ES.expectation\n   (rind\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n  \\<le> p n ^ card (uedges H\\<^sub>0)", "show \"ES.expectation (?X H\\<^sub>0') \\<le> \\<dots>\""], ["proof (prove)\nusing this:\n  ES.expectation\n   (rind\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n  \\<le> p n ^ card (uedges H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. ES.expectation\n     (rind\n       {es \\<in> space ES.P.\n        subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n        H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n    \\<le> p n ^ card (uedges H\\<^sub>0)", "."], ["proof (state)\nthis:\n  ES.expectation\n   (rind\n     {es \\<in> space ES.P.\n      subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n      H\\<^sub>0 \\<simeq> H\\<^sub>0'})\n  \\<le> p n ^ card (uedges H\\<^sub>0)\n\ngoal:\nNo subgoals!", "qed\n\n    \\<comment> \\<open>Since we have a sum of constant summands, we can rewrite it as a product.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     ES.expectation\n      (rind\n        {es \\<in> space ES.P.\n         subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'}))\n  \\<le> (\\<Sum>H\\<^sub>0'\n               \\<in>{(v, e).\n                     v \\<subseteq> {1..n} \\<and>\n                     card v = card (uverts H\\<^sub>0) \\<and>\n                     e \\<subseteq> all_edges v \\<and>\n                     card e = card (uedges H\\<^sub>0)}.\n           p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     ES.expectation\n      (rind\n        {es \\<in> space ES.P.\n         subgraph H\\<^sub>0' (ES.edge_ugraph es) \\<and>\n         H\\<^sub>0 \\<simeq> H\\<^sub>0'}))\n  \\<le> (\\<Sum>H\\<^sub>0'\n               \\<in>{(v, e).\n                     v \\<subseteq> {1..n} \\<and>\n                     card v = card (uverts H\\<^sub>0) \\<and>\n                     e \\<subseteq> all_edges v \\<and>\n                     card e = card (uedges H\\<^sub>0)}.\n           p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = card ?I * p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>H\\<^sub>0'\n           \\<in>{(v, e).\n                 v \\<subseteq> {1..n} \\<and>\n                 card v = card (uverts H\\<^sub>0) \\<and>\n                 e \\<subseteq> all_edges v \\<and>\n                 card e = card (uedges H\\<^sub>0)}.\n       p n ^ card (uedges H\\<^sub>0)) =\n    real\n     (card\n       {(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and>\n        card e = card (uedges H\\<^sub>0)}) *\n    p n ^ card (uedges H\\<^sub>0)", "by (rule sum_constant)\n\n    \\<comment> \\<open>We have to count the number of possible pairs $(v, e)$. From the definition of the index\n         set, note that we first choose $|V(H_0)|$ elements out of a set of @{term n} vertices and\n         then $|E(H_0)|$ elements out of all possible edges over these vertices.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     p n ^ card (uedges H\\<^sub>0)) =\n  real\n   (card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}) *\n  p n ^ card (uedges H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>H\\<^sub>0'\n         \\<in>{(v, e).\n               v \\<subseteq> {1..n} \\<and>\n               card v = card (uverts H\\<^sub>0) \\<and>\n               e \\<subseteq> all_edges v \\<and>\n               card e = card (uedges H\\<^sub>0)}.\n     p n ^ card (uedges H\\<^sub>0)) =\n  real\n   (card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}) *\n  p n ^ card (uedges H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = ((n choose ?v) * ((?v choose 2) choose ?e)) * p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real\n     (card\n       {(v, e).\n        v \\<subseteq> {1..n} \\<and>\n        card v = card (uverts H\\<^sub>0) \\<and>\n        e \\<subseteq> all_edges v \\<and>\n        card e = card (uedges H\\<^sub>0)}) *\n    p n ^ card (uedges H\\<^sub>0) =\n    real\n     ((n choose card (uverts H\\<^sub>0)) *\n      (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n    p n ^ card (uedges H\\<^sub>0)", "proof (rule arg_cong[where x = \"card ?I\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "have \"card ?I = (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = ?v. card (all_edges v) choose ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n       card (all_edges v) choose card (uedges H\\<^sub>0))", "by (rule card_dep_pair_set[where A = \"{1..n}\" and n = \"?v\" and f = all_edges])\n             (auto simp: finite_subset all_edges_finite)"], ["proof (state)\nthis:\n  card\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (all_edges v) choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "also"], ["proof (state)\nthis:\n  card\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (all_edges v) choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "have \"\\<dots> = (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = ?v. (?v choose 2) choose ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n       card (all_edges v) choose card (uedges H\\<^sub>0)) =\n    (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "proof (rule sum.cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} =\n    {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n 2. \\<And>x.\n       x \\<in> {v. v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0)} \\<Longrightarrow>\n       card (all_edges x) choose card (uedges H\\<^sub>0) =\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} =\n    {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n 2. \\<And>x.\n       x \\<in> {v. v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0)} \\<Longrightarrow>\n       card (all_edges x) choose card (uedges H\\<^sub>0) =\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)", "assume \"v \\<in> {v. v \\<subseteq> {1..n} \\<and> card v = ?v}\""], ["proof (state)\nthis:\n  v \\<in> {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n\ngoal (2 subgoals):\n 1. {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} =\n    {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n 2. \\<And>x.\n       x \\<in> {v. v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0)} \\<Longrightarrow>\n       card (all_edges x) choose card (uedges H\\<^sub>0) =\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)", "hence \"v \\<subseteq> {1..n}\" \"card v = ?v\""], ["proof (prove)\nusing this:\n  v \\<in> {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n\ngoal (1 subgoal):\n 1. v \\<subseteq> {1..n} &&& card v = card (uverts H\\<^sub>0)", "by auto"], ["proof (state)\nthis:\n  v \\<subseteq> {1..n}\n  card v = card (uverts H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} =\n    {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}\n 2. \\<And>x.\n       x \\<in> {v. v \\<subseteq> {1..n} \\<and>\n                   card v = card (uverts H\\<^sub>0)} \\<Longrightarrow>\n       card (all_edges x) choose card (uedges H\\<^sub>0) =\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)", "thus \"card (all_edges v) choose ?e = (?v choose 2) choose ?e\""], ["proof (prove)\nusing this:\n  v \\<subseteq> {1..n}\n  card v = card (uverts H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. card (all_edges v) choose card (uedges H\\<^sub>0) =\n    card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)", "by (simp add: card_all_edges finite_subset)"], ["proof (state)\nthis:\n  card (all_edges v) choose card (uedges H\\<^sub>0) =\n  card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} =\n    {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)}", "qed rule"], ["proof (state)\nthis:\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (all_edges v) choose card (uedges H\\<^sub>0)) =\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "also"], ["proof (state)\nthis:\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (all_edges v) choose card (uedges H\\<^sub>0)) =\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "have \"\\<dots> = card ({v. v \\<subseteq> {1..n} \\<and> card v = ?v}) * ((?v choose 2) choose ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n       card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) =\n    card {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) =\n  card {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "also"], ["proof (state)\nthis:\n  (\\<Sum>v | v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0).\n     card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) =\n  card {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "have \"\\<dots> = (n choose ?v) * ((?v choose 2) choose ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "by (simp add: n_subsets)"], ["proof (state)\nthis:\n  card {v. v \\<subseteq> {1..n} \\<and> card v = card (uverts H\\<^sub>0)} *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) =\n  (n choose card (uverts H\\<^sub>0)) *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "finally"], ["proof (chain)\npicking this:\n  card\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n  (n choose card (uverts H\\<^sub>0)) *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "show \"card ?I = \\<dots>\""], ["proof (prove)\nusing this:\n  card\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n  (n choose card (uverts H\\<^sub>0)) *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n    (n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))", "."], ["proof (state)\nthis:\n  card\n   {(v, e).\n    v \\<subseteq> {1..n} \\<and>\n    card v = card (uverts H\\<^sub>0) \\<and>\n    e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)} =\n  (n choose card (uverts H\\<^sub>0)) *\n  (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real\n   (card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}) *\n  p n ^ card (uedges H\\<^sub>0) =\n  real\n   ((n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n  p n ^ card (uedges H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  real\n   (card\n     {(v, e).\n      v \\<subseteq> {1..n} \\<and>\n      card v = card (uverts H\\<^sub>0) \\<and>\n      e \\<subseteq> all_edges v \\<and> card e = card (uedges H\\<^sub>0)}) *\n  p n ^ card (uedges H\\<^sub>0) =\n  real\n   ((n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n  p n ^ card (uedges H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (n choose ?v) * (((?v choose 2) choose ?e) * p n ^ ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real\n     ((n choose card (uverts H\\<^sub>0)) *\n      (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n    p n ^ card (uedges H\\<^sub>0) =\n    real (n choose card (uverts H\\<^sub>0)) *\n    (real\n      (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n     p n ^ card (uedges H\\<^sub>0))", "by simp\n\n    \\<comment> \\<open>Here, we use $n^k$ as an upper bound for $\\binom n k$.\\<close>"], ["proof (state)\nthis:\n  real\n   ((n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n  p n ^ card (uedges H\\<^sub>0) =\n  real (n choose card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  real\n   ((n choose card (uverts H\\<^sub>0)) *\n    (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0))) *\n  p n ^ card (uedges H\\<^sub>0) =\n  real (n choose card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (n ^ ?v) * (((?v choose 2) choose ?e) * p n ^ ?e)\" (is \"_ \\<le> _ * ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (n choose card (uverts H\\<^sub>0)) *\n    (real\n      (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n     p n ^ card (uedges H\\<^sub>0))\n    \\<le> real (n ^ card (uverts H\\<^sub>0)) *\n          (real\n            (card (uverts H\\<^sub>0) choose 2 choose\n             card (uedges H\\<^sub>0)) *\n           p n ^ card (uedges H\\<^sub>0))", "proof (rule mult_right_mono)"], ["proof (state)\ngoal (2 subgoals):\n 1. real (n choose card (uverts H\\<^sub>0))\n    \\<le> real (n ^ card (uverts H\\<^sub>0))\n 2. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "have \"n choose ?v \\<le> n ^ ?v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n choose card (uverts H\\<^sub>0) \\<le> n ^ card (uverts H\\<^sub>0)", "by (rule binomial_le_pow) (rule n)"], ["proof (state)\nthis:\n  n choose card (uverts H\\<^sub>0) \\<le> n ^ card (uverts H\\<^sub>0)\n\ngoal (2 subgoals):\n 1. real (n choose card (uverts H\\<^sub>0))\n    \\<le> real (n ^ card (uverts H\\<^sub>0))\n 2. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "thus \"real (n choose ?v) \\<le> real (n ^ ?v)\""], ["proof (prove)\nusing this:\n  n choose card (uverts H\\<^sub>0) \\<le> n ^ card (uverts H\\<^sub>0)\n\ngoal (1 subgoal):\n 1. real (n choose card (uverts H\\<^sub>0))\n    \\<le> real (n ^ card (uverts H\\<^sub>0))", "by (metis of_nat_le_iff)"], ["proof (state)\nthis:\n  real (n choose card (uverts H\\<^sub>0))\n  \\<le> real (n ^ card (uverts H\\<^sub>0))\n\ngoal (1 subgoal):\n 1. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "show \"0 \\<le> ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "using p"], ["proof (prove)\nusing this:\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. 0 \\<le> real\n             (card (uverts H\\<^sub>0) choose 2 choose\n              card (uedges H\\<^sub>0)) *\n            p n ^ card (uedges H\\<^sub>0)", "by simp"], ["proof (state)\nthis:\n  0 \\<le> real\n           (card (uverts H\\<^sub>0) choose 2 choose\n            card (uedges H\\<^sub>0)) *\n          p n ^ card (uedges H\\<^sub>0)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (n choose card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n  \\<le> real (n ^ card (uverts H\\<^sub>0)) *\n        (real\n          (card (uverts H\\<^sub>0) choose 2 choose\n           card (uedges H\\<^sub>0)) *\n         p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  real (n choose card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n  \\<le> real (n ^ card (uverts H\\<^sub>0)) *\n        (real\n          (card (uverts H\\<^sub>0) choose 2 choose\n           card (uedges H\\<^sub>0)) *\n         p n ^ card (uedges H\\<^sub>0))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> ((?v choose 2) choose ?e) * (p n ^ ?e * n ^ ?v)\" (is \"_ \\<le> ?factor * _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (n ^ card (uverts H\\<^sub>0)) *\n    (real\n      (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n     p n ^ card (uedges H\\<^sub>0))\n    \\<le> real\n           (card (uverts H\\<^sub>0) choose 2 choose\n            card (uedges H\\<^sub>0)) *\n          (p n ^ card (uedges H\\<^sub>0) *\n           real (n ^ card (uverts H\\<^sub>0)))", "by simp"], ["proof (state)\nthis:\n  real (n ^ card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p n ^ card (uedges H\\<^sub>0) * real (n ^ card (uverts H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  real (n ^ card (uverts H\\<^sub>0)) *\n  (real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n   p n ^ card (uedges H\\<^sub>0))\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p n ^ card (uedges H\\<^sub>0) * real (n ^ card (uverts H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = ?factor * (p n powr ?e * n powr ?v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n    (p n ^ card (uedges H\\<^sub>0) * real (n ^ card (uverts H\\<^sub>0))) =\n    real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n    (p n powr real (card (uedges H\\<^sub>0)) *\n     real n powr real (card (uverts H\\<^sub>0)))", "using n card(1) \\<open>nonzero_prob_fun p\\<close>"], ["proof (prove)\nusing this:\n  card (uverts H\\<^sub>0) \\<le> n\n  0 < card (uverts H\\<^sub>0)\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n    (p n ^ card (uedges H\\<^sub>0) * real (n ^ card (uverts H\\<^sub>0))) =\n    real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n    (p n powr real (card (uedges H\\<^sub>0)) *\n     real n powr real (card (uverts H\\<^sub>0)))", "by (simp add: powr_realpow)"], ["proof (state)\nthis:\n  real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n  (p n ^ card (uedges H\\<^sub>0) * real (n ^ card (uverts H\\<^sub>0))) =\n  real (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n  (p n powr real (card (uedges H\\<^sub>0)) *\n   real n powr real (card (uverts H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  ES.prob\n   {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p n powr real (card (uedges H\\<^sub>0)) *\n         real n powr real (card (uverts H\\<^sub>0)))", "have \"prob_in_class p {G. H \\<sqsubseteq> G} n \\<le> ?factor * (p n powr ?e * n powr ?v)\""], ["proof (prove)\nusing this:\n  ES.prob\n   {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p n powr real (card (uedges H\\<^sub>0)) *\n         real n powr real (card (uverts H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. ES.prob\n     {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n    \\<le> real\n           (card (uverts H\\<^sub>0) choose 2 choose\n            card (uedges H\\<^sub>0)) *\n          (p n powr real (card (uedges H\\<^sub>0)) *\n           real n powr real (card (uverts H\\<^sub>0)))", "."], ["proof (state)\nthis:\n  ES.prob\n   {es \\<in> space ES.P. ES.edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p n powr real (card (uedges H\\<^sub>0)) *\n         real n powr real (card (uverts H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}\n\n  \\<comment> \\<open>The final upper bound is a multiple of the expression which we have proven to tend to $0$\n       in the beginning.\\<close>"], ["proof (state)\nthis:\n  card (uverts H\\<^sub>0) \\<le> ?n2 \\<Longrightarrow>\n  prob_in_class p {G. H \\<sqsubseteq> G} ?n2\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p ?n2 powr real (card (uedges H\\<^sub>0)) *\n         real ?n2 powr real (card (uverts H\\<^sub>0)))\n\ngoal (2 subgoals):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; p \\<lless> subgraph_threshold H\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 0\n 2. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "thus \"prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  card (uverts H\\<^sub>0) \\<le> ?n2 \\<Longrightarrow>\n  prob_in_class p {G. H \\<sqsubseteq> G} ?n2\n  \\<le> real\n         (card (uverts H\\<^sub>0) choose 2 choose card (uedges H\\<^sub>0)) *\n        (p ?n2 powr real (card (uedges H\\<^sub>0)) *\n         real ?n2 powr real (card (uverts H\\<^sub>0)))\n\ngoal (1 subgoal):\n 1. prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 0", "by (rule LIMSEQ_le_zero[OF tendsto_mult_right_zero[OF limit] eventually_sequentiallyI[OF measure_nonneg] eventually_sequentiallyI])"], ["proof (state)\nthis:\n  prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix p :: \"nat \\<Rightarrow> real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume p_threshold: \"subgraph_threshold H \\<lless> p\"\n\n  \\<comment> \\<open>To prove the 1-statement, we obtain a fixed selector @{term f} as defined in section\n       \\ref{sec:selector}.\\<close>"], ["proof (state)\nthis:\n  subgraph_threshold H \\<lless> p\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "from assms"], ["proof (chain)\npicking this:\n  nonempty_graph H\n  finite_graph H\n  uwellformed H", "obtain f where f: \"is_fixed_selector H f\""], ["proof (prove)\nusing this:\n  nonempty_graph H\n  finite_graph H\n  uwellformed H\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        is_fixed_selector H f \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ex_fixed_selector"], ["proof (prove)\nusing this:\n  nonempty_graph H\n  finite_graph H\n  uwellformed H\n  \\<lbrakk>uwellformed ?H; finite_graph ?H;\n   \\<And>f. is_fixed_selector ?H f \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        is_fixed_selector H f \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  is_fixed_selector H f\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?v = \"card (uverts H)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?e = \"card (uedges H)\"\n\n  \\<comment> \\<open>We observe that several terms involving $|V(H)|$ are positive.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have v_e_nz: \"0 < real ?v\" \"0 < real ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < real (card (uverts H)) &&& 0 < real (card (uedges H))", "using nonempty finite"], ["proof (prove)\nusing this:\n  nonempty_graph H\n  finite_graph H\n\ngoal (1 subgoal):\n 1. 0 < real (card (uverts H)) &&& 0 < real (card (uedges H))", "unfolding nonempty_graph_def finite_graph_def"], ["proof (prove)\nusing this:\n  uverts H \\<noteq> {} \\<and> uedges H \\<noteq> {}\n  finite (uverts H) \\<and> finite (uedges H)\n\ngoal (1 subgoal):\n 1. 0 < real (card (uverts H)) &&& 0 < real (card (uedges H))", "by auto"], ["proof (state)\nthis:\n  0 < real (card (uverts H))\n  0 < real (card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence \"0 < real ?v ^ ?v\""], ["proof (prove)\nusing this:\n  0 < real (card (uverts H))\n  0 < real (card (uedges H))\n\ngoal (1 subgoal):\n 1. 0 < real (card (uverts H)) ^ card (uverts H)", "by simp"], ["proof (state)\nthis:\n  0 < real (card (uverts H)) ^ card (uverts H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence vpowv_inv_gr_z: \"0 < 1 / ?v ^ ?v\""], ["proof (prove)\nusing this:\n  0 < real (card (uverts H)) ^ card (uverts H)\n\ngoal (1 subgoal):\n 1. 0 < 1 / real (card (uverts H) ^ card (uverts H))", "by simp\n\n  \\<comment> \\<open>For a given $n$, let $A$ be a family of events indexed by a set $S$. Each $A$ contains the\n       graphs whose induced subgraphs over $S$ contain the selected copy of @{term H} by @{term f}\n       over $S$.\\<close>"], ["proof (state)\nthis:\n  0 < 1 / real (card (uverts H) ^ card (uverts H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?A = \"\\<lambda>n. \\<lambda>S. {es \\<in> space (edge_space.P n (p n)). subgraph (f S) (induced_subgraph S (edge_space.edge_ugraph n es))}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?I = \"\\<lambda>n. {S. S \\<subseteq> {1..n} \\<and> card S = ?v}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume p_nz: \"nonzero_prob_fun p\""], ["proof (state)\nthis:\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence p: \"valid_prob_fun p\""], ["proof (prove)\nusing this:\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. valid_prob_fun p", "by (fact nonzero_fun_is_valid_fun)"], ["proof (state)\nthis:\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix n\n    \\<comment> \\<open>At this point, we can assume almost anything about @{term n}: We only have to show that\n         a function converges, hence the necessary properties are allowed to be violated for small\n         values of @{term n}.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume n_2v: \"2 * ?v \\<le> n\""], ["proof (state)\nthis:\n  2 * card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence n: \"?v \\<le> n\""], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. card (uverts H) \\<le> n", "by simp"], ["proof (state)\nthis:\n  card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have is_es: \"edge_space (p n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. edge_space (p n)", "by unfold_locales (auto simp: p)"], ["proof (state)\nthis:\n  edge_space (p n)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "then"], ["proof (chain)\npicking this:\n  edge_space (p n)", "interpret edge_space n \"p n\""], ["proof (prove)\nusing this:\n  edge_space (p n)\n\ngoal (1 subgoal):\n 1. edge_space (p n)", "."], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?A = \"?A n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "let ?I = \"?I n\"\n\n    \\<comment> \\<open>A nice potpourri with some technical facts about @{text S}.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume \"S \\<in> ?I\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence 0: \"S \\<subseteq> {1..n}\" \"?v = card S\" \"finite S\""], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. S \\<subseteq> {1..n} &&& card (uverts H) = card S &&& finite S", "by (auto intro: finite_subset)"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence 1: \"H \\<simeq> f S\" \"uverts (f S) = S\""], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n\ngoal (1 subgoal):\n 1. H \\<simeq> f S &&& uverts (f S) = S", "using f wellformed_finite"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  is_fixed_selector H f\n  \\<lbrakk>finite (uverts ?G); uwellformed ?G\\<rbrakk>\n  \\<Longrightarrow> finite_graph ?G\n\ngoal (1 subgoal):\n 1. H \\<simeq> f S &&& uverts (f S) = S", "unfolding finite_graph_def is_fixed_selector_def"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  \\<forall>V.\n     finite V \\<and> card (uverts H) = card V \\<longrightarrow>\n     H \\<simeq> f V \\<and> uverts (f V) = V\n  \\<lbrakk>finite (uverts ?G); uwellformed ?G\\<rbrakk>\n  \\<Longrightarrow> finite (uverts ?G) \\<and> finite (uedges ?G)\n\ngoal (1 subgoal):\n 1. H \\<simeq> f S &&& uverts (f S) = S", "by auto"], ["proof (state)\nthis:\n  H \\<simeq> f S\n  uverts (f S) = S\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have 2: \"finite_graph (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_graph (f S)", "using 0(3) 1(1,2)"], ["proof (prove)\nusing this:\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n\ngoal (1 subgoal):\n 1. finite_graph (f S)", "by (metis wellformed_finite)"], ["proof (state)\nthis:\n  finite_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have 3: \"nonempty_graph (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonempty_graph (f S)", "using 0(2) 1(1,2)"], ["proof (prove)\nusing this:\n  card (uverts H) = card S\n  H \\<simeq> f S\n  uverts (f S) = S\n\ngoal (1 subgoal):\n 1. nonempty_graph (f S)", "by (metis card_eq_0_iff finite finite_graph_def isomorphic_cards(2) nonempty nonempty_graph_def prod.collapse snd_conv)"], ["proof (state)\nthis:\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note 0 1 2 3"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  ?S3 \\<subseteq> {1..n}\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  card (uverts H) = card ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  H \\<simeq> f ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  uverts (f ?S3) = ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite_graph (f ?S3)\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  nonempty_graph (f ?S3)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note I = this\n\n    \\<comment> \\<open>In the following two blocks, we prove the probabilities of the events $A$ and the\n         probability of the intersection of two events $A$. For both cases, we employ the auxiliary\n         lemma @{thm [source] edge_space.induced_subgraph_prob} which is not very interesting.\n         For the latter however, the tricky part is to argue that such an intersection is equivalent\n         to the \\emph{union} of the desired copies of @{term H} to be contained in the \\emph{union}\n         of the induced subgraphs.\\<close>"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  ?S3 \\<subseteq> {1..n}\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  card (uverts H) = card ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  H \\<simeq> f ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  uverts (f ?S3) = ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite_graph (f ?S3)\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  nonempty_graph (f ?S3)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  ?S3 \\<subseteq> {1..n}\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  card (uverts H) = card ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  H \\<simeq> f ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  uverts (f ?S3) = ?S3\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  finite_graph (f ?S3)\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  nonempty_graph (f ?S3)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume S: \"S \\<in> ?I\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note S' = I[OF S]"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"prob (?A S) = p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))} =\n    p n ^ card (uedges H)", "using isomorphic_cards(2)[OF S'(4)] S'"], ["proof (prove)\nusing this:\n  card (uedges H) = card (uedges (f S))\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. prob\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))} =\n    p n ^ card (uedges H)", "by (simp add: S_verts_def induced_subgraph_prob)"], ["proof (state)\nthis:\n  prob\n   {es \\<in> space P.\n    subgraph (f S) (induced_subgraph S (edge_ugraph es))} =\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  prob\n   {es \\<in> space P.\n    subgraph (f ?S3) (induced_subgraph ?S3 (edge_ugraph es))} =\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note prob_A = this"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  prob\n   {es \\<in> space P.\n    subgraph (f ?S3) (induced_subgraph ?S3 (edge_ugraph es))} =\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  prob\n   {es \\<in> space P.\n    subgraph (f ?S3) (induced_subgraph ?S3 (edge_ugraph es))} =\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix S T"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume \"S \\<in> ?I\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note S = I[OF this]"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume \"T \\<in> ?I\""], ["proof (state)\nthis:\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note T = I[OF this]\n      \\<comment> \\<open>Note that we do not restrict @{term S} and @{term T} to be disjoint, since we need the\n           general case later to determine when two events are independent. Additionally, it would\n           be unneeded at this point.\\<close>"], ["proof (state)\nthis:\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"prob (?A S \\<inter> ?A T) = prob {es \\<in> space P. subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T)) (induced_subgraph (S \\<union> T) (edge_ugraph es))}\" (is \"_ = prob ?M\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    prob\n     {es \\<in> space P.\n      subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n       (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "proof (rule arg_cong[where f = prob])"], ["proof (state)\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "have \"?A S \\<inter> ?A T = {es \\<in> space P. subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and> subgraph (f T) (induced_subgraph T (edge_ugraph es))}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}", "by blast"], ["proof (state)\nthis:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n  {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n   subgraph (f T) (induced_subgraph T (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "also"], ["proof (state)\nthis:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n  {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n   subgraph (f T) (induced_subgraph T (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "have \"\\<dots> = ?M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "using S T"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "by (auto simp: subgraph_union_induced)"], ["proof (state)\nthis:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es)) \\<and>\n   subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    (induced_subgraph (S \\<union> T) (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "finally"], ["proof (chain)\npicking this:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n  {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "show \"?A S \\<inter> ?A T = \\<dots>\""], ["proof (prove)\nusing this:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n  {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    (induced_subgraph (S \\<union> T) (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. {es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    {es \\<in> space P.\n     subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n      (induced_subgraph (S \\<union> T) (edge_ugraph es))}", "."], ["proof (state)\nthis:\n  {es \\<in> space P.\n   subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n  {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  {es \\<in> space P.\n   subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    (induced_subgraph (S \\<union> T) (edge_ugraph es))}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  prob\n   {es \\<in> space P.\n    subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n     (induced_subgraph (S \\<union> T) (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  prob\n   {es \\<in> space P.\n    subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n     (induced_subgraph (S \\<union> T) (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     {es \\<in> space P.\n      subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n       (induced_subgraph (S \\<union> T) (edge_ugraph es))} =\n    p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T)))", "proof (rule induced_subgraph_prob)"], ["proof (state)\ngoal (3 subgoals):\n 1. uverts (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    \\<subseteq> S \\<union> T\n 2. uwellformed (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n 3. S \\<union> T \\<subseteq> S_verts", "show \"uwellformed (S \\<union> T, uedges (f S) \\<union> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uwellformed (S \\<union> T, uedges (f S) \\<union> uedges (f T))", "using S(4,5) T(4,5)"], ["proof (prove)\nusing this:\n  H \\<simeq> f S\n  uverts (f S) = S\n  H \\<simeq> f T\n  uverts (f T) = T\n\ngoal (1 subgoal):\n 1. uwellformed (S \\<union> T, uedges (f S) \\<union> uedges (f T))", "unfolding uwellformed_def"], ["proof (prove)\nusing this:\n  (\\<forall>e\\<in>uedges H.\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts H)) \\<and>\n  (\\<forall>e\\<in>uedges (f S).\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts (f S))) \\<and>\n  (\\<exists>fa. isomorphism H (f S) fa)\n  uverts (f S) = S\n  (\\<forall>e\\<in>uedges H.\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts H)) \\<and>\n  (\\<forall>e\\<in>uedges (f T).\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts (f T))) \\<and>\n  (\\<exists>fa. isomorphism H (f T) fa)\n  uverts (f T) = T\n\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>uedges\n                    (S \\<union> T, uedges (f S) \\<union> uedges (f T)).\n       card e = 2 \\<and>\n       (\\<forall>u\\<in>e.\n           u \\<in> uverts\n                    (S \\<union> T, uedges (f S) \\<union> uedges (f T)))", "by auto"], ["proof (state)\nthis:\n  uwellformed (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n\ngoal (2 subgoals):\n 1. uverts (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    \\<subseteq> S \\<union> T\n 2. S \\<union> T \\<subseteq> S_verts", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. uverts (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    \\<subseteq> S \\<union> T\n 2. S \\<union> T \\<subseteq> S_verts", "show \"S \\<union> T \\<subseteq> S_verts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<union> T \\<subseteq> S_verts", "using S(1) T(1)"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  T \\<subseteq> {1..n}\n\ngoal (1 subgoal):\n 1. S \\<union> T \\<subseteq> S_verts", "unfolding S_verts_def"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  T \\<subseteq> {1..n}\n\ngoal (1 subgoal):\n 1. S \\<union> T \\<subseteq> {1..n}", "by simp"], ["proof (state)\nthis:\n  S \\<union> T \\<subseteq> S_verts\n\ngoal (1 subgoal):\n 1. uverts (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n    \\<subseteq> S \\<union> T", "qed simp"], ["proof (state)\nthis:\n  prob\n   {es \\<in> space P.\n    subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n     (induced_subgraph (S \\<union> T) (edge_ugraph es))} =\n  p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  prob\n   {es \\<in> space P.\n    subgraph (S \\<union> T, uedges (f S) \\<union> uedges (f T))\n     (induced_subgraph (S \\<union> T) (edge_ugraph es))} =\n  p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n ^ card (uedges (f S) \\<union> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T))) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "by simp"], ["proof (state)\nthis:\n  p n ^ card (uedges (S \\<union> T, uedges (f S) \\<union> uedges (f T))) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))", "have \"prob (?A S \\<inter> ?A T) = p n ^ card (uedges (f S) \\<union> uedges (f T))\""], ["proof (prove)\nusing this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "."], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?S3\n           \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?T3\n   \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\\<rbrakk>\n  \\<Longrightarrow> prob\n                     ({es \\<in> space P.\n                       subgraph (f ?S3)\n                        (induced_subgraph ?S3 (edge_ugraph es))} \\<inter>\n                      {es \\<in> space P.\n                       subgraph (f ?T3)\n                        (induced_subgraph ?T3 (edge_ugraph es))}) =\n                    p n ^ card (uedges (f ?S3) \\<union> uedges (f ?T3))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note prob_A_intersect = this\n\n    \\<comment> \\<open>Another technical detail is that our family of events $A$ are a valid instantiation for\n         the ``$\\Delta$ lemmas'' from section \\ref{sec:delta}.\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>?S3\n           \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?T3\n   \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\\<rbrakk>\n  \\<Longrightarrow> prob\n                     ({es \\<in> space P.\n                       subgraph (f ?S3)\n                        (induced_subgraph ?S3 (edge_ugraph es))} \\<inter>\n                      {es \\<in> space P.\n                       subgraph (f ?T3)\n                        (induced_subgraph ?T3 (edge_ugraph es))}) =\n                    p n ^ card (uedges (f ?S3) \\<union> uedges (f ?T3))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have is_psi: \"prob_space_with_indicators P ?I ?A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob_space_with_indicators P\n     {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n     (\\<lambda>S.\n         {es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))})", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. finite {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n 2. (\\<lambda>S.\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n    {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n    \\<subseteq> events\n 3. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "show \"finite ?I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}", "by (rule finite_subset[where B = \"Pow {1..n}\"]) auto"], ["proof (state)\nthis:\n  finite {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (2 subgoals):\n 1. (\\<lambda>S.\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n    {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n    \\<subseteq> events\n 2. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>S.\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n    {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n    \\<subseteq> events\n 2. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "show \"?A ` ?I \\<subseteq> sets P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>S.\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n    {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n    \\<subseteq> events", "unfolding sets_eq space_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>S.\n        {es \\<in> Pow S_edges.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n    {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n    \\<subseteq> Pow (Pow S_edges)", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>S.\n      {es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))}) `\n  {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  \\<subseteq> events\n\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "let ?V = \"{1..?v}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "have \"0 < prob (?A ?V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < prob\n         {es \\<in> space P.\n          subgraph (f {1..card (uverts H)})\n           (induced_subgraph {1..card (uverts H)} (edge_ugraph es))}", "by (simp add: prob_A n p_nz)"], ["proof (state)\nthis:\n  0 < prob\n       {es \\<in> space P.\n        subgraph (f {1..card (uverts H)})\n         (induced_subgraph {1..card (uverts H)} (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "moreover"], ["proof (state)\nthis:\n  0 < prob\n       {es \\<in> space P.\n        subgraph (f {1..card (uverts H)})\n         (induced_subgraph {1..card (uverts H)} (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "have \"?V \\<in> ?I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..card (uverts H)}\n    \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}", "using n"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. {1..card (uverts H)}\n    \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}", "by force"], ["proof (state)\nthis:\n  {1..card (uverts H)}\n  \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "ultimately"], ["proof (chain)\npicking this:\n  0 < prob\n       {es \\<in> space P.\n        subgraph (f {1..card (uverts H)})\n         (induced_subgraph {1..card (uverts H)} (edge_ugraph es))}\n  {1..card (uverts H)}\n  \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}", "show \"\\<exists>i \\<in> ?I. 0 < prob (?A i)\""], ["proof (prove)\nusing this:\n  0 < prob\n       {es \\<in> space P.\n        subgraph (f {1..card (uverts H)})\n         (induced_subgraph {1..card (uverts H)} (edge_ugraph es))}\n  {1..card (uverts H)}\n  \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n       0 < prob\n            {es \\<in> space P.\n             subgraph (f i) (induced_subgraph i (edge_ugraph es))}", "by blast"], ["proof (state)\nthis:\n  \\<exists>i\\<in>{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n     0 < prob\n          {es \\<in> space P.\n           subgraph (f i) (induced_subgraph i (edge_ugraph es))}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  prob_space_with_indicators P\n   {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space P.\n        subgraph (f S) (induced_subgraph S (edge_ugraph es))})\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "then"], ["proof (chain)\npicking this:\n  prob_space_with_indicators P\n   {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space P.\n        subgraph (f S) (induced_subgraph S (edge_ugraph es))})", "interpret prob_space_with_indicators \"P\" ?I ?A"], ["proof (prove)\nusing this:\n  prob_space_with_indicators P\n   {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space P.\n        subgraph (f S) (induced_subgraph S (edge_ugraph es))})\n\ngoal (1 subgoal):\n 1. prob_space_with_indicators P\n     {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n     (\\<lambda>S.\n         {es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))})", ".\n\n    \\<comment> \\<open>We proceed by reducing the claim of the 1-statement that the probability tends to $1$ to\n         showing that the expectation that the sum of all indicators of the respective events $A$\n         tends to $0$. (The actual reduction is done at the end of the proof, we merely collect\n         the facts here.)\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have compl_prob: \"1 - prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es} = prob_in_class p {G. H \\<sqsubseteq> G} n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es} =\n    prob {es \\<in> space P. edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}", "by (subst prob_compl[symmetric]) (auto simp: space_eq sets_eq intro: arg_cong[where f = prob])"], ["proof (state)\nthis:\n  1 - prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es} =\n  prob {es \\<in> space P. edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es} \\<le> prob {es \\<in> space P. Y es = 0}\" (is \"?compl \\<le> _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n    \\<le> prob {es \\<in> space P. Y es = 0}", "proof (rule finite_measure_mono, safe)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "fix es"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "assume \"es \\<in> space P\""], ["proof (state)\nthis:\n  es \\<in> space P\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "hence es: \"uwellformed (edge_ugraph es)\""], ["proof (prove)\nusing this:\n  es \\<in> space P\n\ngoal (1 subgoal):\n 1. uwellformed (edge_ugraph es)", "unfolding space_eq"], ["proof (prove)\nusing this:\n  es \\<in> Pow S_edges\n\ngoal (1 subgoal):\n 1. uwellformed (edge_ugraph es)", "by (rule wellformed_and_finite(2))"], ["proof (state)\nthis:\n  uwellformed (edge_ugraph es)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "assume H: \"\\<not> H \\<sqsubseteq> edge_ugraph es\""], ["proof (state)\nthis:\n  \\<not> H \\<sqsubseteq> edge_ugraph es\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "{"], ["proof (state)\nthis:\n  \\<not> H \\<sqsubseteq> edge_ugraph es\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "fix S"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "assume \"S \\<subseteq> {1..n}\" \"card S = ?v\""], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "moreover"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "hence \"finite S\" \"S \\<subseteq> uverts (edge_ugraph es)\""], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n\ngoal (1 subgoal):\n 1. finite S &&& S \\<subseteq> uverts (edge_ugraph es)", "unfolding uverts_edge_ugraph S_verts_def"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n\ngoal (1 subgoal):\n 1. finite S &&& S \\<subseteq> {1..n}", "by (auto intro: finite_subset)"], ["proof (state)\nthis:\n  finite S\n  S \\<subseteq> uverts (edge_ugraph es)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "ultimately"], ["proof (chain)\npicking this:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n  finite S\n  S \\<subseteq> uverts (edge_ugraph es)", "have \"\\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))\""], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n  finite S\n  S \\<subseteq> uverts (edge_ugraph es)\n\ngoal (1 subgoal):\n 1. \\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))", "using H es"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card S = card (uverts H)\n  finite S\n  S \\<subseteq> uverts (edge_ugraph es)\n  \\<not> H \\<sqsubseteq> edge_ugraph es\n  uwellformed (edge_ugraph es)\n\ngoal (1 subgoal):\n 1. \\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))", "by (metis fixed_selector_induced_subgraph[OF f])"], ["proof (state)\nthis:\n  \\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "hence \"X S es = 0\""], ["proof (prove)\nusing this:\n  \\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))\n\ngoal (1 subgoal):\n 1. X S es = 0", "unfolding X_def"], ["proof (prove)\nusing this:\n  \\<not> subgraph (f S) (induced_subgraph S (edge_ugraph es))\n\ngoal (1 subgoal):\n 1. rind\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))}\n     es =\n    0", "by simp"], ["proof (state)\nthis:\n  X S es = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?S3 \\<subseteq> {1..n}; card ?S3 = card (uverts H)\\<rbrakk>\n  \\<Longrightarrow> X ?S3 es = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space P;\n        \\<not> H \\<sqsubseteq> edge_ugraph x\\<rbrakk>\n       \\<Longrightarrow> Y x = 0\n 2. {es \\<in> space P. Y es = 0} \\<in> events", "thus \"Y es = 0\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?S3 \\<subseteq> {1..n}; card ?S3 = card (uverts H)\\<rbrakk>\n  \\<Longrightarrow> X ?S3 es = 0\n\ngoal (1 subgoal):\n 1. Y es = 0", "unfolding Y_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?S3 \\<subseteq> {1..n}; card ?S3 = card (uverts H)\\<rbrakk>\n  \\<Longrightarrow> X ?S3 es = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       X i es) =\n    0", "by simp"], ["proof (state)\nthis:\n  Y es = 0\n\ngoal (1 subgoal):\n 1. {es \\<in> space P. Y es = 0} \\<in> events", "qed simp\n\n    \\<comment> \\<open>By applying the $\\Delta$ lemma, we obtain our central inequality. The rest of the proof\n         gives bounds for @{text \\<mu>}, @{text \\<Delta>\\<^sub>d} and quotients which occur on the right hand side.\\<close>"], ["proof (state)\nthis:\n  prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n  \\<le> prob {es \\<in> space P. Y es = 0}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence compl_upper: \"?compl \\<le> 1 / \\<mu> + \\<Delta>\\<^sub>d / \\<mu>^2\""], ["proof (prove)\nusing this:\n  prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n  \\<le> prob {es \\<in> space P. Y es = 0}\n\ngoal (1 subgoal):\n 1. prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n    \\<le> 1 / \\<mu> + \\<Delta>\\<^sub>d / \\<mu>\\<^sup>2", "by (rule order_trans) (fact prob_\\<mu>_\\<Delta>\\<^sub>d)\n\n    \\<comment> \\<open>Lower bound for the expectation. We use $\\left(\\frac n k\\right)^k$ as lower bound for\n         $\\binom n k$.\\<close>"], ["proof (state)\nthis:\n  prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n  \\<le> 1 / \\<mu> + \\<Delta>\\<^sub>d / \\<mu>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"1 / ?v ^ ?v * (real n ^ ?v * p n ^ ?e) = (n / ?v) ^ ?v * p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (card (uverts H) ^ card (uverts H)) *\n    (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n    (real n / real (card (uverts H))) ^ card (uverts H) *\n    p n ^ card (uedges H)", "by (simp add: power_divide)"], ["proof (state)\nthis:\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n  (real n / real (card (uverts H))) ^ card (uverts H) *\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n  (real n / real (card (uverts H))) ^ card (uverts H) *\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (n choose ?v) * p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n / real (card (uverts H))) ^ card (uverts H) *\n    p n ^ card (uedges H)\n    \\<le> real (n choose card (uverts H)) * p n ^ card (uedges H)", "proof (rule mult_right_mono, rule binomial_ge_n_over_k_pow_k)"], ["proof (state)\ngoal (2 subgoals):\n 1. card (uverts H) \\<le> n\n 2. 0 \\<le> p n ^ card (uedges H)", "show \"?v \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (uverts H) \\<le> n", "using n"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. card (uverts H) \\<le> n", "."], ["proof (state)\nthis:\n  card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. 0 \\<le> p n ^ card (uedges H)", "show \"0 \\<le> p n ^ ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> p n ^ card (uedges H)", "using p"], ["proof (prove)\nusing this:\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. 0 \\<le> p n ^ card (uedges H)", "by simp"], ["proof (state)\nthis:\n  0 \\<le> p n ^ card (uedges H)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (real n / real (card (uverts H))) ^ card (uverts H) *\n  p n ^ card (uedges H)\n  \\<le> real (n choose card (uverts H)) * p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (real n / real (card (uverts H))) ^ card (uverts H) *\n  p n ^ card (uedges H)\n  \\<le> real (n choose card (uverts H)) * p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>S \\<in> ?I. p n ^ ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (n choose card (uverts H)) * p n ^ card (uedges H) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       p n ^ card (uedges H))", "by (simp add: n_subsets)"], ["proof (state)\nthis:\n  real (n choose card (uverts H)) * p n ^ card (uedges H) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     p n ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  real (n choose card (uverts H)) * p n ^ card (uedges H) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     p n ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>S \\<in> ?I. prob (?A S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       p n ^ card (uedges H)) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       prob\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))})", "by (simp add: prob_A)"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     p n ^ card (uedges H)) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     prob\n      {es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))})\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     p n ^ card (uedges H)) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     prob\n      {es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))})\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = \\<mu>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       prob\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) =\n    \\<mu>", "unfolding expectation_X_Y X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       prob\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) =\n    (\\<Sum>i\\<in>{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       expectation\n        (rind\n          {es \\<in> space P.\n           subgraph (f i) (induced_subgraph i (edge_ugraph es))}))", "using expectation_indicator"], ["proof (prove)\nusing this:\n  ?A \\<in> events \\<Longrightarrow> expectation (rind ?A) = prob ?A\n\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       prob\n        {es \\<in> space P.\n         subgraph (f S) (induced_subgraph S (edge_ugraph es))}) =\n    (\\<Sum>i\\<in>{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       expectation\n        (rind\n          {es \\<in> space P.\n           subgraph (f i) (induced_subgraph i (edge_ugraph es))}))", "by force"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     prob\n      {es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))}) =\n  \\<mu>\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> \\<mu>", "have ex_lower: \"1 / (?v ^ ?v) * (real n ^ ?v * p n ^ ?e) \\<le> \\<mu>\""], ["proof (prove)\nusing this:\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> \\<mu>\n\ngoal (1 subgoal):\n 1. 1 / real (card (uverts H) ^ card (uverts H)) *\n    (real n ^ card (uverts H) * p n ^ card (uedges H))\n    \\<le> \\<mu>", ".\n\n    \\<comment> \\<open>Upper bound for the inverse expectation. Follows trivially from above.\\<close>"], ["proof (state)\nthis:\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> \\<mu>\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have ex_lower_pos: \"0 < 1 / ?v ^ ?v * (real n ^ ?v * p n ^ ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n        (real n ^ card (uverts H) * p n ^ card (uedges H))", "proof (rule mult_pos_pos[OF vpowv_inv_gr_z mult_pos_pos])"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < real n ^ card (uverts H)\n 2. 0 < p n ^ card (uedges H)", "have \"0 < real n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < real n", "using n nonempty finite"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n  nonempty_graph H\n  finite_graph H\n\ngoal (1 subgoal):\n 1. 0 < real n", "unfolding nonempty_graph_def finite_graph_def"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n  uverts H \\<noteq> {} \\<and> uedges H \\<noteq> {}\n  finite (uverts H) \\<and> finite (uedges H)\n\ngoal (1 subgoal):\n 1. 0 < real n", "by auto"], ["proof (state)\nthis:\n  0 < real n\n\ngoal (2 subgoals):\n 1. 0 < real n ^ card (uverts H)\n 2. 0 < p n ^ card (uedges H)", "thus \"0 < real n ^ ?v\""], ["proof (prove)\nusing this:\n  0 < real n\n\ngoal (1 subgoal):\n 1. 0 < real n ^ card (uverts H)", "by simp"], ["proof (state)\nthis:\n  0 < real n ^ card (uverts H)\n\ngoal (1 subgoal):\n 1. 0 < p n ^ card (uedges H)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < p n ^ card (uedges H)", "show \"0 < p n ^ card (uedges H)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < p n ^ card (uedges H)", "using p_nz"], ["proof (prove)\nusing this:\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. 0 < p n ^ card (uedges H)", "by simp"], ["proof (state)\nthis:\n  0 < p n ^ card (uedges H)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real n ^ card (uverts H) * p n ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence \"1 / \\<mu> \\<le> 1 / (1 / ?v ^ ?v * (real n ^ ?v * p n ^ ?e))\""], ["proof (prove)\nusing this:\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real n ^ card (uverts H) * p n ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. 1 / \\<mu>\n    \\<le> 1 /\n          (1 / real (card (uverts H) ^ card (uverts H)) *\n           (real n ^ card (uverts H) * p n ^ card (uedges H)))", "by (rule divide_left_mono[OF ex_lower zero_le_one mult_pos_pos[OF \\<mu>_non_zero]])"], ["proof (state)\nthis:\n  1 / \\<mu>\n  \\<le> 1 /\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence inv_ex_upper: \"1 / \\<mu> \\<le> ?v ^ ?v * (1 / (real n ^ ?v * p n ^ ?e))\""], ["proof (prove)\nusing this:\n  1 / \\<mu>\n  \\<le> 1 /\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\n\ngoal (1 subgoal):\n 1. 1 / \\<mu>\n    \\<le> real (card (uverts H) ^ card (uverts H)) *\n          (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "by simp\n\n    \\<comment> \\<open>Recall the definition of @{text \"\\<Delta>\\<^sub>d\"}:\n         \\[ \\Delta_d = \\sum\\limits_{\\substack{S \\in I,\\, T \\in I\\\\S \\neq T\\\\A_S,\\, A_T \\text{ not independent}}} \\Pr[A_S \\cap A_T] \\]\n         We are going to prove an upper bound for that sum, so we can safely augment the index set\n         by replacing it with a neccessary condition.\n\n         The idea is that if the two sets $S$ and $T$ are not independent, their intersection is not\n         empty. We prove that by contraposition, i.e. if the intersection is empty, then they are\n         independent. This in turn can be shown using some basic properties of @{term f}.\\<close>"], ["proof (state)\nthis:\n  1 / \\<mu>\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "{"], ["proof (state)\nthis:\n  1 / \\<mu>\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "fix S T"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume \"S \\<in> ?I\" \"T \\<in> ?I\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence *: \"prob (?A S) * prob (?A T) = p n ^ (2 * ?e)\""], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. prob\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n    prob\n     {es \\<in> space P.\n      subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    p n ^ (2 * card (uedges H))", "using prob_A"], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  ?S3\n  \\<in> {S. S \\<subseteq> {1..n} \\<and>\n            card S = card (uverts H)} \\<Longrightarrow>\n  prob\n   {es \\<in> space P.\n    subgraph (f ?S3) (induced_subgraph ?S3 (edge_ugraph es))} =\n  p n ^ card (uedges H)\n\ngoal (1 subgoal):\n 1. prob\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n    prob\n     {es \\<in> space P.\n      subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n    p n ^ (2 * card (uedges H))", "by (simp add: power_even_eq power2_eq_square)"], ["proof (state)\nthis:\n  prob\n   {es \\<in> space P.\n    subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n  prob\n   {es \\<in> space P.\n    subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note S = I[OF \\<open>S \\<in> ?I\\<close>]"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note T = I[OF \\<open>T \\<in> ?I\\<close>]"], ["proof (state)\nthis:\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "assume disj: \"S \\<inter> T = {}\""], ["proof (state)\nthis:\n  S \\<inter> T = {}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"prob (?A S \\<inter> ?A T) = p n ^ card (uedges (f S) \\<union> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "using \\<open>S \\<in> ?I\\<close> \\<open>T \\<in> ?I\\<close>"], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "by (fact prob_A_intersect)"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n ^ (card (uedges (f S)) + card (uedges (f T)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n    p n ^ (card (uedges (f S)) + card (uedges (f T)))", "proof (rule arg_cong[OF card_Un_disjoint])"], ["proof (state)\ngoal (3 subgoals):\n 1. finite (uedges (f S))\n 2. finite (uedges (f T))\n 3. uedges (f S) \\<inter> uedges (f T) = {}", "have \"finite_graph (f S)\" \"finite_graph (f T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_graph (f S) &&& finite_graph (f T)", "using S T"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. finite_graph (f S) &&& finite_graph (f T)", "by (auto simp: wellformed_finite)"], ["proof (state)\nthis:\n  finite_graph (f S)\n  finite_graph (f T)\n\ngoal (3 subgoals):\n 1. finite (uedges (f S))\n 2. finite (uedges (f T))\n 3. uedges (f S) \\<inter> uedges (f T) = {}", "thus \"finite (uedges (f S))\" \"finite (uedges (f T))\""], ["proof (prove)\nusing this:\n  finite_graph (f S)\n  finite_graph (f T)\n\ngoal (1 subgoal):\n 1. finite (uedges (f S)) &&& finite (uedges (f T))", "unfolding finite_graph_def"], ["proof (prove)\nusing this:\n  finite (uverts (f S)) \\<and> finite (uedges (f S))\n  finite (uverts (f T)) \\<and> finite (uedges (f T))\n\ngoal (1 subgoal):\n 1. finite (uedges (f S)) &&& finite (uedges (f T))", "by auto"], ["proof (state)\nthis:\n  finite (uedges (f S))\n  finite (uedges (f T))\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "have \"uedges (f S) \\<subseteq> all_edges S\" \"uedges (f T) \\<subseteq> all_edges T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uedges (f S) \\<subseteq> all_edges S &&&\n    uedges (f T) \\<subseteq> all_edges T", "using S(4,5) T(4,5)"], ["proof (prove)\nusing this:\n  H \\<simeq> f S\n  uverts (f S) = S\n  H \\<simeq> f T\n  uverts (f T) = T\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<subseteq> all_edges S &&&\n    uedges (f T) \\<subseteq> all_edges T", "by (metis wellformed_all_edges)+"], ["proof (state)\nthis:\n  uedges (f S) \\<subseteq> all_edges S\n  uedges (f T) \\<subseteq> all_edges T\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "moreover"], ["proof (state)\nthis:\n  uedges (f S) \\<subseteq> all_edges S\n  uedges (f T) \\<subseteq> all_edges T\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "have \"all_edges S \\<inter> all_edges T = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. all_edges S \\<inter> all_edges T = {}", "by (fact all_edges_disjoint[OF disj])"], ["proof (state)\nthis:\n  all_edges S \\<inter> all_edges T = {}\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "ultimately"], ["proof (chain)\npicking this:\n  uedges (f S) \\<subseteq> all_edges S\n  uedges (f T) \\<subseteq> all_edges T\n  all_edges S \\<inter> all_edges T = {}", "show \"uedges (f S) \\<inter> uedges (f T) = {}\""], ["proof (prove)\nusing this:\n  uedges (f S) \\<subseteq> all_edges S\n  uedges (f T) \\<subseteq> all_edges T\n  all_edges S \\<inter> all_edges T = {}\n\ngoal (1 subgoal):\n 1. uedges (f S) \\<inter> uedges (f T) = {}", "by blast"], ["proof (state)\nthis:\n  uedges (f S) \\<inter> uedges (f T) = {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n  p n ^ (card (uedges (f S)) + card (uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n  p n ^ (card (uedges (f S)) + card (uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = p n ^ (2 * ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^ (card (uedges (f S)) + card (uedges (f T))) =\n    p n ^ (2 * card (uedges H))", "using isomorphic_cards(2)[OF isomorphic_sym[OF S(4)]] isomorphic_cards(2)[OF isomorphic_sym[OF T(4)]]"], ["proof (prove)\nusing this:\n  card (uedges (f S)) = card (uedges H)\n  card (uedges (f T)) = card (uedges H)\n\ngoal (1 subgoal):\n 1. p n ^ (card (uedges (f S)) + card (uedges (f T))) =\n    p n ^ (2 * card (uedges H))", "by (simp add: mult_2)"], ["proof (state)\nthis:\n  p n ^ (card (uedges (f S)) + card (uedges (f T))) =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))", "have **: \"prob (?A S \\<inter> ?A T) = \\<dots>\""], ["proof (prove)\nusing this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ (2 * card (uedges H))", "."], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "from * **"], ["proof (chain)\npicking this:\n  prob\n   {es \\<in> space P.\n    subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n  prob\n   {es \\<in> space P.\n    subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  p n ^ (2 * card (uedges H))\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))", "have \"indep (?A S) (?A T)\""], ["proof (prove)\nusing this:\n  prob\n   {es \\<in> space P.\n    subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n  prob\n   {es \\<in> space P.\n    subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  p n ^ (2 * card (uedges H))\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. indep\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))}\n     {es \\<in> space P.\n      subgraph (f T) (induced_subgraph T (edge_ugraph es))}", "unfolding indep_def"], ["proof (prove)\nusing this:\n  prob\n   {es \\<in> space P.\n    subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n  prob\n   {es \\<in> space P.\n    subgraph (f T) (induced_subgraph T (edge_ugraph es))} =\n  p n ^ (2 * card (uedges H))\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ (2 * card (uedges H))\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    prob\n     {es \\<in> space P.\n      subgraph (f S) (induced_subgraph S (edge_ugraph es))} *\n    prob\n     {es \\<in> space P.\n      subgraph (f T) (induced_subgraph T (edge_ugraph es))}", "by force"], ["proof (state)\nthis:\n  indep\n   {es \\<in> space P. subgraph (f S) (induced_subgraph S (edge_ugraph es))}\n   {es \\<in> space P. subgraph (f T) (induced_subgraph T (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?S3\n           \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?T3 \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?S3 \\<inter> ?T3 = {}\\<rbrakk>\n  \\<Longrightarrow> indep\n                     {es \\<in> space P.\n                      subgraph (f ?S3)\n                       (induced_subgraph ?S3 (edge_ugraph es))}\n                     {es \\<in> space P.\n                      subgraph (f ?T3)\n                       (induced_subgraph ?T3 (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note indep = this\n\n    \\<comment> \\<open>Now we prove an upper bound for @{text \"\\<Delta>\\<^sub>d\"}.\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>?S3\n           \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?T3 \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n   ?S3 \\<inter> ?T3 = {}\\<rbrakk>\n  \\<Longrightarrow> indep\n                     {es \\<in> space P.\n                      subgraph (f ?S3)\n                       (induced_subgraph ?S3 (edge_ugraph es))}\n                     {es \\<in> space P.\n                      subgraph (f ?T3)\n                       (induced_subgraph ?T3 (edge_ugraph es))}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<Delta>\\<^sub>d = (\\<Sum>S \\<in> ?I. \\<Sum>T | T \\<in> ?I \\<and> ineq_dep S T. prob (?A S \\<inter> ?A T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Delta>\\<^sub>d =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)} \\<and>\n                 S \\<noteq> T \\<and>\n                 \\<not> indep\n                         {es \\<in> space P.\n                          subgraph (f S)\n                           (induced_subgraph S (edge_ugraph es))}\n                         {es \\<in> space P.\n                          subgraph (f T)\n                           (induced_subgraph T (edge_ugraph es))}.\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "unfolding \\<Delta>\\<^sub>d_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       \\<Sum>j | j \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)} \\<and>\n                 i \\<noteq> j \\<and>\n                 \\<not> indep\n                         {es \\<in> space P.\n                          subgraph (f i)\n                           (induced_subgraph i (edge_ugraph es))}\n                         {es \\<in> space P.\n                          subgraph (f j)\n                           (induced_subgraph j (edge_ugraph es))}.\n         prob\n          ({es \\<in> space P.\n            subgraph (f i) (induced_subgraph i (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f j) (induced_subgraph j (edge_ugraph es))})) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)} \\<and>\n                 S \\<noteq> T \\<and>\n                 \\<not> indep\n                         {es \\<in> space P.\n                          subgraph (f S)\n                           (induced_subgraph S (edge_ugraph es))}\n                         {es \\<in> space P.\n                          subgraph (f T)\n                           (induced_subgraph T (edge_ugraph es))}.\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "..\n\n    \\<comment> \\<open>Augmenting the index set as described above.\\<close>"], ["proof (state)\nthis:\n  \\<Delta>\\<^sub>d =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<noteq> T \\<and>\n               \\<not> indep\n                       {es \\<in> space P.\n                        subgraph (f S)\n                         (induced_subgraph S (edge_ugraph es))}\n                       {es \\<in> space P.\n                        subgraph (f T)\n                         (induced_subgraph T (edge_ugraph es))}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  \\<Delta>\\<^sub>d =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<noteq> T \\<and>\n               \\<not> indep\n                       {es \\<in> space P.\n                        subgraph (f S)\n                         (induced_subgraph S (edge_ugraph es))}\n                       {es \\<in> space P.\n                        subgraph (f T)\n                         (induced_subgraph T (edge_ugraph es))}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (\\<Sum>S \\<in> ?I. \\<Sum>T | T \\<in> ?I \\<and> S \\<inter> T \\<noteq> {}. prob (?A S \\<inter> ?A T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)} \\<and>\n                 S \\<noteq> T \\<and>\n                 \\<not> indep\n                         {es \\<in> space P.\n                          subgraph (f S)\n                           (induced_subgraph S (edge_ugraph es))}\n                         {es \\<in> space P.\n                          subgraph (f T)\n                           (induced_subgraph T (edge_ugraph es))}.\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n    \\<le> (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n             \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                   card S = card (uverts H)} \\<and>\n                       S \\<inter> T \\<noteq> {}.\n               prob\n                ({es \\<in> space P.\n                  subgraph (f S)\n                   (induced_subgraph S (edge_ugraph es))} \\<inter>\n                 {es \\<in> space P.\n                  subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "by (rule sum_mono[OF sum_mono2]) (auto simp: indep measure_nonneg)\n\n    \\<comment> \\<open>So far, we are adding the intersection probabilities over pairs of sets which have a\n         nonempty intersection. Since we know that these intersections have at least one element\n         (as they are nonempty) and at most $|V(H)|$ elements (by definition of $I$). In this step,\n         we will partition this sum by cardinality of the intersections.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<noteq> T \\<and>\n               \\<not> indep\n                       {es \\<in> space P.\n                        subgraph (f S)\n                         (induced_subgraph S (edge_ugraph es))}\n                       {es \\<in> space P.\n                        subgraph (f T)\n                         (induced_subgraph T (edge_ugraph es))}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n  \\<le> (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n           \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                 card S = card (uverts H)} \\<and>\n                     S \\<inter> T \\<noteq> {}.\n             prob\n              ({es \\<in> space P.\n                subgraph (f S)\n                 (induced_subgraph S (edge_ugraph es))} \\<inter>\n               {es \\<in> space P.\n                subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<noteq> T \\<and>\n               \\<not> indep\n                       {es \\<in> space P.\n                        subgraph (f S)\n                         (induced_subgraph S (edge_ugraph es))}\n                       {es \\<in> space P.\n                        subgraph (f T)\n                         (induced_subgraph T (edge_ugraph es))}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n  \\<le> (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n           \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                 card S = card (uverts H)} \\<and>\n                     S \\<inter> T \\<noteq> {}.\n             prob\n              ({es \\<in> space P.\n                subgraph (f S)\n                 (induced_subgraph S (edge_ugraph es))} \\<inter>\n               {es \\<in> space P.\n                subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>S \\<in> ?I. \\<Sum>T \\<in> (\\<Union>k \\<in> {1..?v}. {T \\<in> ?I. card (S \\<inter> T) = k}). prob (?A S \\<inter> ?A T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)} \\<and>\n                 S \\<inter> T \\<noteq> {}.\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                       {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)}.\n                        card (S \\<inter> T) = k}).\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "proof (rule sum.cong, rule refl, rule sum.cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                   card S = card (uverts H)} \\<Longrightarrow>\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        x \\<inter> T \\<noteq> {}} =\n       (\\<Union>k\\<in>{1..card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (x \\<inter> T) = k})\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "fix S"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                   card S = card (uverts H)} \\<Longrightarrow>\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        x \\<inter> T \\<noteq> {}} =\n       (\\<Union>k\\<in>{1..card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (x \\<inter> T) = k})\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "assume \"S \\<in> ?I\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                   card S = card (uverts H)} \\<Longrightarrow>\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        x \\<inter> T \\<noteq> {}} =\n       (\\<Union>k\\<in>{1..card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (x \\<inter> T) = k})\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "note I(2,3)[OF this]"], ["proof (state)\nthis:\n  card (uverts H) = card S\n  finite S\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                   card S = card (uverts H)} \\<Longrightarrow>\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        x \\<inter> T \\<noteq> {}} =\n       (\\<Union>k\\<in>{1..card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (x \\<inter> T) = k})\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "hence \"{T. S \\<inter> T \\<noteq> {}} = (\\<Union>k \\<in> {1..?v}. {T. card (S \\<inter> T) = k})\""], ["proof (prove)\nusing this:\n  card (uverts H) = card S\n  finite S\n\ngoal (1 subgoal):\n 1. {T. S \\<inter> T \\<noteq> {}} =\n    (\\<Union>k\\<in>{1..card (uverts H)}. {T. card (S \\<inter> T) = k})", "by (simp add: partition_set_of_intersecting_sets_by_card)"], ["proof (state)\nthis:\n  {T. S \\<inter> T \\<noteq> {}} =\n  (\\<Union>k\\<in>{1..card (uverts H)}. {T. card (S \\<inter> T) = k})\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                   card S = card (uverts H)} \\<Longrightarrow>\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        x \\<inter> T \\<noteq> {}} =\n       (\\<Union>k\\<in>{1..card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (x \\<inter> T) = k})\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "thus \"{T \\<in> ?I. S \\<inter> T \\<noteq> {}} = (\\<Union>k\\<in>{1..?v}. {T \\<in> ?I. card (S \\<inter> T) = k})\""], ["proof (prove)\nusing this:\n  {T. S \\<inter> T \\<noteq> {}} =\n  (\\<Union>k\\<in>{1..card (uverts H)}. {T. card (S \\<inter> T) = k})\n\ngoal (1 subgoal):\n 1. {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n     S \\<inter> T \\<noteq> {}} =\n    (\\<Union>k\\<in>{1..card (uverts H)}.\n        {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         card (S \\<inter> T) = k})", "by blast"], ["proof (state)\nthis:\n  {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n   S \\<inter> T \\<noteq> {}} =\n  (\\<Union>k\\<in>{1..card (uverts H)}.\n      {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       card (S \\<inter> T) = k})\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>x \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)};\n        xa \\<in> (\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (x \\<inter> T) = k})\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))}) =\n                         prob\n                          ({es \\<in> space P.\n                            subgraph (f x)\n                             (induced_subgraph x (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f xa)\n                             (induced_subgraph xa (edge_ugraph es))})", "qed simp"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<inter> T \\<noteq> {}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)} \\<and>\n               S \\<inter> T \\<noteq> {}.\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>S \\<in> ?I. \\<Sum>k = 1..?v. \\<Sum>T | T \\<in> ?I \\<and> card (S \\<inter> T) = k. prob (?A S \\<inter> ?A T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                       {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)}.\n                        card (S \\<inter> T) = k}).\n         prob\n          ({es \\<in> space P.\n            subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n           {es \\<in> space P.\n            subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>k = 1..card (uverts H).\n          \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)} \\<and>\n                    card (S \\<inter> T) = k.\n            prob\n             ({es \\<in> space P.\n               subgraph (f S)\n                (induced_subgraph S (edge_ugraph es))} \\<inter>\n              {es \\<in> space P.\n               subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "by (rule sum.cong, rule refl, rule sum.UNION_disjoint) auto"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>k = 1..card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>T\\<in>(\\<Union>k\\<in>{1..card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n       prob\n        ({es \\<in> space P.\n          subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n         {es \\<in> space P.\n          subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>k = 1..card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>k = 1..?v. \\<Sum>S \\<in> ?I. \\<Sum>T | T \\<in> ?I \\<and> card (S \\<inter> T) = k. prob (?A S \\<inter> ?A T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       \\<Sum>k = 1..card (uverts H).\n          \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)} \\<and>\n                    card (S \\<inter> T) = k.\n            prob\n             ({es \\<in> space P.\n               subgraph (f S)\n                (induced_subgraph S (edge_ugraph es))} \\<inter>\n              {es \\<in> space P.\n               subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n    (\\<Sum>k = 1..card (uverts H).\n        \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n          \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)} \\<and>\n                    card (S \\<inter> T) = k.\n            prob\n             ({es \\<in> space P.\n               subgraph (f S)\n                (induced_subgraph S (edge_ugraph es))} \\<inter>\n              {es \\<in> space P.\n               subgraph (f T) (induced_subgraph T (edge_ugraph es))}))", "by (rule sum.swap)\n\n    \\<comment> \\<open>In this step, we compute an upper bound for the intersection probability and argue that\n         it only depends on the cardinality of the intersection.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>k = 1..card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     \\<Sum>k = 1..card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))})) =\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (\\<Sum>k = 1..?v. \\<Sum>S \\<in> ?I. \\<Sum>T | T \\<in> ?I \\<and> card (S \\<inter> T) = k. p n powr (2 * ?e - max_density H * k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..card (uverts H).\n        \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n          \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)} \\<and>\n                    card (S \\<inter> T) = k.\n            prob\n             ({es \\<in> space P.\n               subgraph (f S)\n                (induced_subgraph S (edge_ugraph es))} \\<inter>\n              {es \\<in> space P.\n               subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n    \\<le> (\\<Sum>k = 1..card (uverts H).\n              \\<Sum>S | S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H).\n                \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\ncard S = card (uverts H)} \\<and>\n                          card (S \\<inter> T) = k.\n                  p n powr\n                  (real (2 * card (uedges H)) - max_density H * real k))", "proof (rule sum_mono)+"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "assume k: \"k \\<in> {1..?v}\""], ["proof (state)\nthis:\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "fix S T"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "assume \"S \\<in> ?I\" \"T \\<in> {T. T \\<in> ?I \\<and> card (S \\<inter> T) = k}\""], ["proof (state)\nthis:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n           card (S \\<inter> T) = k}\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "hence \"T \\<in> ?I\" and ST_k: \"card (S \\<inter> T) = k\""], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n           card (S \\<inter> T) = k}\n\ngoal (1 subgoal):\n 1. T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)} &&&\n    card (S \\<inter> T) = k", "by auto"], ["proof (state)\nthis:\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  card (S \\<inter> T) = k\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "note S = I[OF \\<open>S \\<in> ?I\\<close>]"], ["proof (state)\nthis:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "note T = I[OF \\<open>T \\<in> ?I\\<close>]"], ["proof (state)\nthis:\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "let ?cST = \"card (uedges (f S) \\<inter> uedges (f T))\"\n\n        \\<comment> \\<open>We already know the intersection probability.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"prob (?A S \\<inter> ?A T) = p n ^ card (uedges (f S) \\<union> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "using \\<open>S \\<in> ?I\\<close> \\<open>T \\<in> ?I\\<close>"], ["proof (prove)\nusing this:\n  S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n  T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n    p n ^ card (uedges (f S) \\<union> uedges (f T))", "by (fact prob_A_intersect)\n\n        \\<comment> \\<open>Now, we consider the number of edges shared by the copies of @{term H} over @{term S}\n             and @{term T}.\\<close>"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))}) =\n  p n ^ card (uedges (f S) \\<union> uedges (f T))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> = p n ^ (card (uedges (f S)) + card (uedges (f T)) - ?cST)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n    p n ^\n    (card (uedges (f S)) + card (uedges (f T)) -\n     card (uedges (f S) \\<inter> uedges (f T)))", "using S T"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite_graph (f T)\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n    p n ^\n    (card (uedges (f S)) + card (uedges (f T)) -\n     card (uedges (f S) \\<inter> uedges (f T)))", "unfolding finite_graph_def"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite (uverts (f S)) \\<and> finite (uedges (f S))\n  nonempty_graph (f S)\n  T \\<subseteq> {1..n}\n  card (uverts H) = card T\n  finite T\n  H \\<simeq> f T\n  uverts (f T) = T\n  finite (uverts (f T)) \\<and> finite (uedges (f T))\n  nonempty_graph (f T)\n\ngoal (1 subgoal):\n 1. p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n    p n ^\n    (card (uedges (f S)) + card (uedges (f T)) -\n     card (uedges (f S) \\<inter> uedges (f T)))", "by (simp add: card_union)"], ["proof (state)\nthis:\n  p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n  p n ^\n  (card (uedges (f S)) + card (uedges (f T)) -\n   card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  p n ^ card (uedges (f S) \\<union> uedges (f T)) =\n  p n ^\n  (card (uedges (f S)) + card (uedges (f T)) -\n   card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> = p n ^ (?e + ?e - ?cST)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^\n    (card (uedges (f S)) + card (uedges (f T)) -\n     card (uedges (f S) \\<inter> uedges (f T))) =\n    p n ^\n    (card (uedges H) + card (uedges H) -\n     card (uedges (f S) \\<inter> uedges (f T)))", "by (metis isomorphic_cards(2)[OF S(4)] isomorphic_cards(2)[OF T(4)])"], ["proof (state)\nthis:\n  p n ^\n  (card (uedges (f S)) + card (uedges (f T)) -\n   card (uedges (f S) \\<inter> uedges (f T))) =\n  p n ^\n  (card (uedges H) + card (uedges H) -\n   card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  p n ^\n  (card (uedges (f S)) + card (uedges (f T)) -\n   card (uedges (f S) \\<inter> uedges (f T))) =\n  p n ^\n  (card (uedges H) + card (uedges H) -\n   card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> = p n ^ (2 * ?e - ?cST)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^\n    (card (uedges H) + card (uedges H) -\n     card (uedges (f S) \\<inter> uedges (f T))) =\n    p n ^ (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))", "by (simp add: mult_2)"], ["proof (state)\nthis:\n  p n ^\n  (card (uedges H) + card (uedges H) -\n   card (uedges (f S) \\<inter> uedges (f T))) =\n  p n ^ (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  p n ^\n  (card (uedges H) + card (uedges H) -\n   card (uedges (f S) \\<inter> uedges (f T))) =\n  p n ^ (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> = p n powr (2 * ?e - ?cST)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n ^\n    (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n    p n powr\n    real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))", "using p_nz"], ["proof (prove)\nusing this:\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. p n ^\n    (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n    p n powr\n    real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))", "by (simp add: powr_realpow)"], ["proof (state)\nthis:\n  p n ^ (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n  p n powr\n  real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  p n ^ (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n  p n powr\n  real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> = p n powr (real (2 * ?e) - real ?cST)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n powr\n    real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n    p n powr\n    (real (2 * card (uedges H)) -\n     real (card (uedges (f S) \\<inter> uedges (f T))))", "using isomorphic_cards[OF S(4)] S(6)"], ["proof (prove)\nusing this:\n  card (uverts H) = card (uverts (f S))\n  card (uedges H) = card (uedges (f S))\n  finite_graph (f S)\n\ngoal (1 subgoal):\n 1. p n powr\n    real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n    p n powr\n    (real (2 * card (uedges H)) -\n     real (card (uedges (f S) \\<inter> uedges (f T))))", "by (metis of_nat_diff card_mono finite_graph_def inf_le1 mult_le_mono mult_numeral_1 numeral_One one_le_numeral)\n\n        \\<comment> \\<open>Since the intersection graph is also an isomorphic subgraph of @{term H}, we know that\n             its density has to be less than or equal to the maximum density of @{term H}. The proof\n             is quite technical.\\<close>"], ["proof (state)\nthis:\n  p n powr\n  real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n  p n powr\n  (real (2 * card (uedges H)) -\n   real (card (uedges (f S) \\<inter> uedges (f T))))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "also"], ["proof (state)\nthis:\n  p n powr\n  real (2 * card (uedges H) - card (uedges (f S) \\<inter> uedges (f T))) =\n  p n powr\n  (real (2 * card (uedges H)) -\n   real (card (uedges (f S) \\<inter> uedges (f T))))\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "have \"\\<dots> \\<le> p n powr (2 * ?e - max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p n powr\n    (real (2 * card (uedges H)) -\n     real (card (uedges (f S) \\<inter> uedges (f T))))\n    \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)", "proof (rule powr_mono3)"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "have \"?cST = density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) * k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (uedges (f S) \\<inter> uedges (f T))) =\n    Ugraph_Lemmas.density\n     (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n    real k", "unfolding density_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (uedges (f S) \\<inter> uedges (f T))) =\n    real\n     (card (uedges (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) /\n    real\n     (card (uverts (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) *\n    real k", "using k ST_k"], ["proof (prove)\nusing this:\n  k \\<in> {1..card (uverts H)}\n  card (S \\<inter> T) = k\n\ngoal (1 subgoal):\n 1. real (card (uedges (f S) \\<inter> uedges (f T))) =\n    real\n     (card (uedges (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) /\n    real\n     (card (uverts (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) *\n    real k", "by simp"], ["proof (state)\nthis:\n  real (card (uedges (f S) \\<inter> uedges (f T))) =\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n  real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "also"], ["proof (state)\nthis:\n  real (card (uedges (f S) \\<inter> uedges (f T))) =\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n  real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "have \"\\<dots> \\<le> max_density (f S) * k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density\n     (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n    real k\n    \\<le> max_density (f S) * real k", "(* EXTREME METIS!!!1 *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density\n     (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n    real k\n    \\<le> max_density (f S) * real k", "proof (rule mult_right_mono, cases \"uedges (f S) \\<inter> uedges (f T) = {}\")"], ["proof (state)\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "case True"], ["proof (state)\nthis:\n  uedges (f S) \\<inter> uedges (f T) = {}\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "hence \"density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) = 0\""], ["proof (prove)\nusing this:\n  uedges (f S) \\<inter> uedges (f T) = {}\n\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density\n     (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) =\n    0", "unfolding density_def"], ["proof (prove)\nusing this:\n  uedges (f S) \\<inter> uedges (f T) = {}\n\ngoal (1 subgoal):\n 1. real\n     (card (uedges (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) /\n    real\n     (card (uverts (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))) =\n    0", "by simp"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) =\n  0\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "also"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) =\n  0\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "have \"0 \\<le> density (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> Ugraph_Lemmas.density (f S)", "unfolding density_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> real (card (uedges (f S))) / real (card (uverts (f S)))", "by simp"], ["proof (state)\nthis:\n  0 \\<le> Ugraph_Lemmas.density (f S)\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "also"], ["proof (state)\nthis:\n  0 \\<le> Ugraph_Lemmas.density (f S)\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "have \"density (f S) \\<le> max_density (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density (f S) \\<le> max_density (f S)", "using S"], ["proof (prove)\nusing this:\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density (f S) \\<le> max_density (f S)", "by (simp add: max_density_is_max subgraph_refl)"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (f S) \\<le> max_density (f S)\n\ngoal (3 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) = {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 3. 0 \\<le> real k", "finally"], ["proof (chain)\npicking this:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n  \\<le> max_density (f S)", "show \"density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<le> max_density (f S)\""], ["proof (prove)\nusing this:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n  \\<le> max_density (f S)\n\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)", "."], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n  \\<le> max_density (f S)\n\ngoal (2 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. 0 \\<le> real k", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. 0 \\<le> real k", "case False"], ["proof (state)\nthis:\n  uedges (f S) \\<inter> uedges (f T) \\<noteq> {}\n\ngoal (2 subgoals):\n 1. uedges (f S) \\<inter> uedges (f T) \\<noteq> {} \\<Longrightarrow>\n    Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)\n 2. 0 \\<le> real k", "show \"density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<le> max_density (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n    \\<le> max_density (f S)", "proof (rule max_density_is_max)"], ["proof (state)\ngoal (5 subgoals):\n 1. finite_graph (f S)\n 2. finite_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 3. nonempty_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 4. uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 5. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "show \"finite_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))", "using T(3,6)"], ["proof (prove)\nusing this:\n  finite T\n  finite_graph (f T)\n\ngoal (1 subgoal):\n 1. finite_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))", "by (metis finite_Int finite_graph_def fst_eqD snd_conv)"], ["proof (state)\nthis:\n  finite_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n\ngoal (4 subgoals):\n 1. finite_graph (f S)\n 2. nonempty_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 3. uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 4. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "show \"nonempty_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonempty_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))", "unfolding nonempty_graph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. uverts (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<noteq>\n    {} \\<and>\n    uedges (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<noteq> {}", "using k ST_k False"], ["proof (prove)\nusing this:\n  k \\<in> {1..card (uverts H)}\n  card (S \\<inter> T) = k\n  uedges (f S) \\<inter> uedges (f T) \\<noteq> {}\n\ngoal (1 subgoal):\n 1. uverts (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<noteq>\n    {} \\<and>\n    uedges (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) \\<noteq> {}", "by force"], ["proof (state)\nthis:\n  nonempty_graph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n\ngoal (3 subgoals):\n 1. finite_graph (f S)\n 2. uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n 3. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "show \"uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))", "using S(4,5) T(4,5)"], ["proof (prove)\nusing this:\n  H \\<simeq> f S\n  uverts (f S) = S\n  H \\<simeq> f T\n  uverts (f T) = T\n\ngoal (1 subgoal):\n 1. uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))", "unfolding uwellformed_def"], ["proof (prove)\nusing this:\n  (\\<forall>e\\<in>uedges H.\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts H)) \\<and>\n  (\\<forall>e\\<in>uedges (f S).\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts (f S))) \\<and>\n  (\\<exists>fa. isomorphism H (f S) fa)\n  uverts (f S) = S\n  (\\<forall>e\\<in>uedges H.\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts H)) \\<and>\n  (\\<forall>e\\<in>uedges (f T).\n      card e = 2 \\<and> (\\<forall>u\\<in>e. u \\<in> uverts (f T))) \\<and>\n  (\\<exists>fa. isomorphism H (f T) fa)\n  uverts (f T) = T\n\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>uedges\n                    (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)).\n       card e = 2 \\<and>\n       (\\<forall>u\\<in>e.\n           u \\<in> uverts\n                    (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)))", "by (metis Int_iff fst_eqD snd_eqD)"], ["proof (state)\nthis:\n  uwellformed (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n\ngoal (2 subgoals):\n 1. finite_graph (f S)\n 2. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "show \"subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "using S(5)"], ["proof (prove)\nusing this:\n  uverts (f S) = S\n\ngoal (1 subgoal):\n 1. subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)", "by (metis fst_eqD inf_sup_ord(1) snd_conv subgraph_def)"], ["proof (state)\nthis:\n  subgraph (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) (f S)\n\ngoal (1 subgoal):\n 1. finite_graph (f S)", "qed (simp add: S)"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T))\n  \\<le> max_density (f S)\n\ngoal (1 subgoal):\n 1. 0 \\<le> real k", "qed simp"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n  real k\n  \\<le> max_density (f S) * real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "also"], ["proof (state)\nthis:\n  Ugraph_Lemmas.density (S \\<inter> T, uedges (f S) \\<inter> uedges (f T)) *\n  real k\n  \\<le> max_density (f S) * real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "have \"\\<dots> = max_density H * k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max_density (f S) * real k = max_density H * real k", "using assms S"], ["proof (prove)\nusing this:\n  nonempty_graph H\n  finite_graph H\n  uwellformed H\n  S \\<subseteq> {1..n}\n  card (uverts H) = card S\n  finite S\n  H \\<simeq> f S\n  uverts (f S) = S\n  finite_graph (f S)\n  nonempty_graph (f S)\n\ngoal (1 subgoal):\n 1. max_density (f S) * real k = max_density H * real k", "by (simp add: isomorphic_max_density[where G\\<^sub>1 = H and G\\<^sub>2 = \"f S\"])"], ["proof (state)\nthis:\n  max_density (f S) * real k = max_density H * real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "finally"], ["proof (chain)\npicking this:\n  real (card (uedges (f S) \\<inter> uedges (f T)))\n  \\<le> max_density H * real k", "have \"?cST \\<le> max_density H * k\""], ["proof (prove)\nusing this:\n  real (card (uedges (f S) \\<inter> uedges (f T)))\n  \\<le> max_density H * real k\n\ngoal (1 subgoal):\n 1. real (card (uedges (f S) \\<inter> uedges (f T)))\n    \\<le> max_density H * real k", "."], ["proof (state)\nthis:\n  real (card (uedges (f S) \\<inter> uedges (f T)))\n  \\<le> max_density H * real k\n\ngoal (3 subgoals):\n 1. 0 < p n\n 2. p n < 1\n 3. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "thus \"2 * ?e - max_density H * k \\<le> 2 * ?e - real ?cST\""], ["proof (prove)\nusing this:\n  real (card (uedges (f S) \\<inter> uedges (f T)))\n  \\<le> max_density H * real k\n\ngoal (1 subgoal):\n 1. real (2 * card (uedges H)) - max_density H * real k\n    \\<le> real (2 * card (uedges H)) -\n          real (card (uedges (f S) \\<inter> uedges (f T)))", "by linarith"], ["proof (state)\nthis:\n  real (2 * card (uedges H)) - max_density H * real k\n  \\<le> real (2 * card (uedges H)) -\n        real (card (uedges (f S) \\<inter> uedges (f T)))\n\ngoal (2 subgoals):\n 1. 0 < p n\n 2. p n < 1", "qed (auto simp: p_nz)"], ["proof (state)\nthis:\n  p n powr\n  (real (2 * card (uedges H)) -\n   real (card (uedges (f S) \\<inter> uedges (f T))))\n  \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>k S T.\n       \\<lbrakk>k \\<in> {1..card (uverts H)};\n        S \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)};\n        T \\<in> {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                             card S = card (uverts H)}.\n                 card (S \\<inter> T) = k}\\<rbrakk>\n       \\<Longrightarrow> prob\n                          ({es \\<in> space P.\n                            subgraph (f S)\n                             (induced_subgraph S (edge_ugraph es))} \\<inter>\n                           {es \\<in> space P.\n                            subgraph (f T)\n                             (induced_subgraph T (edge_ugraph es))})\n                         \\<le> p n powr\n                               (real (2 * card (uedges H)) -\n                                max_density H * real k)", "finally"], ["proof (chain)\npicking this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))})\n  \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)", "show \"prob (?A S \\<inter> ?A T) \\<le> \\<dots>\""], ["proof (prove)\nusing this:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))})\n  \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. prob\n     ({es \\<in> space P.\n       subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n      {es \\<in> space P.\n       subgraph (f T) (induced_subgraph T (edge_ugraph es))})\n    \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)", "."], ["proof (state)\nthis:\n  prob\n   ({es \\<in> space P.\n     subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n    {es \\<in> space P.\n     subgraph (f T) (induced_subgraph T (edge_ugraph es))})\n  \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal:\nNo subgoals!", "qed\n\n    \\<comment> \\<open>Further rewriting the index sets.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n              \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)} \\<and>\n                        card (S \\<inter> T) = k.\n                p n powr\n                (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          prob\n           ({es \\<in> space P.\n             subgraph (f S) (induced_subgraph S (edge_ugraph es))} \\<inter>\n            {es \\<in> space P.\n             subgraph (f T) (induced_subgraph T (edge_ugraph es))}))\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n              \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)} \\<and>\n                        card (S \\<inter> T) = k.\n                p n powr\n                (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>k = 1..?v. \\<Sum>(S, T) \\<in> (SIGMA S : ?I. {T \\<in> ?I. card (S \\<inter> T) = k}). p n powr (2 * ?e - max_density H * k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..card (uverts H).\n        \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n          \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)} \\<and>\n                    card (S \\<inter> T) = k.\n            p n powr\n            (real (2 * card (uedges H)) - max_density H * real k)) =\n    (\\<Sum>k = 1..card (uverts H).\n        \\<Sum>(S, T)\n              \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)}.\n                       {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)}.\n                        card (S \\<inter> T) = k}).\n          p n powr (real (2 * card (uedges H)) - max_density H * real k))", "by (rule sum.cong, rule refl, rule sum.Sigma) auto"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) =\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>(S, T)\n            \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n        p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n        \\<Sum>T | T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)} \\<and>\n                  card (S \\<inter> T) = k.\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) =\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>(S, T)\n            \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n        p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> = (\\<Sum>k = 1..?v. card (SIGMA S : ?I. {T \\<in> ?I. card (S \\<inter> T) = k}) * p n powr (2 * ?e - max_density H * k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..card (uverts H).\n        \\<Sum>(S, T)\n              \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                                card S = card (uverts H)}.\n                       {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                    card S = card (uverts H)}.\n                        card (S \\<inter> T) = k}).\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) =\n    (\\<Sum>k = 1..card (uverts H).\n        real\n         (card\n           (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n               {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)}.\n                card (S \\<inter> T) = k})) *\n        p n powr (real (2 * card (uedges H)) - max_density H * real k))", "by (rule sum.cong) auto\n\n    \\<comment> \\<open>Here, we compute the cardinality of the index sets and use the same upper bounds for\n         the binomial coefficients as for the 0-statement.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>(S, T)\n            \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n        p n powr (real (2 * card (uedges H)) - max_density H * real k)) =\n  (\\<Sum>k = 1..card (uverts H).\n      real\n       (card\n         (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n             {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                          card S = card (uverts H)}.\n              card (S \\<inter> T) = k})) *\n      p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      \\<Sum>(S, T)\n            \\<in>(SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                              card S = card (uverts H)}.\n                     {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                                  card S = card (uverts H)}.\n                      card (S \\<inter> T) = k}).\n        p n powr (real (2 * card (uedges H)) - max_density H * real k)) =\n  (\\<Sum>k = 1..card (uverts H).\n      real\n       (card\n         (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n             {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                          card S = card (uverts H)}.\n              card (S \\<inter> T) = k})) *\n      p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"\\<dots> \\<le> (\\<Sum>k = 1..?v. ?v ^ k * (real n ^ (2 * ?v - k) * p n powr (2 * ?e - max_density H * k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..card (uverts H).\n        real\n         (card\n           (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n               {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                            card S = card (uverts H)}.\n                card (S \\<inter> T) = k})) *\n        p n powr (real (2 * card (uedges H)) - max_density H * real k))\n    \\<le> (\\<Sum>k = 1..card (uverts H).\n              real (card (uverts H) ^ k) *\n              (real n ^ (2 * card (uverts H) - k) *\n               p n powr\n               (real (2 * card (uedges H)) - max_density H * real k)))", "proof (rule sum_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "assume k: \"k \\<in> {1..?v}\""], ["proof (state)\nthis:\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "let ?p = \"p n powr (2 * ?e - max_density H * k)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"card (SIGMA S : ?I. {T \\<in> ?I. card (S \\<inter> T) = k}) = (\\<Sum>S \\<in> ?I. card {T \\<in> ?I. card (S \\<inter> T) = k})\" (is \"?lhs = _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k}) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       card\n        {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         card (S \\<inter> T) = k})", "by simp"], ["proof (state)\nthis:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k}) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     card\n      {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       card (S \\<inter> T) = k})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k}) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     card\n      {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       card (S \\<inter> T) = k})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> = (\\<Sum>S \\<in> ?I. (?v choose k) * ((n - ?v) choose (?v - k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       card\n        {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         card (S \\<inter> T) = k}) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       (card (uverts H) choose k) *\n       (n - card (uverts H) choose (card (uverts H) - k)))", "using n k"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       card\n        {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         card (S \\<inter> T) = k}) =\n    (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       (card (uverts H) choose k) *\n       (n - card (uverts H) choose (card (uverts H) - k)))", "by (fastforce simp: card_set_of_intersecting_sets_by_card)"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     card\n      {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       card (S \\<inter> T) = k}) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     (card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     card\n      {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       card (S \\<inter> T) = k}) =\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     (card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> = (n choose ?v) * ((?v choose k) * ((n - ?v) choose (?v - k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n       (card (uverts H) choose k) *\n       (n - card (uverts H) choose (card (uverts H) - k))) =\n    (n choose card (uverts H)) *\n    ((card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))", "by (auto simp: n_subsets)"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     (card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k))) =\n  (n choose card (uverts H)) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  (\\<Sum>S | S \\<subseteq> {1..n} \\<and> card S = card (uverts H).\n     (card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k))) =\n  (n choose card (uverts H)) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> \\<le> n ^ ?v * ((?v choose k) * ((n - ?v) choose (?v - k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (n choose card (uverts H)) *\n    ((card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n    \\<le> n ^ card (uverts H) *\n          ((card (uverts H) choose k) *\n           (n - card (uverts H) choose (card (uverts H) - k)))", "using n"], ["proof (prove)\nusing this:\n  card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. (n choose card (uverts H)) *\n    ((card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n    \\<le> n ^ card (uverts H) *\n          ((card (uverts H) choose k) *\n           (n - card (uverts H) choose (card (uverts H) - k)))", "by (simp add: binomial_le_pow)"], ["proof (state)\nthis:\n  (n choose card (uverts H)) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n  \\<le> n ^ card (uverts H) *\n        ((card (uverts H) choose k) *\n         (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  (n choose card (uverts H)) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n  \\<le> n ^ card (uverts H) *\n        ((card (uverts H) choose k) *\n         (n - card (uverts H) choose (card (uverts H) - k)))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> \\<le> n ^ ?v * ?v ^ k * ((n - ?v) choose (?v - k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n ^ card (uverts H) *\n    ((card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n    \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n          (n - card (uverts H) choose (card (uverts H) - k))", "using k"], ["proof (prove)\nusing this:\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. n ^ card (uverts H) *\n    ((card (uverts H) choose k) *\n     (n - card (uverts H) choose (card (uverts H) - k)))\n    \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n          (n - card (uverts H) choose (card (uverts H) - k))", "by (simp add: binomial_le_pow)"], ["proof (state)\nthis:\n  n ^ card (uverts H) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        (n - card (uverts H) choose (card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  n ^ card (uverts H) *\n  ((card (uverts H) choose k) *\n   (n - card (uverts H) choose (card (uverts H) - k)))\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        (n - card (uverts H) choose (card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> \\<le> n ^ ?v * ?v ^ k * (n - ?v) ^ (?v - k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n ^ card (uverts H) * card (uverts H) ^ k *\n    (n - card (uverts H) choose (card (uverts H) - k))\n    \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n          (n - card (uverts H)) ^ (card (uverts H) - k)", "using n_2v"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> n\n\ngoal (1 subgoal):\n 1. n ^ card (uverts H) * card (uverts H) ^ k *\n    (n - card (uverts H) choose (card (uverts H) - k))\n    \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n          (n - card (uverts H)) ^ (card (uverts H) - k)", "by (simp add: binomial_le_pow)"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k *\n  (n - card (uverts H) choose (card (uverts H) - k))\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        (n - card (uverts H)) ^ (card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k *\n  (n - card (uverts H) choose (card (uverts H) - k))\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        (n - card (uverts H)) ^ (card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> \\<le> n ^ ?v * ?v ^ k * n ^ (?v - k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n ^ card (uverts H) * card (uverts H) ^ k *\n    (n - card (uverts H)) ^ (card (uverts H) - k)\n    \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n          n ^ (card (uverts H) - k)", "by (simp add: power_mono)"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k *\n  (n - card (uverts H)) ^ (card (uverts H) - k)\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        n ^ (card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k *\n  (n - card (uverts H)) ^ (card (uverts H) - k)\n  \\<le> n ^ card (uverts H) * card (uverts H) ^ k *\n        n ^ (card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> = ?v ^ k * (n ^ (?v + (?v - k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n ^ card (uverts H) * card (uverts H) ^ k * n ^ (card (uverts H) - k) =\n    card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k))", "by (simp add: power_add)"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k * n ^ (card (uverts H) - k) =\n  card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  n ^ card (uverts H) * card (uverts H) ^ k * n ^ (card (uverts H) - k) =\n  card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> = ?v ^ k * n ^ (2 * ?v - k)\" (is \"_ = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k)) =\n    card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)", "using k"], ["proof (prove)\nusing this:\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k)) =\n    card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)", "by (simp add: mult_2)"], ["proof (state)\nthis:\n  card (uverts H) ^ k * n ^ (card (uverts H) + (card (uverts H) - k)) =\n  card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "finally"], ["proof (chain)\npicking this:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k})\n  \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)", "have \"?lhs \\<le> ?rhs\""], ["proof (prove)\nusing this:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k})\n  \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})\n    \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)", "."], ["proof (state)\nthis:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k})\n  \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "hence \"real ?lhs \\<le> real ?rhs\""], ["proof (prove)\nusing this:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k})\n  \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)\n\ngoal (1 subgoal):\n 1. real\n     (card\n       (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (S \\<inter> T) = k}))\n    \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))", "using of_nat_le_iff"], ["proof (prove)\nusing this:\n  card\n   (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n       {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n        card (S \\<inter> T) = k})\n  \\<le> card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)\n  (of_nat ?m \\<le> of_nat ?n) = (?m \\<le> ?n)\n\ngoal (1 subgoal):\n 1. real\n     (card\n       (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (S \\<inter> T) = k}))\n    \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))", "by blast"], ["proof (state)\nthis:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k}))\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "moreover"], ["proof (state)\nthis:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k}))\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"0 \\<le> ?p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)", "by simp"], ["proof (state)\nthis:\n  0 \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "ultimately"], ["proof (chain)\npicking this:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k}))\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))\n  0 \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)", "have \"?lhs * ?p \\<le> ?rhs * ?p\""], ["proof (prove)\nusing this:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k}))\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k))\n  0 \\<le> p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. real\n     (card\n       (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (S \\<inter> T) = k})) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k)\n    \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)", "by (rule mult_right_mono)"], ["proof (state)\nthis:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k)\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)) *\n        p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "also"], ["proof (state)\nthis:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k)\n  \\<le> real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)) *\n        p n powr (real (2 * card (uedges H)) - max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "have \"\\<dots> = ?v ^ k * (real n ^ (2 * ?v - k) * ?p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) =\n    real (card (uverts H) ^ k) *\n    (real n ^ (2 * card (uverts H) - k) *\n     p n powr (real (2 * card (uedges H)) - max_density H * real k))", "by simp"], ["proof (state)\nthis:\n  real (card (uverts H) ^ k * n ^ (2 * card (uverts H) - k)) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) =\n  real (card (uverts H) ^ k) *\n  (real n ^ (2 * card (uverts H) - k) *\n   p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {1..card (uverts H)} \\<Longrightarrow>\n       real\n        (card\n          (SIGMA S:{S. S \\<subseteq> {1..n} \\<and>\n                       card S = card (uverts H)}.\n              {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                           card S = card (uverts H)}.\n               card (S \\<inter> T) = k})) *\n       p n powr (real (2 * card (uedges H)) - max_density H * real k)\n       \\<le> real (card (uverts H) ^ k) *\n             (real n ^ (2 * card (uverts H) - k) *\n              p n powr\n              (real (2 * card (uedges H)) - max_density H * real k))", "finally"], ["proof (chain)\npicking this:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k)\n  \\<le> real (card (uverts H) ^ k) *\n        (real n ^ (2 * card (uverts H) - k) *\n         p n powr (real (2 * card (uedges H)) - max_density H * real k))", "show \"?lhs * ?p \\<le> \\<dots>\""], ["proof (prove)\nusing this:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k)\n  \\<le> real (card (uverts H) ^ k) *\n        (real n ^ (2 * card (uverts H) - k) *\n         p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal (1 subgoal):\n 1. real\n     (card\n       (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n           {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                        card S = card (uverts H)}.\n            card (S \\<inter> T) = k})) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k)\n    \\<le> real (card (uverts H) ^ k) *\n          (real n ^ (2 * card (uverts H) - k) *\n           p n powr (real (2 * card (uedges H)) - max_density H * real k))", "."], ["proof (state)\nthis:\n  real\n   (card\n     (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n         {T \\<in> {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n          card (S \\<inter> T) = k})) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k)\n  \\<le> real (card (uverts H) ^ k) *\n        (real n ^ (2 * card (uverts H) - k) *\n         p n powr (real (2 * card (uedges H)) - max_density H * real k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..card (uverts H).\n      real\n       (card\n         (SIGMA S:{S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}.\n             {T \\<in> {S. S \\<subseteq> {1..n} \\<and>\n                          card S = card (uverts H)}.\n              card (S \\<inter> T) = k})) *\n      p n powr (real (2 * card (uedges H)) - max_density H * real k))\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "finally"], ["proof (chain)\npicking this:\n  \\<Delta>\\<^sub>d\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k)))", "have delta_upper: \"\\<Delta>\\<^sub>d \\<le> (\\<Sum>k = 1..?v. ?v ^ k * (real n ^ (2 * ?v - k) * p n powr (2 * ?e - max_density H * k)))\""], ["proof (prove)\nusing this:\n  \\<Delta>\\<^sub>d\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<Delta>\\<^sub>d\n    \\<le> (\\<Sum>k = 1..card (uverts H).\n              real (card (uverts H) ^ k) *\n              (real n ^ (2 * card (uverts H) - k) *\n               p n powr\n               (real (2 * card (uedges H)) - max_density H * real k)))", ".\n\n    \\<comment> \\<open>At this point, we have established all neccessary bounds.\\<close>"], ["proof (state)\nthis:\n  \\<Delta>\\<^sub>d\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note is_es is_psi compl_prob compl_upper ex_lower ex_lower_pos inv_ex_upper delta_upper"], ["proof (state)\nthis:\n  edge_space (p n)\n  prob_space_with_indicators P\n   {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space P.\n        subgraph (f S) (induced_subgraph S (edge_ugraph es))})\n  1 - prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es} =\n  prob {es \\<in> space P. edge_ugraph es \\<in> {G. H \\<sqsubseteq> G}}\n  prob {es \\<in> space P. \\<not> H \\<sqsubseteq> edge_ugraph es}\n  \\<le> 1 / \\<mu> + \\<Delta>\\<^sub>d / \\<mu>\\<^sup>2\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> \\<mu>\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real n ^ card (uverts H) * p n ^ card (uedges H))\n  1 / \\<mu>\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))\n  \\<Delta>\\<^sub>d\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "}"], ["proof (state)\nthis:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow> edge_space (p ?n3)\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 -\n  probGn p ?n3\n   (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph ?n3 es) =\n  prob_in_class p {G. H \\<sqsubseteq> G} ?n3\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  probGn p ?n3\n   (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph ?n3 es)\n  \\<le> 1 /\n        prob_space_with_indicators.\\<mu> (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))}) +\n        prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))}) /\n        (prob_space_with_indicators.\\<mu> (MGn p ?n3)\n          {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n          (\\<lambda>S.\n              {es \\<in> space (MGn p ?n3).\n               subgraph (f S)\n                (induced_subgraph S\n                  (edge_space.edge_ugraph ?n3 es))}))\\<^sup>2\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n  \\<le> prob_space_with_indicators.\\<mu> (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 /\n  prob_space_with_indicators.\\<mu> (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H)))\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real ?n3 ^ (2 * card (uverts H) - k) *\n             p ?n3 powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "note facts = this\n\n  \\<comment> \\<open>Recall our central inequality. We now prove that both summands tend to $0$. This is mainly\n       an exercise in bookkeeping and real arithmetics as no intelligent ideas are involved.\\<close>"], ["proof (state)\nthis:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow> edge_space (p ?n3)\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 -\n  probGn p ?n3\n   (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph ?n3 es) =\n  prob_in_class p {G. H \\<sqsubseteq> G} ?n3\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  probGn p ?n3\n   (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph ?n3 es)\n  \\<le> 1 /\n        prob_space_with_indicators.\\<mu> (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))}) +\n        prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))}) /\n        (prob_space_with_indicators.\\<mu> (MGn p ?n3)\n          {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n          (\\<lambda>S.\n              {es \\<in> space (MGn p ?n3).\n               subgraph (f S)\n                (induced_subgraph S\n                  (edge_space.edge_ugraph ?n3 es))}))\\<^sup>2\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n  \\<le> prob_space_with_indicators.\\<mu> (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 /\n  prob_space_with_indicators.\\<mu> (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H)))\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real ?n3 ^ (2 * card (uverts H) - k) *\n             p ?n3 powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"(\\<lambda>n. 1 / prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. 1) \\<lless>\n    (\\<lambda>n.\n        prob_space_with_indicators.\\<mu> (MGn p n)\n         {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p n).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph n es))}))", "proof (rule LIMSEQ_le_zero)"], ["proof (state)\ngoal (3 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?g n", "have \"(\\<lambda>n. 1 / (real n ^ ?v * p n ^ ?e)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. 1) \\<lless>\n    (\\<lambda>n. real n ^ card (uverts H) * p n ^ card (uedges H))", "proof (rule LIMSEQ_le_zero[OF _ eventually_sequentiallyI eventually_sequentiallyI])"], ["proof (state)\ngoal (3 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c2 \\<le> x \\<Longrightarrow>\n       0 \\<le> 1 / (real x ^ card (uverts H) * p x ^ card (uedges H))\n 3. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "fix n"], ["proof (state)\ngoal (3 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c2 \\<le> x \\<Longrightarrow>\n       0 \\<le> 1 / (real x ^ card (uverts H) * p x ^ card (uedges H))\n 3. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "show \"0 \\<le> 1 / (real n ^ ?v * p n ^ ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> 1 / (real n ^ card (uverts H) * p n ^ card (uedges H))", "using p"], ["proof (prove)\nusing this:\n  valid_prob_fun p\n\ngoal (1 subgoal):\n 1. 0 \\<le> 1 / (real n ^ card (uverts H) * p n ^ card (uedges H))", "by simp"], ["proof (state)\nthis:\n  0 \\<le> 1 / (real n ^ card (uverts H) * p n ^ card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "assume n: \"1 \\<le> n\""], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"1 / (real n ^ ?v * p n ^ ?e) = 1 / (real n powr ?v * p n powr ?e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n    1 /\n    (real n powr real (card (uverts H)) * p n powr real (card (uedges H)))", "using n p_nz"], ["proof (prove)\nusing this:\n  1 \\<le> n\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. 1 / (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n    1 /\n    (real n powr real (card (uverts H)) * p n powr real (card (uedges H)))", "by (simp add: powr_realpow[symmetric])"], ["proof (state)\nthis:\n  1 / (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n  1 / (real n powr real (card (uverts H)) * p n powr real (card (uedges H)))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  1 / (real n ^ card (uverts H) * p n ^ card (uedges H)) =\n  1 / (real n powr real (card (uverts H)) * p n powr real (card (uedges H)))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = real n powr -real ?v * p n powr -real ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 /\n    (real n powr real (card (uverts H)) * p n powr real (card (uedges H))) =\n    real n powr - real (card (uverts H)) * p n powr - real (card (uedges H))", "by (simp add: powr_minus_divide)"], ["proof (state)\nthis:\n  1 /\n  (real n powr real (card (uverts H)) * p n powr real (card (uedges H))) =\n  real n powr - real (card (uverts H)) * p n powr - real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  1 /\n  (real n powr real (card (uverts H)) * p n powr real (card (uedges H))) =\n  real n powr - real (card (uverts H)) * p n powr - real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (real n powr -(?v / ?e)) powr ?e * (p n powr -1) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr - real (card (uverts H)) *\n    p n powr - real (card (uedges H)) =\n    (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n    real (card (uedges H)) *\n    (p n powr - 1) powr real (card (uedges H))", "using v_e_nz"], ["proof (prove)\nusing this:\n  0 < real (card (uverts H))\n  0 < real (card (uedges H))\n\ngoal (1 subgoal):\n 1. real n powr - real (card (uverts H)) *\n    p n powr - real (card (uedges H)) =\n    (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n    real (card (uedges H)) *\n    (p n powr - 1) powr real (card (uedges H))", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  real n powr - real (card (uverts H)) * p n powr - real (card (uedges H)) =\n  (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n  real (card (uedges H)) *\n  (p n powr - 1) powr real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  real n powr - real (card (uverts H)) * p n powr - real (card (uedges H)) =\n  (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n  real (card (uedges H)) *\n  (p n powr - 1) powr real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (real n powr -(?v / ?e) * p n powr -1) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n    real (card (uedges H)) *\n    (p n powr - 1) powr real (card (uedges H)) =\n    (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n     p n powr - 1) powr\n    real (card (uedges H))", "by (simp add: powr_mult)"], ["proof (state)\nthis:\n  (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n  real (card (uedges H)) *\n  (p n powr - 1) powr real (card (uedges H)) =\n  (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  (real n powr - (real (card (uverts H)) / real (card (uedges H)))) powr\n  real (card (uedges H)) *\n  (p n powr - 1) powr real (card (uedges H)) =\n  (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (real n powr -(1 / (?e / ?v)) * p n powr -1) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n     p n powr - 1) powr\n    real (card (uedges H)) =\n    (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n     p n powr - 1) powr\n    real (card (uedges H))", "by simp"], ["proof (state)\nthis:\n  (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n   p n powr - 1) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  (real n powr - (real (card (uverts H)) / real (card (uedges H))) *\n   p n powr - 1) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> \\<le> (real n powr -(1 / max_density H) * p n powr -1) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n     p n powr - 1) powr\n    real (card (uedges H))\n    \\<le> (real n powr - (1 / max_density H) * p n powr - 1) powr\n          real (card (uedges H))", "apply (rule powr_mono2[OF _ _ mult_right_mono[OF powr_mono[OF le_imp_neg_le[OF divide_left_mono]]]])"], ["proof (prove)\ngoal (7 subgoals):\n 1. 0 \\<le> real (card (uedges H))\n 2. 0 \\<le> real n powr\n            - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n            p n powr - 1\n 3. real (card (uedges H)) / real (card (uverts H)) \\<le> max_density H\n 4. 0 \\<le> 1\n 5. 0 < max_density H * (real (card (uedges H)) / real (card (uverts H)))\n 6. 1 \\<le> real n\n 7. 0 \\<le> p n powr - 1", "using n v_e_nz p p_nz"], ["proof (prove)\nusing this:\n  1 \\<le> n\n  0 < real (card (uverts H))\n  0 < real (card (uedges H))\n  valid_prob_fun p\n  nonzero_prob_fun p\n\ngoal (7 subgoals):\n 1. 0 \\<le> real (card (uedges H))\n 2. 0 \\<le> real n powr\n            - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n            p n powr - 1\n 3. real (card (uedges H)) / real (card (uverts H)) \\<le> max_density H\n 4. 0 \\<le> 1\n 5. 0 < max_density H * (real (card (uedges H)) / real (card (uverts H)))\n 6. 1 \\<le> real n\n 7. 0 \\<le> p n powr - 1", "by (auto simp:\n              max_density_is_max[unfolded density_def, OF finite finite nonempty wellformed subgraph_refl]\n              max_density_gr_zero[OF finite nonempty wellformed])"], ["proof (state)\nthis:\n  (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n  \\<le> (real n powr - (1 / max_density H) * p n powr - 1) powr\n        real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / (real (card (uedges H)) / real (card (uverts H)))) *\n   p n powr - 1) powr\n  real (card (uedges H))\n  \\<le> (real n powr - (1 / max_density H) * p n powr - 1) powr\n        real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (real n powr -(1 / max_density H) * (1 / p n powr 1)) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) * p n powr - 1) powr\n    real (card (uedges H)) =\n    (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n    real (card (uedges H))", "by (simp add: powr_minus_divide[symmetric])"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (real n powr -(1 / max_density H) / p n) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n    real (card (uedges H)) =\n    (real n powr - (1 / max_density H) / p n) powr real (card (uedges H))", "using p p_nz"], ["proof (prove)\nusing this:\n  valid_prob_fun p\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n    real (card (uedges H)) =\n    (real n powr - (1 / max_density H) / p n) powr real (card (uedges H))", "by simp"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / max_density H) / p n) powr real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  real (card (uedges H)) =\n  (real n powr - (1 / max_density H) / p n) powr real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "have \"\\<dots> = (subgraph_threshold H n / p n) powr ?e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) / p n) powr real (card (uedges H)) =\n    (subgraph_threshold H n / p n) powr real (card (uedges H))", "unfolding subgraph_threshold_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) / p n) powr real (card (uedges H)) =\n    (real n powr - (1 / max_density H) / p n) powr real (card (uedges H))", ".."], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) / p n) powr real (card (uedges H)) =\n  (subgraph_threshold H n / p n) powr real (card (uedges H))\n\ngoal (2 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       1 / (real x ^ card (uverts H) * p x ^ card (uedges H)) \\<le> ?g x", "finally"], ["proof (chain)\npicking this:\n  1 / (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> (subgraph_threshold H n / p n) powr real (card (uedges H))", "show \"1 / (real n ^ ?v * p n ^ ?e) \\<le> (subgraph_threshold H n / p n) powr ?e\""], ["proof (prove)\nusing this:\n  1 / (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> (subgraph_threshold H n / p n) powr real (card (uedges H))\n\ngoal (1 subgoal):\n 1. 1 / (real n ^ card (uverts H) * p n ^ card (uedges H))\n    \\<le> (subgraph_threshold H n / p n) powr real (card (uedges H))", "."], ["proof (state)\nthis:\n  1 / (real n ^ card (uverts H) * p n ^ card (uedges H))\n  \\<le> (subgraph_threshold H n / p n) powr real (card (uedges H))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (subgraph_threshold H x / p x) powr real (card (uedges H)))\n    \\<longlonglongrightarrow> 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (subgraph_threshold H x / p x) powr real (card (uedges H)))\n    \\<longlonglongrightarrow> 0", "show \"(\\<lambda>n. (subgraph_threshold H n / p n) powr real (card (uedges H))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. (subgraph_threshold H n / p n) powr real (card (uedges H)))\n    \\<longlonglongrightarrow> 0", "using p_threshold p_nz v_e_nz"], ["proof (prove)\nusing this:\n  subgraph_threshold H \\<lless> p\n  nonzero_prob_fun p\n  0 < real (card (uverts H))\n  0 < real (card (uedges H))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. (subgraph_threshold H n / p n) powr real (card (uedges H)))\n    \\<longlonglongrightarrow> 0", "by (auto simp: subgraph_threshold_def divide_nonneg_pos intro!: tendsto_zero_powrI)"], ["proof (state)\nthis:\n  (\\<lambda>n. (subgraph_threshold H n / p n) powr real (card (uedges H)))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n. real n ^ card (uverts H) * p n ^ card (uedges H))\n\ngoal (3 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?g n", "hence \"(\\<lambda>n. ?v ^ ?v * (1 / (real n ^ ?v * p n ^ ?e))) \\<longlonglongrightarrow> real (?v ^ ?v) * 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n. real n ^ card (uverts H) * p n ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real n ^ card (uverts H) * p n ^ card (uedges H))))\n    \\<longlonglongrightarrow> real (card (uverts H) ^ card (uverts H)) * 0", "by (rule LIMSEQ_const_mult)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real (card (uverts H) ^ card (uverts H)) *\n      (1 / (real n ^ card (uverts H) * p n ^ card (uedges H))))\n  \\<longlonglongrightarrow> real (card (uverts H) ^ card (uverts H)) * 0\n\ngoal (3 subgoals):\n 1. ?g \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?g n", "thus \"(\\<lambda>n. ?v ^ ?v * (1 / (real n ^ ?v * p n ^ ?e))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      real (card (uverts H) ^ card (uverts H)) *\n      (1 / (real n ^ card (uverts H) * p n ^ card (uedges H))))\n  \\<longlonglongrightarrow> real (card (uverts H) ^ card (uverts H)) * 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real n ^ card (uverts H) * p n ^ card (uedges H))))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real (card (uverts H) ^ card (uverts H)) *\n      (1 / (real n ^ card (uverts H) * p n ^ card (uedges H))))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "show \"\\<forall>\\<^sup>\\<infinity>n. 0 \\<le> 1 / prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> 1 /\n               prob_space_with_indicators.\\<mu> (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})", "by (rule eventually_sequentiallyI[OF less_imp_le[OF divide_pos_pos[OF _ prob_space_with_indicators.\\<mu>_non_zero[OF facts(2)]]]]) simp+"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     0 \\<le> 1 /\n             prob_space_with_indicators.\\<mu> (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "show \"\\<forall>\\<^sup>\\<infinity>n. 1 / prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n) \\<le> ?v ^ ?v * (1 / (real n ^ ?v * p n ^ ?e))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "using facts(7)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 /\n  prob_space_with_indicators.\\<mu> (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> real (card (uverts H) ^ card (uverts H)) *\n        (1 / (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       1 /\n       prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> real (card (uverts H) ^ card (uverts H)) *\n             (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))", "by (rule eventually_sequentiallyI)"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     1 /\n     prob_space_with_indicators.\\<mu> (MGn p n)\n      {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n      (\\<lambda>S.\n          {es \\<in> space (MGn p n).\n           subgraph (f S)\n            (induced_subgraph S (edge_space.edge_ugraph n es))})\n     \\<le> real (card (uverts H) ^ card (uverts H)) *\n           (1 / (real n ^ card (uverts H) * p n ^ card (uedges H)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}))\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "have \"(\\<lambda>n. prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n) (?I n) (?A n)) \\<lless> (\\<lambda>n. (prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n))^2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n         {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p n).\n              subgraph (f S)\n               (induced_subgraph S\n                 (edge_space.edge_ugraph n es))})) \\<lless>\n    (\\<lambda>n.\n        (prob_space_with_indicators.\\<mu> (MGn p n)\n          {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n          (\\<lambda>S.\n              {es \\<in> space (MGn p n).\n               subgraph (f S)\n                (induced_subgraph S\n                  (edge_space.edge_ugraph n es))}))\\<^sup>2)", "proof (rule less_fun_bounds)"], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "let ?num = \"\\<lambda>n k. ?v ^ k * (real n ^ (2 * ?v - k) * p n powr (2 * ?e - max_density H * k))\""], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "let ?den = \"\\<lambda>n. ((1 / ?v ^ ?v) * (real n ^ ?v * p n ^ ?e))^2\"\n\n      \\<comment> \\<open>We have to show that a sum is asymptotically smaller than a constant term. We do that by\n           showing that each summand is asymptotically smaller than the term.\\<close>"], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "{"], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "fix k"], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "assume k: \"k \\<in> {1..?v}\""], ["proof (state)\nthis:\n  k \\<in> {1..card (uverts H)}\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "let ?den' = \"\\<lambda>n. (1 / ?v ^ ?v)^2 * (real n ^ (2 * ?v) * p n ^ (2 * ?e))\""], ["proof (state)\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "have den': \"?den' = ?den\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 *\n        (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))) =\n    (\\<lambda>n.\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)", "by (subst power_mult_distrib) (simp add: power_mult_distrib power_even_eq)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 *\n      (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))) =\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "have \"(\\<lambda>n. ?num n k) \\<lless> ?den'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real (card (uverts H) ^ k) *\n        (real n ^ (2 * card (uverts H) - k) *\n         p n powr\n         (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n    (\\<lambda>n.\n        (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 *\n        (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))))", "proof (rule less_fun_const_quot)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        real n ^ (2 * card (uverts H) - k) *\n        p n powr\n        (real (2 * card (uedges H)) - max_density H * real k)) \\<lless>\n    (\\<lambda>n.\n        real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))\n 2. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "have \"(\\<lambda>n. (subgraph_threshold H n / p n) powr (max_density H * k)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (subgraph_threshold H n / p n) powr (max_density H * real k))\n    \\<longlonglongrightarrow> 0", "using p_threshold mult_pos_pos[OF max_density_gr_zero[OF finite nonempty wellformed]] p_nz k"], ["proof (prove)\nusing this:\n  subgraph_threshold H \\<lless> p\n  0 < ?b \\<Longrightarrow> 0 < max_density H * ?b\n  nonzero_prob_fun p\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (subgraph_threshold H n / p n) powr (max_density H * real k))\n    \\<longlonglongrightarrow> 0", "by (auto simp: subgraph_threshold_def divide_nonneg_pos intro!: tendsto_zero_powrI)"], ["proof (state)\nthis:\n  (\\<lambda>n. (subgraph_threshold H n / p n) powr (max_density H * real k))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        real n ^ (2 * card (uverts H) - k) *\n        p n powr\n        (real (2 * card (uedges H)) - max_density H * real k)) \\<lless>\n    (\\<lambda>n.\n        real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))\n 2. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "thus \"(\\<lambda>n. (real n ^ (2 * ?v - k) * p n powr (2 * ?e - max_density H * k)) / (real n ^ (2 * ?v) * p n ^ (2 * ?e))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. (subgraph_threshold H n / p n) powr (max_density H * real k))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real n ^ (2 * card (uverts H) - k) *\n        p n powr\n        (real (2 * card (uedges H)) - max_density H * real k)) \\<lless>\n    (\\<lambda>n.\n        real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))", "proof (rule LIMSEQ_cong[OF _ eventually_sequentiallyI])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "fix n :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "assume n: \"1 \\<le> n\""], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"(real n ^ (2 * ?v - k) * p n powr (2 * ?e - max_density H * k)) / (real n ^ (2 * ?v) * p n ^ (2 * ?e)) =\n                      (n powr (2 * ?v - k) * p n powr (2 * ?e - max_density H * k)) / (n powr (2 * ?v) * p n powr (2 * ?e))\" (is \"?lhs = _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. real n ^ (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n    real n powr real (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n powr real (2 * card (uverts H)) *\n     p n powr real (2 * card (uedges H)))", "using n p_nz"], ["proof (prove)\nusing this:\n  1 \\<le> n\n  nonzero_prob_fun p\n\ngoal (1 subgoal):\n 1. real n ^ (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n    real n powr real (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n powr real (2 * card (uverts H)) *\n     p n powr real (2 * card (uedges H)))", "by (simp add: powr_realpow[symmetric])"], ["proof (state)\nthis:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  real n powr real (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n powr real (2 * card (uverts H)) *\n   p n powr real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  real n powr real (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n powr real (2 * card (uverts H)) *\n   p n powr real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr (2 * ?v - k) / n powr (2 * ?v)) * (p n powr (2 * ?e - max_density H * k) / (p n powr (2 * ?e)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr real (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n powr real (2 * card (uverts H)) *\n     p n powr real (2 * card (uedges H))) =\n    real n powr real (2 * card (uverts H) - k) /\n    real n powr real (2 * card (uverts H)) *\n    (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n     p n powr real (2 * card (uedges H)))", "by simp"], ["proof (state)\nthis:\n  real n powr real (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n powr real (2 * card (uverts H)) *\n   p n powr real (2 * card (uedges H))) =\n  real n powr real (2 * card (uverts H) - k) /\n  real n powr real (2 * card (uverts H)) *\n  (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n   p n powr real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n powr real (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n powr real (2 * card (uverts H)) *\n   p n powr real (2 * card (uedges H))) =\n  real n powr real (2 * card (uverts H) - k) /\n  real n powr real (2 * card (uverts H)) *\n  (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n   p n powr real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr (real (2 * ?v - k) - 2 * ?v)) * p n powr ((2 * ?e - max_density H * k) - (2 * ?e))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr real (2 * card (uverts H) - k) /\n    real n powr real (2 * card (uverts H)) *\n    (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n     p n powr real (2 * card (uedges H))) =\n    real n powr\n    (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n    p n powr\n    (real (2 * card (uedges H)) - max_density H * real k -\n     real (2 * card (uedges H)))", "by (simp add: powr_diff [symmetric] )"], ["proof (state)\nthis:\n  real n powr real (2 * card (uverts H) - k) /\n  real n powr real (2 * card (uverts H)) *\n  (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n   p n powr real (2 * card (uedges H))) =\n  real n powr\n  (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n powr real (2 * card (uverts H) - k) /\n  real n powr real (2 * card (uverts H)) *\n  (p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n   p n powr real (2 * card (uedges H))) =\n  real n powr\n  (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = n powr -real k * p n powr ((2 * ?e - max_density H * k) - (2 * ?e))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr\n    (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n    p n powr\n    (real (2 * card (uedges H)) - max_density H * real k -\n     real (2 * card (uedges H))) =\n    real n powr - real k *\n    p n powr\n    (real (2 * card (uedges H)) - max_density H * real k -\n     real (2 * card (uedges H)))", "apply (rule arg_cong[where y = \"- real k\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (2 * card (uverts H) - k) - real (2 * card (uverts H)) = - real k", "using k"], ["proof (prove)\nusing this:\n  k \\<in> {1..card (uverts H)}\n\ngoal (1 subgoal):\n 1. real (2 * card (uverts H) - k) - real (2 * card (uverts H)) = - real k", "by fastforce"], ["proof (state)\nthis:\n  real n powr\n  (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H))) =\n  real n powr - real k *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n powr\n  (real (2 * card (uverts H) - k) - real (2 * card (uverts H))) *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H))) =\n  real n powr - real k *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = n powr -real k * p n powr - (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr - real k *\n    p n powr\n    (real (2 * card (uedges H)) - max_density H * real k -\n     real (2 * card (uedges H))) =\n    real n powr - real k * p n powr - (max_density H * real k)", "by simp"], ["proof (state)\nthis:\n  real n powr - real k *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H))) =\n  real n powr - real k * p n powr - (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n powr - real k *\n  p n powr\n  (real (2 * card (uedges H)) - max_density H * real k -\n   real (2 * card (uedges H))) =\n  real n powr - real k * p n powr - (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr -(1 / max_density H)) powr (max_density H * k) * p n powr - (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n powr - real k * p n powr - (max_density H * real k) =\n    (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n    p n powr - (max_density H * real k)", "using max_density_gr_zero[OF finite nonempty wellformed]"], ["proof (prove)\nusing this:\n  0 < max_density H\n\ngoal (1 subgoal):\n 1. real n powr - real k * p n powr - (max_density H * real k) =\n    (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n    p n powr - (max_density H * real k)", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  real n powr - real k * p n powr - (max_density H * real k) =\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  p n powr - (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  real n powr - real k * p n powr - (max_density H * real k) =\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  p n powr - (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr -(1 / max_density H)) powr (max_density H * k) * (p n powr -1) powr (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n    p n powr - (max_density H * real k) =\n    (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n    (p n powr - 1) powr (max_density H * real k)", "by (simp add: powr_powr)"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  p n powr - (max_density H * real k) =\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  (p n powr - 1) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  p n powr - (max_density H * real k) =\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  (p n powr - 1) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr -(1 / max_density H) * p n powr -1) powr (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n    (p n powr - 1) powr (max_density H * real k) =\n    (real n powr - (1 / max_density H) * p n powr - 1) powr\n    (max_density H * real k)", "by (simp add: powr_mult)"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  (p n powr - 1) powr (max_density H * real k) =\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H)) powr (max_density H * real k) *\n  (p n powr - 1) powr (max_density H * real k) =\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr -(1 / max_density H) * (1 / p n powr 1)) powr (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) * p n powr - 1) powr\n    (max_density H * real k) =\n    (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n    (max_density H * real k)", "by (simp add: powr_minus_divide[symmetric])"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  (max_density H * real k) =\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * p n powr - 1) powr\n  (max_density H * real k) =\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (n powr -(1 / max_density H) / p n) powr (max_density H * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n    (max_density H * real k) =\n    (real n powr - (1 / max_density H) / p n) powr (max_density H * real k)", "by (simp add: p p_nz)"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  (max_density H * real k) =\n  (real n powr - (1 / max_density H) / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "also"], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) * (1 / p n powr 1)) powr\n  (max_density H * real k) =\n  (real n powr - (1 / max_density H) / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "have \"\\<dots> = (subgraph_threshold H n / p n) powr (max_density H * k)\" (is \"_ = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) / p n) powr\n    (max_density H * real k) =\n    (subgraph_threshold H n / p n) powr (max_density H * real k)", "unfolding subgraph_threshold_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (real n powr - (1 / max_density H) / p n) powr\n    (max_density H * real k) =\n    (real n powr - (1 / max_density H) / p n) powr (max_density H * real k)", ".."], ["proof (state)\nthis:\n  (real n powr - (1 / max_density H) / p n) powr (max_density H * real k) =\n  (subgraph_threshold H n / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "finally"], ["proof (chain)\npicking this:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  (subgraph_threshold H n / p n) powr (max_density H * real k)", "have \"?lhs = ?rhs\""], ["proof (prove)\nusing this:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  (subgraph_threshold H n / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. real n ^ (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n    (subgraph_threshold H n / p n) powr (max_density H * real k)", "."], ["proof (state)\nthis:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  (subgraph_threshold H n / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (subgraph_threshold H x / p x) powr (max_density H * real k) =\n       real x ^ (2 * card (uverts H) - k) *\n       p x powr (real (2 * card (uedges H)) - max_density H * real k) /\n       (real x ^ (2 * card (uverts H)) * p x ^ (2 * card (uedges H)))", "thus \"?rhs = ?lhs\""], ["proof (prove)\nusing this:\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))) =\n  (subgraph_threshold H n / p n) powr (max_density H * real k)\n\ngoal (1 subgoal):\n 1. (subgraph_threshold H n / p n) powr (max_density H * real k) =\n    real n ^ (2 * card (uverts H) - k) *\n    p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n    (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))", "by simp"], ["proof (state)\nthis:\n  (subgraph_threshold H n / p n) powr (max_density H * real k) =\n  real n ^ (2 * card (uverts H) - k) *\n  p n powr (real (2 * card (uedges H)) - max_density H * real k) /\n  (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real n ^ (2 * card (uverts H) - k) *\n      p n powr\n      (real (2 * card (uedges H)) - max_density H * real k)) \\<lless>\n  (\\<lambda>n. real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H)))\n\ngoal (1 subgoal):\n 1. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "show \"(1 / ?v ^ ?v)^2 \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "using vpowv_inv_gr_z"], ["proof (prove)\nusing this:\n  0 < 1 / real (card (uverts H) ^ card (uverts H))\n\ngoal (1 subgoal):\n 1. (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real (card (uverts H) ^ k) *\n      (real n ^ (2 * card (uverts H) - k) *\n       p n powr\n       (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 *\n      (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))))\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "hence \"(\\<lambda>n. ?num n k) \\<lless> ?den\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      real (card (uverts H) ^ k) *\n      (real n ^ (2 * card (uverts H) - k) *\n       p n powr\n       (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)))\\<^sup>2 *\n      (real n ^ (2 * card (uverts H)) * p n ^ (2 * card (uedges H))))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real (card (uverts H) ^ k) *\n        (real n ^ (2 * card (uverts H) - k) *\n         p n powr\n         (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n    (\\<lambda>n.\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)", "by (rule subst[OF den'])"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real (card (uverts H) ^ k) *\n      (real n ^ (2 * card (uverts H) - k) *\n       p n powr\n       (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "}"], ["proof (state)\nthis:\n  ?k3 \\<in> {1..card (uverts H)} \\<Longrightarrow>\n  (\\<lambda>n.\n      real (card (uverts H) ^ ?k3) *\n      (real n ^ (2 * card (uverts H) - ?k3) *\n       p n powr\n       (real (2 * card (uedges H)) - max_density H * real ?k3))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "hence \"(\\<lambda>n. \\<Sum>k = 1..?v. ?num n k / ?den n) \\<longlonglongrightarrow> (\\<Sum>k = 1..?v. 0)\""], ["proof (prove)\nusing this:\n  ?k3 \\<in> {1..card (uverts H)} \\<Longrightarrow>\n  (\\<lambda>n.\n      real (card (uverts H) ^ ?k3) *\n      (real n ^ (2 * card (uverts H) - ?k3) *\n       p n powr\n       (real (2 * card (uedges H)) - max_density H * real ?k3))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k = 1..card (uverts H).\n           real (card (uverts H) ^ k) *\n           (real n ^ (2 * card (uverts H) - k) *\n            p n powr\n            (real (2 * card (uedges H)) - max_density H * real k)) /\n           (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n    \\<longlonglongrightarrow> (\\<Sum>k = 1..card (uverts H). 0)", "by (rule tendsto_sum)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> (\\<Sum>k = 1..card (uverts H). 0)\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "hence \"(\\<lambda>n. \\<Sum>k = 1..?v. ?num n k / ?den n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> (\\<Sum>k = 1..card (uverts H). 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k = 1..card (uverts H).\n           real (card (uverts H) ^ k) *\n           (real n ^ (2 * card (uverts H) - k) *\n            p n powr\n            (real (2 * card (uedges H)) - max_density H * real k)) /\n           (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "have \"(\\<lambda>n. \\<Sum>k = 1..?v. ?num n k / ?den n) = (\\<lambda>n. (\\<Sum>k = 1..?v. ?num n k) / ?den n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k = 1..card (uverts H).\n           real (card (uverts H) ^ k) *\n           (real n ^ (2 * card (uverts H) - k) *\n            p n powr\n            (real (2 * card (uedges H)) - max_density H * real k)) /\n           (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2) =\n    (\\<lambda>n.\n        (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real n ^ (2 * card (uverts H) - k) *\n             p n powr\n             (real (2 * card (uedges H)) - max_density H * real k))) /\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)", "by (simp add: sum_left_div_distrib)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2) =\n  (\\<lambda>n.\n      (\\<Sum>k = 1..card (uverts H).\n          real (card (uverts H) ^ k) *\n          (real n ^ (2 * card (uverts H) - k) *\n           p n powr\n           (real (2 * card (uedges H)) - max_density H * real k))) /\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (6 subgoals):\n 1. ?f' \\<lless> ?g'\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> ?f' n\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       ?g' n\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 6. \\<forall>\\<^sup>\\<infinity>n. 0 < ?g' n", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2) =\n  (\\<lambda>n.\n      (\\<Sum>k = 1..card (uverts H).\n          real (card (uverts H) ^ k) *\n          (real n ^ (2 * card (uverts H) - k) *\n           p n powr\n           (real (2 * card (uedges H)) - max_density H * real k))) /\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)", "show \"(\\<lambda>n. \\<Sum>k = 1..?v. ?num n k) \\<lless> ?den\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr (real (2 * card (uedges H)) - max_density H * real k)) /\n         (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2) =\n  (\\<lambda>n.\n      (\\<Sum>k = 1..card (uverts H).\n          real (card (uverts H) ^ k) *\n          (real n ^ (2 * card (uverts H) - k) *\n           p n powr\n           (real (2 * card (uedges H)) - max_density H * real k))) /\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k = 1..card (uverts H).\n           real (card (uverts H) ^ k) *\n           (real n ^ (2 * card (uverts H) - k) *\n            p n powr\n            (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n    (\\<lambda>n.\n        (1 / real (card (uverts H) ^ card (uverts H)) *\n         (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)", "by metis"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k = 1..card (uverts H).\n         real (card (uverts H) ^ k) *\n         (real n ^ (2 * card (uverts H) - k) *\n          p n powr\n          (real (2 * card (uedges H)) - max_density H * real k))) \\<lless>\n  (\\<lambda>n.\n      (1 / real (card (uverts H) ^ card (uverts H)) *\n       (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2)\n\ngoal (5 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> (\\<Sum>k = 1..card (uverts H).\n                 real (card (uverts H) ^ k) *\n                 (real n ^ (2 * card (uverts H) - k) *\n                  p n powr\n                  (real (2 * card (uedges H)) - max_density H * real k)))\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       (1 / real (card (uverts H) ^ card (uverts H)) *\n        (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 5. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n) (?I n) (?A n) \\<le> (\\<Sum>k = 1..?v. ?num n k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> (\\<Sum>k = 1..card (uverts H).\n                 real (card (uverts H) ^ k) *\n                 (real n ^ (2 * card (uverts H) - k) *\n                  p n powr\n                  (real (2 * card (uedges H)) - max_density H * real k)))", "using facts(8)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  \\<le> (\\<Sum>k = 1..card (uverts H).\n            real (card (uverts H) ^ k) *\n            (real ?n3 ^ (2 * card (uverts H) - k) *\n             p ?n3 powr\n             (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))})\n       \\<le> (\\<Sum>k = 1..card (uverts H).\n                 real (card (uverts H) ^ k) *\n                 (real n ^ (2 * card (uverts H) - k) *\n                  p n powr\n                  (real (2 * card (uedges H)) - max_density H * real k)))", "by (rule eventually_sequentiallyI)"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n      {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n      (\\<lambda>S.\n          {es \\<in> space (MGn p n).\n           subgraph (f S)\n            (induced_subgraph S (edge_space.edge_ugraph n es))})\n     \\<le> (\\<Sum>k = 1..card (uverts H).\n               real (card (uverts H) ^ k) *\n               (real n ^ (2 * card (uverts H) - k) *\n                p n powr\n                (real (2 * card (uedges H)) - max_density H * real k)))\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       (1 / real (card (uverts H) ^ card (uverts H)) *\n        (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 4. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. ?den n \\<le> (prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n))^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       (1 / real (card (uverts H) ^ card (uverts H)) *\n        (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "using facts(5) facts(6)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  1 / real (card (uverts H) ^ card (uverts H)) *\n  (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n  \\<le> prob_space_with_indicators.\\<mu> (MGn p ?n3)\n         {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p ?n3).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       (1 / real (card (uverts H) ^ card (uverts H)) *\n        (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n       \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "by (rule eventually_sequentiallyI[OF power_mono[OF _ less_imp_le]])"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     (1 / real (card (uverts H) ^ card (uverts H)) *\n      (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n     \\<le> (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n\ngoal (3 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 3. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. 0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n) (?I n) (?A n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})", "using facts(2)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n                {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n                (\\<lambda>S.\n                    {es \\<in> space (MGn p n).\n                     subgraph (f S)\n                      (induced_subgraph S (edge_space.edge_ugraph n es))})", "by (rule eventually_sequentiallyI[OF prob_space_with_indicators.\\<Delta>\\<^sub>d_nonneg])"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     0 \\<le> prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))})\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. 0 < (prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n))^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2", "using facts(2)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  prob_space_with_indicators (MGn p ?n3)\n   {S. S \\<subseteq> {1..?n3} \\<and> card S = card (uverts H)}\n   (\\<lambda>S.\n       {es \\<in> space (MGn p ?n3).\n        subgraph (f S)\n         (induced_subgraph S (edge_space.edge_ugraph ?n3 es))})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2", "by (rule eventually_sequentiallyI[OF prob_space_with_indicators.\\<mu>_sq_non_zero])"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     0 < (prob_space_with_indicators.\\<mu> (MGn p n)\n           {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n           (\\<lambda>S.\n               {es \\<in> space (MGn p n).\n                subgraph (f S)\n                 (induced_subgraph S\n                   (edge_space.edge_ugraph n es))}))\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. 0 < ?den n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "using facts(6)"], ["proof (prove)\nusing this:\n  2 * card (uverts H) \\<le> ?n3 \\<Longrightarrow>\n  0 < 1 / real (card (uverts H) ^ card (uverts H)) *\n      (real ?n3 ^ card (uverts H) * p ?n3 ^ card (uedges H))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n            (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2", "by (rule eventually_sequentiallyI[OF zero_less_power])"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     0 < (1 / real (card (uverts H) ^ card (uverts H)) *\n          (real n ^ card (uverts H) * p n ^ card (uedges H)))\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))})) \\<lless>\n  (\\<lambda>n.\n      (prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))}))\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}))\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))})) \\<lless>\n  (\\<lambda>n.\n      (prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))}))\\<^sup>2)", "have \"(\\<lambda>n.\n      1 / prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n) +\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n) (?I n) (?A n) / (prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n))^2\n    ) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. 1) \\<lless>\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}))\n  (\\<lambda>n.\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))})) \\<lless>\n  (\\<lambda>n.\n      (prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))}))\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        1 /\n        prob_space_with_indicators.\\<mu> (MGn p n)\n         {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p n).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n        prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n         {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n         (\\<lambda>S.\n             {es \\<in> space (MGn p n).\n              subgraph (f S)\n               (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n        (prob_space_with_indicators.\\<mu> (MGn p n)\n          {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n          (\\<lambda>S.\n              {es \\<in> space (MGn p n).\n               subgraph (f S)\n                (induced_subgraph S\n                  (edge_space.edge_ugraph n es))}))\\<^sup>2)\n    \\<longlonglongrightarrow> 0", "by (subst add_0_left[where a = 0, symmetric]) (rule tendsto_add)\n\n  \\<comment> \\<open>By now, we can actually perform the reduction mentioned above.\\<close>"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      1 /\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n      (prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))}))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence \"(\\<lambda>n. probGn p n (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      1 /\n      prob_space_with_indicators.\\<mu> (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n      prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n       {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n       (\\<lambda>S.\n           {es \\<in> space (MGn p n).\n            subgraph (f S)\n             (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n      (prob_space_with_indicators.\\<mu> (MGn p n)\n        {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n        (\\<lambda>S.\n            {es \\<in> space (MGn p n).\n             subgraph (f S)\n              (induced_subgraph S (edge_space.edge_ugraph n es))}))\\<^sup>2)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        probGn p n\n         (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n    \\<longlonglongrightarrow> 0", "proof (rule LIMSEQ_le_zero)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> probGn p n\n                (\\<lambda>es.\n                    \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n 2. \\<forall>\\<^sup>\\<infinity>n.\n       probGn p n\n        (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n       \\<le> 1 /\n             prob_space_with_indicators.\\<mu> (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n             prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n             (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n. 0 \\<le> probGn p n (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       0 \\<le> probGn p n\n                (\\<lambda>es.\n                    \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)", "by (rule eventually_sequentiallyI) (rule measure_nonneg)"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     0 \\<le> probGn p n\n              (\\<lambda>es.\n                  \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       probGn p n\n        (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n       \\<le> 1 /\n             prob_space_with_indicators.\\<mu> (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n             prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n             (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       probGn p n\n        (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n       \\<le> 1 /\n             prob_space_with_indicators.\\<mu> (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n             prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n             (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "show \"\\<forall>\\<^sup>\\<infinity>n.\n        probGn p n (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es) \\<le>\n          1 / prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n) +\n          prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n) (?I n) (?A n) / (prob_space_with_indicators.\\<mu> (MGn p n) (?I n) (?A n))^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sup>\\<infinity>n.\n       probGn p n\n        (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n       \\<le> 1 /\n             prob_space_with_indicators.\\<mu> (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n             prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n              {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n              (\\<lambda>S.\n                  {es \\<in> space (MGn p n).\n                   subgraph (f S)\n                    (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n             (prob_space_with_indicators.\\<mu> (MGn p n)\n               {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n               (\\<lambda>S.\n                   {es \\<in> space (MGn p n).\n                    subgraph (f S)\n                     (induced_subgraph S\n                       (edge_space.edge_ugraph n es))}))\\<^sup>2", "by (rule eventually_sequentiallyI[OF facts(4)])"], ["proof (state)\nthis:\n  \\<forall>\\<^sup>\\<infinity>n.\n     probGn p n\n      (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)\n     \\<le> 1 /\n           prob_space_with_indicators.\\<mu> (MGn p n)\n            {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n            (\\<lambda>S.\n                {es \\<in> space (MGn p n).\n                 subgraph (f S)\n                  (induced_subgraph S (edge_space.edge_ugraph n es))}) +\n           prob_space_with_indicators.\\<Delta>\\<^sub>d (MGn p n)\n            {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n            (\\<lambda>S.\n                {es \\<in> space (MGn p n).\n                 subgraph (f S)\n                  (induced_subgraph S (edge_space.edge_ugraph n es))}) /\n           (prob_space_with_indicators.\\<mu> (MGn p n)\n             {S. S \\<subseteq> {1..n} \\<and> card S = card (uverts H)}\n             (\\<lambda>S.\n                 {es \\<in> space (MGn p n).\n                  subgraph (f S)\n                   (induced_subgraph S\n                     (edge_space.edge_ugraph n es))}))\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      probGn p n\n       (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "hence \"(\\<lambda>n. 1 - probGn p n (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es)) \\<longlonglongrightarrow> 1\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      probGn p n\n       (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        1 -\n        probGn p n\n         (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n    \\<longlonglongrightarrow> 1", "using tendsto_diff[OF tendsto_const]"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      probGn p n\n       (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n  \\<longlonglongrightarrow> 0\n  (?g \\<longlongrightarrow> ?b) ?F \\<Longrightarrow>\n  ((\\<lambda>x. ?a - ?g x) \\<longlongrightarrow> ?a - ?b) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        1 -\n        probGn p n\n         (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n    \\<longlonglongrightarrow> 1", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      1 -\n      probGn p n\n       (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n  \\<longlonglongrightarrow> 1\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       \\<lbrakk>nonzero_prob_fun p; subgraph_threshold H \\<lless> p\\<rbrakk>\n       \\<Longrightarrow> prob_in_class p {G. H \\<sqsubseteq> G}\n                         \\<longlonglongrightarrow> 1", "thus \"prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 1\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      1 -\n      probGn p n\n       (\\<lambda>es. \\<not> H \\<sqsubseteq> edge_space.edge_ugraph n es))\n  \\<longlonglongrightarrow> 1\n\ngoal (1 subgoal):\n 1. prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 1", "by (rule LIMSEQ_cong[OF _ eventually_sequentiallyI[OF facts(3)]])"], ["proof (state)\nthis:\n  prob_in_class p {G. H \\<sqsubseteq> G} \\<longlonglongrightarrow> 1\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}