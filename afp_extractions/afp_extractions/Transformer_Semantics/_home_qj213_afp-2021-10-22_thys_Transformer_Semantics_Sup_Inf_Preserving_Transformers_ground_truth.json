{"file_name": "/home/qj213/afp-2021-10-22/thys/Transformer_Semantics/Sup_Inf_Preserving_Transformers.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Transformer_Semantics", "problem_names": ["lemma Sup_pres_iso: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_pres f \\<Longrightarrow> mono f\"", "lemma Inf_pres_iso: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_pres f \\<Longrightarrow> mono f\"", "lemma sup_pres_iso: \n  fixes f :: \"'a::lattice \\<Rightarrow> 'b::lattice\"\n  shows \"sup_pres f \\<Longrightarrow> mono f\"", "lemma inf_pres_iso: \n  fixes f :: \"'a::lattice \\<Rightarrow> 'b::lattice\"\n  shows \"inf_pres f \\<Longrightarrow> mono f\"", "lemma Sup_sup_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_dual f \\<Longrightarrow> sup_dual f\"", "lemma Inf_inf_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_dual f \\<Longrightarrow> inf_dual f\"", "lemma Sup_bot_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows\"Sup_dual f \\<Longrightarrow> bot_dual f\"", "lemma Inf_top_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_dual f \\<Longrightarrow> top_dual f\"", "lemma Sup_dual2: \"Sup_dual f \\<Longrightarrow> Inf_dual g \\<Longrightarrow> Sup_pres (g \\<circ> f)\"", "lemma Inf_dual2: \"Sup_dual f \\<Longrightarrow> Inf_dual g \\<Longrightarrow> Inf_pres (f \\<circ> g)\"", "lemma Sup_pres_id: \"Sup_pres id\"", "lemma Inf_pres_id: \"Inf_pres id\"", "lemma Sup_pres_comp: \"Sup_pres f \\<Longrightarrow> Sup_pres g \\<Longrightarrow> Sup_pres (f \\<circ> g)\"", "lemma Inf_pres_comp: \"Inf_pres f \\<Longrightarrow> Inf_pres g \\<Longrightarrow> Inf_pres(f \\<circ> g)\"", "lemma Sup_pres_Sup: \n  fixes F :: \"('a::complete_lattice \\<Rightarrow> 'b::complete_lattice) set\"\n  shows \"\\<forall>f \\<in> F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion>F)\"", "lemma Inf_pres_Inf: \n  fixes F :: \"('a::complete_lattice \\<Rightarrow> 'b::complete_lattice) set\"\n  shows \"\\<forall>f \\<in> F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter>F)\"", "lemma Sup_pres_sup: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_pres f \\<Longrightarrow> Sup_pres g \\<Longrightarrow> Sup_pres (f \\<squnion> g)\"", "lemma Inf_pres_inf: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_pres f \\<Longrightarrow> Inf_pres g \\<Longrightarrow> Inf_pres (f \\<sqinter> g)\"", "lemma Sup_pres_botf: \"Sup_pres (\\<lambda>x. \\<bottom>::'a::complete_lattice)\"", "lemma \"Inf_pres (\\<lambda>x. \\<bottom>::'a::complete_lattice)\"", "lemma \"Sup_pres (\\<lambda>x. \\<top>::'a::complete_lattice)\"", "lemma Inf_pres_topf: \"Inf_pres (\\<lambda>x. \\<top>::'a::complete_lattice)\"", "lemma uminus_galois: \n  fixes f :: \"'a::complete_boolean_algebra \\<Rightarrow> 'b::complete_boolean_algebra_alt\"\n  shows \"(uminus f = g) = (uminus g = f)\"", "lemma uminus_galois_var: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(\\<partial> \\<circ> f = g) = (\\<partial> \\<circ> g = f)\"", "lemma uminus_galois_var2: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(f \\<circ> \\<partial> = g) = (g \\<circ> \\<partial> = f)\"", "lemma uminus_mono_iff: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(\\<partial> \\<circ> f = \\<partial> \\<circ> g) = (f = g)\"", "lemma uminus_epi_iff: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(f \\<circ> \\<partial> = g \\<circ> \\<partial>) = (f = g)\"", "lemma Inf_pres_Sup_pres: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(Inf_pres f) = (Sup_pres (\\<partial>\\<^sub>F f))\"", "lemma Sup_pres_Inf_pres: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(Sup_pres f) = (Inf_pres (\\<partial>\\<^sub>F f))\"", "lemma  H_Inf_pres_fpower:\n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<le> f x \\<Longrightarrow> x \\<le> fpower f i x\"", "lemma H_Inf_pres_fstar: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<le> f x \\<Longrightarrow> x \\<le> fstar f x\"", "lemma fpower_Inf_pres: \"Inf_pres f \\<Longrightarrow> Inf_pres (fpower f i)\"", "lemma fstar_Inf_pres: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> Inf_pres (fstar f)\"", "lemma fstar_unfoldl_var [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x\"", "lemma fstar_fiter_id: \"Inf_pres f \\<Longrightarrow> fstar f = fiter_id f\"", "lemma fstar_unfoldl [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> id \\<sqinter> (f \\<circ> fstar f) = fstar f\"", "lemma fpower_Inf_comm: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))\"", "lemma fstar_comm: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> f \\<circ> fstar f = fstar f \\<circ> f\"", "lemma fstar_unfoldr [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> id \\<sqinter> (fstar f \\<circ> f) = fstar f\""], "translations": [["", "lemma Sup_pres_iso: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_pres f \\<Longrightarrow> mono f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres f \\<Longrightarrow> mono f", "by (simp add: Sup_supdistl_iso)"], ["", "lemma Inf_pres_iso: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_pres f \\<Longrightarrow> mono f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> mono f", "by (simp add: Inf_subdistl_iso)"], ["", "lemma sup_pres_iso: \n  fixes f :: \"'a::lattice \\<Rightarrow> 'b::lattice\"\n  shows \"sup_pres f \\<Longrightarrow> mono f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sup_pres f \\<Longrightarrow> mono f", "by (metis le_iff_sup mono_def)"], ["", "lemma inf_pres_iso: \n  fixes f :: \"'a::lattice \\<Rightarrow> 'b::lattice\"\n  shows \"inf_pres f \\<Longrightarrow> mono f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inf_pres f \\<Longrightarrow> mono f", "by (metis inf.absorb_iff2 monoI)"], ["", "lemma Sup_sup_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_dual f \\<Longrightarrow> sup_dual f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_dual f \\<Longrightarrow> sup_dual f", "by (smt comp_eq_elim image_empty image_insert inf_Inf sup_Sup)"], ["", "lemma Inf_inf_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_dual f \\<Longrightarrow> inf_dual f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_dual f \\<Longrightarrow> inf_dual f", "by (smt comp_eq_elim image_empty image_insert inf_Inf sup_Sup)"], ["", "lemma Sup_bot_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows\"Sup_dual f \\<Longrightarrow> bot_dual f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_dual f \\<Longrightarrow> bot_dual f", "by (metis INF_empty Sup_empty comp_eq_elim)"], ["", "lemma Inf_top_dual: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_dual f \\<Longrightarrow> top_dual f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_dual f \\<Longrightarrow> top_dual f", "by (metis Inf_empty SUP_empty comp_eq_elim)"], ["", "text \\<open>Next I show some basic preservation properties.\\<close>"], ["", "lemma Sup_dual2: \"Sup_dual f \\<Longrightarrow> Inf_dual g \\<Longrightarrow> Sup_pres (g \\<circ> f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Sup_dual f; Inf_dual g\\<rbrakk>\n    \\<Longrightarrow> Sup_pres (g \\<circ> f)", "by (simp add: fun_eq_iff image_comp)"], ["", "lemma Inf_dual2: \"Sup_dual f \\<Longrightarrow> Inf_dual g \\<Longrightarrow> Inf_pres (f \\<circ> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Sup_dual f; Inf_dual g\\<rbrakk>\n    \\<Longrightarrow> Inf_pres (f \\<circ> g)", "by (simp add: fun_eq_iff image_comp)"], ["", "lemma Sup_pres_id: \"Sup_pres id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres id", "by simp"], ["", "lemma Inf_pres_id: \"Inf_pres id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres id", "by simp"], ["", "lemma Sup_pres_comp: \"Sup_pres f \\<Longrightarrow> Sup_pres g \\<Longrightarrow> Sup_pres (f \\<circ> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Sup_pres f; Sup_pres g\\<rbrakk>\n    \\<Longrightarrow> Sup_pres (f \\<circ> g)", "by (simp add: fun_eq_iff image_comp)"], ["", "lemma Inf_pres_comp: \"Inf_pres f \\<Longrightarrow> Inf_pres g \\<Longrightarrow> Inf_pres(f \\<circ> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Inf_pres f; Inf_pres g\\<rbrakk>\n    \\<Longrightarrow> Inf_pres (f \\<circ> g)", "by (simp add: fun_eq_iff image_comp)"], ["", "lemma Sup_pres_Sup: \n  fixes F :: \"('a::complete_lattice \\<Rightarrow> 'b::complete_lattice) set\"\n  shows \"\\<forall>f \\<in> F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion>F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion> F)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion> F)", "assume h: \"\\<forall>f \\<in> F. f \\<circ> Sup = Sup \\<circ> image f\""], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. Sup_pres f\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion> F)", "hence \"\\<forall>f \\<in> F. f \\<circ> Sup \\<le> Sup \\<circ> image (\\<Squnion>F)\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. Sup_pres f\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)", "by (simp add: SUP_subset_mono Sup_upper le_fun_def)"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion> F)", "hence \"(\\<Squnion>F) \\<circ> Sup \\<le> Sup \\<circ> image (\\<Squnion>F)\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. f \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)\n\ngoal (1 subgoal):\n 1. \\<Squnion> F \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)", "by (simp add: SUP_le_iff le_fun_def)"], ["proof (state)\nthis:\n  \\<Squnion> F \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Sup_pres f \\<Longrightarrow> Sup_pres (\\<Squnion> F)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Squnion> F \\<circ> Sup \\<le> Sup \\<circ> (`) (\\<Squnion> F)\n\ngoal (1 subgoal):\n 1. Sup_pres (\\<Squnion> F)", "by (simp add: Sup_pres_iso h antisym iso_Sup_supdistl iso_fSup)"], ["proof (state)\nthis:\n  Sup_pres (\\<Squnion> F)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Inf_pres_Inf: \n  fixes F :: \"('a::complete_lattice \\<Rightarrow> 'b::complete_lattice) set\"\n  shows \"\\<forall>f \\<in> F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter>F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter> F)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter> F)", "assume h: \"\\<forall>f \\<in> F. f \\<circ> Inf = Inf \\<circ> image f\""], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. Inf_pres f\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter> F)", "hence \"\\<forall>f \\<in> F. Inf \\<circ> image (\\<Sqinter>F) \\<le> f \\<circ> Inf\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. Inf_pres f\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf \\<circ> (`) (\\<Sqinter> F) \\<le> f \\<circ> Inf", "by (simp add: le_fun_def, safe, meson INF_lower INF_mono)"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. Inf \\<circ> (`) (\\<Sqinter> F) \\<le> f \\<circ> Inf\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter> F)", "hence \"Inf \\<circ> image (\\<Sqinter>F) \\<le> (\\<Sqinter>F) \\<circ> Inf\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. Inf \\<circ> (`) (\\<Sqinter> F) \\<le> f \\<circ> Inf\n\ngoal (1 subgoal):\n 1. Inf \\<circ> (`) (\\<Sqinter> F) \\<le> \\<Sqinter> F \\<circ> Inf", "by (simp add: le_INF_iff le_fun_def)"], ["proof (state)\nthis:\n  Inf \\<circ> (`) (\\<Sqinter> F) \\<le> \\<Sqinter> F \\<circ> Inf\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. Inf_pres f \\<Longrightarrow> Inf_pres (\\<Sqinter> F)", "thus ?thesis"], ["proof (prove)\nusing this:\n  Inf \\<circ> (`) (\\<Sqinter> F) \\<le> \\<Sqinter> F \\<circ> Inf\n\ngoal (1 subgoal):\n 1. Inf_pres (\\<Sqinter> F)", "by (simp add: Inf_pres_iso h antisym iso_Inf_subdistl iso_fInf)"], ["proof (state)\nthis:\n  Inf_pres (\\<Sqinter> F)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Sup_pres_sup: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Sup_pres f \\<Longrightarrow> Sup_pres g \\<Longrightarrow> Sup_pres (f \\<squnion> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Sup_pres f; Sup_pres g\\<rbrakk>\n    \\<Longrightarrow> Sup_pres (f \\<squnion> g)", "by (metis Sup_pres_Sup insert_iff singletonD sup_Sup)"], ["", "lemma Inf_pres_inf: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'b::complete_lattice\"\n  shows \"Inf_pres f \\<Longrightarrow> Inf_pres g \\<Longrightarrow> Inf_pres (f \\<sqinter> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Inf_pres f; Inf_pres g\\<rbrakk>\n    \\<Longrightarrow> Inf_pres (f \\<sqinter> g)", "by (metis Inf_pres_Inf inf_Inf insert_iff singletonD)"], ["", "lemma Sup_pres_botf: \"Sup_pres (\\<lambda>x. \\<bottom>::'a::complete_lattice)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres (\\<lambda>x. \\<bottom>)", "by (simp add: fun_eq_iff)"], ["", "text \\<open>It is important to note that $\\lambda x. \\bot$ is not Inf-preserving and that $\\lambda x. \\top$ is not Sup-preserving.\\<close>"], ["", "lemma \"Inf_pres (\\<lambda>x. \\<bottom>::'a::complete_lattice)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres (\\<lambda>x. \\<bottom>)", "(*nitpick[show_all]*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres (\\<lambda>x. \\<bottom>)", "oops"], ["", "lemma \"Sup_pres (\\<lambda>x. \\<top>::'a::complete_lattice)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres (\\<lambda>x. \\<top>)", "(*nitpick[show_all]*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres (\\<lambda>x. \\<top>)", "oops"], ["", "lemma Inf_pres_topf: \"Inf_pres (\\<lambda>x. \\<top>::'a::complete_lattice)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres (\\<lambda>x. \\<top>)", "by (simp add: fun_eq_iff)"], ["", "text \\<open>In complete boolean algebras, complementation yields an explicit variant of duality, which \ncan be expressed within the language.\\<close>"], ["", "lemma uminus_galois: \n  fixes f :: \"'a::complete_boolean_algebra \\<Rightarrow> 'b::complete_boolean_algebra_alt\"\n  shows \"(uminus f = g) = (uminus g = f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (- f = g) = (- g = f)", "using double_compl"], ["proof (prove)\nusing this:\n  - (- ?x) = ?x\n\ngoal (1 subgoal):\n 1. (- f = g) = (- g = f)", "by force"], ["", "lemma uminus_galois_var: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(\\<partial> \\<circ> f = g) = (\\<partial> \\<circ> g = f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<partial> \\<circ> f = g) = (\\<partial> \\<circ> g = f)", "by force"], ["", "lemma uminus_galois_var2: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(f \\<circ> \\<partial> = g) = (g \\<circ> \\<partial> = f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<circ> \\<partial> = g) = (g \\<circ> \\<partial> = f)", "by force"], ["", "lemma uminus_mono_iff: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(\\<partial> \\<circ> f = \\<partial> \\<circ> g) = (f = g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<partial> \\<circ> f = \\<partial> \\<circ> g) = (f = g)", "using uminus_galois_var"], ["proof (prove)\nusing this:\n  (\\<partial> \\<circ> ?f = ?g) = (\\<partial> \\<circ> ?g = ?f)\n\ngoal (1 subgoal):\n 1. (\\<partial> \\<circ> f = \\<partial> \\<circ> g) = (f = g)", "by force"], ["", "lemma uminus_epi_iff: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(f \\<circ> \\<partial> = g \\<circ> \\<partial>) = (f = g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<circ> \\<partial> = g \\<circ> \\<partial>) = (f = g)", "using uminus_galois_var2"], ["proof (prove)\nusing this:\n  (?f \\<circ> \\<partial> = ?g) = (?g \\<circ> \\<partial> = ?f)\n\ngoal (1 subgoal):\n 1. (f \\<circ> \\<partial> = g \\<circ> \\<partial>) = (f = g)", "by force"], ["", "lemma Inf_pres_Sup_pres: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(Inf_pres f) = (Sup_pres (\\<partial>\\<^sub>F f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f = Sup_pres (\\<partial>\\<^sub>F f)", "by (simp add: Inf_pres_map_dual_var)"], ["", "lemma Sup_pres_Inf_pres: \n  fixes f :: \"'a::complete_boolean_algebra_alt_with_dual \\<Rightarrow> 'b::complete_boolean_algebra_alt_with_dual\"\n  shows \"(Sup_pres f) = (Inf_pres (\\<partial>\\<^sub>F f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup_pres f = Inf_pres (\\<partial>\\<^sub>F f)", "by (simp add: Sup_pres_map_dual_var)"], ["", "subsection \\<open>Properties of the Kleene Star\\<close>"], ["", "text \\<open>I develop the star for Inf-preserving functions only. This is suitable for weakest liberal preconditions. \nThe case of sup-preserving functions is dual, and straightforward. The main difference to isotone transformers is that Kleene's fixpoint theorem\nnow applies, that is, the star can be represented by iteration.\\<close>"], ["", "lemma  H_Inf_pres_fpower:\n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<le> f x \\<Longrightarrow> x \\<le> fpower f i x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Inf_pres f; x \\<le> f x\\<rbrakk>\n    \\<Longrightarrow> x \\<le> fpower f i x", "apply (induct i, simp_all)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>x \\<le> fpower f i x; Inf_pres f; x \\<le> f x\\<rbrakk>\n       \\<Longrightarrow> x \\<le> f (fpower f i x)", "using H_iso_cond2 Inf_pres_iso"], ["proof (prove)\nusing this:\n  \\<lbrakk>mono ?f; ?y \\<le> ?z; ?x \\<le> ?f ?y\\<rbrakk>\n  \\<Longrightarrow> ?x \\<le> ?f ?z\n  Inf_pres ?f \\<Longrightarrow> mono ?f\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>x \\<le> fpower f i x; Inf_pres f; x \\<le> f x\\<rbrakk>\n       \\<Longrightarrow> x \\<le> f (fpower f i x)", "by blast"], ["", "lemma H_Inf_pres_fstar: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<le> f x \\<Longrightarrow> x \\<le> fstar f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Inf_pres f; x \\<le> f x\\<rbrakk>\n    \\<Longrightarrow> x \\<le> fstar f x", "by (simp add: H_Inf_pres_fpower fstar_def le_INF_iff)"], ["", "lemma fpower_Inf_pres: \"Inf_pres f \\<Longrightarrow> Inf_pres (fpower f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> Inf_pres (fpower f i)", "by (induct i, simp_all add: Inf_pres_comp)"], ["", "lemma fstar_Inf_pres: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> Inf_pres (fstar f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> Inf_pres (fstar f)", "by (simp add: fstar_def Inf_pres_Inf fpower_Inf_pres)"], ["", "lemma fstar_unfoldl_var [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "assume hyp: \"Inf_pres f\""], ["proof (state)\nthis:\n  Inf_pres f\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "have \"x \\<sqinter> f (fstar f x) = fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sqinter> f (fstar f x) =\n    fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x)", "by (simp add: fstar_def image_comp) (metis (no_types) comp_apply hyp image_image)"], ["proof (state)\nthis:\n  x \\<sqinter> f (fstar f x) =\n  fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "also"], ["proof (state)\nthis:\n  x \\<sqinter> f (fstar f x) =\n  fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "have \"... = (\\<Sqinter>n. fpower f n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x) =\n    (\\<Sqinter>n. fpower f n x)", "by (subst fInf_unfold, auto)"], ["proof (state)\nthis:\n  fpower f 0 x \\<sqinter> (\\<Sqinter>n. fpower f (Suc n) x) =\n  (\\<Sqinter>n. fpower f n x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> x \\<sqinter> f (fstar f x) = fstar f x", "finally"], ["proof (chain)\npicking this:\n  x \\<sqinter> f (fstar f x) = (\\<Sqinter>n. fpower f n x)", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<sqinter> f (fstar f x) = (\\<Sqinter>n. fpower f n x)\n\ngoal (1 subgoal):\n 1. x \\<sqinter> f (fstar f x) = fstar f x", "by (simp add: fstar_def image_comp)"], ["proof (state)\nthis:\n  x \\<sqinter> f (fstar f x) = fstar f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fstar_fiter_id: \"Inf_pres f \\<Longrightarrow> fstar f = fiter_id f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "assume hyp: \"Inf_pres f\""], ["proof (state)\nthis:\n  Inf_pres f\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "{"], ["proof (state)\nthis:\n  Inf_pres f\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "fix x::\"'a::complete_lattice\""], ["proof (state)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "have \"fstar f x = x \\<sqinter> f (fstar f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fstar f x = x \\<sqinter> f (fstar f x)", "by (simp add: hyp)"], ["proof (state)\nthis:\n  fstar f x = x \\<sqinter> f (fstar f x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "hence a: \"fstar f x \\<le> gfp (\\<lambda>y. x \\<sqinter> f y)\""], ["proof (prove)\nusing this:\n  fstar f x = x \\<sqinter> f (fstar f x)\n\ngoal (1 subgoal):\n 1. fstar f x \\<le> gfp (\\<lambda>y. x \\<sqinter> f y)", "by (metis gfp_upperbound order_refl)"], ["proof (state)\nthis:\n  fstar f x \\<le> gfp (\\<lambda>y. x \\<sqinter> f y)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "have \"\\<forall>y. y \\<le> x \\<sqinter> f y \\<longrightarrow> y \\<le> fstar f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y. y \\<le> x \\<sqinter> f y \\<longrightarrow> y \\<le> fstar f x", "by (meson H_Inf_pres_fstar H_iso_cond2 Inf_pres_iso fstar_Inf_pres hyp le_infE)"], ["proof (state)\nthis:\n  \\<forall>y. y \\<le> x \\<sqinter> f y \\<longrightarrow> y \\<le> fstar f x\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "hence \"fstar f x = gfp (\\<lambda>y. x \\<sqinter> f y)\""], ["proof (prove)\nusing this:\n  \\<forall>y. y \\<le> x \\<sqinter> f y \\<longrightarrow> y \\<le> fstar f x\n\ngoal (1 subgoal):\n 1. fstar f x = gfp (\\<lambda>y. x \\<sqinter> f y)", "by (metis a antisym gfp_least)"], ["proof (state)\nthis:\n  fstar f x = gfp (\\<lambda>y. x \\<sqinter> f y)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "}"], ["proof (state)\nthis:\n  fstar f ?x2 = gfp (\\<lambda>y. ?x2 \\<sqinter> f y)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> fstar f = fiter_id f", "thus ?thesis"], ["proof (prove)\nusing this:\n  fstar f ?x2 = gfp (\\<lambda>y. ?x2 \\<sqinter> f y)\n\ngoal (1 subgoal):\n 1. fstar f = fiter_id f", "by (simp add: fun_eq_iff Inf_pres_iso fstar_pred_char hyp)"], ["proof (state)\nthis:\n  fstar f = fiter_id f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fstar_unfoldl [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> id \\<sqinter> (f \\<circ> fstar f) = fstar f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> id \\<sqinter> (f \\<circ> fstar f) = fstar f", "by (simp add: fun_eq_iff)"], ["", "lemma fpower_Inf_comm: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "assume \"Inf_pres f\""], ["proof (state)\nthis:\n  Inf_pres f\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "hence \"f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f (Suc i) x)\""], ["proof (prove)\nusing this:\n  Inf_pres f\n\ngoal (1 subgoal):\n 1. f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f (Suc i) x)", "by (simp add: fun_eq_iff image_comp)"], ["proof (state)\nthis:\n  f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f (Suc i) x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "also"], ["proof (state)\nthis:\n  f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f (Suc i) x)\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "have \"... =  (\\<Sqinter>i. fpower f i (f x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sqinter>i. fpower f (Suc i) x) = (\\<Sqinter>i. fpower f i (f x))", "by (metis comp_eq_dest_lhs fun_mon.power_Suc2)"], ["proof (state)\nthis:\n  (\\<Sqinter>i. fpower f (Suc i) x) = (\\<Sqinter>i. fpower f i (f x))\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow>\n    f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "finally"], ["proof (chain)\npicking this:\n  f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "show ?thesis"], ["proof (prove)\nusing this:\n  f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))\n\ngoal (1 subgoal):\n 1. f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))", "."], ["proof (state)\nthis:\n  f (\\<Sqinter>i. fpower f i x) = (\\<Sqinter>i. fpower f i (f x))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fstar_comm: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> f \\<circ> fstar f = fstar f \\<circ> f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> f \\<circ> fstar f = fstar f \\<circ> f", "apply (simp add: fun_eq_iff fstar_def image_comp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. f (\\<Sqinter> x) = \\<Sqinter> (f ` x) \\<Longrightarrow>\n    \\<forall>x.\n       (\\<Sqinter>xa. f (fpower f xa x)) = (\\<Sqinter>xa. fpower f xa (f x))", "by (metis (mono_tags, lifting) INF_cong comp_eq_dest fun_mon.power_commutes)"], ["", "lemma fstar_unfoldr [simp]: \n  fixes f :: \"'a::complete_lattice \\<Rightarrow> 'a\"\n  shows \"Inf_pres f \\<Longrightarrow> id \\<sqinter> (fstar f \\<circ> f) = fstar f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> id \\<sqinter> (fstar f \\<circ> f) = fstar f", "using fstar_comm fstar_unfoldl"], ["proof (prove)\nusing this:\n  Inf_pres ?f \\<Longrightarrow> ?f \\<circ> fstar ?f = fstar ?f \\<circ> ?f\n  Inf_pres ?f \\<Longrightarrow>\n  id \\<sqinter> (?f \\<circ> fstar ?f) = fstar ?f\n\ngoal (1 subgoal):\n 1. Inf_pres f \\<Longrightarrow> id \\<sqinter> (fstar f \\<circ> f) = fstar f", "by fastforce"], ["", "subsection \\<open>Quantales of Inf- and Top-Preserving Transformers\\<close>"], ["", "text \\<open>As for itotone transformers, types must now be restricted to a single one. It is well known that Inf-preserving transformers need not be\ntop-preserving, and that Sup-preserving transformers need not be bot-preserving. This has been shown elsewhere. This does not affect the following proof, \nbut it has an impact on how elements are represented. I show only the result for Inf-preserving transformers; that for Sup-preserving ones is dual.\\<close>"], ["", "typedef (overloaded) 'a Inf_pres = \"{f::'a::complete_lattice \\<Rightarrow> 'a. Inf_pres f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x. x \\<in> {f. Inf_pres f}", "using Inf_pres_topf"], ["proof (prove)\nusing this:\n  Inf_pres (\\<lambda>x. \\<top>)\n\ngoal (1 subgoal):\n 1. \\<exists>x. x \\<in> {f. Inf_pres f}", "by blast"], ["", "setup_lifting type_definition_Inf_pres"], ["", "instantiation Inf_pres :: (complete_lattice) unital_Sup_quantale \nbegin"], ["", "lift_definition one_Inf_pres :: \"'a::complete_lattice Inf_pres\" is id"], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf_pres id", "by (simp add: iso_id)"], ["", "lift_definition times_Inf_pres :: \"'a::complete_lattice Inf_pres \\<Rightarrow> 'a Inf_pres \\<Rightarrow> 'a Inf_pres\" is \"(\\<circ>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>fun1 fun2.\n       \\<lbrakk>Inf_pres fun1; Inf_pres fun2\\<rbrakk>\n       \\<Longrightarrow> Inf_pres (fun1 \\<circ> fun2)", "by (simp add: Inf_pres_comp)"], ["", "lift_definition Sup_Inf_pres :: \"'a::complete_lattice Inf_pres set \\<Rightarrow> 'a Inf_pres\" is Inf"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>set.\n       (\\<And>f. f \\<in> set \\<Longrightarrow> Inf_pres f) \\<Longrightarrow>\n       Inf_pres (\\<Sqinter> set)", "by (simp add: Inf_pres_Inf)"], ["", "lift_definition less_eq_Inf_pres :: \"'a Inf_pres \\<Rightarrow> 'a Inf_pres \\<Rightarrow> bool\" is \"(\\<ge>)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "lift_definition  less_Inf_pres :: \"'a Inf_pres \\<Rightarrow> 'a Inf_pres \\<Rightarrow> bool\" is \"(>)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a Inf_pres, unital_Sup_quantale_class)", "by (intro_classes; transfer, simp_all add: o_assoc Inf_lower Inf_greatest fInf_distr_var fInf_distl_var)"], ["", "end"], ["", "text \\<open>Three comments seem worth making. Firstly, the result bakes in duality by considering Infs in the function space as \nSups in the quantale, hence as Infs in the dual quantale. Secondly, the use of Sup-quantales not only reduces the number of proof obligations.\nIt also copes with the fact that Sups and top are not represented faithfully by this construction. They are generally different from\nthose in the super-quantale of isotone transformers. But of course they can be defined from Infs as usual. Alternatively, I could have \nproved the results for Inf-quantales, which may have been more straightforward. But Sup-lattices are more conventional.\nThirdly, as in the case of isotone transformers, the proof depends on a restriction to one single type, whereas previous results have \nbeen obtained for poly-typed quantales or quantaloids.\\<close>"], ["", "end"]]}