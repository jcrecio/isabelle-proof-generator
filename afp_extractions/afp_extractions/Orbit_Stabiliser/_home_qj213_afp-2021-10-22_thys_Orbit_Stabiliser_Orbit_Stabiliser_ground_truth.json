{"file_name": "/home/qj213/afp-2021-10-22/thys/Orbit_Stabiliser/Orbit_Stabiliser.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Orbit_Stabiliser", "problem_names": ["theorem stabiliser_subgroup: \"subgroup (stabiliser x) G\"", "lemma stabiliser_cosets_equivalent:\n  assumes g_car: \"g \\<in> carrier G\" and\n    h_car: \"h \\<in> carrier G\"\n  shows \"(g \\<odot> x) = (h \\<odot> x) \\<longleftrightarrow> (g <# stabiliser x) = (h <# stabiliser x)\"", "lemma quotient_rep_ex  : \"H \\<in> (carrier (G LMod (stabiliser x))) \\<Longrightarrow> rep H \\<in> H\"", "lemma rep_equivalent:\n  assumes H:\"H \\<in> carrier (G LMod stabiliser x)\" and\n    gH:\"g \\<in> H\"\n  shows \"H = g <# (stabiliser x)\"", "theorem orbit_stabiliser_bij:\n  \"bij_betw (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod (stabiliser x))) (orbit x) \"", "theorem orbit_stabiliser:\n  assumes finite: \"finite (carrier G)\"\n  shows \"order G = card (orbit x) * card (stabiliser x)\""], "translations": [["", "theorem stabiliser_subgroup: \"subgroup (stabiliser x) G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subgroup (stabiliser x) G", "proof(rule subgroupI)"], ["proof (state)\ngoal (4 subgoals):\n 1. stabiliser x \\<subseteq> carrier G\n 2. stabiliser x \\<noteq> {}\n 3. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "show \"stabiliser x \\<subseteq> carrier G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stabiliser x \\<subseteq> carrier G", "using stabiliser_def"], ["proof (prove)\nusing this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. stabiliser x \\<subseteq> carrier G", "by auto"], ["proof (state)\nthis:\n  stabiliser x \\<subseteq> carrier G\n\ngoal (3 subgoals):\n 1. stabiliser x \\<noteq> {}\n 2. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. stabiliser x \\<noteq> {}\n 2. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "fix x"], ["proof (state)\ngoal (3 subgoals):\n 1. stabiliser x \\<noteq> {}\n 2. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "from id_act"], ["proof (chain)\npicking this:\n  \\<one> \\<odot> ?x = ?x", "have \"\\<one> \\<odot> x = x\""], ["proof (prove)\nusing this:\n  \\<one> \\<odot> ?x = ?x\n\ngoal (1 subgoal):\n 1. \\<one> \\<odot> x = x", "by simp"], ["proof (state)\nthis:\n  \\<one> \\<odot> x = x\n\ngoal (3 subgoals):\n 1. stabiliser x \\<noteq> {}\n 2. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  \\<one> \\<odot> x = x", "have \"\\<one> \\<in> stabiliser x\""], ["proof (prove)\nusing this:\n  \\<one> \\<odot> x = x\n\ngoal (1 subgoal):\n 1. \\<one> \\<in> stabiliser x", "using stabiliser_def"], ["proof (prove)\nusing this:\n  \\<one> \\<odot> x = x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. \\<one> \\<in> stabiliser x", "by auto"], ["proof (state)\nthis:\n  \\<one> \\<in> stabiliser x\n\ngoal (3 subgoals):\n 1. stabiliser x \\<noteq> {}\n 2. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  \\<one> \\<in> stabiliser x", "show \"stabiliser x \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<one> \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. stabiliser x \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  stabiliser x \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "fix g x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "assume gStab:\"g \\<in> stabiliser x\""], ["proof (state)\nthis:\n  g \\<in> stabiliser x\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<in> stabiliser x", "have g_car:\"g \\<in> carrier G\""], ["proof (prove)\nusing this:\n  g \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<in> carrier G", "using stabiliser_def"], ["proof (prove)\nusing this:\n  g \\<in> stabiliser x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. g \\<in> carrier G", "by simp"], ["proof (state)\nthis:\n  g \\<in> carrier G\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<in> carrier G", "have invg_car:\"inv g \\<in> carrier G\""], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<in> carrier G", "using inv_closed"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  ?x \\<in> carrier G \\<Longrightarrow> inv ?x \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<in> carrier G", "by simp"], ["proof (state)\nthis:\n  inv g \\<in> carrier G\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "have \"g \\<odot> x = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<odot> x = x", "using stabiliser_def gStab"], ["proof (prove)\nusing this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  g \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> x = x\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = x", "have \"inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x\""], ["proof (prove)\nusing this:\n  g \\<odot> x = x\n\ngoal (1 subgoal):\n 1. inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x", "by simp"], ["proof (state)\nthis:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x", "have \"(inv g \\<otimes> g) \\<odot> x = inv g \\<odot> x\""], ["proof (prove)\nusing this:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = inv g \\<odot> x", "using compat_act g_car invg_car"], ["proof (prove)\nusing this:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<odot> x\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n  g \\<in> carrier G\n  inv g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = inv g \\<odot> x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> g \\<odot> x = inv g \\<odot> x\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<odot> x", "have \"x = (inv g) \\<odot> x\""], ["proof (prove)\nusing this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<odot> x\n\ngoal (1 subgoal):\n 1. x = inv g \\<odot> x", "using g_car l_inv"], ["proof (prove)\nusing this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<odot> x\n  g \\<in> carrier G\n  ?x \\<in> carrier G \\<Longrightarrow> inv ?x \\<otimes> ?x = \\<one>\n\ngoal (1 subgoal):\n 1. x = inv g \\<odot> x", "by simp"], ["proof (state)\nthis:\n  x = inv g \\<odot> x\n\ngoal (2 subgoals):\n 1. \\<And>a. a \\<in> stabiliser x \\<Longrightarrow> inv a \\<in> stabiliser x\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  x = inv g \\<odot> x", "show \"inv g \\<in> stabiliser x\""], ["proof (prove)\nusing this:\n  x = inv g \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<in> stabiliser x", "using invg_car stabiliser_def"], ["proof (prove)\nusing this:\n  x = inv g \\<odot> x\n  inv g \\<in> carrier G\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. inv g \\<in> stabiliser x", "by simp"], ["proof (state)\nthis:\n  inv g \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "fix g h x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "assume g_stab: \"g \\<in> stabiliser x\" and h_stab: \"h \\<in> stabiliser x\""], ["proof (state)\nthis:\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x", "have g_car: \"g \\<in> carrier G\" and h_car: \"h \\<in> carrier G\""], ["proof (prove)\nusing this:\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<in> carrier G &&& h \\<in> carrier G", "using stabiliser_def"], ["proof (prove)\nusing this:\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. g \\<in> carrier G &&& h \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<in> carrier G\n  h \\<in> carrier G", "have \"g \\<odot> x = x\" \"h \\<odot> x = x\""], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. g \\<odot> x = x &&& h \\<odot> x = x", "using stabiliser_def g_stab h_stab"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  h \\<in> carrier G\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = x &&& h \\<odot> x = x", "by auto"], ["proof (state)\nthis:\n  g \\<odot> x = x\n  h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = x\n  h \\<odot> x = x", "have \"g \\<odot> (h \\<odot> x) = x\""], ["proof (prove)\nusing this:\n  g \\<odot> x = x\n  h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. g \\<odot> (h \\<odot> x) = x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> (h \\<odot> x) = x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> (h \\<odot> x) = x", "have \"(g \\<otimes> h) \\<odot> x = x\""], ["proof (prove)\nusing this:\n  g \\<odot> (h \\<odot> x) = x\n\ngoal (1 subgoal):\n 1. g \\<otimes> h \\<odot> x = x", "using compat_act g_car h_car"], ["proof (prove)\nusing this:\n  g \\<odot> (h \\<odot> x) = x\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. g \\<otimes> h \\<odot> x = x", "by simp"], ["proof (state)\nthis:\n  g \\<otimes> h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> stabiliser x; b \\<in> stabiliser x\\<rbrakk>\n       \\<Longrightarrow> a \\<otimes> b \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<otimes> h \\<odot> x = x", "show \"(g \\<otimes> h) \\<in> stabiliser x\""], ["proof (prove)\nusing this:\n  g \\<otimes> h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. g \\<otimes> h \\<in> stabiliser x", "using g_stab h_stab stabiliser_def"], ["proof (prove)\nusing this:\n  g \\<otimes> h \\<odot> x = x\n  g \\<in> stabiliser x\n  h \\<in> stabiliser x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. g \\<otimes> h \\<in> stabiliser x", "by auto"], ["proof (state)\nthis:\n  g \\<otimes> h \\<in> stabiliser x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nAs an intermediate step we formulate a lemma about the relationship between the group action\nand the stabiliser.\n\nThis proof follows the template from @{cite stabsubcor}.\n\\<close>"], ["", "corollary stabiliser_subgroup_corollary:\n  assumes g_car: \"g \\<in> carrier G\" and\n    h_car: \"h \\<in> carrier G\"\n  shows \"(g \\<odot> x) = (h \\<odot> x) \\<longleftrightarrow> ((inv g) \\<otimes> h) \\<in> stabiliser x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g \\<odot> x = h \\<odot> x) = (inv g \\<otimes> h \\<in> stabiliser x)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x\n 2. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "from g_car"], ["proof (chain)\npicking this:\n  g \\<in> carrier G", "have invg_car: \"(inv g) \\<in> carrier G\""], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  inv g \\<in> carrier G\n\ngoal (2 subgoals):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x\n 2. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "show \"(g \\<odot> x) = (h \\<odot> x) \\<Longrightarrow> inv g \\<otimes> h \\<in> stabiliser x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "assume gh: \"(g \\<odot> x) = (h \\<odot> x)\""], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "have \"((inv g) \\<otimes> h) \\<odot> x = (inv g) \\<odot> (h \\<odot> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)", "using assms compat_act"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  h \\<in> carrier G\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "moreover"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "have \"(inv g) \\<odot> (h \\<odot> x) = (inv g) \\<odot> (g \\<odot> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)", "using gh"], ["proof (prove)\nusing this:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)", "by simp"], ["proof (state)\nthis:\n  inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "moreover"], ["proof (state)\nthis:\n  inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "have \"(inv g) \\<odot> (g \\<odot> x) = ((inv g) \\<otimes> g) \\<odot> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x", "using invg_car g_car compat_act"], ["proof (prove)\nusing this:\n  inv g \\<in> carrier G\n  g \\<in> carrier G\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n\ngoal (1 subgoal):\n 1. inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x", "by simp"], ["proof (state)\nthis:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "moreover"], ["proof (state)\nthis:\n  inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "have \"((inv g) \\<otimes> g) \\<odot> x = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = x", "using g_car"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> g \\<odot> x = x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "ultimately"], ["proof (chain)\npicking this:\n  inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)\n  inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)\n  inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x\n  inv g \\<otimes> g \\<odot> x = x", "have \"((inv g) \\<otimes> h) \\<odot> x = x\""], ["proof (prove)\nusing this:\n  inv g \\<otimes> h \\<odot> x = inv g \\<odot> (h \\<odot> x)\n  inv g \\<odot> (h \\<odot> x) = inv g \\<odot> (g \\<odot> x)\n  inv g \\<odot> (g \\<odot> x) = inv g \\<otimes> g \\<odot> x\n  inv g \\<otimes> g \\<odot> x = x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<odot> x = x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    inv g \\<otimes> h \\<in> stabiliser x", "then"], ["proof (chain)\npicking this:\n  inv g \\<otimes> h \\<odot> x = x", "show ?thesis"], ["proof (prove)\nusing this:\n  inv g \\<otimes> h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "using stabiliser_def assms"], ["proof (prove)\nusing this:\n  inv g \\<otimes> h \\<odot> x = x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "show \"inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow> g \\<odot> x = h \\<odot> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "assume gh_stab: \"inv g \\<otimes> h \\<in> stabiliser x\""], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "with stabiliser_def"], ["proof (chain)\npicking this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  inv g \\<otimes> h \\<in> stabiliser x", "have \"x = ((inv g) \\<otimes> h) \\<odot> x\""], ["proof (prove)\nusing this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. x = inv g \\<otimes> h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  x = inv g \\<otimes> h \\<odot> x", "have \"\\<one> \\<odot> x = ((inv g) \\<otimes> h) \\<odot> x\""], ["proof (prove)\nusing this:\n  x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. \\<one> \\<odot> x = inv g \\<otimes> h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  \\<one> \\<odot> x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  \\<one> \\<odot> x = inv g \\<otimes> h \\<odot> x", "have \"((inv g) \\<otimes> g) \\<odot> x = ((inv g) \\<otimes> h) \\<odot> x\""], ["proof (prove)\nusing this:\n  \\<one> \\<odot> x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x", "using invg_car g_car"], ["proof (prove)\nusing this:\n  \\<one> \\<odot> x = inv g \\<otimes> h \\<odot> x\n  inv g \\<in> carrier G\n  g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x", "have \"x = (inv g) \\<odot> (h \\<odot> x)\""], ["proof (prove)\nusing this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. x = inv g \\<odot> (h \\<odot> x)", "using compat_act g_car h_car"], ["proof (prove)\nusing this:\n  inv g \\<otimes> g \\<odot> x = inv g \\<otimes> h \\<odot> x\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. x = inv g \\<odot> (h \\<odot> x)", "by simp"], ["proof (state)\nthis:\n  x = inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  x = inv g \\<odot> (h \\<odot> x)", "have \"g \\<odot> x = (g \\<otimes> (inv g)) \\<odot> (h \\<odot> x)\""], ["proof (prove)\nusing this:\n  x = inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)", "using compat_act g_car invg_car"], ["proof (prove)\nusing this:\n  x = inv g \\<odot> (h \\<odot> x)\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n  g \\<in> carrier G\n  inv g \\<in> carrier G\n\ngoal (1 subgoal):\n 1. g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)", "by metis"], ["proof (state)\nthis:\n  g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)", "have \"g \\<odot> x = h \\<odot> x\""], ["proof (prove)\nusing this:\n  g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "using compat_act g_car id_act invg_car r_inv"], ["proof (prove)\nusing this:\n  g \\<odot> x = g \\<otimes> inv g \\<odot> (h \\<odot> x)\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n  g \\<in> carrier G\n  \\<one> \\<odot> ?x = ?x\n  inv g \\<in> carrier G\n  ?x \\<in> carrier G \\<Longrightarrow> ?x \\<otimes> inv ?x = \\<one>\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = h \\<odot> x", "show ?thesis"], ["proof (prove)\nusing this:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<in> stabiliser x \\<Longrightarrow>\n  g \\<odot> x = h \\<odot> x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nUsing the previous lemma and our proof that the stabiliser forms a subgroup, we can now\nshow that the elements of the orbit map to left cosets of the stabiliser.\n\nThis will later form the basis of showing a bijection between the orbit and those cosets.\n\\<close>"], ["", "lemma stabiliser_cosets_equivalent:\n  assumes g_car: \"g \\<in> carrier G\" and\n    h_car: \"h \\<in> carrier G\"\n  shows \"(g \\<odot> x) = (h \\<odot> x) \\<longleftrightarrow> (g <# stabiliser x) = (h <# stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g \\<odot> x = h \\<odot> x) = (g <# stabiliser x = h <# stabiliser x)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x\n 2. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "show \"g \\<odot> x = h \\<odot> x \\<Longrightarrow> g <# stabiliser x = h <# stabiliser x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "assume \"g \\<odot> x = h \\<odot> x\""], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = h \\<odot> x", "have stab_elem: \"((inv g) \\<otimes> h) \\<in> stabiliser x\""], ["proof (prove)\nusing this:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "using assms stabiliser_subgroup_corollary"], ["proof (prove)\nusing this:\n  g \\<odot> x = h \\<odot> x\n  g \\<in> carrier G\n  h \\<in> carrier G\n  \\<lbrakk>?g \\<in> carrier G; ?h \\<in> carrier G\\<rbrakk>\n  \\<Longrightarrow> (?g \\<odot> ?x = ?h \\<odot> ?x) =\n                    (inv ?g \\<otimes> ?h \\<in> stabiliser ?x)\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "by simp"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "with subgroup.lcos_module_rev[OF stabiliser_subgroup]"], ["proof (chain)\npicking this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  inv g \\<otimes> h \\<in> stabiliser x", "have \"h \\<in> g <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. h \\<in> g <# stabiliser x", "using assms is_group"], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  inv g \\<otimes> h \\<in> stabiliser x\n  g \\<in> carrier G\n  h \\<in> carrier G\n  Group.group G\n\ngoal (1 subgoal):\n 1. h \\<in> g <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  h \\<in> g <# stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "with l_repr_independence"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H\n  h \\<in> g <# stabiliser x", "have  \"g <# (stabiliser x) = h <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H\n  h \\<in> g <# stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x", "using assms  stab_elem stabiliser_subgroup"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H\n  h \\<in> g <# stabiliser x\n  g \\<in> carrier G\n  h \\<in> carrier G\n  inv g \\<otimes> h \\<in> stabiliser x\n  subgroup (stabiliser ?x) G\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x", "by auto"], ["proof (state)\nthis:\n  g <# stabiliser x = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n    g <# stabiliser x = h <# stabiliser x", "then"], ["proof (chain)\npicking this:\n  g <# stabiliser x = h <# stabiliser x", "show ?thesis"], ["proof (prove)\nusing this:\n  g <# stabiliser x = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  g <# stabiliser x = h <# stabiliser x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x \\<Longrightarrow>\n  g <# stabiliser x = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "show \"g <# stabiliser x = h <# stabiliser x \\<Longrightarrow> g \\<odot> x = h \\<odot> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "assume \"g <# stabiliser x = h <# stabiliser x\""], ["proof (state)\nthis:\n  g <# stabiliser x = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "with subgroup.lcos_module_rev[OF stabiliser_subgroup]"], ["proof (chain)\npicking this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  g <# stabiliser x = h <# stabiliser x", "have \"h \\<in> g <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  g <# stabiliser x = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. h \\<in> g <# stabiliser x", "using assms is_group l_inv stabiliser_subgroup subgroup_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G; ?x' \\<in> carrier G;\n   inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> ?x' \\<in> ?x <# stabiliser ?x1\n  g <# stabiliser x = h <# stabiliser x\n  g \\<in> carrier G\n  h \\<in> carrier G\n  Group.group G\n  ?x \\<in> carrier G \\<Longrightarrow> inv ?x \\<otimes> ?x = \\<one>\n  subgroup (stabiliser ?x) G\n  subgroup ?H ?G \\<equiv>\n  (?H \\<subseteq> carrier ?G \\<and>\n   (\\<forall>x y.\n       x \\<in> ?H \\<longrightarrow>\n       y \\<in> ?H \\<longrightarrow>\n       x \\<otimes>\\<^bsub>?G\\<^esub> y \\<in> ?H)) \\<and>\n  \\<one>\\<^bsub>?G\\<^esub> \\<in> ?H \\<and>\n  (\\<forall>x.\n      x \\<in> ?H \\<longrightarrow> inv\\<^bsub>?G\\<^esub> x \\<in> ?H)\n\ngoal (1 subgoal):\n 1. h \\<in> g <# stabiliser x", "by metis"], ["proof (state)\nthis:\n  h \\<in> g <# stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "with subgroup.lcos_module_imp[OF stabiliser_subgroup]"], ["proof (chain)\npicking this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G;\n   ?x' \\<in> ?x <# stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\n  h \\<in> g <# stabiliser x", "have \"((inv g) \\<otimes> h) \\<in> stabiliser x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G;\n   ?x' \\<in> ?x <# stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\n  h \\<in> g <# stabiliser x\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "using assms is_group"], ["proof (prove)\nusing this:\n  \\<lbrakk>Group.group G; ?x \\<in> carrier G;\n   ?x' \\<in> ?x <# stabiliser ?x1\\<rbrakk>\n  \\<Longrightarrow> inv ?x \\<otimes> ?x' \\<in> stabiliser ?x1\n  h \\<in> g <# stabiliser x\n  g \\<in> carrier G\n  h \\<in> carrier G\n  Group.group G\n\ngoal (1 subgoal):\n 1. inv g \\<otimes> h \\<in> stabiliser x", "by blast"], ["proof (state)\nthis:\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "with stabiliser_subgroup_corollary"], ["proof (chain)\npicking this:\n  \\<lbrakk>?g \\<in> carrier G; ?h \\<in> carrier G\\<rbrakk>\n  \\<Longrightarrow> (?g \\<odot> ?x = ?h \\<odot> ?x) =\n                    (inv ?g \\<otimes> ?h \\<in> stabiliser ?x)\n  inv g \\<otimes> h \\<in> stabiliser x", "have \"g \\<odot> x = h \\<odot> x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?g \\<in> carrier G; ?h \\<in> carrier G\\<rbrakk>\n  \\<Longrightarrow> (?g \\<odot> ?x = ?h \\<odot> ?x) =\n                    (inv ?g \\<otimes> ?h \\<in> stabiliser ?x)\n  inv g \\<otimes> h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?g \\<in> carrier G; ?h \\<in> carrier G\\<rbrakk>\n  \\<Longrightarrow> (?g \\<odot> ?x = ?h \\<odot> ?x) =\n                    (inv ?g \\<otimes> ?h \\<in> stabiliser ?x)\n  inv g \\<otimes> h \\<in> stabiliser x\n  g \\<in> carrier G\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n    g \\<odot> x = h \\<odot> x", "then"], ["proof (chain)\npicking this:\n  g \\<odot> x = h \\<odot> x", "show ?thesis"], ["proof (prove)\nusing this:\n  g \\<odot> x = h \\<odot> x\n\ngoal (1 subgoal):\n 1. g \\<odot> x = h \\<odot> x", "by simp"], ["proof (state)\nthis:\n  g \\<odot> x = h \\<odot> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g <# stabiliser x = h <# stabiliser x \\<Longrightarrow>\n  g \\<odot> x = h \\<odot> x\n\ngoal:\nNo subgoals!", "qed"], ["", "section \"Picking representatives from cosets\""], ["", "text \\<open>\nBefore we can prove the bijection, we need a few lemmas about representatives from sets.\n\nFirst we define rep to be an arbitrary element from a left coset of the stabiliser.\n\\<close>"], ["", "definition rep :: \"'a set \\<Rightarrow> 'a\" where\n  \"(H \\<in> carrier (G LMod (stabiliser x))) \\<Longrightarrow> rep H = (SOME y. y \\<in> H)\""], ["", "text \\<open>\n  The next lemma shows that the representative is always an element of its coset.\n\\<close>"], ["", "lemma quotient_rep_ex  : \"H \\<in> (carrier (G LMod (stabiliser x))) \\<Longrightarrow> rep H \\<in> H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "fix H"], ["proof (state)\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "assume H:\"H \\<in> carrier (G LMod stabiliser x)\""], ["proof (state)\nthis:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "then"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)", "obtain g where \"g \\<in> carrier G\" \"H = g <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> carrier G; H = g <# stabiliser x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding LFactGroup_def LCOSETS_def"], ["proof (prove)\nusing this:\n  H \\<in> carrier\n           \\<lparr>carrier = \\<Union>a\\<in>carrier G. {a <# stabiliser x},\n              mult = (<#>), one = stabiliser x\\<rparr>\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> carrier G; H = g <# stabiliser x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  g \\<in> carrier G\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "then"], ["proof (chain)\npicking this:\n  g \\<in> carrier G\n  H = g <# stabiliser x", "have \"(SOME x. x \\<in> H) \\<in> H\""], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. (SOME x. x \\<in> H) \\<in> H", "using lcos_self stabiliser_subgroup someI_ex"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  H = g <# stabiliser x\n  \\<lbrakk>?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> ?x <# ?H\n  subgroup (stabiliser ?x) G\n  \\<exists>x. ?P x \\<Longrightarrow> ?P (SOME x. ?P x)\n\ngoal (1 subgoal):\n 1. (SOME x. x \\<in> H) \\<in> H", "by fast"], ["proof (state)\nthis:\n  (SOME x. x \\<in> H) \\<in> H\n\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<in> H", "then"], ["proof (chain)\npicking this:\n  (SOME x. x \\<in> H) \\<in> H", "show \"rep H \\<in> H\""], ["proof (prove)\nusing this:\n  (SOME x. x \\<in> H) \\<in> H\n\ngoal (1 subgoal):\n 1. rep H \\<in> H", "using H rep_def"], ["proof (prove)\nusing this:\n  (SOME x. x \\<in> H) \\<in> H\n  H \\<in> carrier (G LMod stabiliser x)\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow>\n  rep ?H = (SOME y. y \\<in> ?H)\n\ngoal (1 subgoal):\n 1. rep H \\<in> H", "by auto"], ["proof (state)\nthis:\n  rep H \\<in> H\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nThe final lemma about representatives shows that it does not matter which element of the coset\nis picked, i.e. all representatives are equivalent.\n\\<close>"], ["", "lemma rep_equivalent:\n  assumes H:\"H \\<in> carrier (G LMod stabiliser x)\" and\n    gH:\"g \\<in> H\"\n  shows \"H = g <# (stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "fix h"], ["proof (state)\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "from H"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)", "obtain h where hG:\"h \\<in> carrier G\" and H2:\"H = h <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>h \\<in> carrier G; H = h <# stabiliser x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding LFactGroup_def LCOSETS_def"], ["proof (prove)\nusing this:\n  H \\<in> carrier\n           \\<lparr>carrier = \\<Union>a\\<in>carrier G. {a <# stabiliser x},\n              mult = (<#>), one = stabiliser x\\<rparr>\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>h \\<in> carrier G; H = h <# stabiliser x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  h \\<in> carrier G\n  H = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "with H gH"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)\n  g \\<in> H\n  h \\<in> carrier G\n  H = h <# stabiliser x", "have gh:\"g \\<in> h <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n  g \\<in> H\n  h \\<in> carrier G\n  H = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. g \\<in> h <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  g \\<in> h <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "from l_repr_independence"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H", "have \"h <# stabiliser x = g <# stabiliser x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H\n\ngoal (1 subgoal):\n 1. h <# stabiliser x = g <# stabiliser x", "using hG gh stabiliser_subgroup"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> ?x <# ?H; ?x \\<in> carrier G; subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> ?x <# ?H = ?y <# ?H\n  h \\<in> carrier G\n  g \\<in> h <# stabiliser x\n  subgroup (stabiliser ?x) G\n\ngoal (1 subgoal):\n 1. h <# stabiliser x = g <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  h <# stabiliser x = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "with H2"], ["proof (chain)\npicking this:\n  H = h <# stabiliser x\n  h <# stabiliser x = g <# stabiliser x", "have \"H = g <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  H = h <# stabiliser x\n  h <# stabiliser x = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "then"], ["proof (chain)\npicking this:\n  H = g <# stabiliser x", "show ?thesis"], ["proof (prove)\nusing this:\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = g <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  H = g <# stabiliser x\n\ngoal:\nNo subgoals!", "qed"], ["", "section \"Orbit-Stabiliser Theorem\""], ["", "text \\<open>\n  We can now establish the bijection between orbit(x) and the quotient group G/(stabiliser(x))\n\n  The idea for this bijection is from @{cite orbitstab}\n\\<close>"], ["", "theorem orbit_stabiliser_bij:\n  \"bij_betw (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod (stabiliser x))) (orbit x) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))\n     (orbit x)", "proof (rule bij_betw_imageI)"], ["proof (state)\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))\n 2. (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x", "(* show the function is injective *)"], ["proof (state)\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))\n 2. (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x", "show \"inj_on (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))", "proof(rule inj_onI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "fix H H'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "assume H:\"H \\<in> carrier (G LMod (stabiliser x))\""], ["proof (state)\nthis:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "assume H':\"H' \\<in> carrier (G LMod (stabiliser x))\""], ["proof (state)\nthis:\n  H' \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "obtain h h' where  h:\"h = rep H\" and h': \"h' = rep H'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>h h'.\n        \\<lbrakk>h = rep H; h' = rep H'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  h = rep H\n  h' = rep H'\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "assume act_equal: \"(rep H) \\<odot> x = (rep H') \\<odot> x\""], ["proof (state)\nthis:\n  rep H \\<odot> x = rep H' \\<odot> x\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from H h quotient_rep_ex"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)\n  h = rep H\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H", "have hH: \"h \\<in> H\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n  h = rep H\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H\n\ngoal (1 subgoal):\n 1. h \\<in> H", "by simp"], ["proof (state)\nthis:\n  h \\<in> H\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from H' h' quotient_rep_ex"], ["proof (chain)\npicking this:\n  H' \\<in> carrier (G LMod stabiliser x)\n  h' = rep H'\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H", "have hH': \"h' \\<in> H'\""], ["proof (prove)\nusing this:\n  H' \\<in> carrier (G LMod stabiliser x)\n  h' = rep H'\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H\n\ngoal (1 subgoal):\n 1. h' \\<in> H'", "by simp"], ["proof (state)\nthis:\n  h' \\<in> H'\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from subgroup.lcosets_carrier[OF stabiliser_subgroup is_group] H"], ["proof (chain)\npicking this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier (G LMod stabiliser x)", "have \"H \\<subseteq> carrier G\""], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. H \\<subseteq> carrier G", "unfolding LFactGroup_def"], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier\n           \\<lparr>carrier = lcosets stabiliser x, mult = (<#>),\n              one = stabiliser x\\<rparr>\n\ngoal (1 subgoal):\n 1. H \\<subseteq> carrier G", "by simp"], ["proof (state)\nthis:\n  H \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "then"], ["proof (chain)\npicking this:\n  H \\<subseteq> carrier G", "have hG: \"h \\<in> carrier G\""], ["proof (prove)\nusing this:\n  H \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. h \\<in> carrier G", "using hH"], ["proof (prove)\nusing this:\n  H \\<subseteq> carrier G\n  h \\<in> H\n\ngoal (1 subgoal):\n 1. h \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from subgroup.lcosets_carrier[OF stabiliser_subgroup is_group] H'"], ["proof (chain)\npicking this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H' \\<in> carrier (G LMod stabiliser x)", "have \"H' \\<subseteq> carrier G\""], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H' \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. H' \\<subseteq> carrier G", "unfolding LFactGroup_def"], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H' \\<in> carrier\n            \\<lparr>carrier = lcosets stabiliser x, mult = (<#>),\n               one = stabiliser x\\<rparr>\n\ngoal (1 subgoal):\n 1. H' \\<subseteq> carrier G", "by simp"], ["proof (state)\nthis:\n  H' \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "then"], ["proof (chain)\npicking this:\n  H' \\<subseteq> carrier G", "have h'G: \"h' \\<in> carrier G\""], ["proof (prove)\nusing this:\n  H' \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. h' \\<in> carrier G", "using hH'"], ["proof (prove)\nusing this:\n  H' \\<subseteq> carrier G\n  h' \\<in> H'\n\ngoal (1 subgoal):\n 1. h' \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  h' \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "(* Apply lemma about equivalent cosets *)"], ["proof (state)\nthis:\n  h' \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "have hh'_equiv:\"h <# (stabiliser x) = h' <# (stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h <# stabiliser x = h' <# stabiliser x", "using hG h'G h h' act_equal stabiliser_cosets_equivalent"], ["proof (prove)\nusing this:\n  h \\<in> carrier G\n  h' \\<in> carrier G\n  h = rep H\n  h' = rep H'\n  rep H \\<odot> x = rep H' \\<odot> x\n  \\<lbrakk>?g \\<in> carrier G; ?h \\<in> carrier G\\<rbrakk>\n  \\<Longrightarrow> (?g \\<odot> ?x = ?h \\<odot> ?x) =\n                    (?g <# stabiliser ?x = ?h <# stabiliser ?x)\n\ngoal (1 subgoal):\n 1. h <# stabiliser x = h' <# stabiliser x", "by simp"], ["proof (state)\nthis:\n  h <# stabiliser x = h' <# stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from hh'_equiv"], ["proof (chain)\npicking this:\n  h <# stabiliser x = h' <# stabiliser x", "have H2:\"H = h <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  h <# stabiliser x = h' <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = h <# stabiliser x", "using H hH rep_equivalent"], ["proof (prove)\nusing this:\n  h <# stabiliser x = h' <# stabiliser x\n  H \\<in> carrier (G LMod stabiliser x)\n  h \\<in> H\n  \\<lbrakk>?H \\<in> carrier (G LMod stabiliser ?x); ?g \\<in> ?H\\<rbrakk>\n  \\<Longrightarrow> ?H = ?g <# stabiliser ?x\n\ngoal (1 subgoal):\n 1. H = h <# stabiliser x", "by blast"], ["proof (state)\nthis:\n  H = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "moreover"], ["proof (state)\nthis:\n  H = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "from hh'_equiv"], ["proof (chain)\npicking this:\n  h <# stabiliser x = h' <# stabiliser x", "have H3:\"H' = h <# (stabiliser x)\""], ["proof (prove)\nusing this:\n  h <# stabiliser x = h' <# stabiliser x\n\ngoal (1 subgoal):\n 1. H' = h <# stabiliser x", "using H' hH' rep_equivalent"], ["proof (prove)\nusing this:\n  h <# stabiliser x = h' <# stabiliser x\n  H' \\<in> carrier (G LMod stabiliser x)\n  h' \\<in> H'\n  \\<lbrakk>?H \\<in> carrier (G LMod stabiliser ?x); ?g \\<in> ?H\\<rbrakk>\n  \\<Longrightarrow> ?H = ?g <# stabiliser ?x\n\ngoal (1 subgoal):\n 1. H' = h <# stabiliser x", "by blast"], ["proof (state)\nthis:\n  H' = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       \\<lbrakk>xa \\<in> carrier (G LMod stabiliser x);\n        y \\<in> carrier (G LMod stabiliser x);\n        rep xa \\<odot> x = rep y \\<odot> x\\<rbrakk>\n       \\<Longrightarrow> xa = y", "then"], ["proof (chain)\npicking this:\n  H' = h <# stabiliser x", "show \"H = H'\""], ["proof (prove)\nusing this:\n  H' = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = H'", "using H2 H3"], ["proof (prove)\nusing this:\n  H' = h <# stabiliser x\n  H = h <# stabiliser x\n  H' = h <# stabiliser x\n\ngoal (1 subgoal):\n 1. H = H'", "by simp"], ["proof (state)\nthis:\n  H = H'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on (\\<lambda>H. rep H \\<odot> x) (carrier (G LMod stabiliser x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x", "show \"(\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x", "proof(auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x\n 2. \\<And>xa.\n       xa \\<in> orbit x \\<Longrightarrow>\n       xa \\<in> (\\<lambda>H. rep H \\<odot> x) `\n                carrier (G LMod stabiliser x)", "show \"\\<And>H. H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow> rep H \\<odot> x \\<in> orbit x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "fix H"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "assume H:\"H \\<in> carrier (G LMod (stabiliser x))\""], ["proof (state)\nthis:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "obtain h where h:\"h = rep H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>h. h = rep H \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  h = rep H\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "from H h quotient_rep_ex"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)\n  h = rep H\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H", "have hH: \"h \\<in> H\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n  h = rep H\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H\n\ngoal (1 subgoal):\n 1. h \\<in> H", "by simp"], ["proof (state)\nthis:\n  h \\<in> H\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "have stab_sub: \"(stabiliser x) \\<subseteq> carrier G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stabiliser x \\<subseteq> carrier G", "using stabiliser_def"], ["proof (prove)\nusing this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. stabiliser x \\<subseteq> carrier G", "by auto"], ["proof (state)\nthis:\n  stabiliser x \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "from subgroup.lcosets_carrier[OF stabiliser_subgroup is_group] H"], ["proof (chain)\npicking this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier (G LMod stabiliser x)", "have \"H \\<subseteq> carrier G\""], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. H \\<subseteq> carrier G", "unfolding LFactGroup_def"], ["proof (prove)\nusing this:\n  ?X \\<in> lcosets stabiliser ?x2 \\<Longrightarrow> ?X \\<subseteq> carrier G\n  H \\<in> carrier\n           \\<lparr>carrier = lcosets stabiliser x, mult = (<#>),\n              one = stabiliser x\\<rparr>\n\ngoal (1 subgoal):\n 1. H \\<subseteq> carrier G", "by simp"], ["proof (state)\nthis:\n  H \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "with hH"], ["proof (chain)\npicking this:\n  h \\<in> H\n  H \\<subseteq> carrier G", "have \"h \\<in> carrier G\""], ["proof (prove)\nusing this:\n  h \\<in> H\n  H \\<subseteq> carrier G\n\ngoal (1 subgoal):\n 1. h \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>H.\n       H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n       rep H \\<odot> x \\<in> orbit x", "then"], ["proof (chain)\npicking this:\n  h \\<in> carrier G", "show \"(rep H) \\<odot> x \\<in> orbit x\""], ["proof (prove)\nusing this:\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. rep H \\<odot> x \\<in> orbit x", "using h orbit_def mem_Collect_eq"], ["proof (prove)\nusing this:\n  h \\<in> carrier G\n  h = rep H\n  orbit ?x = {y. \\<exists>g\\<in>carrier G. y = g \\<odot> ?x}\n  (?a \\<in> Collect ?P) = ?P ?a\n\ngoal (1 subgoal):\n 1. rep H \\<odot> x \\<in> orbit x", "by blast"], ["proof (state)\nthis:\n  rep H \\<odot> x \\<in> orbit x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?H \\<in> carrier (G LMod stabiliser x) \\<Longrightarrow>\n  rep ?H \\<odot> x \\<in> orbit x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> orbit x \\<Longrightarrow>\n       xa \\<in> (\\<lambda>H. rep H \\<odot> x) `\n                carrier (G LMod stabiliser x)", "show \"\\<And>y. y \\<in> orbit x \\<Longrightarrow> y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "assume y:\"y \\<in> orbit x\""], ["proof (state)\nthis:\n  y \\<in> orbit x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "obtain g  where gG:\"g \\<in> carrier G\" and \"y = g \\<odot> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> carrier G; y = g \\<odot> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using y orbit_def"], ["proof (prove)\nusing this:\n  y \\<in> orbit x\n  orbit ?x = {y. \\<exists>g\\<in>carrier G. y = g \\<odot> ?x}\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> carrier G; y = g \\<odot> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  g \\<in> carrier G\n  y = g \\<odot> x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "obtain H where H:\"H = g <# (stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>H.\n        H = g <# stabiliser x \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "with gG"], ["proof (chain)\npicking this:\n  g \\<in> carrier G\n  H = g <# stabiliser x", "have H_carr:\"H \\<in> carrier (G LMod stabiliser x)\""], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H \\<in> carrier (G LMod stabiliser x)", "unfolding LFactGroup_def LCOSETS_def"], ["proof (prove)\nusing this:\n  g \\<in> carrier G\n  H = g <# stabiliser x\n\ngoal (1 subgoal):\n 1. H \\<in> carrier\n             \\<lparr>carrier = \\<Union>a\\<in>carrier G. {a <# stabiliser x},\n                mult = (<#>), one = stabiliser x\\<rparr>", "by auto"], ["proof (state)\nthis:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "then"], ["proof (chain)\npicking this:\n  H \\<in> carrier (G LMod stabiliser x)", "have \"rep H \\<in> H\""], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. rep H \\<in> H", "using quotient_rep_ex"], ["proof (prove)\nusing this:\n  H \\<in> carrier (G LMod stabiliser x)\n  ?H \\<in> carrier (G LMod stabiliser ?x) \\<Longrightarrow> rep ?H \\<in> ?H\n\ngoal (1 subgoal):\n 1. rep H \\<in> H", "by auto"], ["proof (state)\nthis:\n  rep H \\<in> H\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "then"], ["proof (chain)\npicking this:\n  rep H \\<in> H", "obtain h where h_stab:\"h \\<in> stabiliser x\" and gh:\"rep H = g \\<otimes> h\""], ["proof (prove)\nusing this:\n  rep H \\<in> H\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>h \\<in> stabiliser x; rep H = g \\<otimes> h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding H l_coset_def"], ["proof (prove)\nusing this:\n  rep (\\<Union>h\\<in>stabiliser x. {g \\<otimes> h})\n  \\<in> (\\<Union>h\\<in>stabiliser x. {g \\<otimes> h})\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>h \\<in> stabiliser x;\n         rep (\\<Union>h\\<in>stabiliser x. {g \\<otimes> h}) =\n         g \\<otimes> h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  h \\<in> stabiliser x\n  rep H = g \\<otimes> h\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "have hG:\"h \\<in> carrier G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> carrier G", "using h_stab stabiliser_def"], ["proof (prove)\nusing this:\n  h \\<in> stabiliser x\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n\ngoal (1 subgoal):\n 1. h \\<in> carrier G", "by auto"], ["proof (state)\nthis:\n  h \\<in> carrier G\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "from stabiliser_def h_stab"], ["proof (chain)\npicking this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  h \\<in> stabiliser x", "have \"h \\<odot> x = x\""], ["proof (prove)\nusing this:\n  stabiliser ?x = {g \\<in> carrier G. g \\<odot> ?x = ?x}\n  h \\<in> stabiliser x\n\ngoal (1 subgoal):\n 1. h \\<odot> x = x", "by auto"], ["proof (state)\nthis:\n  h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "with \\<open>y = g \\<odot> x\\<close>"], ["proof (chain)\npicking this:\n  y = g \\<odot> x\n  h \\<odot> x = x", "have \"y = g \\<odot> (h \\<odot> x)\""], ["proof (prove)\nusing this:\n  y = g \\<odot> x\n  h \\<odot> x = x\n\ngoal (1 subgoal):\n 1. y = g \\<odot> (h \\<odot> x)", "by simp"], ["proof (state)\nthis:\n  y = g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "then"], ["proof (chain)\npicking this:\n  y = g \\<odot> (h \\<odot> x)", "have \"y = (g \\<otimes> h) \\<odot> x\""], ["proof (prove)\nusing this:\n  y = g \\<odot> (h \\<odot> x)\n\ngoal (1 subgoal):\n 1. y = g \\<otimes> h \\<odot> x", "using gG hG compat_act"], ["proof (prove)\nusing this:\n  y = g \\<odot> (h \\<odot> x)\n  g \\<in> carrier G\n  h \\<in> carrier G\n  ?g \\<in> carrier G \\<and> ?h \\<in> carrier G \\<longrightarrow>\n  ?g \\<odot> (?h \\<odot> ?x) = ?g \\<otimes> ?h \\<odot> ?x\n\ngoal (1 subgoal):\n 1. y = g \\<otimes> h \\<odot> x", "by auto"], ["proof (state)\nthis:\n  y = g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "then"], ["proof (chain)\npicking this:\n  y = g \\<otimes> h \\<odot> x", "have \"y = (rep H) \\<odot> x\""], ["proof (prove)\nusing this:\n  y = g \\<otimes> h \\<odot> x\n\ngoal (1 subgoal):\n 1. y = rep H \\<odot> x", "using gh"], ["proof (prove)\nusing this:\n  y = g \\<otimes> h \\<odot> x\n  rep H = g \\<otimes> h\n\ngoal (1 subgoal):\n 1. y = rep H \\<odot> x", "by simp"], ["proof (state)\nthis:\n  y = rep H \\<odot> x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> orbit x \\<Longrightarrow>\n       y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "then"], ["proof (chain)\npicking this:\n  y = rep H \\<odot> x", "show \"y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)\""], ["proof (prove)\nusing this:\n  y = rep H \\<odot> x\n\ngoal (1 subgoal):\n 1. y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "using H_carr"], ["proof (prove)\nusing this:\n  y = rep H \\<odot> x\n  H \\<in> carrier (G LMod stabiliser x)\n\ngoal (1 subgoal):\n 1. y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)", "by simp"], ["proof (state)\nthis:\n  y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?y \\<in> orbit x \\<Longrightarrow>\n  ?y \\<in> (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>H. rep H \\<odot> x) ` carrier (G LMod stabiliser x) = orbit x\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>\n  The actual orbit-stabiliser theorem is a consequence of the bijection\n   we established in the previous theorem and of Lagrange's theorem\n\\<close>"], ["", "theorem orbit_stabiliser:\n  assumes finite: \"finite (carrier G)\"\n  shows \"order G = card (orbit x) * card (stabiliser x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "have \"card (carrier (G LMod (stabiliser x))) = card (orbit x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (carrier (G LMod stabiliser x)) = card (orbit x)", "using bij_betw_same_card orbit_stabiliser_bij"], ["proof (prove)\nusing this:\n  bij_betw ?f ?A ?B \\<Longrightarrow> card ?A = card ?B\n  bij_betw (\\<lambda>H. rep H \\<odot> ?x) (carrier (G LMod stabiliser ?x))\n   (orbit ?x)\n\ngoal (1 subgoal):\n 1. card (carrier (G LMod stabiliser x)) = card (orbit x)", "by auto"], ["proof (state)\nthis:\n  card (carrier (G LMod stabiliser x)) = card (orbit x)\n\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "moreover"], ["proof (state)\nthis:\n  card (carrier (G LMod stabiliser x)) = card (orbit x)\n\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "have \"card (carrier (G LMod (stabiliser x))) * card (stabiliser x)  = order G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (carrier (G LMod stabiliser x)) * card (stabiliser x) = order G", "using finite stabiliser_subgroup l_lagrange"], ["proof (prove)\nusing this:\n  finite (carrier G)\n  subgroup (stabiliser ?x) G\n  \\<lbrakk>finite (carrier G); subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> card (lcosets ?H) * card ?H = order G\n\ngoal (1 subgoal):\n 1. card (carrier (G LMod stabiliser x)) * card (stabiliser x) = order G", "unfolding LFactGroup_def"], ["proof (prove)\nusing this:\n  finite (carrier G)\n  subgroup (stabiliser ?x) G\n  \\<lbrakk>finite (carrier G); subgroup ?H G\\<rbrakk>\n  \\<Longrightarrow> card (lcosets ?H) * card ?H = order G\n\ngoal (1 subgoal):\n 1. card\n     (carrier\n       \\<lparr>carrier = lcosets stabiliser x, mult = (<#>),\n          one = stabiliser x\\<rparr>) *\n    card (stabiliser x) =\n    order G", "by simp"], ["proof (state)\nthis:\n  card (carrier (G LMod stabiliser x)) * card (stabiliser x) = order G\n\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "ultimately"], ["proof (chain)\npicking this:\n  card (carrier (G LMod stabiliser x)) = card (orbit x)\n  card (carrier (G LMod stabiliser x)) * card (stabiliser x) = order G", "show ?thesis"], ["proof (prove)\nusing this:\n  card (carrier (G LMod stabiliser x)) = card (orbit x)\n  card (carrier (G LMod stabiliser x)) * card (stabiliser x) = order G\n\ngoal (1 subgoal):\n 1. order G = card (orbit x) * card (stabiliser x)", "by simp"], ["proof (state)\nthis:\n  order G = card (orbit x) * card (stabiliser x)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}