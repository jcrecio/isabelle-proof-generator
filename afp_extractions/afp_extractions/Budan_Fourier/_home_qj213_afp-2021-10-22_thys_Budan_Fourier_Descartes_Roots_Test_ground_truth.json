{"file_name": "/home/qj213/afp-2021-10-22/thys/Budan_Fourier/Descartes_Roots_Test.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Budan_Fourier", "problem_names": ["lemma bij_betw_pos_interval:\n  fixes a b::real\n  assumes \"a<b\"\n  shows \"bij_betw (\\<lambda>x. (a+b * x) / (1+x)) {x. x>0} {x. a<x \\<and> x<b}\"", "lemma proots_sphere_pos_interval:\n  fixes a b::real\n  defines \"q1\\<equiv>[:a,b:]\" and \"q2\\<equiv>[:1,1:]\"\n  assumes \"p\\<noteq>0\" \"a<b\"\n  shows \"proots_count p {x. a < x \\<and> x < b} = proots_count (fcompose p q1 q2) {x. 0 < x}\"", "theorem descartes_roots_test:\n  fixes p::\"real poly\"\n  assumes \"p\\<noteq>0\" \"a<b\"\n  shows \"proots_count p {x. a < x \\<and> x <b} \\<le> descartes_roots_test a b p  \\<and> \n          even (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})\""], "translations": [["", "lemma bij_betw_pos_interval:\n  fixes a b::real\n  assumes \"a<b\"\n  shows \"bij_betw (\\<lambda>x. (a+b * x) / (1+x)) {x. x>0} {x. a<x \\<and> x<b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}\n     {x. a < x \\<and> x < b}", "proof (rule bij_betw_imageI)"], ["proof (state)\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}\n 2. (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} =\n    {x. a < x \\<and> x < b}", "show \"inj_on (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>Collect ((<) 0).\n       \\<forall>y\\<in>Collect ((<) 0).\n          (a + b * x) / (1 + x) = (a + b * y) / (1 + y) \\<longrightarrow>\n          x = y", "apply (auto simp add:field_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>0 < x; 0 < y; x * b + y * a = x * a + y * b\\<rbrakk>\n       \\<Longrightarrow> x = y", "using assms crossproduct_noteq"], ["proof (prove)\nusing this:\n  a < b\n  (?a \\<noteq> ?b \\<and> ?c \\<noteq> ?d) =\n  (?a * ?c + ?b * ?d \\<noteq> ?a * ?d + ?b * ?c)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>0 < x; 0 < y; x * b + y * a = x * a + y * b\\<rbrakk>\n       \\<Longrightarrow> x = y", "by fastforce"], ["proof (state)\nthis:\n  inj_on (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} =\n    {x. a < x \\<and> x < b}", "have \"x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x}\" when \"a < x\" \"x < b\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x}", "proof (rule rev_image_eqI[of \"(x-a)/(b-x)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}\n 2. x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))", "define bx where \"bx=b-x\""], ["proof (state)\nthis:\n  bx = b - x\n\ngoal (2 subgoals):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}\n 2. x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))", "have x:\"x=b-bx\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = b - bx", "unfolding bx_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x = b - (b - x)", "by auto"], ["proof (state)\nthis:\n  x = b - bx\n\ngoal (2 subgoals):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}\n 2. x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))", "have \"bx\\<noteq>0\" \"b>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bx \\<noteq> 0 &&& a < b", "unfolding bx_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. b - x \\<noteq> 0 &&& a < b", "using that"], ["proof (prove)\nusing this:\n  a < x\n  x < b\n\ngoal (1 subgoal):\n 1. b - x \\<noteq> 0 &&& a < b", "by auto"], ["proof (state)\nthis:\n  bx \\<noteq> 0\n  a < b\n\ngoal (2 subgoals):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}\n 2. x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))", "then"], ["proof (chain)\npicking this:\n  bx \\<noteq> 0\n  a < b", "show \" x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))\""], ["proof (prove)\nusing this:\n  bx \\<noteq> 0\n  a < b\n\ngoal (1 subgoal):\n 1. x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))", "apply (fold bx_def,unfold x)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>bx \\<noteq> 0; a < b; bx \\<noteq> 0; a < b\\<rbrakk>\n    \\<Longrightarrow> b - bx =\n                      (a + b * ((b - bx - a) / bx)) /\n                      (1 + (b - bx - a) / bx)", "by (auto simp add:field_simps)"], ["proof (state)\nthis:\n  x = (a + b * ((x - a) / (b - x))) / (1 + (x - a) / (b - x))\n\ngoal (1 subgoal):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}", "show \"(x - a) / (b - x) \\<in> {x. 0 < x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}", "using that"], ["proof (prove)\nusing this:\n  a < x\n  x < b\n\ngoal (1 subgoal):\n 1. (x - a) / (b - x) \\<in> {x. 0 < x}", "by auto"], ["proof (state)\nthis:\n  (x - a) / (b - x) \\<in> {x. 0 < x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>a < ?x; ?x < b\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) `\n                             {x. 0 < x}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} =\n    {x. a < x \\<and> x < b}", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>a < ?x; ?x < b\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) `\n                             {x. 0 < x}", "show \"(\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} = {x. a < x \\<and> x < b}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>a < ?x; ?x < b\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) `\n                             {x. 0 < x}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} =\n    {x. a < x \\<and> x < b}", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>a < ?x; ?x < b\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> (\\<lambda>x. (a + b * x) / (1 + x)) `\n                             {x. 0 < x}\n  a < b\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} =\n    {x. a < x \\<and> x < b}", "by (auto simp add:divide_simps algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. (a + b * x) / (1 + x)) ` {x. 0 < x} = {x. a < x \\<and> x < b}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma proots_sphere_pos_interval:\n  fixes a b::real\n  defines \"q1\\<equiv>[:a,b:]\" and \"q2\\<equiv>[:1,1:]\"\n  assumes \"p\\<noteq>0\" \"a<b\"\n  shows \"proots_count p {x. a < x \\<and> x < b} = proots_count (fcompose p q1 q2) {x. 0 < x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} =\n    proots_count (fcompose p q1 q2) {x. 0 < x}", "apply (rule proots_fcompose_bij_eq[OF _ \\<open>p\\<noteq>0\\<close>])"], ["proof (prove)\ngoal (5 subgoals):\n 1. bij_betw (\\<lambda>x. poly q1 x / poly q2 x) {x. 0 < x}\n     {x. a < x \\<and> x < b}\n 2. \\<forall>x\\<in>{x. 0 < x}. poly q2 x \\<noteq> 0\n 3. max (degree q1) (degree q2) \\<le> 1\n 4. \\<forall>c. q1 \\<noteq> smult c q2\n 5. infinite UNIV", "unfolding q1_def q2_def"], ["proof (prove)\ngoal (5 subgoals):\n 1. bij_betw (\\<lambda>x. poly [:a, b:] x / poly [:1, 1:] x) {x. 0 < x}\n     {x. a < x \\<and> x < b}\n 2. \\<forall>x\\<in>{x. 0 < x}. poly [:1, 1:] x \\<noteq> 0\n 3. max (degree [:a, b:]) (degree [:1, 1:]) \\<le> 1\n 4. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 5. infinite UNIV", "using bij_betw_pos_interval[OF \\<open>a<b\\<close>] \\<open>a<b\\<close>"], ["proof (prove)\nusing this:\n  bij_betw (\\<lambda>x. (a + b * x) / (1 + x)) {x. 0 < x}\n   {x. a < x \\<and> x < b}\n  a < b\n\ngoal (5 subgoals):\n 1. bij_betw (\\<lambda>x. poly [:a, b:] x / poly [:1, 1:] x) {x. 0 < x}\n     {x. a < x \\<and> x < b}\n 2. \\<forall>x\\<in>{x. 0 < x}. poly [:1, 1:] x \\<noteq> 0\n 3. max (degree [:a, b:]) (degree [:1, 1:]) \\<le> 1\n 4. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 5. infinite UNIV", "by (auto simp add:algebra_simps infinite_UNIV_char_0)"], ["", "definition descartes_roots_test::\"real \\<Rightarrow> real \\<Rightarrow> real poly \\<Rightarrow> nat\" where\n  \"descartes_roots_test a b p = nat (changes (coeffs (fcompose p [:a,b:] [:1,1:])))\""], ["", "theorem descartes_roots_test:\n  fixes p::\"real poly\"\n  assumes \"p\\<noteq>0\" \"a<b\"\n  shows \"proots_count p {x. a < x \\<and> x <b} \\<le> descartes_roots_test a b p  \\<and> \n          even (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "define q where \"q=fcompose p [:a,b:] [:1,1:]\""], ["proof (state)\nthis:\n  q = fcompose p [:a, b:] [:1, 1:]\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "have \"q\\<noteq>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<noteq> 0", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. fcompose p [:a, b:] [:1, 1:] \\<noteq> 0", "apply (rule fcompose_nzero[OF \\<open>p\\<noteq>0\\<close>])"], ["proof (prove)\ngoal (3 subgoals):\n 1. [:1, 1:] \\<noteq> 0\n 2. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 3. infinite UNIV", "using \\<open>a<b\\<close> infinite_UNIV_char_0"], ["proof (prove)\nusing this:\n  a < b\n  infinite UNIV\n\ngoal (3 subgoals):\n 1. [:1, 1:] \\<noteq> 0\n 2. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 3. infinite UNIV", "by auto"], ["proof (state)\nthis:\n  q \\<noteq> 0\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "have \"proots_count p {x. a < x \\<and> x <b} = proots_count q {x. 0 < x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}", "using proots_sphere_pos_interval[OF \\<open>p\\<noteq>0\\<close> \\<open>a<b\\<close>,folded q_def]"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}", "."], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "moreover"], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "have \"int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n          even (changes (coeffs q) - int (proots_count q {x. 0 < x}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n    even (changes (coeffs q) - int (proots_count q {x. 0 < x}))", "by (rule descartes_sign[OF \\<open>q\\<noteq>0\\<close>])"], ["proof (state)\nthis:\n  int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n  even (changes (coeffs q) - int (proots_count q {x. 0 < x}))\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "then"], ["proof (chain)\npicking this:\n  int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n  even (changes (coeffs q) - int (proots_count q {x. 0 < x}))", "have \"proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n          even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})\""], ["proof (prove)\nusing this:\n  int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n  even (changes (coeffs q) - int (proots_count q {x. 0 < x}))\n\ngoal (1 subgoal):\n 1. proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n    even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})", "using even_nat_iff"], ["proof (prove)\nusing this:\n  int (proots_count q {x. 0 < x}) \\<le> changes (coeffs q) \\<and>\n  even (changes (coeffs q) - int (proots_count q {x. 0 < x}))\n  0 \\<le> ?k \\<Longrightarrow> even (nat ?k) = even ?k\n\ngoal (1 subgoal):\n 1. proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n    even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})", "by auto"], ["proof (state)\nthis:\n  proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n  even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "ultimately"], ["proof (chain)\npicking this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n  even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})", "show ?thesis"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n  even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> descartes_roots_test a b p \\<and>\n    even\n     (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})", "unfolding descartes_roots_test_def"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n  even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b}\n    \\<le> nat (changes (coeffs (fcompose p [:a, b:] [:1, 1:]))) \\<and>\n    even\n     (nat (changes (coeffs (fcompose p [:a, b:] [:1, 1:]))) -\n      proots_count p {x. a < x \\<and> x < b})", "apply (fold q_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>proots_count p {x. a < x \\<and> x < b} =\n             proots_count q {x. 0 < x};\n     proots_count q {x. 0 < x} \\<le> nat (changes (coeffs q)) \\<and>\n     even (nat (changes (coeffs q)) - proots_count q {x. 0 < x})\\<rbrakk>\n    \\<Longrightarrow> proots_count p {x. a < x \\<and> x < b}\n                      \\<le> nat (changes (coeffs q)) \\<and>\n                      even\n                       (nat (changes (coeffs q)) -\n                        proots_count p {x. a < x \\<and> x < b})", "by auto"], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b}\n  \\<le> descartes_roots_test a b p \\<and>\n  even (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The roots test @{term descartes_roots_test} is exact if its result is 0 or 1.\\<close>"], ["", "corollary descartes_roots_test_zero:\n  fixes p::\"real poly\"\n  assumes \"p\\<noteq>0\" \"a<b\" \"descartes_roots_test a b p = 0\"\n  shows \"\\<forall>x. a<x \\<and> x<b \\<longrightarrow> poly p x\\<noteq>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. a < x \\<and> x < b \\<longrightarrow> poly p x \\<noteq> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. a < x \\<and> x < b \\<longrightarrow> poly p x \\<noteq> 0", "have \"proots_count p {x. a < x \\<and> x <b} = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = 0", "using descartes_roots_test[OF assms(1,2)] assms(3)"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b}\n  \\<le> descartes_roots_test a b p \\<and>\n  even (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})\n  descartes_roots_test a b p = 0\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = 0", "by auto"], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = 0\n\ngoal (1 subgoal):\n 1. \\<forall>x. a < x \\<and> x < b \\<longrightarrow> poly p x \\<noteq> 0", "from proots_count_0_imp_empty[OF this \\<open>p\\<noteq>0\\<close>]"], ["proof (chain)\npicking this:\n  proots_within p {x. a < x \\<and> x < b} = {}", "show ?thesis"], ["proof (prove)\nusing this:\n  proots_within p {x. a < x \\<and> x < b} = {}\n\ngoal (1 subgoal):\n 1. \\<forall>x. a < x \\<and> x < b \\<longrightarrow> poly p x \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  \\<forall>x. a < x \\<and> x < b \\<longrightarrow> poly p x \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary descartes_roots_test_one:\n  fixes p::\"real poly\"\n  assumes \"p\\<noteq>0\" \"a<b\" \"descartes_roots_test a b p = 1\"\n  shows \"proots_count p {x. a < x \\<and> x <b} = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = 1", "using descartes_roots_test[OF \\<open>p\\<noteq>0\\<close> \\<open>a<b\\<close>] \\<open>descartes_roots_test a b p = 1\\<close>"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b}\n  \\<le> descartes_roots_test a b p \\<and>\n  even (descartes_roots_test a b p - proots_count p {x. a < x \\<and> x < b})\n  descartes_roots_test a b p = 1\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = 1", "by (metis dvd_diffD even_zero le_neq_implies_less less_one odd_one)"], ["", "text \\<open>Similar to the Budan-Fourier theorem, the Descartes roots test result is exact when all roots \n      are real.\\<close>"], ["", "corollary descartes_roots_test_real:\n  fixes p::\"real poly\"\n  assumes \"p\\<noteq>0\" \"a<b\" \n  assumes \"all_roots_real p\"\n  shows \"proots_count p {x. a < x \\<and> x <b} = descartes_roots_test a b p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "define q where \"q=fcompose p [:a,b:] [:1,1:]\""], ["proof (state)\nthis:\n  q = fcompose p [:a, b:] [:1, 1:]\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "have \"q\\<noteq>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<noteq> 0", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. fcompose p [:a, b:] [:1, 1:] \\<noteq> 0", "apply (rule fcompose_nzero[OF \\<open>p\\<noteq>0\\<close>])"], ["proof (prove)\ngoal (3 subgoals):\n 1. [:1, 1:] \\<noteq> 0\n 2. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 3. infinite UNIV", "using \\<open>a<b\\<close> infinite_UNIV_char_0"], ["proof (prove)\nusing this:\n  a < b\n  infinite UNIV\n\ngoal (3 subgoals):\n 1. [:1, 1:] \\<noteq> 0\n 2. \\<forall>c. [:a, b:] \\<noteq> smult c [:1, 1:]\n 3. infinite UNIV", "by auto"], ["proof (state)\nthis:\n  q \\<noteq> 0\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "have \"proots_count p {x. a < x \\<and> x <b} = proots_count q {x. 0 < x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}", "using proots_sphere_pos_interval[OF \\<open>p\\<noteq>0\\<close> \\<open>a<b\\<close>,folded q_def]"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}", "."], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "moreover"], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "have \"int (proots_count q {x. 0 < x}) = changes (coeffs q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. int (proots_count q {x. 0 < x}) = changes (coeffs q)", "apply (rule descartes_sign_real[OF \\<open>q\\<noteq>0\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. all_roots_real q", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. all_roots_real (fcompose p [:a, b:] [:1, 1:])", "by (rule all_real_roots_mobius[OF \\<open>all_roots_real p\\<close> \\<open>a<b\\<close>])"], ["proof (state)\nthis:\n  int (proots_count q {x. 0 < x}) = changes (coeffs q)\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "then"], ["proof (chain)\npicking this:\n  int (proots_count q {x. 0 < x}) = changes (coeffs q)", "have \"proots_count q {x. 0 < x} = nat (changes (coeffs q))\""], ["proof (prove)\nusing this:\n  int (proots_count q {x. 0 < x}) = changes (coeffs q)\n\ngoal (1 subgoal):\n 1. proots_count q {x. 0 < x} = nat (changes (coeffs q))", "by simp"], ["proof (state)\nthis:\n  proots_count q {x. 0 < x} = nat (changes (coeffs q))\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "ultimately"], ["proof (chain)\npicking this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} = nat (changes (coeffs q))", "show ?thesis"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} = nat (changes (coeffs q))\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p", "unfolding descartes_roots_test_def"], ["proof (prove)\nusing this:\n  proots_count p {x. a < x \\<and> x < b} = proots_count q {x. 0 < x}\n  proots_count q {x. 0 < x} = nat (changes (coeffs q))\n\ngoal (1 subgoal):\n 1. proots_count p {x. a < x \\<and> x < b} =\n    nat (changes (coeffs (fcompose p [:a, b:] [:1, 1:])))", "apply (fold q_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>proots_count p {x. a < x \\<and> x < b} =\n             proots_count q {x. 0 < x};\n     proots_count q {x. 0 < x} = nat (changes (coeffs q))\\<rbrakk>\n    \\<Longrightarrow> proots_count p {x. a < x \\<and> x < b} =\n                      nat (changes (coeffs q))", "by auto"], ["proof (state)\nthis:\n  proots_count p {x. a < x \\<and> x < b} = descartes_roots_test a b p\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}