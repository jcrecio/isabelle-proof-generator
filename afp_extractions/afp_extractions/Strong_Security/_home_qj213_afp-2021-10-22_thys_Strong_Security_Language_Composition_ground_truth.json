{"file_name": "/home/qj213/afp-2021-10-22/thys/Strong_Security/Language_Composition.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Strong_Security", "problem_names": ["theorem Compositionality_Seq: \n  assumes relatedpart1: \"[c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\"\n  assumes relatedpart2: \"[c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  shows \"[c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']\"", "theorem Compositionality_Fork:\n  fixes V::\"('exp,'id) MWLfCom list\"\n  assumes relatedmain: \"[c] \\<approx>\\<^bsub>d\\<^esub> [c']\"\n  assumes relatedthreads: \"V \\<approx>\\<^bsub>d\\<^esub> V'\"\n  shows \"[fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']\"", "theorem Compositionality_If:\n  assumes dind_or_branchesrelated: \n  \"b \\<equiv>\\<^bsub>d\\<^esub> b' \\<or> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or> [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  assumes branch1related: \"[c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\"\n  assumes branch2related: \"[c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  shows \"[if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub> [if b' then c1' else c2' fi]\"", "theorem Compositionality_While:\n  assumes dind: \"b \\<equiv>\\<^bsub>d\\<^esub> b'\"\n  assumes bodyrelated: \"[c] \\<approx>\\<^bsub>d\\<^esub> [c']\"\n  shows \"[while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]\""], "translations": [["", "theorem Compositionality_Seq: \n  assumes relatedpart1: \"[c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\"\n  assumes relatedpart2: \"[c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  shows \"[c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "define R0 where \"R0 = {(S1,S2). \\<exists>c1 c1' c2 c2' W W'. \n    S1 = (c1;c2)#W \\<and> S2 = (c1';c2')#W' \\<and> \n    [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> W \\<approx>\\<^bsub>d\\<^esub> W'}\""], ["proof (state)\nthis:\n  R0 =\n  {(S1, S2).\n   \\<exists>c1 c1' c2 c2' W W'.\n      S1 = (c1;c2) # W \\<and>\n      S2 = (c1';c2') # W' \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n      W \\<approx>\\<^bsub>d\\<^esub> W'}\n\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "from relatedpart1 relatedpart2 trivialpair_in_USdB"], ["proof (chain)\npicking this:\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [] \\<approx>\\<^bsub>?d\\<^esub> []", "have inR0: \"([c1;c2],[c1';c2']) \\<in> R0\""], ["proof (prove)\nusing this:\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [] \\<approx>\\<^bsub>?d\\<^esub> []\n\ngoal (1 subgoal):\n 1. ([c1;c2], [c1';c2']) \\<in> R0", "by (simp add: R0_def)"], ["proof (state)\nthis:\n  ([c1;c2], [c1';c2']) \\<in> R0\n\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "have uptoR0: \"d_Bisimulation_Up_To_USdB d R0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_Bisimulation_Up_To_USdB d R0", "proof (simp add: d_Bisimulation_Up_To_USdB_def, auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>", "show \"sym R0\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. sym R0", "by (simp add: sym_def R0_def, fastforce)"], ["proof (state)\nthis:\n  sym R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix S1 S2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(S1,S2) \\<in> R0\""], ["proof (state)\nthis:\n  (S1, S2) \\<in> R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "with USdBeqlen"], ["proof (chain)\npicking this:\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (S1, S2) \\<in> R0", "show \"length S1 = length S2\""], ["proof (prove)\nusing this:\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (S1, S2) \\<in> R0\n\ngoal (1 subgoal):\n 1. length S1 = length S2", "by (auto simp add: R0_def)"], ["proof (state)\nthis:\n  length S1 = length S2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix S1 S2 RS m1 m2 m1' i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(S1,S2) \\<in> R0\""], ["proof (state)\nthis:\n  (S1, S2) \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume irange: \"i < length S1\""], ["proof (state)\nthis:\n  i < length S1\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume S1step: \"\\<langle>S1!i,m1\\<rangle> \\<rightarrow> \\<langle>RS,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr (S1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume dequal: \"m1 =\\<^bsub>d\\<^esub> m1'\""], ["proof (state)\nthis:\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from inR0"], ["proof (chain)\npicking this:\n  (S1, S2) \\<in> R0", "obtain c1 c1' c2 c2' V V'\n          where R0def': \"S1 = (c1;c2)#V \\<and> S2 = (c1';c2')#V' \\<and> \n          [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> V \\<approx>\\<^bsub>d\\<^esub> V'\""], ["proof (prove)\nusing this:\n  (S1, S2) \\<in> R0\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2 V c1' c2' V'.\n        S1 = (c1;c2) # V \\<and>\n        S2 = (c1';c2') # V' \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n        V \\<approx>\\<^bsub>d\\<^esub> V' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: R0_def, force)"], ["proof (state)\nthis:\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "with irange"], ["proof (chain)\npicking this:\n  i < length S1\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'", "have case_distinction1: \n          \"i = 0 \\<or> (V \\<noteq> [] \\<and> i \\<noteq> 0)\""], ["proof (prove)\nusing this:\n  i < length S1\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "have case1: \"i = 0 \\<Longrightarrow> \n          \\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n             ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume i0: \"i = 0\"\n\n              \\<comment> \\<open>get the two different sub-cases:\\<close>"], ["proof (state)\nthis:\n  i = 0\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with R0def' S1step"], ["proof (chain)\npicking this:\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (S1 ! i) m1 RS m2\n  i = 0", "obtain c3 W where case_distinction: \n              \"RS = [c2] \\<and> \\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>[],m2\\<rangle>\n              \\<or> RS = (c3;c2)#W \\<and> \\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>c3#W,m2\\<rangle>\""], ["proof (prove)\nusing this:\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (S1 ! i) m1 RS m2\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>c3 W.\n        RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n        RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp, metis MWLfSteps_det_cases(3))"], ["proof (state)\nthis:\n  RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n              \\<comment> \\<open>Case 1: first command terminates\\<close>"], ["proof (state)\nthis:\n  RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = [c2]\""], ["proof (state)\nthis:\n  RS = [c2]\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume StepAssump: \"\\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>[],m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr c1 m1 [] m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBeqlen[of \"[]\"] StepAssump R0def' \n                USdB_Strong_d_Bisimulation dequal\n                strongdB_aux[of \"d\" \"\\<approx>\\<^bsub>d\\<^esub>\" \"i\"\n                \"[c1]\" \"[c1']\" \"m1\" \"[]\" \"m2\" \"m1'\"] i0"], ["proof (chain)\npicking this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length [] = length ?V'\n  SRabbr c1 m1 [] m2\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 [] m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0", "obtain W' m2' where c1c1'reason: \n                \"\\<langle>c1',m1'\\<rangle> \\<rightarrow> \\<langle>W',m2'\\<rangle> \\<and> W' = [] \n                \\<and> [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length [] = length ?V'\n  SRabbr c1 m1 [] m2\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 [] m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>W' m2'.\n        SRabbr c1' m1' W' m2' \\<and>\n        W' = [] \\<and>\n        [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n        m2 =\\<^bsub>d\\<^esub> m2' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with c1c1'reason"], ["proof (chain)\npicking this:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "have conclpart:\n                \"\\<langle>c1';c2',m1'\\<rangle> \\<rightarrow> \\<langle>[c2'],m2'\\<rangle> \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. SRabbr (c1';c2') m1' [c2'] m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "by (simp add: MWLfSteps_det.seq1)"], ["proof (state)\nthis:\n  SRabbr (c1';c2') m1' [c2'] m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with RSassump R0def' i0"], ["proof (chain)\npicking this:\n  RS = [c2]\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  i = 0\n  SRabbr (c1';c2') m1' [c2'] m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "have case1_concl:\n                \"\\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                 ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  RS = [c2]\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  i = 0\n  SRabbr (c1';c2') m1' [c2'] m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by (simp, rule_tac x=\"[c2']\" in exI, auto)"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [c2]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n              \\<comment> \\<open>Case 2: first command does not terminate\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [c2]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [c2]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = (c3;c2)#W\""], ["proof (state)\nthis:\n  RS = (c3;c2) # W\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume StepAssump: \"\\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>c3#W,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from StepAssump R0def' USdB_Strong_d_Bisimulation dequal\n                strongdB_aux[of \"d\" \"\\<approx>\\<^bsub>d\\<^esub>\" \"i\" \"[c1]\" \"[c1']\" \"m1\" \n                \"c3#W\" \"m2\" \"m1'\"] i0"], ["proof (chain)\npicking this:\n  SRabbr c1 m1 (c3 # W) m2\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 (c3 # W) m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       (c3 # W) \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0", "obtain V'' m2' where c1c1'reason: \n                \"\\<langle>c1',m1'\\<rangle> \\<rightarrow> \\<langle>V'',m2'\\<rangle> \n                \\<and> (c3#W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1 m1 (c3 # W) m2\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 (c3 # W) m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       (c3 # W) \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>V'' m2'.\n        SRabbr c1' m1' V'' m2' \\<and>\n        (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and>\n        m2 =\\<^bsub>d\\<^esub> m2' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with USdBeqlen[of \"c3#W\" \"V''\"]"], ["proof (chain)\npicking this:\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> V'' \\<Longrightarrow>\n  length (c3 # W) = length V''\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "obtain c3' W' \n                where V''reason:\n                \"V'' = c3'#W' \\<and> length W = length W'\""], ["proof (prove)\nusing this:\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> V'' \\<Longrightarrow>\n  length (c3 # W) = length V''\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (\\<And>c3' W'.\n        V'' = c3' # W' \\<and> length W = length W' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (cases V'', force, force)"], ["proof (state)\nthis:\n  V'' = c3' # W' \\<and> length W = length W'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with c1c1'reason"], ["proof (chain)\npicking this:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  V'' = c3' # W' \\<and> length W = length W'", "have conclpart1:\n                \"\\<langle>c1';c2',m1'\\<rangle> \\<rightarrow> \\<langle>(c3';c2')#W',m2'\\<rangle> \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  V'' = c3' # W' \\<and> length W = length W'\n\ngoal (1 subgoal):\n 1. SRabbr (c1';c2') m1' ((c3';c2') # W') m2' \\<and>\n    m2 =\\<^bsub>d\\<^esub> m2'", "by (simp add: MWLfSteps_det.seq2)"], ["proof (state)\nthis:\n  SRabbr (c1';c2') m1' ((c3';c2') # W') m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from V''reason c1c1'reason \n                USdB_decomp_head_tail[of \"c3\" \"W\"] \n                USdB_Strong_d_Bisimulation"], ["proof (chain)\npicking this:\n  V'' = c3' # W' \\<and> length W = length W'\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V' \\<Longrightarrow>\n  [c3] \\<approx>\\<^bsub>?d\\<^esub> [?c'] \\<and>\n  W \\<approx>\\<^bsub>?d\\<^esub> ?V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>", "have c3aWinUSDB: \n                \"[c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and> W \\<approx>\\<^bsub>d\\<^esub> W'\""], ["proof (prove)\nusing this:\n  V'' = c3' # W' \\<and> length W = length W'\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V' \\<Longrightarrow>\n  [c3] \\<approx>\\<^bsub>?d\\<^esub> [?c'] \\<and>\n  W \\<approx>\\<^bsub>?d\\<^esub> ?V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n    W \\<approx>\\<^bsub>d\\<^esub> W'", "by blast"], ["proof (state)\nthis:\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with R0def'"], ["proof (chain)\npicking this:\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'", "have conclpart2:\n                \"((c3;c2)#W,(c3';c2')#W') \\<in> R0\""], ["proof (prove)\nusing this:\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'\n\ngoal (1 subgoal):\n 1. ((c3;c2) # W, (c3';c2') # W') \\<in> R0", "by (auto simp add: R0_def)"], ["proof (state)\nthis:\n  ((c3;c2) # W, (c3';c2') # W') \\<in> R0\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with i0 RSassump R0def' V''reason conclpart1"], ["proof (chain)\npicking this:\n  i = 0\n  RS = (c3;c2) # W\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  V'' = c3' # W' \\<and> length W = length W'\n  SRabbr (c1';c2') m1' ((c3';c2') # W') m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  ((c3;c2) # W, (c3';c2') # W') \\<in> R0", "have case2_concl:\n                \"\\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i = 0\n  RS = (c3;c2) # W\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  V'' = c3' # W' \\<and> length W = length W'\n  SRabbr (c1';c2') m1' ((c3';c2') # W') m2' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  ((c3;c2) # W, (c3';c2') # W') \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by (rule_tac x=\"(c3';c2')#W'\" in exI, auto)"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>RS = (c3;c2) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n  \\<lbrakk>RS = [c2]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>RS = (c3;c2) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show \"\\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n               ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  RS = [c2] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;c2) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n  \\<lbrakk>RS = [c2]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>RS = (c3;c2) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by blast"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "have case2: \"\\<lbrakk> V \\<noteq> []; i \\<noteq> 0 \\<rbrakk>\n            \\<Longrightarrow> \\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n               ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume Vnonempt: \"V \\<noteq> []\""], ["proof (state)\nthis:\n  V \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume inot0: \"i \\<noteq> 0\""], ["proof (state)\nthis:\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with Vnonempt irange R0def'"], ["proof (chain)\npicking this:\n  V \\<noteq> []\n  i < length S1\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  i \\<noteq> 0", "have i1range:\n                \"(i-Suc 0) < length V\""], ["proof (prove)\nusing this:\n  V \\<noteq> []\n  i < length S1\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i - Suc 0 < length V", "by simp"], ["proof (state)\nthis:\n  i - Suc 0 < length V\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from inot0 R0def'"], ["proof (chain)\npicking this:\n  i \\<noteq> 0\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'", "have S1ieq: \"S1!i = V!(i-Suc 0)\""], ["proof (prove)\nusing this:\n  i \\<noteq> 0\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. S1 ! i = V ! (i - Suc 0)", "by auto"], ["proof (state)\nthis:\n  S1 ! i = V ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from inot0 R0def'"], ["proof (chain)\npicking this:\n  i \\<noteq> 0\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'", "have \"S2!i = V'!(i-Suc 0)\""], ["proof (prove)\nusing this:\n  i \\<noteq> 0\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. S2 ! i = V' ! (i - Suc 0)", "by auto"], ["proof (state)\nthis:\n  S2 ! i = V' ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R0 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with S1ieq R0def' S1step i1range dequal \n                USdB_Strong_d_Bisimulation\n                strongdB_aux[of \"d\" \"USdB d\"\n                \"i-Suc 0\" \"V\" \"V'\" \"m1\" \"RS\" \"m2\" \"m1'\"]"], ["proof (chain)\npicking this:\n  S1 ! i = V ! (i - Suc 0)\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (S1 ! i) m1 RS m2\n  i - Suc 0 < length V\n  m1 =\\<^bsub>d\\<^esub> m1'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i - Suc 0 < length V; V \\<approx>\\<^bsub>d\\<^esub> V';\n   SRabbr (V ! (i - Suc 0)) m1 RS m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr (V' ! (i - Suc 0)) m1' W' m2' \\<and>\n                       RS \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  S2 ! i = V' ! (i - Suc 0)", "show \"\\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  S1 ! i = V ! (i - Suc 0)\n  S1 = (c1;c2) # V \\<and>\n  S2 = (c1';c2') # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (S1 ! i) m1 RS m2\n  i - Suc 0 < length V\n  m1 =\\<^bsub>d\\<^esub> m1'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i - Suc 0 < length V; V \\<approx>\\<^bsub>d\\<^esub> V';\n   SRabbr (V ! (i - Suc 0)) m1 RS m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr (V' ! (i - Suc 0)) m1' W' m2' \\<and>\n                       RS \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  S2 ! i = V' ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by force"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show \"\\<exists>RS' m2'. \\<langle>S2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n           ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (S2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (S2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "hence \"R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\""], ["proof (prove)\nusing this:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "by (rule Up_To_Technique)"], ["proof (state)\nthis:\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "with inR0"], ["proof (chain)\npicking this:\n  ([c1;c2], [c1';c2']) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  ([c1;c2], [c1';c2']) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']", "by auto"], ["proof (state)\nthis:\n  [c1;c2] \\<approx>\\<^bsub>d\\<^esub> [c1';c2']\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Compositionality_Fork:\n  fixes V::\"('exp,'id) MWLfCom list\"\n  assumes relatedmain: \"[c] \\<approx>\\<^bsub>d\\<^esub> [c']\"\n  assumes relatedthreads: \"V \\<approx>\\<^bsub>d\\<^esub> V'\"\n  shows \"[fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "define R0 where \"R0 = {(F1,F2). \\<exists>c1 c1' W W'. \n    F1 = [fork c1 W] \\<and> F2 = [fork c1' W']\n    \\<and> [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> W \\<approx>\\<^bsub>d\\<^esub> W'}\""], ["proof (state)\nthis:\n  R0 =\n  {(F1, F2).\n   \\<exists>c1 c1' W W'.\n      F1 = [fork c1 W] \\<and>\n      F2 = [fork c1' W'] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      W \\<approx>\\<^bsub>d\\<^esub> W'}\n\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "from relatedmain relatedthreads"], ["proof (chain)\npicking this:\n  [c] \\<approx>\\<^bsub>d\\<^esub> [c']\n  V \\<approx>\\<^bsub>d\\<^esub> V'", "have inR0: \"([fork c V],[fork c' V']) \\<in> R0\""], ["proof (prove)\nusing this:\n  [c] \\<approx>\\<^bsub>d\\<^esub> [c']\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. ([fork c V], [fork c' V']) \\<in> R0", "by (simp add: R0_def)"], ["proof (state)\nthis:\n  ([fork c V], [fork c' V']) \\<in> R0\n\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "have uptoR0: \"d_Bisimulation_Up_To_USdB d R0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_Bisimulation_Up_To_USdB d R0", "proof (simp add: d_Bisimulation_Up_To_USdB_def, auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>", "show \"sym R0\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. sym R0", "by (simp add: R0_def sym_def, auto)"], ["proof (state)\nthis:\n  sym R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix F1 F2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(F1,F2) \\<in> R0\""], ["proof (state)\nthis:\n  (F1, F2) \\<in> R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "with R0_def USdBeqlen"], ["proof (chain)\npicking this:\n  R0 =\n  {(F1, F2).\n   \\<exists>c1 c1' W W'.\n      F1 = [fork c1 W] \\<and>\n      F2 = [fork c1' W'] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      W \\<approx>\\<^bsub>d\\<^esub> W'}\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (F1, F2) \\<in> R0", "show \"length F1 = length F2\""], ["proof (prove)\nusing this:\n  R0 =\n  {(F1, F2).\n   \\<exists>c1 c1' W W'.\n      F1 = [fork c1 W] \\<and>\n      F2 = [fork c1' W'] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      W \\<approx>\\<^bsub>d\\<^esub> W'}\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (F1, F2) \\<in> R0\n\ngoal (1 subgoal):\n 1. length F1 = length F2", "by auto"], ["proof (state)\nthis:\n  length F1 = length F2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix F1 F2 c1V m1 m2 m1' i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(F1,F2) \\<in> R0\""], ["proof (state)\nthis:\n  (F1, F2) \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume irange: \"i < length F1\""], ["proof (state)\nthis:\n  i < length F1\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume F1step: \"\\<langle>F1!i,m1\\<rangle> \\<rightarrow> \\<langle>c1V,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr (F1 ! i) m1 c1V m2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume dequal: \"m1 =\\<^bsub>d\\<^esub> m1'\""], ["proof (state)\nthis:\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from inR0"], ["proof (chain)\npicking this:\n  (F1, F2) \\<in> R0", "obtain c1 c1' V V' \n        where R0def': \"F1 = [fork c1 V] \\<and> F2 = [fork c1' V'] \\<and> \n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> V \\<approx>\\<^bsub>d\\<^esub> V'\""], ["proof (prove)\nusing this:\n  (F1, F2) \\<in> R0\n\ngoal (1 subgoal):\n 1. (\\<And>c1 V c1' V'.\n        F1 = [fork c1 V] \\<and>\n        F2 = [fork c1' V'] \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        V \\<approx>\\<^bsub>d\\<^esub> V' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: R0_def, force)"], ["proof (state)\nthis:\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from irange R0def' F1step"], ["proof (chain)\npicking this:\n  i < length F1\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (F1 ! i) m1 c1V m2", "have rew: \"c1V = c1#V \\<and> m2 = m1\""], ["proof (prove)\nusing this:\n  i < length F1\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (F1 ! i) m1 c1V m2\n\ngoal (1 subgoal):\n 1. c1V = c1 # V \\<and> m2 = m1", "by (simp, metis MWLf_semantics.MWLfSteps_det_cases(6))"], ["proof (state)\nthis:\n  c1V = c1 # V \\<and> m2 = m1\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from irange R0def' MWLfSteps_det.fork"], ["proof (chain)\npicking this:\n  i < length F1\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (fork ?c ?V) ?m (?c # ?V) ?m", "have F2step: \n        \"\\<langle>F2!i,m1'\\<rangle> \\<rightarrow> \\<langle>c1'#V',m1'\\<rangle>\""], ["proof (prove)\nusing this:\n  i < length F1\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (fork ?c ?V) ?m (?c # ?V) ?m\n\ngoal (1 subgoal):\n 1. SRabbr (F2 ! i) m1' (c1' # V') m1'", "by force"], ["proof (state)\nthis:\n  SRabbr (F2 ! i) m1' (c1' # V') m1'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from R0def' USdB_comp_head_tail"], ["proof (chain)\npicking this:\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  \\<lbrakk>[?c] \\<approx>\\<^bsub>?d\\<^esub> [?c'];\n   ?V \\<approx>\\<^bsub>?d\\<^esub> ?V'\\<rbrakk>\n  \\<Longrightarrow> (?c # ?V) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V'", "have conclpart: \n         \"((c1#V,c1'#V') \\<in> R0 \\<or> (c1#V) \\<approx>\\<^bsub>d\\<^esub> (c1'#V'))\""], ["proof (prove)\nusing this:\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  \\<lbrakk>[?c] \\<approx>\\<^bsub>?d\\<^esub> [?c'];\n   ?V \\<approx>\\<^bsub>?d\\<^esub> ?V'\\<rbrakk>\n  \\<Longrightarrow> (?c # ?V) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V'\n\ngoal (1 subgoal):\n 1. (c1 # V, c1' # V') \\<in> R0 \\<or>\n    (c1 # V) \\<approx>\\<^bsub>d\\<^esub> c1' # V'", "by auto"], ["proof (state)\nthis:\n  (c1 # V, c1' # V') \\<in> R0 \\<or>\n  (c1 # V) \\<approx>\\<^bsub>d\\<^esub> c1' # V'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "with irange rew inR0 F1step dequal R0def' F2step"], ["proof (chain)\npicking this:\n  i < length F1\n  c1V = c1 # V \\<and> m2 = m1\n  (F1, F2) \\<in> R0\n  SRabbr (F1 ! i) m1 c1V m2\n  m1 =\\<^bsub>d\\<^esub> m1'\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (F2 ! i) m1' (c1' # V') m1'\n  (c1 # V, c1' # V') \\<in> R0 \\<or>\n  (c1 # V) \\<approx>\\<^bsub>d\\<^esub> c1' # V'", "show \"\\<exists>c1V' m2'. \\<langle>F2!i,m1'\\<rangle> \\<rightarrow> \\<langle>c1V',m2'\\<rangle> \\<and> \n        ((c1V,c1V') \\<in> R0 \\<or> c1V \\<approx>\\<^bsub>d\\<^esub> c1V') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i < length F1\n  c1V = c1 # V \\<and> m2 = m1\n  (F1, F2) \\<in> R0\n  SRabbr (F1 ! i) m1 c1V m2\n  m1 =\\<^bsub>d\\<^esub> m1'\n  F1 = [fork c1 V] \\<and>\n  F2 = [fork c1' V'] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V'\n  SRabbr (F2 ! i) m1' (c1' # V') m1'\n  (c1 # V, c1' # V') \\<in> R0 \\<or>\n  (c1 # V) \\<approx>\\<^bsub>d\\<^esub> c1' # V'\n\ngoal (1 subgoal):\n 1. \\<exists>c1V' m2'.\n       SRabbr (F2 ! i) m1' c1V' m2' \\<and>\n       ((c1V, c1V') \\<in> R0 \\<or>\n        c1V \\<approx>\\<^bsub>d\\<^esub> c1V') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>c1V' m2'.\n     SRabbr (F2 ! i) m1' c1V' m2' \\<and>\n     ((c1V, c1V') \\<in> R0 \\<or> c1V \\<approx>\\<^bsub>d\\<^esub> c1V') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "hence \"R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\""], ["proof (prove)\nusing this:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "by (rule Up_To_Technique)"], ["proof (state)\nthis:\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "with inR0"], ["proof (chain)\npicking this:\n  ([fork c V], [fork c' V']) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  ([fork c V], [fork c' V']) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']", "by auto"], ["proof (state)\nthis:\n  [fork c V] \\<approx>\\<^bsub>d\\<^esub> [fork c' V']\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Compositionality_If:\n  assumes dind_or_branchesrelated: \n  \"b \\<equiv>\\<^bsub>d\\<^esub> b' \\<or> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or> [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  assumes branch1related: \"[c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\"\n  assumes branch2related: \"[c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\"\n  shows \"[if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub> [if b' then c1' else c2' fi]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "define R1 where \"R1 = {(I1,I2). \\<exists>c1 c1' c2 c2' b b'.\n    I1 = [if b then c1 else c2 fi] \\<and> I2 = [if b' then c1' else c2' fi] \\<and>\n    [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'}\""], ["proof (state)\nthis:\n  R1 =\n  {(I1, I2).\n   \\<exists>c1 c1' c2 c2' b b'.\n      I1 = [if b then c1 else c2 fi] \\<and>\n      I2 = [if b' then c1' else c2' fi] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n      b \\<equiv>\\<^bsub>d\\<^esub> b'}\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "define R2 where \"R2 = {(I1,I2). \\<exists>c1 c1' c2 c2' b b'.\n    I1 = [if b then c1 else c2 fi] \\<and> I2 = [if b' then c1' else c2' fi] \\<and>\n    [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n    ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or> [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])}\""], ["proof (state)\nthis:\n  R2 =\n  {(I1, I2).\n   \\<exists>c1 c1' c2 c2' b b'.\n      I1 = [if b then c1 else c2 fi] \\<and>\n      I2 = [if b' then c1' else c2' fi] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n      ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n       [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])}\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "define R0 where \"R0 = R1 \\<union> R2\""], ["proof (state)\nthis:\n  R0 = R1 \\<union> R2\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "from dind_or_branchesrelated branch1related branch2related"], ["proof (chain)\npicking this:\n  b \\<equiv>\\<^bsub>d\\<^esub> b' \\<or>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']", "have inR0: \"([if b then c1 else c2 fi],[if b' then c1' else c2' fi]) \\<in> R0\""], ["proof (prove)\nusing this:\n  b \\<equiv>\\<^bsub>d\\<^esub> b' \\<or>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\n\ngoal (1 subgoal):\n 1. ([if b then c1 else c2 fi], [if b' then c1' else c2' fi]) \\<in> R0", "by (simp add: R0_def R1_def R2_def)"], ["proof (state)\nthis:\n  ([if b then c1 else c2 fi], [if b' then c1' else c2' fi]) \\<in> R0\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "have uptoR0: \"d_Bisimulation_Up_To_USdB d R0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_Bisimulation_Up_To_USdB d R0", "proof (simp add: d_Bisimulation_Up_To_USdB_def, auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym d_indistinguishable_sym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e", "have symR1: \"sym R1\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e\n\ngoal (1 subgoal):\n 1. sym R1", "by (simp add: sym_def R1_def, fastforce)"], ["proof (state)\nthis:\n  sym R1\n\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>", "have symR2: \"sym R2\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. sym R2", "by (simp add: sym_def R2_def, fastforce)"], ["proof (state)\nthis:\n  sym R2\n\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from symR1 symR2"], ["proof (chain)\npicking this:\n  sym R1\n  sym R2", "show \"sym R0\""], ["proof (prove)\nusing this:\n  sym R1\n  sym R2\n\ngoal (1 subgoal):\n 1. sym R0", "by (simp add: sym_def R0_def)"], ["proof (state)\nthis:\n  sym R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix I1 I2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(I1,I2) \\<in> R0\""], ["proof (state)\nthis:\n  (I1, I2) \\<in> R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "thus \"length I1 = length I2\""], ["proof (prove)\nusing this:\n  (I1, I2) \\<in> R0\n\ngoal (1 subgoal):\n 1. length I1 = length I2", "by (simp add: R0_def R1_def R2_def, auto)"], ["proof (state)\nthis:\n  length I1 = length I2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix I1 I2 RS m1 m1' m2 i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(I1,I2) \\<in> R0\""], ["proof (state)\nthis:\n  (I1, I2) \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume irange: \"i < length I1\""], ["proof (state)\nthis:\n  i < length I1\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume I1step: \"\\<langle>I1!i,m1\\<rangle> \\<rightarrow> \\<langle>RS,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr (I1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume dequal: \"m1 =\\<^bsub>d\\<^esub> m1'\""], ["proof (state)\nthis:\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "have inR1case: \"(I1,I2) \\<in> R1\n          \\<Longrightarrow> \\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n             ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume inR1: \"(I1,I2) \\<in> R1\""], ["proof (state)\nthis:\n  (I1, I2) \\<in> R1\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "then"], ["proof (chain)\npicking this:\n  (I1, I2) \\<in> R1", "obtain c1 c1' c2 c2' b b' where R1def':\n              \"I1 = [if b then c1 else c2 fi] \n              \\<and> I2 = [if b' then c1' else c2' fi] \\<and>\n              [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\""], ["proof (prove)\nusing this:\n  (I1, I2) \\<in> R1\n\ngoal (1 subgoal):\n 1. (\\<And>b c1 c2 b' c1' c2'.\n        I1 = [if b then c1 else c2 fi] \\<and>\n        I2 = [if b' then c1' else c2' fi] \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n        b \\<equiv>\\<^bsub>d\\<^esub> b' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: R1_def, force)"], ["proof (state)\nthis:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n            \\<comment> \\<open>get the two different cases True and False from semantics:\\<close>"], ["proof (state)\nthis:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from irange R1def' I1step"], ["proof (chain)\npicking this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (I1 ! i) m1 RS m2", "have case_distinction:\n              \"RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n              RS = [c2] \\<and> BMap (E b m1) = False\""], ["proof (prove)\nusing this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (I1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n    RS = [c2] \\<and> BMap (E b m1) = False", "by (simp, metis MWLf_semantics.MWLfSteps_det_cases(4))"], ["proof (state)\nthis:\n  RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n  RS = [c2] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n              \\<comment> \\<open>Case 1: b evaluates to True\\<close>"], ["proof (state)\nthis:\n  RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n  RS = [c2] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n  RS = [c2] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume bevalT: \"BMap (E b m1) = True\""], ["proof (state)\nthis:\n  BMap (E b m1) = True\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = [c1]\""], ["proof (state)\nthis:\n  RS = [c1]\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from irange bevalT I1step R1def' RSassump"], ["proof (chain)\npicking this:\n  i < length I1\n  BMap (E b m1) = True\n  SRabbr (I1 ! i) m1 RS m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1]", "have memeq:\n                \"m2 = m1\""], ["proof (prove)\nusing this:\n  i < length I1\n  BMap (E b m1) = True\n  SRabbr (I1 ! i) m1 RS m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1]\n\ngoal (1 subgoal):\n 1. m2 = m1", "by (simp, metis MWLf_semantics.MWLfSteps_det_cases(4))"], ["proof (state)\nthis:\n  m2 = m1\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from bevalT R1def' dequal"], ["proof (chain)\npicking this:\n  BMap (E b m1) = True\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'", "have b'evalT: \n                \"BMap (E b' m1') = True\""], ["proof (prove)\nusing this:\n  BMap (E b m1) = True\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. BMap (E b' m1') = True", "by (simp add: d_indistinguishable_def)"], ["proof (state)\nthis:\n  BMap (E b' m1') = True\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "hence I2step_case1:\n                \"\\<langle>if b' then c1' else c2' fi,m1'\\<rangle> \\<rightarrow> \\<langle>[c1'],m1'\\<rangle>\""], ["proof (prove)\nusing this:\n  BMap (E b' m1') = True\n\ngoal (1 subgoal):\n 1. SRabbr (if b' then c1' else c2' fi) m1' [c1'] m1'", "by (simp add: MWLfSteps_det.iftrue)"], ["proof (state)\nthis:\n  SRabbr (if b' then c1' else c2' fi) m1' [c1'] m1'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with irange dequal RSassump memeq R1def'"], ["proof (chain)\npicking this:\n  i < length I1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c1]\n  m2 = m1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (if b' then c1' else c2' fi) m1' [c1'] m1'", "have case1_concl:\n                \"\\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i < length I1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c1]\n  m2 = m1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (if b' then c1' else c2' fi) m1' [c1'] m1'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1) = True; RS = [c1]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n              \\<comment> \\<open>Case 2: b evaluates to False\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1) = True; RS = [c1]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1) = True; RS = [c1]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume bevalF: \"BMap (E b m1) = False\""], ["proof (state)\nthis:\n  BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = [c2]\""], ["proof (state)\nthis:\n  RS = [c2]\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from irange bevalF I1step R1def' RSassump"], ["proof (chain)\npicking this:\n  i < length I1\n  BMap (E b m1) = False\n  SRabbr (I1 ! i) m1 RS m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c2]", "have memeq:\n                \"m1 = m2\""], ["proof (prove)\nusing this:\n  i < length I1\n  BMap (E b m1) = False\n  SRabbr (I1 ! i) m1 RS m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c2]\n\ngoal (1 subgoal):\n 1. m1 = m2", "by (simp, metis MWLf_semantics.MWLfSteps_det_cases(4))"], ["proof (state)\nthis:\n  m1 = m2\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from bevalF R1def' dequal"], ["proof (chain)\npicking this:\n  BMap (E b m1) = False\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'", "have b'evalF: \n                \"BMap (E b' m1') = False\""], ["proof (prove)\nusing this:\n  BMap (E b m1) = False\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. BMap (E b' m1') = False", "by (simp add: d_indistinguishable_def)"], ["proof (state)\nthis:\n  BMap (E b' m1') = False\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "hence I2step_case1:\n                \"\\<langle>if b' then c1' else c2' fi,m1'\\<rangle> \\<rightarrow> \\<langle>[c2'],m1'\\<rangle>\""], ["proof (prove)\nusing this:\n  BMap (E b' m1') = False\n\ngoal (1 subgoal):\n 1. SRabbr (if b' then c1' else c2' fi) m1' [c2'] m1'", "by (simp add: MWLfSteps_det.iffalse)"], ["proof (state)\nthis:\n  SRabbr (if b' then c1' else c2' fi) m1' [c2'] m1'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with irange dequal RSassump memeq R1def'"], ["proof (chain)\npicking this:\n  i < length I1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c2]\n  m1 = m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (if b' then c1' else c2' fi) m1' [c2'] m1'", "have case1_concl:\n                \"\\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i < length I1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c2]\n  m1 = m2\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (if b' then c1' else c2' fi) m1' [c2'] m1'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1) = False; RS = [c2]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R1 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n  RS = [c2] \\<and> BMap (E b m1) = False\n  \\<lbrakk>BMap (E b m1) = True; RS = [c1]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>BMap (E b m1) = False; RS = [c2]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show\n              \"\\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n               ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1] \\<and> BMap (E b m1) = True \\<or>\n  RS = [c2] \\<and> BMap (E b m1) = False\n  \\<lbrakk>BMap (E b m1) = True; RS = [c1]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>BMap (E b m1) = False; RS = [c2]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R0 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (I1, I2) \\<in> R1 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "have inR2case: \"(I1,I2) \\<in> R2\n          \\<Longrightarrow> \\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n             ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume inR2: \"(I1,I2) \\<in> R2\""], ["proof (state)\nthis:\n  (I1, I2) \\<in> R2\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "then"], ["proof (chain)\npicking this:\n  (I1, I2) \\<in> R2", "obtain c1 c1' c2 c2' b b' where R2def':\n              \"I1 = [if b then c1 else c2 fi] \n              \\<and> I2 = [if b' then c1' else c2' fi] \\<and>\n              [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n              ([c1] \\<approx>\\<^bsub>d \\<^esub>[c2] \\<or> [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\""], ["proof (prove)\nusing this:\n  (I1, I2) \\<in> R2\n\ngoal (1 subgoal):\n 1. (\\<And>b c1 c2 b' c1' c2'.\n        I1 = [if b then c1 else c2 fi] \\<and>\n        I2 = [if b' then c1' else c2' fi] \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n        ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n         [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: R2_def, force)"], ["proof (state)\nthis:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n              \\<comment> \\<open>get the two different cases for the result from semantics:\\<close>"], ["proof (state)\nthis:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from irange R2def' I1step"], ["proof (chain)\npicking this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  SRabbr (I1 ! i) m1 RS m2", "have case_distinction_left:\n              \"(RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1\""], ["proof (prove)\nusing this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  SRabbr (I1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. (RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1", "by (simp, metis MWLf_semantics.MWLfSteps_det_cases(4))"], ["proof (state)\nthis:\n  (RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  (RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from irange R2def' dequal"], ["proof (chain)\npicking this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  m1 =\\<^bsub>d\\<^esub> m1'", "obtain RS' where I2step:\n              \"\\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m1'\\<rangle>\n              \\<and> (RS' = [c1'] \\<or> RS' = [c2']) \\<and> m1 =\\<^bsub>d\\<^esub> m1'\""], ["proof (prove)\nusing this:\n  i < length I1\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. (\\<And>RS'.\n        SRabbr (I2 ! i) m1' RS' m1' \\<and>\n        (RS' = [c1'] \\<or> RS' = [c2']) \\<and>\n        m1 =\\<^bsub>d\\<^esub> m1' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp, metis MWLfSteps_det.iffalse MWLfSteps_det.iftrue)"], ["proof (state)\nthis:\n  SRabbr (I2 ! i) m1' RS' m1' \\<and>\n  (RS' = [c1'] \\<or> RS' = [c2']) \\<and> m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  SRabbr (I2 ! i) m1' RS' m1' \\<and>\n  (RS' = [c1'] \\<or> RS' = [c2']) \\<and> m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBtrans"], ["proof (chain)\npicking this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>", "have \"\\<lbrakk> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2]; [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<rbrakk> \n              \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\""], ["proof (prove)\nusing this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c2];\n     [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n    \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']", "by (unfold trans_def, blast)"], ["proof (state)\nthis:\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c2];\n   [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c2];\n   [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBtrans"], ["proof (chain)\npicking this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>", "have \"\\<lbrakk> [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']; [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<rbrakk> \n              \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\""], ["proof (prove)\nusing this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n     [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n    \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']", "by (unfold trans_def, blast)"], ["proof (state)\nthis:\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>", "have \"[c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow>\n    [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]", "by (simp add: sym_def)"], ["proof (state)\nthis:\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBtrans"], ["proof (chain)\npicking this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>", "have \"\\<lbrakk> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<rbrakk> \n              \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\""], ["proof (prove)\nusing this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c1];\n     [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n    \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']", "by (unfold trans_def, blast)"], ["proof (state)\nthis:\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c1];\n   [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c1];\n   [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>", "have \"[c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow> [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow>\n    [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']", "by (simp add: sym_def)"], ["proof (state)\nthis:\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow>\n  [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow>\n  [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBtrans"], ["proof (chain)\npicking this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>", "have \"\\<lbrakk> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']; [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<rbrakk> \n              \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\""], ["proof (prove)\nusing this:\n  trans \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c2'];\n     [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n    \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']", "by (unfold trans_def, blast)"], ["proof (state)\nthis:\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c2'];\n   [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. (I1, I2) \\<in> R2 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  (RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1\n  SRabbr (I2 ! i) m1' RS' m1' \\<and>\n  (RS' = [c1'] \\<or> RS' = [c2']) \\<and> m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c2];\n   [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c1];\n   [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow>\n  [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c2'];\n   [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']", "show \n             \"\\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n              ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  I1 = [if b then c1 else c2 fi] \\<and>\n  I2 = [if b' then c1' else c2' fi] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  ([c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<or>\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'])\n  (RS = [c1] \\<or> RS = [c2]) \\<and> m2 = m1\n  SRabbr (I2 ! i) m1' RS' m1' \\<and>\n  (RS' = [c1'] \\<or> RS' = [c2']) \\<and> m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c2];\n   [c2] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  \\<lbrakk>[c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2']\\<rbrakk>\n  \\<Longrightarrow> [c1] \\<approx>\\<^bsub>d\\<^esub> [c2']\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c2] \\<Longrightarrow>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c1]\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c1];\n   [c1] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  [c1'] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<Longrightarrow>\n  [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\n  \\<lbrakk>[c2] \\<approx>\\<^bsub>d\\<^esub> [c2'];\n   [c2'] \\<approx>\\<^bsub>d\\<^esub> [c1']\\<rbrakk>\n  \\<Longrightarrow> [c2] \\<approx>\\<^bsub>d\\<^esub> [c1']\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (I1, I2) \\<in> R2 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from inR0 inR1case inR2case"], ["proof (chain)\npicking this:\n  (I1, I2) \\<in> R0\n  (I1, I2) \\<in> R1 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  (I1, I2) \\<in> R2 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'", "show \n          \"\\<exists>RS' m2'. \\<langle>I2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n          ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  (I1, I2) \\<in> R0\n  (I1, I2) \\<in> R1 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  (I1, I2) \\<in> R2 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (I2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by (auto simp add: R0_def)"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (I2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "hence \"R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\""], ["proof (prove)\nusing this:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "by (rule Up_To_Technique)"], ["proof (state)\nthis:\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "with inR0"], ["proof (chain)\npicking this:\n  ([if b then c1 else c2 fi], [if b' then c1' else c2' fi]) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  ([if b then c1 else c2 fi], [if b' then c1' else c2' fi]) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n    [if b' then c1' else c2' fi]", "by auto"], ["proof (state)\nthis:\n  [if b then c1 else c2 fi] \\<approx>\\<^bsub>d\\<^esub>\n  [if b' then c1' else c2' fi]\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Compositionality_While:\n  assumes dind: \"b \\<equiv>\\<^bsub>d\\<^esub> b'\"\n  assumes bodyrelated: \"[c] \\<approx>\\<^bsub>d\\<^esub> [c']\"\n  shows \"[while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "define R1 where \"R1 = {(S1,S2). \\<exists>c1 c1' c2 c2' b b' W W'.\n    S1 = (c1;(while b do c2 od))#W \\<and> \n    S2 = (c1';(while b' do c2' od))#W' \\<and>\n    [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> W \\<approx>\\<^bsub>d\\<^esub> W' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'}\""], ["proof (state)\nthis:\n  R1 =\n  {(S1, S2).\n   \\<exists>c1 c1' c2 c2' b b' W W'.\n      S1 = (c1;while b do c2 od) # W \\<and>\n      S2 = (c1';while b' do c2' od) # W' \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n      W \\<approx>\\<^bsub>d\\<^esub> W' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'}\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "define R2 where \"R2 = {(W1,W2). \\<exists>c1 c1' b b'. \n    W1 = [while b do c1 od] \\<and> W2 = [while b' do c1' od] \\<and>\n    [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'}\""], ["proof (state)\nthis:\n  R2 =\n  {(W1, W2).\n   \\<exists>c1 c1' b b'.\n      W1 = [while b do c1 od] \\<and>\n      W2 = [while b' do c1' od] \\<and>\n      [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n      b \\<equiv>\\<^bsub>d\\<^esub> b'}\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "define R0 where \"R0 = R1 \\<union> R2\""], ["proof (state)\nthis:\n  R0 = R1 \\<union> R2\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "from dind bodyrelated"], ["proof (chain)\npicking this:\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  [c] \\<approx>\\<^bsub>d\\<^esub> [c']", "have inR0: \"([while b do c od],[while b' do c' od]) \\<in> R0\""], ["proof (prove)\nusing this:\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  [c] \\<approx>\\<^bsub>d\\<^esub> [c']\n\ngoal (1 subgoal):\n 1. ([while b do c od], [while b' do c' od]) \\<in> R0", "by (simp add: R0_def R1_def R2_def)"], ["proof (state)\nthis:\n  ([while b do c od], [while b' do c' od]) \\<in> R0\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "have uptoR0: \"d_Bisimulation_Up_To_USdB d R0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_Bisimulation_Up_To_USdB d R0", "proof (simp add: d_Bisimulation_Up_To_USdB_def, auto)"], ["proof (state)\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym d_indistinguishable_sym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e", "have symR1: \"sym R1\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e\n\ngoal (1 subgoal):\n 1. sym R1", "by (simp add: sym_def R1_def, fastforce)"], ["proof (state)\nthis:\n  sym R1\n\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from USdBsym d_indistinguishable_sym"], ["proof (chain)\npicking this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e", "have symR2: \"sym R2\""], ["proof (prove)\nusing this:\n  sym \\<approx>\\<^bsub>?d\\<^esub>\n  ?e \\<equiv>\\<^bsub>?d\\<^esub> ?e' \\<Longrightarrow>\n  ?e' \\<equiv>\\<^bsub>?d\\<^esub> ?e\n\ngoal (1 subgoal):\n 1. sym R2", "by (simp add: sym_def R2_def, fastforce)"], ["proof (state)\nthis:\n  sym R2\n\ngoal (3 subgoals):\n 1. sym R0\n 2. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 3. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from symR1 symR2"], ["proof (chain)\npicking this:\n  sym R1\n  sym R2", "show \"sym R0\""], ["proof (prove)\nusing this:\n  sym R1\n  sym R2\n\ngoal (1 subgoal):\n 1. sym R0", "by (simp add: sym_def R0_def)"], ["proof (state)\nthis:\n  sym R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix W1 W2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(W1,W2) \\<in> R0\""], ["proof (state)\nthis:\n  (W1, W2) \\<in> R0\n\ngoal (2 subgoals):\n 1. \\<And>a b. (a, b) \\<in> R0 \\<Longrightarrow> length a = length b\n 2. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "with USdBeqlen"], ["proof (chain)\npicking this:\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (W1, W2) \\<in> R0", "show \"length W1 = length W2\""], ["proof (prove)\nusing this:\n  ?V \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length ?V = length ?V'\n  (W1, W2) \\<in> R0\n\ngoal (1 subgoal):\n 1. length W1 = length W2", "by (simp add: R0_def R1_def R2_def, force)"], ["proof (state)\nthis:\n  length W1 = length W2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "fix W1 W2 i m1 m1' RS m2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume inR0: \"(W1,W2) \\<in> R0\""], ["proof (state)\nthis:\n  (W1, W2) \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume irange: \"i < length W1\""], ["proof (state)\nthis:\n  i < length W1\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume W1step: \"\\<langle>W1!i,m1\\<rangle> \\<rightarrow> \\<langle>RS,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr (W1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "assume dequal: \"m1 =\\<^bsub>d\\<^esub> m1'\""], ["proof (state)\nthis:\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. \\<And>a b i m1 m1' W m2.\n       \\<lbrakk>(a, b) \\<in> R0; i < length a; SRabbr (a ! i) m1 W m2;\n        m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>W' m2'.\n                            SRabbr (b ! i) m1' W' m2' \\<and>\n                            ((W, W') \\<in> R0 \\<or>\n                             W \\<approx>\\<^bsub>d\\<^esub> W') \\<and>\n                            m2 =\\<^bsub>d\\<^esub> m2'", "from inR0"], ["proof (chain)\npicking this:\n  (W1, W2) \\<in> R0", "show \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n          ((RS,RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  (W1, W2) \\<in> R0\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "proof (simp add: R0_def, auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume inR1: \"(W1,W2) \\<in> R1\""], ["proof (state)\nthis:\n  (W1, W2) \\<in> R1\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "then"], ["proof (chain)\npicking this:\n  (W1, W2) \\<in> R1", "obtain c1 c1' c2 c2' b b' V V'\n              where R1def': \"W1 = (c1;(while b do c2 od))#V \n              \\<and> W2 = (c1';(while b' do c2' od))#V' \\<and> \n              [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and> V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\""], ["proof (prove)\nusing this:\n  (W1, W2) \\<in> R1\n\ngoal (1 subgoal):\n 1. (\\<And>c1 b c2 V c1' b' c2' V'.\n        W1 = (c1;while b do c2 od) # V \\<and>\n        W2 = (c1';while b' do c2' od) # V' \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n        V \\<approx>\\<^bsub>d\\<^esub> V' \\<and>\n        b \\<equiv>\\<^bsub>d\\<^esub> b' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: R1_def, force)"], ["proof (state)\nthis:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with irange"], ["proof (chain)\npicking this:\n  i < length W1\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'", "have case_distinction1: \"i = 0 \\<or>\n              (V \\<noteq> [] \\<and> i \\<noteq> 0)\""], ["proof (prove)\nusing this:\n  i < length W1\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "have case1: \"i = 0 \\<Longrightarrow> \n              \\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n              ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n              \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume i0: \"i = 0\"\n                  \\<comment> \\<open>get the two different sub-cases:\\<close>"], ["proof (state)\nthis:\n  i = 0\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with R1def' W1step"], ["proof (chain)\npicking this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2\n  i = 0", "obtain c3 W where case_distinction: \n                  \"RS = [while b do c2 od] \\<and> \\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>[],m2\\<rangle>\n                  \\<or> RS = (c3;(while b do c2 od))#W \\<and> \\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>c3#W,m2\\<rangle>\""], ["proof (prove)\nusing this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>c3 W.\n        RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n        RS = (c3;while b do c2 od) # W \\<and>\n        SRabbr c1 m1 (c3 # W) m2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp, metis MWLfSteps_det_cases(3))"], ["proof (state)\nthis:\n  RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;while b do c2 od) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n                  \\<comment> \\<open>Case 1: first command terminates\\<close>"], ["proof (state)\nthis:\n  RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;while b do c2 od) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;while b do c2 od) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = [while b do c2 od]\""], ["proof (state)\nthis:\n  RS = [while b do c2 od]\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume StepAssump: \"\\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>[],m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr c1 m1 [] m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from USdBeqlen[of \"[]\"] StepAssump R1def' \n                    USdB_Strong_d_Bisimulation dequal\n                    strongdB_aux[of \"d\" \"\\<approx>\\<^bsub>d\\<^esub>\" \"i\"\n                    \"[c1]\" \"[c1']\" \"m1\" \"[]\" \"m2\" \"m1'\"] i0"], ["proof (chain)\npicking this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length [] = length ?V'\n  SRabbr c1 m1 [] m2\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 [] m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0", "obtain W' m2' where c1c1'reason: \n                    \"\\<langle>c1',m1'\\<rangle> \\<rightarrow> \\<langle>W',m2'\\<rangle> \\<and> W' = [] \n                    \\<and> [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> ?V' \\<Longrightarrow>\n  length [] = length ?V'\n  SRabbr c1 m1 [] m2\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 [] m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>W' m2'.\n        SRabbr c1' m1' W' m2' \\<and>\n        W' = [] \\<and>\n        [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n        m2 =\\<^bsub>d\\<^esub> m2' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with c1c1'reason"], ["proof (chain)\npicking this:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "have conclpart1:\n                    \"\\<langle>c1';(while b' do c2' od),m1'\\<rangle> \n                    \\<rightarrow> \\<langle>[while b' do c2' od],m2'\\<rangle> \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  SRabbr c1' m1' W' m2' \\<and>\n  W' = [] \\<and>\n  [] \\<approx>\\<^bsub>d\\<^esub> W' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. SRabbr (c1';while b' do c2' od) m1' [while b' do c2' od] m2' \\<and>\n    m2 =\\<^bsub>d\\<^esub> m2'", "by (simp add: MWLfSteps_det.seq1)"], ["proof (state)\nthis:\n  SRabbr (c1';while b' do c2' od) m1' [while b' do c2' od] m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from R1def'"], ["proof (chain)\npicking this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'", "have conclpart2:\n                    \"([while b do c2 od],[while b' do c2' od]) \\<in> R2\""], ["proof (prove)\nusing this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. ([while b do c2 od], [while b' do c2' od]) \\<in> R2", "by (simp add: R2_def)"], ["proof (state)\nthis:\n  ([while b do c2 od], [while b' do c2' od]) \\<in> R2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with conclpart1 RSassump i0 R1def'"], ["proof (chain)\npicking this:\n  SRabbr (c1';while b' do c2' od) m1' [while b' do c2' od] m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n  RS = [while b do c2 od]\n  i = 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  ([while b do c2 od], [while b' do c2' od]) \\<in> R2", "have case1_concl:\n                    \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                    ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                    \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr (c1';while b' do c2' od) m1' [while b' do c2' od] m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n  RS = [while b do c2 od]\n  i = 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  ([while b do c2 od], [while b' do c2' od]) \\<in> R2\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [while b do c2 od]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n                  \\<comment> \\<open>Case 2: first command does not terminate\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [while b do c2 od]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>RS = [while b do c2 od]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = (c3;(while b do c2 od))#W\""], ["proof (state)\nthis:\n  RS = (c3;while b do c2 od) # W\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "assume StepAssump: \"\\<langle>c1,m1\\<rangle> \\<rightarrow> \\<langle>c3#W,m2\\<rangle>\""], ["proof (state)\nthis:\n  SRabbr c1 m1 (c3 # W) m2\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from StepAssump R1def' USdB_Strong_d_Bisimulation dequal\n                    strongdB_aux[of \"d\" \"\\<approx>\\<^bsub>d\\<^esub>\" \"i\"\n                    \"[c1]\" \"[c1']\" \"m1\" \"c3#W\" \"m2\" \"m1'\"] i0"], ["proof (chain)\npicking this:\n  SRabbr c1 m1 (c3 # W) m2\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 (c3 # W) m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       (c3 # W) \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0", "obtain V'' m2' where c1c1'reason: \n                    \"\\<langle>c1',m1'\\<rangle> \\<rightarrow> \\<langle>V'',m2'\\<rangle> \n                    \\<and> (c3#W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1 m1 (c3 # W) m2\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  m1 =\\<^bsub>d\\<^esub> m1'\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i < length [c1]; [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'];\n   SRabbr ([c1] ! i) m1 (c3 # W) m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr ([c1'] ! i) m1' W' m2' \\<and>\n                       (c3 # W) \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  i = 0\n\ngoal (1 subgoal):\n 1. (\\<And>V'' m2'.\n        SRabbr c1' m1' V'' m2' \\<and>\n        (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and>\n        m2 =\\<^bsub>d\\<^esub> m2' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with USdBeqlen[of \"c3#W\" \"V''\"]"], ["proof (chain)\npicking this:\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> V'' \\<Longrightarrow>\n  length (c3 # W) = length V''\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'", "obtain c3' W' \n                    where V''reason: \"V'' = c3'#W'\""], ["proof (prove)\nusing this:\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> V'' \\<Longrightarrow>\n  length (c3 # W) = length V''\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. (\\<And>c3' W'.\n        V'' = c3' # W' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases V'', force, force)"], ["proof (state)\nthis:\n  V'' = c3' # W'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with c1c1'reason"], ["proof (chain)\npicking this:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  V'' = c3' # W'", "have conclpart1:\n                    \"\\<langle>c1';(while b' do c2' od),m1'\\<rangle> \\<rightarrow> \n                    \\<langle>(c3';(while b' do c2' od))#W',m2'\\<rangle> \n                    \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  V'' = c3' # W'\n\ngoal (1 subgoal):\n 1. SRabbr (c1';while b' do c2' od) m1' ((c3';while b' do c2' od) # W')\n     m2' \\<and>\n    m2 =\\<^bsub>d\\<^esub> m2'", "by (simp add: MWLfSteps_det.seq2)"], ["proof (state)\nthis:\n  SRabbr (c1';while b' do c2' od) m1' ((c3';while b' do c2' od) # W')\n   m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "from V''reason \n                    c1c1'reason USdB_decomp_head_tail[of \"c3\" \"W\"] \n                    USdB_Strong_d_Bisimulation"], ["proof (chain)\npicking this:\n  V'' = c3' # W'\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V' \\<Longrightarrow>\n  [c3] \\<approx>\\<^bsub>?d\\<^esub> [?c'] \\<and>\n  W \\<approx>\\<^bsub>?d\\<^esub> ?V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>", "have c3aWinUSDB: \n                    \"[c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and> W \\<approx>\\<^bsub>d\\<^esub> W'\""], ["proof (prove)\nusing this:\n  V'' = c3' # W'\n  SRabbr c1' m1' V'' m2' \\<and>\n  (c3 # W) \\<approx>\\<^bsub>d\\<^esub> V'' \\<and> m2 =\\<^bsub>d\\<^esub> m2'\n  (c3 # W) \\<approx>\\<^bsub>?d\\<^esub> ?c' # ?V' \\<Longrightarrow>\n  [c3] \\<approx>\\<^bsub>?d\\<^esub> [?c'] \\<and>\n  W \\<approx>\\<^bsub>?d\\<^esub> ?V'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n\ngoal (1 subgoal):\n 1. [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n    W \\<approx>\\<^bsub>d\\<^esub> W'", "by blast"], ["proof (state)\nthis:\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with R1def'"], ["proof (chain)\npicking this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'", "have conclpart2:\n                    \"((c3;(while b do c2 od))#W,\n                       (c3';(while b' do c2' od))#W') \\<in> R1\""], ["proof (prove)\nusing this:\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  [c3] \\<approx>\\<^bsub>d\\<^esub> [c3'] \\<and>\n  W \\<approx>\\<^bsub>d\\<^esub> W'\n\ngoal (1 subgoal):\n 1. ((c3;while b do c2 od) # W, (c3';while b' do c2' od) # W') \\<in> R1", "by (simp add: R1_def)"], ["proof (state)\nthis:\n  ((c3;while b do c2 od) # W, (c3';while b' do c2' od) # W') \\<in> R1\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "with i0 RSassump R1def' V''reason conclpart1"], ["proof (chain)\npicking this:\n  i = 0\n  RS = (c3;while b do c2 od) # W\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  V'' = c3' # W'\n  SRabbr (c1';while b' do c2' od) m1' ((c3';while b' do c2' od) # W')\n   m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n  ((c3;while b do c2 od) # W, (c3';while b' do c2' od) # W') \\<in> R1", "have case2_concl:\n                    \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                    ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                    \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i = 0\n  RS = (c3;while b do c2 od) # W\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  V'' = c3' # W'\n  SRabbr (c1';while b' do c2' od) m1' ((c3';while b' do c2' od) # W')\n   m2' \\<and>\n  m2 =\\<^bsub>d\\<^esub> m2'\n  ((c3;while b do c2 od) # W, (c3';while b' do c2' od) # W') \\<in> R1\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>RS = (c3;while b do c2 od) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. i = 0 \\<Longrightarrow>\n    \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;while b do c2 od) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n  \\<lbrakk>RS = [while b do c2 od]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>RS = (c3;while b do c2 od) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                  ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                  \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  RS = [while b do c2 od] \\<and> SRabbr c1 m1 [] m2 \\<or>\n  RS = (c3;while b do c2 od) # W \\<and> SRabbr c1 m1 (c3 # W) m2\n  \\<lbrakk>RS = [while b do c2 od]; SRabbr c1 m1 [] m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>RS = (c3;while b do c2 od) # W; SRabbr c1 m1 (c3 # W) m2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by blast"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "have case2: \"\\<lbrakk> V \\<noteq> []; i \\<noteq> 0 \\<rbrakk>\n                \\<Longrightarrow> \\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume Vnonempt: \"V \\<noteq> []\""], ["proof (state)\nthis:\n  V \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume inot0: \"i \\<noteq> 0\""], ["proof (state)\nthis:\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with Vnonempt irange R1def'"], ["proof (chain)\npicking this:\n  V \\<noteq> []\n  i < length W1\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  i \\<noteq> 0", "have i1range:\n                  \"(i-Suc 0) < length V\""], ["proof (prove)\nusing this:\n  V \\<noteq> []\n  i < length W1\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i - Suc 0 < length V", "by simp"], ["proof (state)\nthis:\n  i - Suc 0 < length V\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from inot0 R1def'"], ["proof (chain)\npicking this:\n  i \\<noteq> 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'", "have W1ieq: \"W1!i = V!(i-Suc 0)\""], ["proof (prove)\nusing this:\n  i \\<noteq> 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. W1 ! i = V ! (i - Suc 0)", "by auto"], ["proof (state)\nthis:\n  W1 ! i = V ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from inot0 R1def'"], ["proof (chain)\npicking this:\n  i \\<noteq> 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'", "have \"W2!i = V'!(i-Suc 0)\""], ["proof (prove)\nusing this:\n  i \\<noteq> 0\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. W2 ! i = V' ! (i - Suc 0)", "by auto"], ["proof (state)\nthis:\n  W2 ! i = V' ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with W1ieq R1def' W1step i1range dequal \n                  USdB_Strong_d_Bisimulation\n                  strongdB_aux[of \"d\" \"USdB d\"\n                  \"i-Suc 0\" \"V\" \"V'\" \"m1\" \"RS\" \"m2\" \"m1'\"]"], ["proof (chain)\npicking this:\n  W1 ! i = V ! (i - Suc 0)\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2\n  i - Suc 0 < length V\n  m1 =\\<^bsub>d\\<^esub> m1'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i - Suc 0 < length V; V \\<approx>\\<^bsub>d\\<^esub> V';\n   SRabbr (V ! (i - Suc 0)) m1 RS m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr (V' ! (i - Suc 0)) m1' W' m2' \\<and>\n                       RS \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  W2 ! i = V' ! (i - Suc 0)", "show \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                  ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                  \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  W1 ! i = V ! (i - Suc 0)\n  W1 = (c1;while b do c2 od) # V \\<and>\n  W2 = (c1';while b' do c2' od) # V' \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  [c2] \\<approx>\\<^bsub>d\\<^esub> [c2'] \\<and>\n  V \\<approx>\\<^bsub>d\\<^esub> V' \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2\n  i - Suc 0 < length V\n  m1 =\\<^bsub>d\\<^esub> m1'\n  Strong_d_Bisimulation ?d \\<approx>\\<^bsub>?d\\<^esub>\n  \\<lbrakk>Strong_d_Bisimulation d \\<approx>\\<^bsub>d\\<^esub>;\n   i - Suc 0 < length V; V \\<approx>\\<^bsub>d\\<^esub> V';\n   SRabbr (V ! (i - Suc 0)) m1 RS m2; m1 =\\<^bsub>d\\<^esub> m1'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>W' m2'.\n                       SRabbr (V' ! (i - Suc 0)) m1' W' m2' \\<and>\n                       RS \\<approx>\\<^bsub>d\\<^esub> W' \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  W2 ! i = V' ! (i - Suc 0)\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by force"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'\n 2. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \n                \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i = 0 \\<or> V \\<noteq> [] \\<and> i \\<noteq> 0\n  i = 0 \\<Longrightarrow>\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>V \\<noteq> []; i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume inR2: \"(W1,W2) \\<in> R2\""], ["proof (state)\nthis:\n  (W1, W2) \\<in> R2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "then"], ["proof (chain)\npicking this:\n  (W1, W2) \\<in> R2", "obtain c1 c1' b b' where R2def': \n                \"W1 = [while b do c1 od] \\<and> W2 = [while b' do c1' od] \\<and>\n                [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and> b \\<equiv>\\<^bsub>d\\<^esub> b'\""], ["proof (prove)\nusing this:\n  (W1, W2) \\<in> R2\n\ngoal (1 subgoal):\n 1. (\\<And>b c1 b' c1'.\n        W1 = [while b do c1 od] \\<and>\n        W2 = [while b' do c1' od] \\<and>\n        [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n        b \\<equiv>\\<^bsub>d\\<^esub> b' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: R2_def)\n                \\<comment> \\<open>get the two different cases:\\<close>"], ["proof (state)\nthis:\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "moreover"], ["proof (state)\nthis:\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from irange R2def' W1step"], ["proof (chain)\npicking this:\n  i < length W1\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2", "have case_distinction:\n                \"RS = [c1;(while b do c1 od)] \\<and> BMap (E b m1) = True \\<or>\n                RS = [] \\<and> BMap (E b m1) = False\""], ["proof (prove)\nusing this:\n  i < length W1\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (W1 ! i) m1 RS m2\n\ngoal (1 subgoal):\n 1. RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n    RS = [] \\<and> BMap (E b m1) = False", "by (simp,metis MWLf_semantics.MWLfSteps_det_cases(5))"], ["proof (state)\nthis:\n  RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n  RS = [] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n                \\<comment> \\<open>Case 1: b evaluates to True\\<close>"], ["proof (state)\nthis:\n  RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n  RS = [] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n  RS = [] \\<and> BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume bevalT: \"BMap (E b m1)\""], ["proof (state)\nthis:\n  BMap (E b m1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = [c1;(while b do c1 od)]\""], ["proof (state)\nthis:\n  RS = [c1;while b do c1 od]\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from irange bevalT W1step R2def' RSassump"], ["proof (chain)\npicking this:\n  i < length W1\n  BMap (E b m1)\n  SRabbr (W1 ! i) m1 RS m2\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1;while b do c1 od]", "have memeq:\n                  \"m2 = m1\""], ["proof (prove)\nusing this:\n  i < length W1\n  BMap (E b m1)\n  SRabbr (W1 ! i) m1 RS m2\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1;while b do c1 od]\n\ngoal (1 subgoal):\n 1. m2 = m1", "by (simp,metis MWLf_semantics.MWLfSteps_det_cases(5))"], ["proof (state)\nthis:\n  m2 = m1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from bevalT R2def' dequal"], ["proof (chain)\npicking this:\n  BMap (E b m1)\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'", "have b'evalT: \"BMap (E b' m1')\""], ["proof (prove)\nusing this:\n  BMap (E b m1)\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. BMap (E b' m1')", "by (simp add: d_indistinguishable_def)"], ["proof (state)\nthis:\n  BMap (E b' m1')\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "hence W2step_case1: \n                  \"\\<langle>while b' do c1' od,m1'\\<rangle> \n                    \\<rightarrow> \\<langle>[c1';(while b' do c1' od)],m1'\\<rangle>\""], ["proof (prove)\nusing this:\n  BMap (E b' m1')\n\ngoal (1 subgoal):\n 1. SRabbr (while b' do c1' od) m1' [c1';while b' do c1' od] m1'", "by (simp add: MWLfSteps_det.whiletrue)"], ["proof (state)\nthis:\n  SRabbr (while b' do c1' od) m1' [c1';while b' do c1' od] m1'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from trivialpair_in_USdB R2def'"], ["proof (chain)\npicking this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> []\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'", "have inWR2: \n                  \"([c1;(while b do c1 od)],\n                     [c1';(while b' do c1' od)]) \\<in> R1\""], ["proof (prove)\nusing this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> []\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n\ngoal (1 subgoal):\n 1. ([c1;while b do c1 od], [c1';while b' do c1' od]) \\<in> R1", "by (auto simp add: R1_def)"], ["proof (state)\nthis:\n  ([c1;while b do c1 od], [c1';while b' do c1' od]) \\<in> R1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with irange dequal RSassump memeq W2step_case1 R2def'"], ["proof (chain)\npicking this:\n  i < length W1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c1;while b do c1 od]\n  m2 = m1\n  SRabbr (while b' do c1' od) m1' [c1';while b' do c1' od] m1'\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  ([c1;while b do c1 od], [c1';while b' do c1' od]) \\<in> R1", "have case1_concl:\n                  \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                  ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                  \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  i < length W1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = [c1;while b do c1 od]\n  m2 = m1\n  SRabbr (while b' do c1' od) m1' [c1';while b' do c1' od] m1'\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  ([c1;while b do c1 od], [c1';while b' do c1' od]) \\<in> R1\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1); RS = [c1;while b do c1 od]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "moreover\n                \\<comment> \\<open>Case 2: b evaluates to False\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1); RS = [c1;while b do c1 od]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1); RS = [c1;while b do c1 od]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume bevalF: \"BMap (E b m1) = False\""], ["proof (state)\nthis:\n  BMap (E b m1) = False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "assume RSassump: \"RS = []\""], ["proof (state)\nthis:\n  RS = []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from irange bevalF W1step R2def' RSassump"], ["proof (chain)\npicking this:\n  i < length W1\n  BMap (E b m1) = False\n  SRabbr (W1 ! i) m1 RS m2\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = []", "have memeq:\n                  \"m2 = m1\""], ["proof (prove)\nusing this:\n  i < length W1\n  BMap (E b m1) = False\n  SRabbr (W1 ! i) m1 RS m2\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = []\n\ngoal (1 subgoal):\n 1. m2 = m1", "by (simp,metis MWLf_semantics.MWLfSteps_det_cases(5))"], ["proof (state)\nthis:\n  m2 = m1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "from bevalF R2def' dequal"], ["proof (chain)\npicking this:\n  BMap (E b m1) = False\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'", "have b'equalF: \n                  \"BMap (E b' m1') = False\""], ["proof (prove)\nusing this:\n  BMap (E b m1) = False\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  m1 =\\<^bsub>d\\<^esub> m1'\n\ngoal (1 subgoal):\n 1. BMap (E b' m1') = False", "by (simp add: d_indistinguishable_def)"], ["proof (state)\nthis:\n  BMap (E b' m1') = False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "hence W2step_case2:\n                  \"\\<langle>while b' do c1' od,m1'\\<rangle> \\<rightarrow> \\<langle>[],m1'\\<rangle>\""], ["proof (prove)\nusing this:\n  BMap (E b' m1') = False\n\ngoal (1 subgoal):\n 1. SRabbr (while b' do c1' od) m1' [] m1'", "by (simp add: MWLfSteps_det.whilefalse)"], ["proof (state)\nthis:\n  SRabbr (while b' do c1' od) m1' [] m1'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "with trivialpair_in_USdB irange dequal RSassump \n                  memeq R2def'"], ["proof (chain)\npicking this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> []\n  i < length W1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = []\n  m2 = m1\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (while b' do c1' od) m1' [] m1'", "have case1_concl:\n                  \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                  ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                  \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  [] \\<approx>\\<^bsub>?d\\<^esub> []\n  i < length W1\n  m1 =\\<^bsub>d\\<^esub> m1'\n  RS = []\n  m2 = m1\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  SRabbr (while b' do c1' od) m1' [] m1'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by force"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>BMap (E b m1) = False; RS = []\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(W1, W2) \\<in> R0; (W1, W2) \\<in> R2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>RS' m2'.\n                         SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                         ((RS, RS') \\<in> R1 \\<or>\n                          (RS, RS') \\<in> R2 \\<or>\n                          RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                         m2 =\\<^bsub>d\\<^esub> m2'", "ultimately"], ["proof (chain)\npicking this:\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n  RS = [] \\<and> BMap (E b m1) = False\n  \\<lbrakk>BMap (E b m1); RS = [c1;while b do c1 od]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>BMap (E b m1) = False; RS = []\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'", "show \"\\<exists>RS' m2'. \\<langle>W2!i,m1'\\<rangle> \\<rightarrow> \\<langle>RS',m2'\\<rangle> \\<and>\n                ((RS,RS') \\<in> R1 \\<or> (RS,RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS')\n                \\<and> m2 =\\<^bsub>d\\<^esub> m2'\""], ["proof (prove)\nusing this:\n  W1 = [while b do c1 od] \\<and>\n  W2 = [while b' do c1' od] \\<and>\n  [c1] \\<approx>\\<^bsub>d\\<^esub> [c1'] \\<and>\n  b \\<equiv>\\<^bsub>d\\<^esub> b'\n  RS = [c1;while b do c1 od] \\<and> BMap (E b m1) = True \\<or>\n  RS = [] \\<and> BMap (E b m1) = False\n  \\<lbrakk>BMap (E b m1); RS = [c1;while b do c1 od]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n  \\<lbrakk>BMap (E b m1) = False; RS = []\\<rbrakk>\n  \\<Longrightarrow> \\<exists>RS' m2'.\n                       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n                       ((RS, RS') \\<in> R1 \\<or>\n                        (RS, RS') \\<in> R2 \\<or>\n                        RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n                       m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal (1 subgoal):\n 1. \\<exists>RS' m2'.\n       SRabbr (W2 ! i) m1' RS' m2' \\<and>\n       ((RS, RS') \\<in> R1 \\<or>\n        (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n       m2 =\\<^bsub>d\\<^esub> m2'", "by auto"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R1 \\<or>\n      (RS, RS') \\<in> R2 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>RS' m2'.\n     SRabbr (W2 ! i) m1' RS' m2' \\<and>\n     ((RS, RS') \\<in> R0 \\<or> RS \\<approx>\\<^bsub>d\\<^esub> RS') \\<and>\n     m2 =\\<^bsub>d\\<^esub> m2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "hence \"R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\""], ["proof (prove)\nusing this:\n  d_Bisimulation_Up_To_USdB d R0\n\ngoal (1 subgoal):\n 1. R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "by (rule Up_To_Technique)"], ["proof (state)\nthis:\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "with inR0"], ["proof (chain)\npicking this:\n  ([while b do c od], [while b' do c' od]) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  ([while b do c od], [while b' do c' od]) \\<in> R0\n  R0 \\<subseteq> \\<approx>\\<^bsub>d\\<^esub>\n\ngoal (1 subgoal):\n 1. [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]", "by auto"], ["proof (state)\nthis:\n  [while b do c od] \\<approx>\\<^bsub>d\\<^esub> [while b' do c' od]\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}