{"file_name": "/home/qj213/afp-2021-10-22/thys/Polynomials/More_Modules.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Polynomials", "problem_names": ["lemma scale_minus_both [simp]: \"(- a) *s (- x) = a *s x\"", "lemma span_insertI:\n  assumes \"p \\<in> span B\"\n  shows \"p \\<in> span (insert r B)\"", "lemma span_insertD:\n  assumes \"p \\<in> span (insert r B)\" and \"r \\<in> span B\"\n  shows \"p \\<in> span B\"", "lemma span_insert_idI:\n  assumes \"r \\<in> span B\"\n  shows \"span (insert r B) = span B\"", "lemma span_insert_zero: \"span (insert 0 B) = span B\"", "lemma span_Diff_zero: \"span (B - {0}) = span B\"", "lemma span_insert_subset:\n  assumes \"span A \\<subseteq> span B\" and \"r \\<in> span B\"\n  shows \"span (insert r A) \\<subseteq> span B\"", "lemma replace_span:\n  assumes \"q \\<in> span B\"\n  shows \"span (insert q (B - {p})) \\<subseteq> span B\"", "lemma sum_in_spanI: \"(\\<Sum>b\\<in>B. q b *s b) \\<in> span B\"", "lemma span_closed_sum_list: \"(\\<And>x. x \\<in> set xs \\<Longrightarrow> x \\<in> span B) \\<Longrightarrow> sum_list xs \\<in> span B\"", "lemma spanE:\n  assumes \"p \\<in> span B\"\n  obtains A q where \"finite A\" and \"A \\<subseteq> B\" and \"p = (\\<Sum>b\\<in>A. (q b) *s b)\"", "lemma span_finite_subset:\n  assumes \"p \\<in> span B\"\n  obtains A where \"finite A\" and \"A \\<subseteq> B\" and \"p \\<in> span A\"", "lemma span_finiteE:\n  assumes \"finite B\" and \"p \\<in> span B\"\n  obtains q where \"p = (\\<Sum>b\\<in>B. (q b) *s b)\"", "lemma span_subset_spanI:\n  assumes \"A \\<subseteq> span B\"\n  shows \"span A \\<subseteq> span B\"", "lemma span_insert_cong:\n  assumes \"span A = span B\"\n  shows \"span (insert p A) = span (insert p B)\" (is \"?l = ?r\")", "lemma span_induct' [consumes 1, case_names base step]:\n  assumes \"p \\<in> span B\" and \"P 0\"\n    and \"\\<And>a q p. a \\<in> span B \\<Longrightarrow> P a \\<Longrightarrow> p \\<in> B \\<Longrightarrow> q \\<noteq> 0 \\<Longrightarrow> P (a + q *s p)\"\n  shows \"P p\"", "lemma span_INT_subset: \"span (\\<Inter>a\\<in>A. f a) \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\" (is \"?l \\<subseteq> ?r\")", "lemma span_INT: \"span (\\<Inter>a\\<in>A. span (f a)) = (\\<Inter>a\\<in>A. span (f a))\" (is \"?l = ?r\")", "lemma span_Int_subset: \"span (A \\<inter> B) \\<subseteq> span A \\<inter> span B\"", "lemma span_Int: \"span (span A \\<inter> span B) = span A \\<inter> span B\"", "lemma span_image_scale_eq_image_scale: \"span ((*s) q ` F) = (*s) q ` span F\" (is \"?A = ?B\")", "lemma module_times: \"module (*)\"", "lemma ideal_eq_UNIV_iff_contains_one: \"ideal B = UNIV \\<longleftrightarrow> 1 \\<in> ideal B\"", "lemma ideal_eq_zero_iff [iff]: \"ideal F = {0} \\<longleftrightarrow> F \\<subseteq> {0}\"", "lemma ideal_field_cases:\n  obtains \"ideal B = {0}\" | \"ideal (B::'a::field set) = UNIV\"", "lemma image_ideal_subset:\n  assumes \"\\<And>x y. h (x + y) = h x + h y\" and \"\\<And>x y. h (x * y) = h x * h y\"\n  shows \"h ` ideal F \\<subseteq> ideal (h ` F)\"", "lemma image_ideal_eq_surj:\n  assumes \"\\<And>x y. h (x + y) = h x + h y\" and \"\\<And>x y. h (x * y) = h x * h y\" and \"surj h\"\n  shows \"h ` ideal B = ideal (h ` B)\"", "lemma in_idealE_homomorphism_finite:\n  assumes \"finite B\" and \"B \\<subseteq> range h\" and \"p \\<in> range h\" and \"p \\<in> ideal B\"\n  obtains q where \"\\<And>b. q b \\<in> range h\" and \"p = (\\<Sum>b\\<in>B. q b * b)\"", "lemma ideal_induct_homomorphism [consumes 3, case_names 0 plus]:\n  assumes \"B \\<subseteq> range h\" and \"p \\<in> range h\" and \"p \\<in> ideal B\"\n  assumes \"P 0\" and \"\\<And>c b a. c \\<in> range h \\<Longrightarrow> b \\<in> B \\<Longrightarrow> P a \\<Longrightarrow> a \\<in> range h \\<Longrightarrow> P (c * b + a)\"\n  shows \"P p\"", "lemma image_ideal_eq_Int: \"h ` ideal B = ideal (h ` B) \\<inter> range h\""], "translations": [["", "lemma scale_minus_both [simp]: \"(- a) *s (- x) = a *s x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - a *s - x = a *s x", "by simp"], ["", "subsection \\<open>Submodules Spanned by Sets of Module-Elements\\<close>"], ["", "lemma span_insertI:\n  assumes \"p \\<in> span B\"\n  shows \"p \\<in> span (insert r B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", "have \"B \\<subseteq> insert r B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B \\<subseteq> insert r B", "by blast"], ["proof (state)\nthis:\n  B \\<subseteq> insert r B\n\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", "hence \"span B \\<subseteq> span (insert r B)\""], ["proof (prove)\nusing this:\n  B \\<subseteq> insert r B\n\ngoal (1 subgoal):\n 1. span B \\<subseteq> span (insert r B)", "by (rule span_mono)"], ["proof (state)\nthis:\n  span B \\<subseteq> span (insert r B)\n\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", "with assms"], ["proof (chain)\npicking this:\n  p \\<in> span B\n  span B \\<subseteq> span (insert r B)", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<in> span B\n  span B \\<subseteq> span (insert r B)\n\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", ".."], ["proof (state)\nthis:\n  p \\<in> span (insert r B)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_insertD:\n  assumes \"p \\<in> span (insert r B)\" and \"r \\<in> span B\"\n  shows \"p \\<in> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> span B", "using assms(1)"], ["proof (prove)\nusing this:\n  p \\<in> span (insert r B)\n\ngoal (1 subgoal):\n 1. p \\<in> span B", "proof (induct p rule: span_induct_alt)"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "show \"0 \\<in> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'b) \\<in> span B", "by (fact span_zero)"], ["proof (state)\nthis:\n  (0::'b) \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "case step: (step q b a)"], ["proof (state)\nthis:\n  b \\<in> insert r B\n  a \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "from step(1)"], ["proof (chain)\npicking this:\n  b \\<in> insert r B", "have \"b = r \\<or> b \\<in> B\""], ["proof (prove)\nusing this:\n  b \\<in> insert r B\n\ngoal (1 subgoal):\n 1. b = r \\<or> b \\<in> B", "by simp"], ["proof (state)\nthis:\n  b = r \\<or> b \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r B; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "thus \"q *s b + a \\<in> span B\""], ["proof (prove)\nusing this:\n  b = r \\<or> b \\<in> B\n\ngoal (1 subgoal):\n 1. q *s b + a \\<in> span B", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. b = r \\<Longrightarrow> q *s b + a \\<in> span B\n 2. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "assume eq: \"b = r\""], ["proof (state)\nthis:\n  b = r\n\ngoal (2 subgoals):\n 1. b = r \\<Longrightarrow> q *s b + a \\<in> span B\n 2. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "from step(2) assms(2)"], ["proof (chain)\npicking this:\n  a \\<in> span B\n  r \\<in> span B", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> span B\n  r \\<in> span B\n\ngoal (1 subgoal):\n 1. q *s b + a \\<in> span B", "unfolding eq"], ["proof (prove)\nusing this:\n  a \\<in> span B\n  r \\<in> span B\n\ngoal (1 subgoal):\n 1. q *s r + a \\<in> span B", "by (intro span_add span_scale)"], ["proof (state)\nthis:\n  q *s b + a \\<in> span B\n\ngoal (1 subgoal):\n 1. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "assume \"b \\<in> B\""], ["proof (state)\nthis:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "hence \"b \\<in> span B\""], ["proof (prove)\nusing this:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "using span_superset"], ["proof (prove)\nusing this:\n  b \\<in> B\n  ?S \\<subseteq> span ?S\n\ngoal (1 subgoal):\n 1. b \\<in> span B", ".."], ["proof (state)\nthis:\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. b \\<in> B \\<Longrightarrow> q *s b + a \\<in> span B", "with step(2)"], ["proof (chain)\npicking this:\n  a \\<in> span B\n  b \\<in> span B", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> span B\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. q *s b + a \\<in> span B", "by (intro span_add span_scale)"], ["proof (state)\nthis:\n  q *s b + a \\<in> span B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  q *s b + a \\<in> span B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_insert_idI:\n  assumes \"r \\<in> span B\"\n  shows \"span (insert r B) = span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert r B) = span B", "proof (intro subset_antisym subsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x. x \\<in> span (insert r B) \\<Longrightarrow> x \\<in> span B\n 2. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "fix p"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x. x \\<in> span (insert r B) \\<Longrightarrow> x \\<in> span B\n 2. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "assume \"p \\<in> span (insert r B)\""], ["proof (state)\nthis:\n  p \\<in> span (insert r B)\n\ngoal (2 subgoals):\n 1. \\<And>x. x \\<in> span (insert r B) \\<Longrightarrow> x \\<in> span B\n 2. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "from this assms"], ["proof (chain)\npicking this:\n  p \\<in> span (insert r B)\n  r \\<in> span B", "show \"p \\<in> span B\""], ["proof (prove)\nusing this:\n  p \\<in> span (insert r B)\n  r \\<in> span B\n\ngoal (1 subgoal):\n 1. p \\<in> span B", "by (rule span_insertD)"], ["proof (state)\nthis:\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "assume \"p \\<in> span B\""], ["proof (state)\nthis:\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span B \\<Longrightarrow> x \\<in> span (insert r B)", "thus \"p \\<in> span (insert r B)\""], ["proof (prove)\nusing this:\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. p \\<in> span (insert r B)", "by (rule span_insertI)"], ["proof (state)\nthis:\n  p \\<in> span (insert r B)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_insert_zero: \"span (insert 0 B) = span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert (0::'b) B) = span B", "using span_zero"], ["proof (prove)\nusing this:\n  (0::'b) \\<in> span ?S\n\ngoal (1 subgoal):\n 1. span (insert (0::'b) B) = span B", "by (rule span_insert_idI)"], ["", "lemma span_Diff_zero: \"span (B - {0}) = span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (B - {0::'b}) = span B", "by (metis span_insert_zero insert_Diff_single)"], ["", "lemma span_insert_subset:\n  assumes \"span A \\<subseteq> span B\" and \"r \\<in> span B\"\n  shows \"span (insert r A) \\<subseteq> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert r A) \\<subseteq> span B", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span (insert r A) \\<Longrightarrow> x \\<in> span B", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span (insert r A) \\<Longrightarrow> x \\<in> span B", "assume \"p \\<in> span (insert r A)\""], ["proof (state)\nthis:\n  p \\<in> span (insert r A)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> span (insert r A) \\<Longrightarrow> x \\<in> span B", "thus \"p \\<in> span B\""], ["proof (prove)\nusing this:\n  p \\<in> span (insert r A)\n\ngoal (1 subgoal):\n 1. p \\<in> span B", "proof (induct p rule: span_induct_alt)"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r A; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r A; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'b) \\<in> span B", "by (fact span_zero)"], ["proof (state)\nthis:\n  (0::'b) \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r A; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r A; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "case step: (step q b a)"], ["proof (state)\nthis:\n  b \\<in> insert r A\n  a \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> insert r A; y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> c *s x + y \\<in> span B", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. q *s b + a \\<in> span B", "proof (intro span_add span_scale)"], ["proof (state)\ngoal (2 subgoals):\n 1. b \\<in> span B\n 2. a \\<in> span B", "from \\<open>b \\<in> insert r A\\<close>"], ["proof (chain)\npicking this:\n  b \\<in> insert r A", "show \"b \\<in> span B\""], ["proof (prove)\nusing this:\n  b \\<in> insert r A\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. b = r \\<Longrightarrow> b \\<in> span B\n 2. b \\<in> A \\<Longrightarrow> b \\<in> span B", "assume \"b = r\""], ["proof (state)\nthis:\n  b = r\n\ngoal (2 subgoals):\n 1. b = r \\<Longrightarrow> b \\<in> span B\n 2. b \\<in> A \\<Longrightarrow> b \\<in> span B", "thus \"b \\<in> span B\""], ["proof (prove)\nusing this:\n  b = r\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "using assms(2)"], ["proof (prove)\nusing this:\n  b = r\n  r \\<in> span B\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "by simp"], ["proof (state)\nthis:\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. b \\<in> A \\<Longrightarrow> b \\<in> span B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<in> A \\<Longrightarrow> b \\<in> span B", "assume \"b \\<in> A\""], ["proof (state)\nthis:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. b \\<in> A \\<Longrightarrow> b \\<in> span B", "hence \"b \\<in> span A\""], ["proof (prove)\nusing this:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. b \\<in> span A", "using span_superset"], ["proof (prove)\nusing this:\n  b \\<in> A\n  ?S \\<subseteq> span ?S\n\ngoal (1 subgoal):\n 1. b \\<in> span A", ".."], ["proof (state)\nthis:\n  b \\<in> span A\n\ngoal (1 subgoal):\n 1. b \\<in> A \\<Longrightarrow> b \\<in> span B", "thus \"b \\<in> span B\""], ["proof (prove)\nusing this:\n  b \\<in> span A\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "using assms(1)"], ["proof (prove)\nusing this:\n  b \\<in> span A\n  span A \\<subseteq> span B\n\ngoal (1 subgoal):\n 1. b \\<in> span B", ".."], ["proof (state)\nthis:\n  b \\<in> span B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. a \\<in> span B", "qed fact"], ["proof (state)\nthis:\n  q *s b + a \\<in> span B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<in> span B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma replace_span:\n  assumes \"q \\<in> span B\"\n  shows \"span (insert q (B - {p})) \\<subseteq> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert q (B - {p})) \\<subseteq> span B", "by (rule span_insert_subset, rule span_mono, fact Diff_subset, fact)"], ["", "lemma sum_in_spanI: \"(\\<Sum>b\\<in>B. q b *s b) \\<in> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>b\\<in>B. q b *s b) \\<in> span B", "by (auto simp: intro: span_sum span_scale dest: span_base)"], ["", "lemma span_closed_sum_list: \"(\\<And>x. x \\<in> set xs \\<Longrightarrow> x \\<in> span B) \\<Longrightarrow> sum_list xs \\<in> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x.\n        x \\<in> set xs \\<Longrightarrow> x \\<in> span B) \\<Longrightarrow>\n    sum_list xs \\<in> span B", "by (induct xs) (auto intro: span_zero span_add)"], ["", "lemma spanE:\n  assumes \"p \\<in> span B\"\n  obtains A q where \"finite A\" and \"A \\<subseteq> B\" and \"p = (\\<Sum>b\\<in>A. (q b) *s b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B;\n         p = (\\<Sum>b\\<in>A. q b *s b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B;\n         p = (\\<Sum>b\\<in>A. q b *s b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: span_explicit)"], ["", "lemma span_finite_subset:\n  assumes \"p \\<in> span B\"\n  obtains A where \"finite A\" and \"A \\<subseteq> B\" and \"p \\<in> span A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms"], ["proof (chain)\npicking this:\n  p \\<in> span B", "obtain A q where \"finite A\" and \"A \\<subseteq> B\" and p: \"p = (\\<Sum>a\\<in>A. q a *s a)\""], ["proof (prove)\nusing this:\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B;\n         p = (\\<Sum>a\\<in>A. q a *s a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule spanE)"], ["proof (state)\nthis:\n  finite A\n  A \\<subseteq> B\n  p = (\\<Sum>a\\<in>A. q a *s a)\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "note this(1, 2)"], ["proof (state)\nthis:\n  finite A\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  finite A\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"p \\<in> span A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> span A", "unfolding p"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>a\\<in>A. q a *s a) \\<in> span A", "by (rule sum_in_spanI)"], ["proof (state)\nthis:\n  p \\<in> span A\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> span A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  finite A\n  A \\<subseteq> B\n  p \\<in> span A", "show ?thesis"], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> B\n  p \\<in> span A\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_finiteE:\n  assumes \"finite B\" and \"p \\<in> span B\"\n  obtains q where \"p = (\\<Sum>b\\<in>B. (q b) *s b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q.\n        p = (\\<Sum>b\\<in>B. q b *s b) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  finite B\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        p = (\\<Sum>b\\<in>B. q b *s b) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: span_finite)"], ["", "lemma span_subset_spanI:\n  assumes \"A \\<subseteq> span B\"\n  shows \"span A \\<subseteq> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span A \\<subseteq> span B", "using assms subspace_span"], ["proof (prove)\nusing this:\n  A \\<subseteq> span B\n  subspace (span ?S)\n\ngoal (1 subgoal):\n 1. span A \\<subseteq> span B", "by (rule span_minimal)"], ["", "lemma span_insert_cong:\n  assumes \"span A = span B\"\n  shows \"span (insert p A) = span (insert p B)\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert p A) = span (insert p B)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. span (insert p A) \\<subseteq> span (insert p B)\n 2. span (insert p B) \\<subseteq> span (insert p A)", "have 1: \"span (insert p C1) \\<subseteq> span (insert p C2)\" if \"span C1 = span C2\" for C1 C2"], ["proof (prove)\ngoal (1 subgoal):\n 1. span (insert p C1) \\<subseteq> span (insert p C2)", "proof (rule span_subset_spanI)"], ["proof (state)\ngoal (1 subgoal):\n 1. insert p C1 \\<subseteq> span (insert p C2)", "show \"insert p C1 \\<subseteq> span (insert p C2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insert p C1 \\<subseteq> span (insert p C2)", "proof (rule insert_subsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<in> span (insert p C2)\n 2. C1 \\<subseteq> span (insert p C2)", "show \"p \\<in> span (insert p C2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> span (insert p C2)", "by (rule span_base) simp"], ["proof (state)\nthis:\n  p \\<in> span (insert p C2)\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "have \"C1 \\<subseteq> span C1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span C1", "by (rule span_superset)"], ["proof (state)\nthis:\n  C1 \\<subseteq> span C1\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "also"], ["proof (state)\nthis:\n  C1 \\<subseteq> span C1\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "from that"], ["proof (chain)\npicking this:\n  span C1 = span C2", "have \"\\<dots> = span C2\""], ["proof (prove)\nusing this:\n  span C1 = span C2\n\ngoal (1 subgoal):\n 1. span C1 = span C2", "."], ["proof (state)\nthis:\n  span C1 = span C2\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "also"], ["proof (state)\nthis:\n  span C1 = span C2\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "have \"\\<dots> \\<subseteq> span (insert p C2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span C2 \\<subseteq> span (insert p C2)", "by (rule span_mono) blast"], ["proof (state)\nthis:\n  span C2 \\<subseteq> span (insert p C2)\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "finally"], ["proof (chain)\npicking this:\n  C1 \\<subseteq> span (insert p C2)", "show \"C1 \\<subseteq> span (insert p C2)\""], ["proof (prove)\nusing this:\n  C1 \\<subseteq> span (insert p C2)\n\ngoal (1 subgoal):\n 1. C1 \\<subseteq> span (insert p C2)", "."], ["proof (state)\nthis:\n  C1 \\<subseteq> span (insert p C2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  insert p C1 \\<subseteq> span (insert p C2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  span ?C1.0 = span ?C2.0 \\<Longrightarrow>\n  span (insert p ?C1.0) \\<subseteq> span (insert p ?C2.0)\n\ngoal (2 subgoals):\n 1. span (insert p A) \\<subseteq> span (insert p B)\n 2. span (insert p B) \\<subseteq> span (insert p A)", "from assms"], ["proof (chain)\npicking this:\n  span A = span B", "show \"?l \\<subseteq> ?r\""], ["proof (prove)\nusing this:\n  span A = span B\n\ngoal (1 subgoal):\n 1. span (insert p A) \\<subseteq> span (insert p B)", "by (rule 1)"], ["proof (state)\nthis:\n  span (insert p A) \\<subseteq> span (insert p B)\n\ngoal (1 subgoal):\n 1. span (insert p B) \\<subseteq> span (insert p A)", "from assms[symmetric]"], ["proof (chain)\npicking this:\n  span B = span A", "show \"?r \\<subseteq> ?l\""], ["proof (prove)\nusing this:\n  span B = span A\n\ngoal (1 subgoal):\n 1. span (insert p B) \\<subseteq> span (insert p A)", "by (rule 1)"], ["proof (state)\nthis:\n  span (insert p B) \\<subseteq> span (insert p A)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_induct' [consumes 1, case_names base step]:\n  assumes \"p \\<in> span B\" and \"P 0\"\n    and \"\\<And>a q p. a \\<in> span B \\<Longrightarrow> P a \\<Longrightarrow> p \\<in> B \\<Longrightarrow> q \\<noteq> 0 \\<Longrightarrow> P (a + q *s p)\"\n  shows \"P p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P p", "using assms(1, 1)"], ["proof (prove)\nusing this:\n  p \\<in> span B\n  p \\<in> span B\n\ngoal (1 subgoal):\n 1. P p", "proof (induct p rule: span_induct_alt)"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B \\<Longrightarrow> P (0::'b)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "case base"], ["proof (state)\nthis:\n  (0::'b) \\<in> span B\n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span B \\<Longrightarrow> P (0::'b)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "from assms(2)"], ["proof (chain)\npicking this:\n  P (0::'b)", "show ?case"], ["proof (prove)\nusing this:\n  P (0::'b)\n\ngoal (1 subgoal):\n 1. P (0::'b)", "."], ["proof (state)\nthis:\n  P (0::'b)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "case (step q b a)"], ["proof (state)\nthis:\n  b \\<in> B\n  a \\<in> span B \\<Longrightarrow> P a\n  q *s b + a \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "from step.hyps(1)"], ["proof (chain)\npicking this:\n  b \\<in> B", "have \"b \\<in> span B\""], ["proof (prove)\nusing this:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. b \\<in> span B", "by (rule span_base)"], ["proof (state)\nthis:\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "hence \"q *s b \\<in> span B\""], ["proof (prove)\nusing this:\n  b \\<in> span B\n\ngoal (1 subgoal):\n 1. q *s b \\<in> span B", "by (rule span_scale)"], ["proof (state)\nthis:\n  q *s b \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "with step.prems"], ["proof (chain)\npicking this:\n  q *s b + a \\<in> span B\n  q *s b \\<in> span B", "have \"a \\<in> span B\""], ["proof (prove)\nusing this:\n  q *s b + a \\<in> span B\n  q *s b \\<in> span B\n\ngoal (1 subgoal):\n 1. a \\<in> span B", "by (simp only: span_add_eq)"], ["proof (state)\nthis:\n  a \\<in> span B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "hence \"P a\""], ["proof (prove)\nusing this:\n  a \\<in> span B\n\ngoal (1 subgoal):\n 1. P a", "by (rule step.hyps)"], ["proof (state)\nthis:\n  P a\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> B; y \\<in> span B \\<Longrightarrow> P y;\n        c *s x + y \\<in> span B\\<rbrakk>\n       \\<Longrightarrow> P (c *s x + y)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (q *s b + a)", "proof (cases \"q = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. q = (0::'a) \\<Longrightarrow> P (q *s b + a)\n 2. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "case True"], ["proof (state)\nthis:\n  q = (0::'a)\n\ngoal (2 subgoals):\n 1. q = (0::'a) \\<Longrightarrow> P (q *s b + a)\n 2. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "from \\<open>P a\\<close>"], ["proof (chain)\npicking this:\n  P a", "show ?thesis"], ["proof (prove)\nusing this:\n  P a\n\ngoal (1 subgoal):\n 1. P (q *s b + a)", "by (simp add: True)"], ["proof (state)\nthis:\n  P (q *s b + a)\n\ngoal (1 subgoal):\n 1. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "case False"], ["proof (state)\nthis:\n  q \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "with \\<open>a \\<in> span B\\<close> \\<open>P a\\<close> step.hyps(1)"], ["proof (chain)\npicking this:\n  a \\<in> span B\n  P a\n  b \\<in> B\n  q \\<noteq> (0::'a)", "have \"P (a + q *s b)\""], ["proof (prove)\nusing this:\n  a \\<in> span B\n  P a\n  b \\<in> B\n  q \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. P (a + q *s b)", "by (rule assms(3))"], ["proof (state)\nthis:\n  P (a + q *s b)\n\ngoal (1 subgoal):\n 1. q \\<noteq> (0::'a) \\<Longrightarrow> P (q *s b + a)", "thus ?thesis"], ["proof (prove)\nusing this:\n  P (a + q *s b)\n\ngoal (1 subgoal):\n 1. P (q *s b + a)", "by (simp only: add.commute)"], ["proof (state)\nthis:\n  P (q *s b + a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P (q *s b + a)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_INT_subset: \"span (\\<Inter>a\\<in>A. f a) \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\" (is \"?l \\<subseteq> ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. span (\\<Inter> (f ` A)) \\<subseteq> (\\<Inter>a\\<in>A. span (f a))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> span (\\<Inter> (f ` A)) \\<Longrightarrow>\n       x \\<in> (\\<Inter>a\\<in>A. span (f a))", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> span (\\<Inter> (f ` A)) \\<Longrightarrow>\n       x \\<in> (\\<Inter>a\\<in>A. span (f a))", "assume \"p \\<in> ?l\""], ["proof (state)\nthis:\n  p \\<in> span (\\<Inter> (f ` A))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> span (\\<Inter> (f ` A)) \\<Longrightarrow>\n       x \\<in> (\\<Inter>a\\<in>A. span (f a))", "show \"p \\<in> ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> (\\<Inter>a\\<in>A. span (f a))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> p \\<in> span (f a)", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> p \\<in> span (f a)", "assume \"a \\<in> A\""], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> p \\<in> span (f a)", "from \\<open>p \\<in> ?l\\<close>"], ["proof (chain)\npicking this:\n  p \\<in> span (\\<Inter> (f ` A))", "show \"p \\<in> span (f a)\""], ["proof (prove)\nusing this:\n  p \\<in> span (\\<Inter> (f ` A))\n\ngoal (1 subgoal):\n 1. p \\<in> span (f a)", "proof (induct p rule: span_induct')"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span (f a)\n 2. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> span (f a)\n 2. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'b) \\<in> span (f a)", "by (fact span_zero)"], ["proof (state)\nthis:\n  (0::'b) \\<in> span (f a)\n\ngoal (1 subgoal):\n 1. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "case (step p q b)"], ["proof (state)\nthis:\n  p \\<in> span (\\<Inter> (f ` A))\n  p \\<in> span (f a)\n  b \\<in> \\<Inter> (f ` A)\n  q \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "from step(3) \\<open>a \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  b \\<in> \\<Inter> (f ` A)\n  a \\<in> A", "have \"b \\<in> f a\""], ["proof (prove)\nusing this:\n  b \\<in> \\<Inter> (f ` A)\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. b \\<in> f a", ".."], ["proof (state)\nthis:\n  b \\<in> f a\n\ngoal (1 subgoal):\n 1. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "hence \"b \\<in> span (f a)\""], ["proof (prove)\nusing this:\n  b \\<in> f a\n\ngoal (1 subgoal):\n 1. b \\<in> span (f a)", "by (rule span_base)"], ["proof (state)\nthis:\n  b \\<in> span (f a)\n\ngoal (1 subgoal):\n 1. \\<And>aa q p.\n       \\<lbrakk>aa \\<in> span (\\<Inter> (f ` A)); aa \\<in> span (f a);\n        p \\<in> \\<Inter> (f ` A); q \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> aa + q *s p \\<in> span (f a)", "with step(2)"], ["proof (chain)\npicking this:\n  p \\<in> span (f a)\n  b \\<in> span (f a)", "show ?case"], ["proof (prove)\nusing this:\n  p \\<in> span (f a)\n  b \\<in> span (f a)\n\ngoal (1 subgoal):\n 1. p + q *s b \\<in> span (f a)", "by (intro span_add span_scale)"], ["proof (state)\nthis:\n  p + q *s b \\<in> span (f a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<in> span (f a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<in> (\\<Inter>a\\<in>A. span (f a))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_INT: \"span (\\<Inter>a\\<in>A. span (f a)) = (\\<Inter>a\\<in>A. span (f a))\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. span (\\<Inter>a\\<in>A. span (f a)) = (\\<Inter>a\\<in>A. span (f a))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n 2. (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> span (\\<Inter>a\\<in>A. span (f a))", "have \"?l \\<subseteq> (\\<Inter>a\\<in>A. span (span (f a)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (span (f a)))", "by (rule span_INT_subset)"], ["proof (state)\nthis:\n  span (\\<Inter>a\\<in>A. span (f a))\n  \\<subseteq> (\\<Inter>a\\<in>A. span (span (f a)))\n\ngoal (2 subgoals):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n 2. (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> span (\\<Inter>a\\<in>A. span (f a))", "also"], ["proof (state)\nthis:\n  span (\\<Inter>a\\<in>A. span (f a))\n  \\<subseteq> (\\<Inter>a\\<in>A. span (span (f a)))\n\ngoal (2 subgoals):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n 2. (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> span (\\<Inter>a\\<in>A. span (f a))", "have \"... = ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Inter>a\\<in>A. span (span (f a))) = (\\<Inter>a\\<in>A. span (f a))", "by (simp add: span_span)"], ["proof (state)\nthis:\n  (\\<Inter>a\\<in>A. span (span (f a))) = (\\<Inter>a\\<in>A. span (f a))\n\ngoal (2 subgoals):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n 2. (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> span (\\<Inter>a\\<in>A. span (f a))", "finally"], ["proof (chain)\npicking this:\n  span (\\<Inter>a\\<in>A. span (f a))\n  \\<subseteq> (\\<Inter>a\\<in>A. span (f a))", "show \"?l \\<subseteq> ?r\""], ["proof (prove)\nusing this:\n  span (\\<Inter>a\\<in>A. span (f a))\n  \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n\ngoal (1 subgoal):\n 1. span (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> (\\<Inter>a\\<in>A. span (f a))", "."], ["proof (state)\nthis:\n  span (\\<Inter>a\\<in>A. span (f a))\n  \\<subseteq> (\\<Inter>a\\<in>A. span (f a))\n\ngoal (1 subgoal):\n 1. (\\<Inter>a\\<in>A. span (f a))\n    \\<subseteq> span (\\<Inter>a\\<in>A. span (f a))", "qed (fact span_superset)"], ["", "lemma span_Int_subset: \"span (A \\<inter> B) \\<subseteq> span A \\<inter> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "have \"span (A \\<inter> B) = span (\\<Inter>x\\<in>{A, B}. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (A \\<inter> B) = span (\\<Inter>x\\<in>{A, B}. x)", "by simp"], ["proof (state)\nthis:\n  span (A \\<inter> B) = span (\\<Inter>x\\<in>{A, B}. x)\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "also"], ["proof (state)\nthis:\n  span (A \\<inter> B) = span (\\<Inter>x\\<in>{A, B}. x)\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "have \"\\<dots> \\<subseteq> (\\<Inter>x\\<in>{A, B}. span x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (\\<Inter>x\\<in>{A, B}. x) \\<subseteq> \\<Inter> (span ` {A, B})", "by (fact span_INT_subset)"], ["proof (state)\nthis:\n  span (\\<Inter>x\\<in>{A, B}. x) \\<subseteq> \\<Inter> (span ` {A, B})\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "also"], ["proof (state)\nthis:\n  span (\\<Inter>x\\<in>{A, B}. x) \\<subseteq> \\<Inter> (span ` {A, B})\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "have \"\\<dots> = span A \\<inter> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Inter> (span ` {A, B}) = span A \\<inter> span B", "by simp"], ["proof (state)\nthis:\n  \\<Inter> (span ` {A, B}) = span A \\<inter> span B\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "finally"], ["proof (chain)\npicking this:\n  span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "show ?thesis"], ["proof (prove)\nusing this:\n  span (A \\<inter> B) \\<subseteq> span A \\<inter> span B\n\ngoal (1 subgoal):\n 1. span (A \\<inter> B) \\<subseteq> span A \\<inter> span B", "."], ["proof (state)\nthis:\n  span (A \\<inter> B) \\<subseteq> span A \\<inter> span B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_Int: \"span (span A \\<inter> span B) = span A \\<inter> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "have \"span (span A \\<inter> span B) = span (\\<Inter>x\\<in>{A, B}. span x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span (\\<Inter> (span ` {A, B}))", "by simp"], ["proof (state)\nthis:\n  span (span A \\<inter> span B) = span (\\<Inter> (span ` {A, B}))\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "also"], ["proof (state)\nthis:\n  span (span A \\<inter> span B) = span (\\<Inter> (span ` {A, B}))\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "have \"\\<dots> = (\\<Inter>x\\<in>{A, B}. span x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. span (\\<Inter> (span ` {A, B})) = \\<Inter> (span ` {A, B})", "by (fact span_INT)"], ["proof (state)\nthis:\n  span (\\<Inter> (span ` {A, B})) = \\<Inter> (span ` {A, B})\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "also"], ["proof (state)\nthis:\n  span (\\<Inter> (span ` {A, B})) = \\<Inter> (span ` {A, B})\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "have \"\\<dots> = span A \\<inter> span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Inter> (span ` {A, B}) = span A \\<inter> span B", "by simp"], ["proof (state)\nthis:\n  \\<Inter> (span ` {A, B}) = span A \\<inter> span B\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "finally"], ["proof (chain)\npicking this:\n  span (span A \\<inter> span B) = span A \\<inter> span B", "show ?thesis"], ["proof (prove)\nusing this:\n  span (span A \\<inter> span B) = span A \\<inter> span B\n\ngoal (1 subgoal):\n 1. span (span A \\<inter> span B) = span A \\<inter> span B", "."], ["proof (state)\nthis:\n  span (span A \\<inter> span B) = span A \\<inter> span B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma span_image_scale_eq_image_scale: \"span ((*s) q ` F) = (*s) q ` span F\" (is \"?A = ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. span ((*s) q ` F) = (*s) q ` span F", "proof (intro subset_antisym subsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> span ((*s) q ` F) \\<Longrightarrow> x \\<in> (*s) q ` span F\n 2. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "fix p"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> span ((*s) q ` F) \\<Longrightarrow> x \\<in> (*s) q ` span F\n 2. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "assume \"p \\<in> ?A\""], ["proof (state)\nthis:\n  p \\<in> span ((*s) q ` F)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> span ((*s) q ` F) \\<Longrightarrow> x \\<in> (*s) q ` span F\n 2. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "thus \"p \\<in> ?B\""], ["proof (prove)\nusing this:\n  p \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. p \\<in> (*s) q ` span F", "proof (induct p rule: span_induct')"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> (*s) q ` span F\n 2. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> (*s) q ` span F\n 2. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "from span_zero"], ["proof (chain)\npicking this:\n  (0::'b) \\<in> span ?S", "show ?case"], ["proof (prove)\nusing this:\n  (0::'b) \\<in> span ?S\n\ngoal (1 subgoal):\n 1. (0::'b) \\<in> (*s) q ` span F", "by (rule rev_image_eqI) simp"], ["proof (state)\nthis:\n  (0::'b) \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "case (step p r a)"], ["proof (state)\nthis:\n  p \\<in> span ((*s) q ` F)\n  p \\<in> (*s) q ` span F\n  a \\<in> (*s) q ` F\n  r \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "from step.hyps(2)"], ["proof (chain)\npicking this:\n  p \\<in> (*s) q ` span F", "obtain p' where \"p' \\<in> span F\" and p: \"p = q *s p'\""], ["proof (prove)\nusing this:\n  p \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        \\<lbrakk>p' \\<in> span F; p = q *s p'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  p' \\<in> span F\n  p = q *s p'\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "from step.hyps(3)"], ["proof (chain)\npicking this:\n  a \\<in> (*s) q ` F", "obtain a' where \"a' \\<in> F\" and a: \"a = q *s a'\""], ["proof (prove)\nusing this:\n  a \\<in> (*s) q ` F\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        \\<lbrakk>a' \\<in> F; a = q *s a'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  a' \\<in> F\n  a = q *s a'\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "from this(1)"], ["proof (chain)\npicking this:\n  a' \\<in> F", "have \"a' \\<in> span F\""], ["proof (prove)\nusing this:\n  a' \\<in> F\n\ngoal (1 subgoal):\n 1. a' \\<in> span F", "by (rule span_base)"], ["proof (state)\nthis:\n  a' \\<in> span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "hence \"r *s a' \\<in> span F\""], ["proof (prove)\nusing this:\n  a' \\<in> span F\n\ngoal (1 subgoal):\n 1. r *s a' \\<in> span F", "by (rule span_scale)"], ["proof (state)\nthis:\n  r *s a' \\<in> span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "with \\<open>p' \\<in> span F\\<close>"], ["proof (chain)\npicking this:\n  p' \\<in> span F\n  r *s a' \\<in> span F", "have \"p' + r *s a' \\<in> span F\""], ["proof (prove)\nusing this:\n  p' \\<in> span F\n  r *s a' \\<in> span F\n\ngoal (1 subgoal):\n 1. p' + r *s a' \\<in> span F", "by (rule span_add)"], ["proof (state)\nthis:\n  p' + r *s a' \\<in> span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "hence \"q *s (p' + r *s a') \\<in> ?B\""], ["proof (prove)\nusing this:\n  p' + r *s a' \\<in> span F\n\ngoal (1 subgoal):\n 1. q *s (p' + r *s a') \\<in> (*s) q ` span F", "by (rule imageI)"], ["proof (state)\nthis:\n  q *s (p' + r *s a') \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "also"], ["proof (state)\nthis:\n  q *s (p' + r *s a') \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "have \"q *s (p' + r *s a') = p + r *s a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q *s (p' + r *s a') = p + r *s a", "by (simp add: a p algebra_simps)"], ["proof (state)\nthis:\n  q *s (p' + r *s a') = p + r *s a\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span ((*s) q ` F); a \\<in> (*s) q ` span F;\n        p \\<in> (*s) q ` F; qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> a + qa *s p \\<in> (*s) q ` span F", "finally"], ["proof (chain)\npicking this:\n  p + r *s a \\<in> (*s) q ` span F", "show ?case"], ["proof (prove)\nusing this:\n  p + r *s a \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. p + r *s a \\<in> (*s) q ` span F", "."], ["proof (state)\nthis:\n  p + r *s a \\<in> (*s) q ` span F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "assume \"p \\<in> ?B\""], ["proof (state)\nthis:\n  p \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "then"], ["proof (chain)\npicking this:\n  p \\<in> (*s) q ` span F", "obtain p' where \"p' \\<in> span F\" and \"p = q *s p'\""], ["proof (prove)\nusing this:\n  p \\<in> (*s) q ` span F\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        \\<lbrakk>p' \\<in> span F; p = q *s p'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  p' \\<in> span F\n  p = q *s p'\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (*s) q ` span F \\<Longrightarrow> x \\<in> span ((*s) q ` F)", "from this(1)"], ["proof (chain)\npicking this:\n  p' \\<in> span F", "show \"p \\<in> ?A\""], ["proof (prove)\nusing this:\n  p' \\<in> span F\n\ngoal (1 subgoal):\n 1. p \\<in> span ((*s) q ` F)", "unfolding \\<open>p = q *s p'\\<close>"], ["proof (prove)\nusing this:\n  p' \\<in> span F\n\ngoal (1 subgoal):\n 1. q *s p' \\<in> span ((*s) q ` F)", "proof (induct p' rule: span_induct')"], ["proof (state)\ngoal (2 subgoals):\n 1. q *s (0::'b) \\<in> span ((*s) q ` F)\n 2. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. q *s (0::'b) \\<in> span ((*s) q ` F)\n 2. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. q *s (0::'b) \\<in> span ((*s) q ` F)", "by (simp add: span_zero)"], ["proof (state)\nthis:\n  q *s (0::'b) \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "case (step p r a)"], ["proof (state)\nthis:\n  p \\<in> span F\n  q *s p \\<in> span ((*s) q ` F)\n  a \\<in> F\n  r \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "from step.hyps(3)"], ["proof (chain)\npicking this:\n  a \\<in> F", "have \"q *s a \\<in> (*s) q ` F\""], ["proof (prove)\nusing this:\n  a \\<in> F\n\ngoal (1 subgoal):\n 1. q *s a \\<in> (*s) q ` F", "by (rule imageI)"], ["proof (state)\nthis:\n  q *s a \\<in> (*s) q ` F\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "hence \"q *s a \\<in> ?A\""], ["proof (prove)\nusing this:\n  q *s a \\<in> (*s) q ` F\n\ngoal (1 subgoal):\n 1. q *s a \\<in> span ((*s) q ` F)", "by (rule span_base)"], ["proof (state)\nthis:\n  q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "hence \"r *s (q *s a) \\<in> ?A\""], ["proof (prove)\nusing this:\n  q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. r *s q *s a \\<in> span ((*s) q ` F)", "by (rule span_scale)"], ["proof (state)\nthis:\n  r *s q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "with step.hyps(2)"], ["proof (chain)\npicking this:\n  q *s p \\<in> span ((*s) q ` F)\n  r *s q *s a \\<in> span ((*s) q ` F)", "have \"q *s p + r *s (q *s a) \\<in> ?A\""], ["proof (prove)\nusing this:\n  q *s p \\<in> span ((*s) q ` F)\n  r *s q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. q *s p + r *s q *s a \\<in> span ((*s) q ` F)", "by (rule span_add)"], ["proof (state)\nthis:\n  q *s p + r *s q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "also"], ["proof (state)\nthis:\n  q *s p + r *s q *s a \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "have \"q *s p + r *s (q *s a) = q *s (p + r *s a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q *s p + r *s q *s a = q *s (p + r *s a)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  q *s p + r *s q *s a = q *s (p + r *s a)\n\ngoal (1 subgoal):\n 1. \\<And>a qa p.\n       \\<lbrakk>a \\<in> span F; q *s a \\<in> span ((*s) q ` F); p \\<in> F;\n        qa \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> q *s (a + qa *s p) \\<in> span ((*s) q ` F)", "finally"], ["proof (chain)\npicking this:\n  q *s (p + r *s a) \\<in> span ((*s) q ` F)", "show ?case"], ["proof (prove)\nusing this:\n  q *s (p + r *s a) \\<in> span ((*s) q ` F)\n\ngoal (1 subgoal):\n 1. q *s (p + r *s a) \\<in> span ((*s) q ` F)", "."], ["proof (state)\nthis:\n  q *s (p + r *s a) \\<in> span ((*s) q ` F)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<in> span ((*s) q ` F)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(* module *)"], ["", "section \\<open>Ideals over Commutative Rings\\<close>"], ["", "lemma module_times: \"module (*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. module (*)", "by (standard, simp_all add: algebra_simps)"], ["", "interpretation ideal: module times"], ["proof (prove)\ngoal (1 subgoal):\n 1. module (*)", "by (fact module_times)"], ["", "declare ideal.scale_scale[simp del]"], ["", "abbreviation \"ideal \\<equiv> ideal.span\""], ["", "lemma ideal_eq_UNIV_iff_contains_one: \"ideal B = UNIV \\<longleftrightarrow> 1 \\<in> ideal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (ideal B = UNIV) = ((1::'a) \\<in> ideal B)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. ideal B = UNIV \\<Longrightarrow> (1::'a) \\<in> ideal B\n 2. (1::'a) \\<in> ideal B \\<Longrightarrow> ideal B = UNIV", "assume *: \"1 \\<in> ideal B\""], ["proof (state)\nthis:\n  (1::'a) \\<in> ideal B\n\ngoal (2 subgoals):\n 1. ideal B = UNIV \\<Longrightarrow> (1::'a) \\<in> ideal B\n 2. (1::'a) \\<in> ideal B \\<Longrightarrow> ideal B = UNIV", "show \"ideal B = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal B = UNIV", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. ideal B \\<subseteq> UNIV\n 2. UNIV \\<subseteq> ideal B", "show \"UNIV \\<subseteq> ideal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNIV \\<subseteq> ideal B", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> UNIV \\<Longrightarrow> x \\<in> ideal B", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> UNIV \\<Longrightarrow> x \\<in> ideal B", "from *"], ["proof (chain)\npicking this:\n  (1::'a) \\<in> ideal B", "have \"x * 1 \\<in> ideal B\""], ["proof (prove)\nusing this:\n  (1::'a) \\<in> ideal B\n\ngoal (1 subgoal):\n 1. x * (1::'a) \\<in> ideal B", "by (rule ideal.span_scale)"], ["proof (state)\nthis:\n  x * (1::'a) \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> UNIV \\<Longrightarrow> x \\<in> ideal B", "thus \"x \\<in> ideal B\""], ["proof (prove)\nusing this:\n  x * (1::'a) \\<in> ideal B\n\ngoal (1 subgoal):\n 1. x \\<in> ideal B", "by simp"], ["proof (state)\nthis:\n  x \\<in> ideal B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  UNIV \\<subseteq> ideal B\n\ngoal (1 subgoal):\n 1. ideal B \\<subseteq> UNIV", "qed simp"], ["proof (state)\nthis:\n  ideal B = UNIV\n\ngoal (1 subgoal):\n 1. ideal B = UNIV \\<Longrightarrow> (1::'a) \\<in> ideal B", "qed simp"], ["", "lemma ideal_eq_zero_iff [iff]: \"ideal F = {0} \\<longleftrightarrow> F \\<subseteq> {0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (ideal F = {0::'a}) = (F \\<subseteq> {0::'a})", "by (metis empty_subsetI ideal.span_empty ideal.span_eq)"], ["", "lemma ideal_field_cases:\n  obtains \"ideal B = {0}\" | \"ideal (B::'a::field set) = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "proof (cases \"ideal B = {0}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis; ideal B = {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  ideal B = {0::'a}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis; ideal B = {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "thus ?thesis"], ["proof (prove)\nusing this:\n  ideal B = {0::'a}\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  ideal B \\<noteq> {0::'a}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence \"\\<not> B \\<subseteq> {0}\""], ["proof (prove)\nusing this:\n  ideal B \\<noteq> {0::'a}\n\ngoal (1 subgoal):\n 1. \\<not> B \\<subseteq> {0::'a}", "by simp"], ["proof (state)\nthis:\n  \\<not> B \\<subseteq> {0::'a}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  \\<not> B \\<subseteq> {0::'a}", "obtain b where \"b \\<in> B\" and \"b \\<noteq> 0\""], ["proof (prove)\nusing this:\n  \\<not> B \\<subseteq> {0::'a}\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>b \\<in> B; b \\<noteq> (0::'a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  b \\<in> B\n  b \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "from this(1)"], ["proof (chain)\npicking this:\n  b \\<in> B", "have \"b \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. b \\<in> ideal B", "by (rule ideal.span_base)"], ["proof (state)\nthis:\n  b \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "hence \"inverse b * b \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b \\<in> ideal B\n\ngoal (1 subgoal):\n 1. inverse b * b \\<in> ideal B", "by (rule ideal.span_scale)"], ["proof (state)\nthis:\n  inverse b * b \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "with \\<open>b \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  b \\<noteq> (0::'a)\n  inverse b * b \\<in> ideal B", "have \"ideal B = UNIV\""], ["proof (prove)\nusing this:\n  b \\<noteq> (0::'a)\n  inverse b * b \\<in> ideal B\n\ngoal (1 subgoal):\n 1. ideal B = UNIV", "by (simp add: ideal_eq_UNIV_iff_contains_one)"], ["proof (state)\nthis:\n  ideal B = UNIV\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ideal B = {0::'a} \\<Longrightarrow> thesis;\n     ideal B = UNIV \\<Longrightarrow> thesis;\n     ideal B \\<noteq> {0::'a}\\<rbrakk>\n    \\<Longrightarrow> thesis", "thus ?thesis"], ["proof (prove)\nusing this:\n  ideal B = UNIV\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary ideal_field_disj: \"ideal B = {0} \\<or> ideal (B::'a::field set) = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal B = {0::'a} \\<or> ideal B = UNIV", "by (rule ideal_field_cases) blast+"], ["", "lemma image_ideal_subset:\n  assumes \"\\<And>x y. h (x + y) = h x + h y\" and \"\\<And>x y. h (x * y) = h x * h y\"\n  shows \"h ` ideal F \\<subseteq> ideal (h ` F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ` ideal F \\<subseteq> ideal (h ` F)", "proof (intro subsetI, elim imageE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>x = h xa; xa \\<in> ideal F\\<rbrakk>\n       \\<Longrightarrow> x \\<in> ideal (h ` F)", "fix g f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>x = h xa; xa \\<in> ideal F\\<rbrakk>\n       \\<Longrightarrow> x \\<in> ideal (h ` F)", "assume g: \"g = h f\""], ["proof (state)\nthis:\n  g = h f\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>x = h xa; xa \\<in> ideal F\\<rbrakk>\n       \\<Longrightarrow> x \\<in> ideal (h ` F)", "assume \"f \\<in> ideal F\""], ["proof (state)\nthis:\n  f \\<in> ideal F\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>x = h xa; xa \\<in> ideal F\\<rbrakk>\n       \\<Longrightarrow> x \\<in> ideal (h ` F)", "thus \"g \\<in> ideal (h ` F)\""], ["proof (prove)\nusing this:\n  f \\<in> ideal F\n\ngoal (1 subgoal):\n 1. g \\<in> ideal (h ` F)", "unfolding g"], ["proof (prove)\nusing this:\n  f \\<in> ideal F\n\ngoal (1 subgoal):\n 1. h f \\<in> ideal (h ` F)", "proof (induct f rule: ideal.span_induct_alt)"], ["proof (state)\ngoal (2 subgoals):\n 1. h (0::'a) \\<in> ideal (h ` F)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. h (0::'a) \\<in> ideal (h ` F)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "have \"h 0 = h (0 + 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (0::'a) = h ((0::'a) + (0::'a))", "by simp"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. h (0::'a) \\<in> ideal (h ` F)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "also"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. h (0::'a) \\<in> ideal (h ` F)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "have \"\\<dots> = h 0 + h 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)", "by (simp only: assms(1))"], ["proof (state)\nthis:\n  h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)\n\ngoal (2 subgoals):\n 1. h (0::'a) \\<in> ideal (h ` F)\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "finally"], ["proof (chain)\npicking this:\n  h (0::'a) = h (0::'a) + h (0::'a)", "show ?case"], ["proof (prove)\nusing this:\n  h (0::'a) = h (0::'a) + h (0::'a)\n\ngoal (1 subgoal):\n 1. h (0::'a) \\<in> ideal (h ` F)", "by (simp add: ideal.span_zero)"], ["proof (state)\nthis:\n  h (0::'a) \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "case (step c f g)"], ["proof (state)\nthis:\n  f \\<in> F\n  h g \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "from step.hyps(1)"], ["proof (chain)\npicking this:\n  f \\<in> F", "have \"h f \\<in> ideal (h ` F)\""], ["proof (prove)\nusing this:\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. h f \\<in> ideal (h ` F)", "by (intro ideal.span_base imageI)"], ["proof (state)\nthis:\n  h f \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "hence \"h c * h f \\<in> ideal (h ` F)\""], ["proof (prove)\nusing this:\n  h f \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. h c * h f \\<in> ideal (h ` F)", "by (rule ideal.span_scale)"], ["proof (state)\nthis:\n  h c * h f \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "hence \"h c * h f + h g \\<in> ideal (h ` F)\""], ["proof (prove)\nusing this:\n  h c * h f \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. h c * h f + h g \\<in> ideal (h ` F)", "using step.hyps(2)"], ["proof (prove)\nusing this:\n  h c * h f \\<in> ideal (h ` F)\n  h g \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. h c * h f + h g \\<in> ideal (h ` F)", "by (rule ideal.span_add)"], ["proof (state)\nthis:\n  h c * h f + h g \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> F; h y \\<in> ideal (h ` F)\\<rbrakk>\n       \\<Longrightarrow> h (c * x + y) \\<in> ideal (h ` F)", "thus ?case"], ["proof (prove)\nusing this:\n  h c * h f + h g \\<in> ideal (h ` F)\n\ngoal (1 subgoal):\n 1. h (c * f + g) \\<in> ideal (h ` F)", "by (simp only: assms)"], ["proof (state)\nthis:\n  h (c * f + g) \\<in> ideal (h ` F)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g \\<in> ideal (h ` F)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma image_ideal_eq_surj:\n  assumes \"\\<And>x y. h (x + y) = h x + h y\" and \"\\<And>x y. h (x * y) = h x * h y\" and \"surj h\"\n  shows \"h ` ideal B = ideal (h ` B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ` ideal B = ideal (h ` B)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. h ` ideal B \\<subseteq> ideal (h ` B)\n 2. ideal (h ` B) \\<subseteq> h ` ideal B", "from assms(1, 2)"], ["proof (chain)\npicking this:\n  h (?x + ?y) = h ?x + h ?y\n  h (?x * ?y) = h ?x * h ?y", "show \"h ` ideal B \\<subseteq> ideal (h ` B)\""], ["proof (prove)\nusing this:\n  h (?x + ?y) = h ?x + h ?y\n  h (?x * ?y) = h ?x * h ?y\n\ngoal (1 subgoal):\n 1. h ` ideal B \\<subseteq> ideal (h ` B)", "by (rule image_ideal_subset)"], ["proof (state)\nthis:\n  h ` ideal B \\<subseteq> ideal (h ` B)\n\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<subseteq> h ` ideal B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<subseteq> h ` ideal B", "show \"ideal (h ` B) \\<subseteq> h ` ideal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<subseteq> h ` ideal B", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> ideal (h ` B) \\<Longrightarrow> x \\<in> h ` ideal B", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> ideal (h ` B) \\<Longrightarrow> x \\<in> h ` ideal B", "assume \"b \\<in> ideal (h ` B)\""], ["proof (state)\nthis:\n  b \\<in> ideal (h ` B)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> ideal (h ` B) \\<Longrightarrow> x \\<in> h ` ideal B", "thus \"b \\<in> h ` ideal B\""], ["proof (prove)\nusing this:\n  b \\<in> ideal (h ` B)\n\ngoal (1 subgoal):\n 1. b \\<in> h ` ideal B", "proof (induct b rule: ideal.span_induct_alt)"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "have \"h 0 = h (0 + 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (0::'a) = h ((0::'a) + (0::'a))", "by simp"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "also"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "have \"\\<dots> = h 0 + h 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)", "by (simp only: assms(1))"], ["proof (state)\nthis:\n  h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)\n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "finally"], ["proof (chain)\npicking this:\n  h (0::'a) = h (0::'a) + h (0::'a)", "have \"0 = h 0\""], ["proof (prove)\nusing this:\n  h (0::'a) = h (0::'a) + h (0::'a)\n\ngoal (1 subgoal):\n 1. (0::'b) = h (0::'a)", "by simp"], ["proof (state)\nthis:\n  (0::'b) = h (0::'a)\n\ngoal (2 subgoals):\n 1. (0::'b) \\<in> h ` ideal B\n 2. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "with ideal.span_zero"], ["proof (chain)\npicking this:\n  (0::?'a) \\<in> ideal ?S\n  (0::'b) = h (0::'a)", "show ?case"], ["proof (prove)\nusing this:\n  (0::?'a) \\<in> ideal ?S\n  (0::'b) = h (0::'a)\n\ngoal (1 subgoal):\n 1. (0::'b) \\<in> h ` ideal B", "by (rule rev_image_eqI)"], ["proof (state)\nthis:\n  (0::'b) \\<in> h ` ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "case (step c b a)"], ["proof (state)\nthis:\n  b \\<in> h ` B\n  a \\<in> h ` ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "from assms(3)"], ["proof (chain)\npicking this:\n  surj h", "obtain c' where c: \"c = h c'\""], ["proof (prove)\nusing this:\n  surj h\n\ngoal (1 subgoal):\n 1. (\\<And>c'. c = h c' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (rule surjE)"], ["proof (state)\nthis:\n  c = h c'\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "from step.hyps(2)"], ["proof (chain)\npicking this:\n  a \\<in> h ` ideal B", "obtain a' where \"a' \\<in> ideal B\" and a: \"a = h a'\""], ["proof (prove)\nusing this:\n  a \\<in> h ` ideal B\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        \\<lbrakk>a' \\<in> ideal B; a = h a'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  a' \\<in> ideal B\n  a = h a'\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "from step.hyps(1)"], ["proof (chain)\npicking this:\n  b \\<in> h ` B", "obtain b' where \"b' \\<in> B\" and b: \"b = h b'\""], ["proof (prove)\nusing this:\n  b \\<in> h ` B\n\ngoal (1 subgoal):\n 1. (\\<And>b'.\n        \\<lbrakk>b' \\<in> B; b = h b'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  b' \\<in> B\n  b = h b'\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "from this(1)"], ["proof (chain)\npicking this:\n  b' \\<in> B", "have \"b' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b' \\<in> B\n\ngoal (1 subgoal):\n 1. b' \\<in> ideal B", "by (rule ideal.span_base)"], ["proof (state)\nthis:\n  b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "hence \"c' * b' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' \\<in> ideal B", "by (rule ideal.span_scale)"], ["proof (state)\nthis:\n  c' * b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "hence \"c' * b' + a' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  c' * b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' + a' \\<in> ideal B", "using \\<open>a' \\<in> _\\<close>"], ["proof (prove)\nusing this:\n  c' * b' \\<in> ideal B\n  a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' + a' \\<in> ideal B", "by (rule ideal.span_add)"], ["proof (state)\nthis:\n  c' * b' + a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "moreover"], ["proof (state)\nthis:\n  c' * b' + a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "have \"c * b + a = h (c' * b' + a')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * b + a = h (c' * b' + a')", "by (simp add: c b a assms(1, 2))"], ["proof (state)\nthis:\n  c * b + a = h (c' * b' + a')\n\ngoal (1 subgoal):\n 1. \\<And>c x y.\n       \\<lbrakk>x \\<in> h ` B; y \\<in> h ` ideal B\\<rbrakk>\n       \\<Longrightarrow> c * x + y \\<in> h ` ideal B", "ultimately"], ["proof (chain)\npicking this:\n  c' * b' + a' \\<in> ideal B\n  c * b + a = h (c' * b' + a')", "show ?case"], ["proof (prove)\nusing this:\n  c' * b' + a' \\<in> ideal B\n  c * b + a = h (c' * b' + a')\n\ngoal (1 subgoal):\n 1. c * b + a \\<in> h ` ideal B", "by (rule rev_image_eqI)"], ["proof (state)\nthis:\n  c * b + a \\<in> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b \\<in> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ideal (h ` B) \\<subseteq> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["", "context\n  fixes h :: \"'a \\<Rightarrow> 'a::comm_ring_1\"\n  assumes h_plus: \"h (x + y) = h x + h y\"\n  assumes h_times: \"h (x * y) = h x * h y\"\n  assumes h_idem: \"h (h x) = h x\"\nbegin"], ["", "lemma in_idealE_homomorphism_finite:\n  assumes \"finite B\" and \"B \\<subseteq> range h\" and \"p \\<in> range h\" and \"p \\<in> ideal B\"\n  obtains q where \"\\<And>b. q b \\<in> range h\" and \"p = (\\<Sum>b\\<in>B. q b * b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>B. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>B. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(1, 4)"], ["proof (chain)\npicking this:\n  finite B\n  p \\<in> ideal B", "obtain q0 where p: \"p = (\\<Sum>b\\<in>B. q0 b * b)\""], ["proof (prove)\nusing this:\n  finite B\n  p \\<in> ideal B\n\ngoal (1 subgoal):\n 1. (\\<And>q0.\n        p = (\\<Sum>b\\<in>B. q0 b * b) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (rule ideal.span_finiteE)"], ["proof (state)\nthis:\n  p = (\\<Sum>b\\<in>B. q0 b * b)\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>B. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define q where \"q = (\\<lambda>b. h (q0 b))\""], ["proof (state)\nthis:\n  q = (\\<lambda>b. h (q0 b))\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>B. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b. ?q b \\<in> range h\n 2. p = (\\<Sum>b\\<in>B. ?q b * b)", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b. ?q b \\<in> range h\n 2. p = (\\<Sum>b\\<in>B. ?q b * b)", "show \"q b \\<in> range h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q b \\<in> range h", "unfolding q_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. h (q0 b) \\<in> range h", "by (rule rangeI)"], ["proof (state)\nthis:\n  q b \\<in> range h\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "from assms(3)"], ["proof (chain)\npicking this:\n  p \\<in> range h", "obtain p' where \"p = h p'\""], ["proof (prove)\nusing this:\n  p \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>p'. p = h p' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  p = h p'\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "hence \"p = h p\""], ["proof (prove)\nusing this:\n  p = h p'\n\ngoal (1 subgoal):\n 1. p = h p", "by (simp only: h_idem)"], ["proof (state)\nthis:\n  p = h p\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "also"], ["proof (state)\nthis:\n  p = h p\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "from \\<open>finite B\\<close>"], ["proof (chain)\npicking this:\n  finite B", "have \"\\<dots> = (\\<Sum>b\\<in>B. q b * h b)\""], ["proof (prove)\nusing this:\n  finite B\n\ngoal (1 subgoal):\n 1. h p = (\\<Sum>b\\<in>B. q b * h b)", "unfolding p"], ["proof (prove)\nusing this:\n  finite B\n\ngoal (1 subgoal):\n 1. h (\\<Sum>b\\<in>B. q0 b * b) = (\\<Sum>b\\<in>B. q b * h b)", "proof (induct B)"], ["proof (state)\ngoal (2 subgoals):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "case empty"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "have \"h 0 = h (0 + 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (0::'a) = h ((0::'a) + (0::'a))", "by simp"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "also"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "have \"\\<dots> = h 0 + h 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)", "by (simp only: h_plus)"], ["proof (state)\nthis:\n  h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)\n\ngoal (2 subgoals):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "finally"], ["proof (chain)\npicking this:\n  h (0::'a) = h (0::'a) + h (0::'a)", "show ?case"], ["proof (prove)\nusing this:\n  h (0::'a) = h (0::'a) + h (0::'a)\n\ngoal (1 subgoal):\n 1. h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)", "by simp"], ["proof (state)\nthis:\n  h (\\<Sum>b\\<in>{}. q0 b * b) = (\\<Sum>b\\<in>{}. q b * h b)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "case (insert b B)"], ["proof (state)\nthis:\n  finite B\n  b \\<notin> B\n  h (\\<Sum>b\\<in>B. q0 b * b) = (\\<Sum>b\\<in>B. q b * h b)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        h (\\<Sum>b\\<in>F. q0 b * b) = (\\<Sum>b\\<in>F. q b * h b)\\<rbrakk>\n       \\<Longrightarrow> h (\\<Sum>b\\<in>insert x F. q0 b * b) =\n                         (\\<Sum>b\\<in>insert x F. q b * h b)", "thus ?case"], ["proof (prove)\nusing this:\n  finite B\n  b \\<notin> B\n  h (\\<Sum>b\\<in>B. q0 b * b) = (\\<Sum>b\\<in>B. q b * h b)\n\ngoal (1 subgoal):\n 1. h (\\<Sum>b\\<in>insert b B. q0 b * b) =\n    (\\<Sum>b\\<in>insert b B. q b * h b)", "by (simp add: h_plus h_times q_def)"], ["proof (state)\nthis:\n  h (\\<Sum>b\\<in>insert b B. q0 b * b) = (\\<Sum>b\\<in>insert b B. q b * h b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  h p = (\\<Sum>b\\<in>B. q b * h b)\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "also"], ["proof (state)\nthis:\n  h p = (\\<Sum>b\\<in>B. q b * h b)\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "from refl"], ["proof (chain)\npicking this:\n  ?t = ?t", "have \"\\<dots> = (\\<Sum>b\\<in>B. q b * b)\""], ["proof (prove)\nusing this:\n  ?t = ?t\n\ngoal (1 subgoal):\n 1. (\\<Sum>b\\<in>B. q b * h b) = (\\<Sum>b\\<in>B. q b * b)", "proof (rule sum.cong)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> B \\<Longrightarrow> q x * h x = q x * x", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> B \\<Longrightarrow> q x * h x = q x * x", "assume \"b \\<in> B\""], ["proof (state)\nthis:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> B \\<Longrightarrow> q x * h x = q x * x", "hence \"b \\<in> range h\""], ["proof (prove)\nusing this:\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. b \\<in> range h", "using assms(2)"], ["proof (prove)\nusing this:\n  b \\<in> B\n  B \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. b \\<in> range h", ".."], ["proof (state)\nthis:\n  b \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> B \\<Longrightarrow> q x * h x = q x * x", "then"], ["proof (chain)\npicking this:\n  b \\<in> range h", "obtain b' where \"b = h b'\""], ["proof (prove)\nusing this:\n  b \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>b'. b = h b' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  b = h b'\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> B \\<Longrightarrow> q x * h x = q x * x", "thus \"q b * h b = q b * b\""], ["proof (prove)\nusing this:\n  b = h b'\n\ngoal (1 subgoal):\n 1. q b * h b = q b * b", "by (simp only: h_idem)"], ["proof (state)\nthis:\n  q b * h b = q b * b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>b\\<in>B. q b * h b) = (\\<Sum>b\\<in>B. q b * b)\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q (?b6 b) * b)", "finally"], ["proof (chain)\npicking this:\n  p = (\\<Sum>b\\<in>B. q b * b)", "show \"p = (\\<Sum>b\\<in>B. q b * b)\""], ["proof (prove)\nusing this:\n  p = (\\<Sum>b\\<in>B. q b * b)\n\ngoal (1 subgoal):\n 1. p = (\\<Sum>b\\<in>B. q b * b)", "."], ["proof (state)\nthis:\n  p = (\\<Sum>b\\<in>B. q b * b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary in_idealE_homomorphism:\n  assumes \"B \\<subseteq> range h\" and \"p \\<in> range h\" and \"p \\<in> ideal B\"\n  obtains A q where \"finite A\" and \"A \\<subseteq> B\" and \"\\<And>b. q b \\<in> range h\" and \"p = (\\<Sum>b\\<in>A. q b * b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(3)"], ["proof (chain)\npicking this:\n  p \\<in> ideal B", "obtain A where \"finite A\" and \"A \\<subseteq> B\" and \"p \\<in> ideal A\""], ["proof (prove)\nusing this:\n  p \\<in> ideal B\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>finite A; A \\<subseteq> B; p \\<in> ideal A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule ideal.span_finite_subset)"], ["proof (state)\nthis:\n  finite A\n  A \\<subseteq> B\n  p \\<in> ideal A\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from this(2) assms(1)"], ["proof (chain)\npicking this:\n  A \\<subseteq> B\n  B \\<subseteq> range h", "have \"A \\<subseteq> range h\""], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n  B \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. A \\<subseteq> range h", "by (rule subset_trans)"], ["proof (state)\nthis:\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with \\<open>finite A\\<close>"], ["proof (chain)\npicking this:\n  finite A\n  A \\<subseteq> range h", "obtain q where \"\\<And>b. q b \\<in> range h\" and \"p = (\\<Sum>b\\<in>A. q b * b)\""], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(2) \\<open>p \\<in> ideal A\\<close>"], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> range h\n  p \\<in> range h\n  p \\<in> ideal A\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>\\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule in_idealE_homomorphism_finite) blast"], ["proof (state)\nthis:\n  q ?b \\<in> range h\n  p = (\\<Sum>b\\<in>A. q b * b)\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>b. q b \\<in> range h;\n         p = (\\<Sum>b\\<in>A. q b * b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with \\<open>finite A\\<close> \\<open>A \\<subseteq> B\\<close>"], ["proof (chain)\npicking this:\n  finite A\n  A \\<subseteq> B\n  q ?b \\<in> range h\n  p = (\\<Sum>b\\<in>A. q b * b)", "show ?thesis"], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> B\n  q ?b \\<in> range h\n  p = (\\<Sum>b\\<in>A. q b * b)\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideal_induct_homomorphism [consumes 3, case_names 0 plus]:\n  assumes \"B \\<subseteq> range h\" and \"p \\<in> range h\" and \"p \\<in> ideal B\"\n  assumes \"P 0\" and \"\\<And>c b a. c \\<in> range h \\<Longrightarrow> b \\<in> B \\<Longrightarrow> P a \\<Longrightarrow> a \\<in> range h \\<Longrightarrow> P (c * b + a)\"\n  shows \"P p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P p", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P p", "from assms(1-3)"], ["proof (chain)\npicking this:\n  B \\<subseteq> range h\n  p \\<in> range h\n  p \\<in> ideal B", "obtain A q where \"finite A\" and \"A \\<subseteq> B\" and rl: \"\\<And>f. q f \\<in> range h\"\n    and p: \"p = (\\<Sum>f\\<in>A. q f * f)\""], ["proof (prove)\nusing this:\n  B \\<subseteq> range h\n  p \\<in> range h\n  p \\<in> ideal B\n\ngoal (1 subgoal):\n 1. (\\<And>A q.\n        \\<lbrakk>finite A; A \\<subseteq> B; \\<And>f. q f \\<in> range h;\n         p = (\\<Sum>f\\<in>A. q f * f)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule in_idealE_homomorphism) blast"], ["proof (state)\nthis:\n  finite A\n  A \\<subseteq> B\n  q ?f \\<in> range h\n  p = (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. P p", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P p", "unfolding p"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (\\<Sum>f\\<in>A. q f * f)", "using \\<open>finite A\\<close> \\<open>A \\<subseteq> B\\<close>"], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. P (\\<Sum>f\\<in>A. q f * f)", "proof (induct A)"], ["proof (state)\ngoal (2 subgoals):\n 1. {} \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>{}. q f * f)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "case empty"], ["proof (state)\nthis:\n  {} \\<subseteq> B\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>{}. q f * f)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "from assms(4)"], ["proof (chain)\npicking this:\n  P (0::'a)", "show ?case"], ["proof (prove)\nusing this:\n  P (0::'a)\n\ngoal (1 subgoal):\n 1. P (\\<Sum>f\\<in>{}. q f * f)", "by simp"], ["proof (state)\nthis:\n  P (\\<Sum>f\\<in>{}. q f * f)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "case (insert a A)"], ["proof (state)\nthis:\n  finite A\n  a \\<notin> A\n  A \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>A. q f * f)\n  insert a A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "from insert.hyps(1, 2)"], ["proof (chain)\npicking this:\n  finite A\n  a \\<notin> A", "have \"(\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\""], ["proof (prove)\nusing this:\n  finite A\n  a \\<notin> A\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "also"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "from rl"], ["proof (chain)\npicking this:\n  q ?f \\<in> range h", "have \"P \\<dots>\""], ["proof (prove)\nusing this:\n  q ?f \\<in> range h\n\ngoal (1 subgoal):\n 1. P (q a * a + (\\<Sum>f\\<in>A. q f * f))", "proof (rule assms(5))"], ["proof (state)\ngoal (3 subgoals):\n 1. a \\<in> B\n 2. P (\\<Sum>f\\<in>A. q f * f)\n 3. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "have \"a \\<in> insert a A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> insert a A", "by simp"], ["proof (state)\nthis:\n  a \\<in> insert a A\n\ngoal (3 subgoals):\n 1. a \\<in> B\n 2. P (\\<Sum>f\\<in>A. q f * f)\n 3. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "thus \"a \\<in> B\""], ["proof (prove)\nusing this:\n  a \\<in> insert a A\n\ngoal (1 subgoal):\n 1. a \\<in> B", "using insert.prems"], ["proof (prove)\nusing this:\n  a \\<in> insert a A\n  insert a A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. a \\<in> B", ".."], ["proof (state)\nthis:\n  a \\<in> B\n\ngoal (2 subgoals):\n 1. P (\\<Sum>f\\<in>A. q f * f)\n 2. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. P (\\<Sum>f\\<in>A. q f * f)\n 2. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "from insert.prems"], ["proof (chain)\npicking this:\n  insert a A \\<subseteq> B", "have \"A \\<subseteq> B\""], ["proof (prove)\nusing this:\n  insert a A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. A \\<subseteq> B", "by simp"], ["proof (state)\nthis:\n  A \\<subseteq> B\n\ngoal (2 subgoals):\n 1. P (\\<Sum>f\\<in>A. q f * f)\n 2. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "thus \"P (\\<Sum>f\\<in>A. q f * f)\""], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. P (\\<Sum>f\\<in>A. q f * f)", "by (rule insert.hyps)"], ["proof (state)\nthis:\n  P (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "from insert.prems"], ["proof (chain)\npicking this:\n  insert a A \\<subseteq> B", "have \"A \\<subseteq> B\""], ["proof (prove)\nusing this:\n  insert a A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. A \\<subseteq> B", "by simp"], ["proof (state)\nthis:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "hence \"A \\<subseteq> range h\""], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. A \\<subseteq> range h", "using assms(1)"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n  B \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. A \\<subseteq> range h", "by (rule subset_trans)"], ["proof (state)\nthis:\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "with \\<open>finite A\\<close>"], ["proof (chain)\npicking this:\n  finite A\n  A \\<subseteq> range h", "show \"(\\<Sum>f\\<in>A. q f * f) \\<in> range h\""], ["proof (prove)\nusing this:\n  finite A\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "proof (induct A)"], ["proof (state)\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "case empty"], ["proof (state)\nthis:\n  {} \\<subseteq> range h\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "have \"h 0 = h (0 + 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (0::'a) = h ((0::'a) + (0::'a))", "by simp"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "also"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "have \"\\<dots> = h 0 + h 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)", "by (simp only: h_plus)"], ["proof (state)\nthis:\n  h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "finally"], ["proof (chain)\npicking this:\n  h (0::'a) = h (0::'a) + h (0::'a)", "have \"(\\<Sum>f\\<in>{}. q f * f) = h 0\""], ["proof (prove)\nusing this:\n  h (0::'a) = h (0::'a) + h (0::'a)\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>{}. q f * f) = h (0::'a)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>{}. q f * f) = h (0::'a)\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> range h \\<Longrightarrow>\n    (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>f\\<in>{}. q f * f) = h (0::'a)\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>{}. q f * f) \\<in> range h", "by (rule image_eqI) simp"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>{}. q f * f) \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "case (insert a A)"], ["proof (state)\nthis:\n  finite A\n  a \\<notin> A\n  A \\<subseteq> range h \\<Longrightarrow>\n  (\\<Sum>f\\<in>A. q f * f) \\<in> range h\n  insert a A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "from insert.prems"], ["proof (chain)\npicking this:\n  insert a A \\<subseteq> range h", "have \"a \\<in> range h\" and \"A \\<subseteq> range h\""], ["proof (prove)\nusing this:\n  insert a A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. a \\<in> range h &&& A \\<subseteq> range h", "by simp_all"], ["proof (state)\nthis:\n  a \\<in> range h\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "from this(1)"], ["proof (chain)\npicking this:\n  a \\<in> range h", "obtain a' where a: \"a = h a'\""], ["proof (prove)\nusing this:\n  a \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>a'. a = h a' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  a = h a'\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "from \\<open>q a \\<in> range h\\<close>"], ["proof (chain)\npicking this:\n  q a \\<in> range h", "obtain q' where q: \"q a = h q'\""], ["proof (prove)\nusing this:\n  q a \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>q'. q a = h q' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  q a = h q'\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "from \\<open>A \\<subseteq> _\\<close>"], ["proof (chain)\npicking this:\n  A \\<subseteq> range h", "have \"(\\<Sum>f\\<in>A. q f * f) \\<in> range h\""], ["proof (prove)\nusing this:\n  A \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "by (rule insert.hyps)"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>A. q f * f) \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "then"], ["proof (chain)\npicking this:\n  (\\<Sum>f\\<in>A. q f * f) \\<in> range h", "obtain m where eq: \"(\\<Sum>f\\<in>A. q f * f) = h m\""], ["proof (prove)\nusing this:\n  (\\<Sum>f\\<in>A. q f * f) \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>m.\n        (\\<Sum>f\\<in>A. q f * f) = h m \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>A. q f * f) = h m\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "from insert.hyps(1, 2)"], ["proof (chain)\npicking this:\n  finite A\n  a \\<notin> A", "have \"(\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\""], ["proof (prove)\nusing this:\n  finite A\n  a \\<notin> A\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "also"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>insert a A. q f * f) = q a * a + (\\<Sum>f\\<in>A. q f * f)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "have \"\\<dots> = h (q' * a' + m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q a * a + (\\<Sum>f\\<in>A. q f * f) = h (q' * a' + m)", "unfolding q"], ["proof (prove)\ngoal (1 subgoal):\n 1. h q' * a + (\\<Sum>f\\<in>A. q f * f) = h (q' * a' + m)", "by (simp add: a eq h_plus h_times)"], ["proof (state)\nthis:\n  q a * a + (\\<Sum>f\\<in>A. q f * f) = h (q' * a' + m)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "also"], ["proof (state)\nthis:\n  q a * a + (\\<Sum>f\\<in>A. q f * f) = h (q' * a' + m)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "have \"\\<dots> \\<in> range h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (q' * a' + m) \\<in> range h", "by (rule rangeI)"], ["proof (state)\nthis:\n  h (q' * a' + m) \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> range h \\<Longrightarrow>\n        (\\<Sum>f\\<in>F. q f * f) \\<in> range h;\n        insert x F \\<subseteq> range h\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>f\\<in>insert x F. q f * f) \\<in> range h", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>f\\<in>insert a A. q f * f) \\<in> range h", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>f\\<in>insert a A. q f * f) \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>insert a A. q f * f) \\<in> range h", "."], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>insert a A. q f * f) \\<in> range h\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>A. q f * f) \\<in> range h\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P (q a * a + (\\<Sum>f\\<in>A. q f * f))\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        F \\<subseteq> B \\<Longrightarrow> P (\\<Sum>f\\<in>F. q f * f);\n        insert x F \\<subseteq> B\\<rbrakk>\n       \\<Longrightarrow> P (\\<Sum>f\\<in>insert x F. q f * f)", "finally"], ["proof (chain)\npicking this:\n  P (\\<Sum>f\\<in>insert a A. q f * f)", "show ?case"], ["proof (prove)\nusing this:\n  P (\\<Sum>f\\<in>insert a A. q f * f)\n\ngoal (1 subgoal):\n 1. P (\\<Sum>f\\<in>insert a A. q f * f)", "."], ["proof (state)\nthis:\n  P (\\<Sum>f\\<in>insert a A. q f * f)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P p\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma image_ideal_eq_Int: \"h ` ideal B = ideal (h ` B) \\<inter> range h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ` ideal B = ideal (h ` B) \\<inter> range h", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. h ` ideal B \\<subseteq> ideal (h ` B) \\<inter> range h\n 2. ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B", "from h_plus h_times"], ["proof (chain)\npicking this:\n  h (?x + ?y) = h ?x + h ?y\n  h (?x * ?y) = h ?x * h ?y", "have \"h ` ideal B \\<subseteq> ideal (h ` B)\""], ["proof (prove)\nusing this:\n  h (?x + ?y) = h ?x + h ?y\n  h (?x * ?y) = h ?x * h ?y\n\ngoal (1 subgoal):\n 1. h ` ideal B \\<subseteq> ideal (h ` B)", "by (rule image_ideal_subset)"], ["proof (state)\nthis:\n  h ` ideal B \\<subseteq> ideal (h ` B)\n\ngoal (2 subgoals):\n 1. h ` ideal B \\<subseteq> ideal (h ` B) \\<inter> range h\n 2. ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B", "thus \"h ` ideal B \\<subseteq> ideal (h ` B) \\<inter> range h\""], ["proof (prove)\nusing this:\n  h ` ideal B \\<subseteq> ideal (h ` B)\n\ngoal (1 subgoal):\n 1. h ` ideal B \\<subseteq> ideal (h ` B) \\<inter> range h", "by blast"], ["proof (state)\nthis:\n  h ` ideal B \\<subseteq> ideal (h ` B) \\<inter> range h\n\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B", "show \"ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ideal (h ` B) \\<inter> range h \\<Longrightarrow>\n       x \\<in> h ` ideal B", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ideal (h ` B) \\<inter> range h \\<Longrightarrow>\n       x \\<in> h ` ideal B", "assume \"b \\<in> ideal (h ` B) \\<inter> range h\""], ["proof (state)\nthis:\n  b \\<in> ideal (h ` B) \\<inter> range h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ideal (h ` B) \\<inter> range h \\<Longrightarrow>\n       x \\<in> h ` ideal B", "hence \"b \\<in> ideal (h ` B)\" and \"b \\<in> range h\""], ["proof (prove)\nusing this:\n  b \\<in> ideal (h ` B) \\<inter> range h\n\ngoal (1 subgoal):\n 1. b \\<in> ideal (h ` B) &&& b \\<in> range h", "by simp_all"], ["proof (state)\nthis:\n  b \\<in> ideal (h ` B)\n  b \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ideal (h ` B) \\<inter> range h \\<Longrightarrow>\n       x \\<in> h ` ideal B", "have \"h ` B \\<subseteq> range h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ` B \\<subseteq> range h", "by blast"], ["proof (state)\nthis:\n  h ` B \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> ideal (h ` B) \\<inter> range h \\<Longrightarrow>\n       x \\<in> h ` ideal B", "thus \"b \\<in> h ` ideal B\""], ["proof (prove)\nusing this:\n  h ` B \\<subseteq> range h\n\ngoal (1 subgoal):\n 1. b \\<in> h ` ideal B", "using \\<open>b \\<in> range h\\<close> \\<open>b \\<in> ideal (h ` B)\\<close>"], ["proof (prove)\nusing this:\n  h ` B \\<subseteq> range h\n  b \\<in> range h\n  b \\<in> ideal (h ` B)\n\ngoal (1 subgoal):\n 1. b \\<in> h ` ideal B", "proof (induct b rule: ideal_induct_homomorphism)"], ["proof (state)\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "have \"h 0 = h (0 + 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h (0::'a) = h ((0::'a) + (0::'a))", "by simp"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "also"], ["proof (state)\nthis:\n  h (0::'a) = h ((0::'a) + (0::'a))\n\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "have \"\\<dots> = h 0 + h 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)", "by (simp only: h_plus)"], ["proof (state)\nthis:\n  h ((0::'a) + (0::'a)) = h (0::'a) + h (0::'a)\n\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "finally"], ["proof (chain)\npicking this:\n  h (0::'a) = h (0::'a) + h (0::'a)", "have \"0 = h 0\""], ["proof (prove)\nusing this:\n  h (0::'a) = h (0::'a) + h (0::'a)\n\ngoal (1 subgoal):\n 1. (0::'a) = h (0::'a)", "by simp"], ["proof (state)\nthis:\n  (0::'a) = h (0::'a)\n\ngoal (2 subgoals):\n 1. (0::'a) \\<in> h ` ideal B\n 2. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "with ideal.span_zero"], ["proof (chain)\npicking this:\n  (0::?'a) \\<in> ideal ?S\n  (0::'a) = h (0::'a)", "show ?case"], ["proof (prove)\nusing this:\n  (0::?'a) \\<in> ideal ?S\n  (0::'a) = h (0::'a)\n\ngoal (1 subgoal):\n 1. (0::'a) \\<in> h ` ideal B", "by (rule rev_image_eqI)"], ["proof (state)\nthis:\n  (0::'a) \\<in> h ` ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "case (plus c b a)"], ["proof (state)\nthis:\n  c \\<in> range h\n  b \\<in> h ` B\n  a \\<in> h ` ideal B\n  a \\<in> range h\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "from plus.hyps(1)"], ["proof (chain)\npicking this:\n  c \\<in> range h", "obtain c' where c: \"c = h c'\""], ["proof (prove)\nusing this:\n  c \\<in> range h\n\ngoal (1 subgoal):\n 1. (\\<And>c'. c = h c' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  c = h c'\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "from plus.hyps(3)"], ["proof (chain)\npicking this:\n  a \\<in> h ` ideal B", "obtain a' where \"a' \\<in> ideal B\" and a: \"a = h a'\""], ["proof (prove)\nusing this:\n  a \\<in> h ` ideal B\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        \\<lbrakk>a' \\<in> ideal B; a = h a'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  a' \\<in> ideal B\n  a = h a'\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "from plus.hyps(2)"], ["proof (chain)\npicking this:\n  b \\<in> h ` B", "obtain b' where \"b' \\<in> B\" and b: \"b = h b'\""], ["proof (prove)\nusing this:\n  b \\<in> h ` B\n\ngoal (1 subgoal):\n 1. (\\<And>b'.\n        \\<lbrakk>b' \\<in> B; b = h b'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  b' \\<in> B\n  b = h b'\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "from this(1)"], ["proof (chain)\npicking this:\n  b' \\<in> B", "have \"b' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b' \\<in> B\n\ngoal (1 subgoal):\n 1. b' \\<in> ideal B", "by (rule ideal.span_base)"], ["proof (state)\nthis:\n  b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "hence \"c' * b' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' \\<in> ideal B", "by (rule ideal.span_scale)"], ["proof (state)\nthis:\n  c' * b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "hence \"c' * b' + a' \\<in> ideal B\""], ["proof (prove)\nusing this:\n  c' * b' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' + a' \\<in> ideal B", "using \\<open>a' \\<in> _\\<close>"], ["proof (prove)\nusing this:\n  c' * b' \\<in> ideal B\n  a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. c' * b' + a' \\<in> ideal B", "by (rule ideal.span_add)"], ["proof (state)\nthis:\n  c' * b' + a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "moreover"], ["proof (state)\nthis:\n  c' * b' + a' \\<in> ideal B\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "have \"c * b + a = h (c' * b' + a')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * b + a = h (c' * b' + a')", "by (simp add: a b c h_plus h_times)"], ["proof (state)\nthis:\n  c * b + a = h (c' * b' + a')\n\ngoal (1 subgoal):\n 1. \\<And>c b a.\n       \\<lbrakk>c \\<in> range h; b \\<in> h ` B; a \\<in> h ` ideal B;\n        a \\<in> range h\\<rbrakk>\n       \\<Longrightarrow> c * b + a \\<in> h ` ideal B", "ultimately"], ["proof (chain)\npicking this:\n  c' * b' + a' \\<in> ideal B\n  c * b + a = h (c' * b' + a')", "show ?case"], ["proof (prove)\nusing this:\n  c' * b' + a' \\<in> ideal B\n  c * b + a = h (c' * b' + a')\n\ngoal (1 subgoal):\n 1. c * b + a \\<in> h ` ideal B", "by (rule rev_image_eqI)"], ["proof (state)\nthis:\n  c * b + a \\<in> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b \\<in> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ideal (h ` B) \\<inter> range h \\<subseteq> h ` ideal B\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"], ["", "(* theory *)"]]}