{"file_name": "/home/qj213/afp-2021-10-22/thys/Probabilistic_Noninterference/Compositionality.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Probabilistic_Noninterference", "problem_names": ["lemma discrAt_compatAt[simp]:\nassumes \"presAtm atm\"\nshows \"compatAtm atm\"", "lemma compatCh_cval[simp]:\nassumes \"compatCh ch\" and \"s \\<approx> t\"\nshows \" cval ch s = cval ch t\"", "lemma siso_Done[simp]:\n\"siso Done\"", "lemma siso_Atm[simp]:\n\"siso (Atm atm) = compatAtm atm\"", "lemma siso_Seq[simp]:\nassumes *: \"siso c1\" and **: \"siso c2\"\nshows \"siso (c1 ;; c2)\"", "lemma siso_While[simp]:\nassumes \"compatTst tst\" and \"siso c\"\nshows \"siso (While tst c)\"", "lemma siso_Ch[simp]:\nassumes \"compatCh ch\"\nand *: \"siso c1\" and **: \"siso c2\"\nshows \"siso (Ch ch c1 c2)\"", "lemma siso_Par[simp]:\nassumes \"properL cl\" and \"sisoL cl\"\nshows \"siso (Par cl)\"", "lemma siso_ParT[simp]:\nassumes \"properL cl\" and \"sisoL cl\"\nshows \"siso (ParT cl)\"", "lemma bij_betw_emp[simp]:\n\"bij_betw f {} {}\"", "lemma part_full[simp]:\n\"part I {I}\"", "lemma part_singlPart[simp]:\n\"part I (singlPart I)\"", "lemma singlPart_inj_on[simp]:\n\"inj_on (image f) (singlPart I) = inj_on f I\"", "lemma singlPart_surj[simp]:\n\"(image f) ` (singlPart I) = (singlPart J) \\<longleftrightarrow> f ` I = J\"", "lemma singlPart_bij_betw[simp]:\n\"bij_betw (image f) (singlPart I) (singlPart J) = bij_betw f I J\"", "lemma singlPart_finite1:\nassumes \"finite (singlPart I)\"\nshows \"finite (I::'a set)\"", "lemma singlPart_finite[simp]:\n\"finite (singlPart I) = finite I\"", "lemma emp_notIn_singlPart[simp]:\n\"{} \\<notin> singlPart I\"", "lemma Sbis_coinduct[consumes 1, case_names step, coinduct set]:\n  \"R c d \\<Longrightarrow>\n    (\\<And>c d s t. R c d \\<Longrightarrow> s \\<approx> t \\<Longrightarrow>\n      \\<exists>P F. mC_C_part c d P F \\<and> inj_on F P \\<and> mC_C_wt c d s t P F \\<and>\n        (\\<forall>I\\<in>P. \\<forall>i\\<in>I. \\<forall>j\\<in>F I. \n                eff c s i \\<approx> eff d t j \\<and> (R (cont c s i) (cont d t j) \\<or> (cont c s i, cont d t j) \\<in> Sbis)))\n  \\<Longrightarrow> (c, d) \\<in> Sbis\"", "lemma siso_Sbis[simp]: \"siso c \\<Longrightarrow> c \\<approx>s c\"", "lemma discr_Done[simp]: \"discr Done\"", "lemma discr_Atm_presAtm[simp]: \"discr (Atm atm) = presAtm atm\"", "lemma discr_Seq[simp]:\n  \"discr c1 \\<Longrightarrow> discr c2 \\<Longrightarrow> discr (c1 ;; c2)\"", "lemma discr_While[simp]: assumes \"discr c\" shows \"discr (While tst c)\"", "lemma discr_Ch[simp]: \"discr c1 \\<Longrightarrow> discr c2 \\<Longrightarrow> discr (Ch ch c1 c2)\"", "lemma discr_Par[simp]: \"properL cl \\<Longrightarrow> discrL cl \\<Longrightarrow> discr (Par cl)\"", "lemma discr_ParT[simp]: \"properL cl \\<Longrightarrow> discrL cl \\<Longrightarrow> discr (ParT cl)\"", "lemma discr_finished[simp]: \"proper c \\<Longrightarrow> finished c \\<Longrightarrow> discr c\"", "lemma Sbis_pres_discr_L:\n  \"c \\<approx>s d \\<Longrightarrow> discr d \\<Longrightarrow> discr c\"", "lemma Sbis_pres_discr_R:\nassumes \"discr c\" and \"c \\<approx>s d\"\nshows \"discr d\"", "lemma Sbis_finished_discr_L:\nassumes \"c \\<approx>s d\" and \"proper d\" and \"finished d\"\nshows \"discr c\"", "lemma Sbis_finished_discr_R:\nassumes \"proper c\" and \"finished c\" and \"c \\<approx>s d\"\nshows \"discr d\"", "lemma thetaSD_Sretr:\n\"thetaSD \\<subseteq> Sretr thetaSD\"", "lemma thetaSD_Sbis:\n\"thetaSD \\<subseteq> Sbis\"", "theorem discr_Sbis[simp]:\nassumes \"proper c\" and \"proper d\" and \"discr c\" and \"discr d\"\nshows \"c \\<approx>s d\"", "lemma thetaSDone_Sretr:\n\"thetaSDone \\<subseteq> Sretr thetaSDone\"", "lemma thetaSDone_Sbis:\n\"thetaSDone \\<subseteq> Sbis\"", "theorem Done_Sbis[simp]:\n\"Done \\<approx>s Done\"", "lemma thetaSAtm_Sretr:\nassumes \"compatAtm atm\"\nshows \"thetaSAtm atm \\<subseteq> Sretr (thetaSAtm atm)\"", "lemma thetaSAtm_Sbis:\nassumes \"compatAtm atm\"\nshows \"thetaSAtm atm \\<subseteq> Sbis\"", "theorem Atm_Sbis[simp]:\nassumes \"compatAtm atm\"\nshows \"Atm atm \\<approx>s Atm atm\"", "lemma thetaSSeqI_Sretr:\n\"thetaSSeqI \\<subseteq> Sretr (thetaSSeqI Un Sbis)\"", "lemma thetaSSeqI_Sbis:\n\"thetaSSeqI \\<subseteq> Sbis\"", "theorem Seq_siso_Sbis[simp]:\nassumes \"siso e\" and \"c2 \\<approx>s d2\"\nshows \"e ;; c2 \\<approx>s e ;; d2\"", "lemma thetaSSeqD_Sretr:\n\"thetaSSeqD \\<subseteq> Sretr (thetaSSeqD Un Sbis)\"", "lemma thetaSSeqD_Sbis:\n\"thetaSSeqD \\<subseteq> Sbis\"", "theorem Seq_Sbis[simp]:\nassumes \"proper c1\" and \"proper d1\" and \"proper c2\" and \"proper d2\"\nand \"c1 \\<approx>s d1\" and \"discr c2\" and \"discr d2\"\nshows \"c1 ;; c2 \\<approx>s d1 ;; d2\"", "lemma thetaSCh_Sretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"thetaSCh ch c1 c2 d1 d2 \\<subseteq>\n       Sretr (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\"\n(is \"?th \\<subseteq> Sretr (?th \\<union> Sbis)\")", "lemma thetaSCh_Sbis:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"thetaSCh ch c1 c2 d1 d2 \\<subseteq> Sbis\"", "theorem Ch_siso_Sbis[simp]:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"Ch ch c1 c2 \\<approx>s Ch ch d1 d2\"", "lemma emp_shift[simp]:\n\"shift cl n I = {} \\<longleftrightarrow> I = {}\"", "lemma emp_shift_rev[simp]:\n\"{} = shift cl n I \\<longleftrightarrow> I = {}\"", "lemma emp_back[simp]:\n\"back cl n II = {} \\<longleftrightarrow> II = {}\"", "lemma emp_back_rev[simp]:\n\"{} = back cl n II \\<longleftrightarrow> II = {}\"", "lemma in_shift[simp]:\n\"brnL cl n + i \\<in> shift cl n I \\<longleftrightarrow> i \\<in> I\"", "lemma in_back[simp]:\n\"ii \\<in> II \\<Longrightarrow> ii - brnL cl n \\<in> back cl n II\"", "lemma in_back2[simp]:\nassumes \"ii > brnL cl n\" and \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"ii - brnL cl n \\<in> back cl n II \\<longleftrightarrow> ii \\<in> II\" (is \"?L \\<longleftrightarrow> ?R\")", "lemma shift[simp]:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nshows \"shift cl n I \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"", "lemma shift2[simp]:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nand \"ii \\<in> shift cl n I\"\nshows \"brnL cl n \\<le> ii \\<and> ii < brnL cl n + brn (cl!n)\"", "lemma shift3[simp]:\nassumes n: \"n < length cl\" and I: \"I \\<subseteq> {..< brn (cl!n)}\"\nand ii: \"ii \\<in> shift cl n I\"\nshows \"ii < brnL cl (length cl)\"", "lemma \"back\"[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"back cl n II \\<subseteq> {..< brn (cl!n)}\"", "lemma back2[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"i \\<in> back cl n II\"\nshows \"i < brn (cl!n)\"", "lemma shift_inj[simp]:\n\"shift cl n I1 = shift cl n I2 \\<longleftrightarrow> I1 = I2\"", "lemma shift_mono[simp]:\n\"shift cl n I1 \\<subseteq> shift cl n I2 \\<longleftrightarrow> I1 \\<subseteq> I2\"", "lemma shift_Int[simp]:\n\"shift cl n I1 \\<inter> shift cl n I2 = {} \\<longleftrightarrow> I1 \\<inter> I2 = {}\"", "lemma inj_shift: \"inj (shift cl n)\"", "lemma inj_on_shift: \"inj_on (shift cl n) K\"", "lemma back_shift[simp]:\n\"back cl n (shift cl n I) = I\"", "lemma shift_back[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"shift cl n (back cl n II) = II\"", "lemma back_inj[simp]:\nassumes II1: \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand II2: \"II2 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"back cl n II1 = back cl n II2 \\<longleftrightarrow> II1 = II2\" (is \"?L = ?R \\<longleftrightarrow> II1 = II2\")", "lemma back_mono[simp]:\nassumes \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"II2 \\<subseteq> {brnL cl n ..< brnL cl n + brn (cl!n)}\"\nshows \"back cl n II1 \\<subseteq> back cl n II2 \\<longleftrightarrow> II1 \\<subseteq> II2\"\n(is \"?L \\<subseteq> ?R \\<longleftrightarrow> II1 \\<subseteq> II2\")", "lemma back_Int[simp]:\nassumes \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"II2 \\<subseteq> {brnL cl n ..< brnL cl n + brn (cl!n)}\"\nshows \"back cl n II1 \\<inter> back cl n II2 = {} \\<longleftrightarrow> II1 \\<inter> II2 = {}\"\n(is \"?L \\<inter> ?R = {} \\<longleftrightarrow> II1 \\<inter> II2 = {}\")", "lemma inj_on_back:\n\"inj_on (back cl n) (Pow {brnL cl n ..<+ brn (cl!n)})\"", "lemma shift_surj:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"\\<exists> I. I \\<subseteq> {..< brn (cl!n)} \\<and> shift cl n I = II\"", "lemma back_surj:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nshows \"\\<exists> II. II \\<subseteq> {brnL cl n ..<+ brn (cl!n)} \\<and> back cl n II = I\"", "lemma shift_part[simp]:\nassumes \"part {..< brn (cl!n)} P\"\nshows \"part {brnL cl n ..<+ brn (cl!n)} (shift cl n ` P)\"", "lemma part_brn_disj1:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\"\nand II1: \"II1 \\<in> shift cl n1 ` (P n1)\" and II2: \"II2 \\<in> shift cl n2 ` (P n2)\" and d: \"n1 \\<noteq> n2\"\nshows \"II1 \\<inter> II2 = {}\"", "lemma part_brn_disj2:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\" and d: \"n1 \\<noteq> n2\"\nshows \"shift cl n1 ` (P n1) \\<inter> shift cl n2 ` (P n2) = {}\" (is \"?L \\<inter> ?R = {}\")", "lemma part_brn_disj3:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\"\nand I1: \"I1 \\<in> P n1\" and I2: \"I2 \\<in> P n2\" and d: \"n1 \\<noteq> n2\"\nshows \"shift cl n1 I1 \\<inter> shift cl n2 I2 = {}\"", "lemma sum_wt_Par_sub_shift[simp]:\nassumes cl: \"properL cl\" and n: \"n < length cl\" and\nI: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows\n\"sum (wt (Par cl) s) (shift cl n I) =\n 1 / (length cl) * sum (wt (cl ! n) s) I\"", "lemma sum_wt_ParT_sub_WtFT_pickFT_0_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl = 1\"\nand I: \"I \\<subseteq> {..< brn (cl ! (pickFT cl))}\" \"0 \\<in> I\"\nshows\n\"sum (wt (ParT cl) s) (shift cl (pickFT cl) I) = 1\"", "lemma sum_wt_ParT_sub_WtFT_notPickFT_0_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl = 1\" and n: \"n < length cl\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\" and nI: \"n = pickFT cl \\<longrightarrow> 0 \\<notin> I\"\nshows \"sum (wt (ParT cl) s) (shift cl n I) = 0\"", "lemma sum_wt_ParT_sub_notWtFT_finished_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl \\<noteq> 1\" and n: \"n < length cl\" and cln: \"finished (cl!n)\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows \"sum (wt (ParT cl) s) (shift cl n I) = 0\"", "lemma sum_wt_ParT_sub_notWtFT_notFinished_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl \\<noteq> 1\"\nand n: \"n < length cl\" and cln: \"\\<not> finished (cl!n)\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows\n\"sum (wt (ParT cl) s) (shift cl n I) =\n (1 / (length cl)) / (1 - WtFT cl) * sum (wt (cl ! n) s) I\"", "lemma UNpart_cases[elim, consumes 1, case_names Local]:\nassumes \"II \\<in> UNpart cl P\" and\n\"\\<And> n I. \\<lbrakk>n < length cl; I \\<in> P n; II = shift cl n I\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi", "lemma emp_UNpart:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart cl P\"", "lemma part_UNpart:\nassumes cl: \"properL cl\" and\nP: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"part {..< brnL cl (length cl)} (UNpart cl P)\"\n(is \"part ?J ?Q\")", "lemma pickT_pred:\nassumes \"II \\<in> UNpart cl P\"\nshows \"\\<exists> n. pickT_pred cl P II n\"", "lemma pickT_pred_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)  \\<and> {} \\<notin> P n\"\nand 1: \"pickT_pred cl P II n1\" and 2: \"pickT_pred cl P II n2\"\nshows \"n1 = n2\"", "lemma pickT_pred_pickT:\nassumes \"II \\<in> UNpart cl P\"\nshows \"pickT_pred cl P II (pickT cl P II)\"", "lemma pickT_pred_pickT_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand \"pickT_pred cl P II n\"\nshows \"n = pickT cl P II\"", "lemma pickT_length[simp]:\nassumes \"II \\<in> UNpart cl P\"\nshows \"pickT cl P II < length cl\"", "lemma pickT_shift[simp]:\nassumes \"II \\<in> UNpart cl P\"\nshows \"II \\<in> shift cl (pickT cl P II) ` (P (pickT cl P II))\"", "lemma pickT_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand \"n < length cl\" and \"II \\<in> shift cl n ` (P n)\"\nshows \"n = pickT cl P II\"", "lemma UNlift_shift[simp]:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n: \"n < length cl\" and I: \"I \\<in> P n\"\nshows \"UNlift cl dl P F (shift cl n I) = shift dl n (F n I)\"", "lemma UNlift_inj_on:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift cl dl P F) (UNpart cl P)\" (is \"inj_on ?G ?Q\")", "lemma UNlift_UNpart:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift cl dl P F) ` (UNpart cl P) = UNpart dl (%n. F n ` (P n))\" (is \"?G ` ?Q = ?R\")", "lemma emp_UNlift_UNpart:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift cl dl P F) ` (UNpart cl P)\" (is \"{} \\<notin> ?R\")", "lemma part_UNlift_UNpart:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nshows \"part {..< brnL dl (length dl)} ((UNlift cl dl P F) ` (UNpart cl P))\" (is \"part ?C ?R\")", "lemma ss_wt_Par_UNlift:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" and II: \"II \\<in> UNpart cl P\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand sw:\n\"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) s) I =\n     sum (wt (dl ! n) t) (F n I)\"\nand st: \"s \\<approx> t\"\nshows\n\"sum (wt (Par cl) s) II =\n sum (wt (Par dl) t) (UNlift cl dl P F II)\" (is \"?L = ?R\")", "lemma cont_eff_Par_UNlift:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand II: \"II \\<in> UNpart cl P\" and ii: \"ii \\<in> II\" and jj: \"jj \\<in> UNlift cl dl P F II\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nand st: \"s \\<approx> t\"\nshows\n\"eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n (cont (Par cl) s ii, cont (Par dl) t jj) \\<in> thetaSPar\"\n(is \"?eff \\<and> ?cont\")", "lemma thetaSPar_Sretr: \"thetaSPar \\<subseteq> Sretr (thetaSPar)\"", "lemma thetaSPar_Sbis: \"thetaSPar \\<subseteq> Sbis\"", "theorem Par_Sbis[simp]:\nassumes \"properL cl\" and \"properL dl\" \"SbisL cl dl\"\nshows \"Par cl \\<approx>s Par dl\"", "lemma ZObis_pres_discr_L: \"c \\<approx>01 d \\<Longrightarrow> discr d \\<Longrightarrow> discr c\"", "theorem ZObis_pres_discr_R:\nassumes \"discr c\" and \"c \\<approx>01 d\"\nshows \"discr d\"", "theorem ZObis_finished_discr_L:\nassumes \"c \\<approx>01 d\" and \"proper d\" and \"finished d\"\nshows \"discr c\"", "theorem ZObis_finished_discr_R:\nassumes \"proper c\" and \"finished c\" and \"c \\<approx>01 d\"\nshows \"discr d\"", "theorem discr_ZObis[simp]:\nassumes \"proper c\" and \"proper d\" and \"discr c\" and \"discr d\"\nshows \"c \\<approx>01 d\"", "theorem Done_ZObis[simp]:\n\"Done \\<approx>01 Done\"", "theorem Atm_ZObis[simp]:\nassumes \"compatAtm atm\"\nshows \"Atm atm \\<approx>01 Atm atm\"", "lemma thetaZOSeqI_ZOretr:\n\"thetaZOSeqI \\<subseteq> ZOretr (thetaZOSeqI Un ZObis)\"", "lemma thetaZOSeqI_ZObis:\n\"thetaZOSeqI \\<subseteq> ZObis\"", "theorem Seq_siso_ZObis[simp]:\nassumes \"siso e\" and \"c2 \\<approx>01 d2\"\nshows \"e ;; c2 \\<approx>01 e ;; d2\"", "lemma thetaZOSeqD_ZOretr:\n\"thetaZOSeqD \\<subseteq> ZOretr (thetaZOSeqD Un ZObis)\"", "lemma thetaZOSeqD_ZObis:\n\"thetaZOSeqD \\<subseteq> ZObis\"", "theorem Seq_ZObis[simp]:\nassumes \"proper c1\" and \"proper d1\" and \"proper c2\" and \"proper d2\"\nand \"c1 \\<approx>01 d1\" and \"discr c2\" and \"discr d2\"\nshows \"c1 ;; c2 \\<approx>01 d1 ;; d2\"", "lemma thetaZOCh_Sretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq>\n       Sretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\"\n(is \"?th \\<subseteq> Sretr (?th \\<union> ZObis)\")", "lemma thetaZOCh_ZOretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq>\n       ZOretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\"", "lemma thetaZOCh_ZObis:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq> ZObis\"", "theorem Ch_siso_ZObis[simp]:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"Ch ch c1 c2 \\<approx>01 Ch ch d1 d2\"", "lemma theFTOne_sym: \"theFTOne cl dl = theFTOne dl cl\"", "lemma finite_theFTOne[simp]:\n\"finite (theFTOne cl dl)\"", "lemma theFTOne_length_finished[simp]:\nassumes \"n \\<in> theFTOne cl dl\"\nshows \"(n < length cl \\<and> finished (cl!n)) \\<or> (n < length dl \\<and> finished (dl!n))\"", "lemma theFTOne_length[simp]:\nassumes \"length cl = length dl\" and \"n \\<in> theFTOne cl dl\"\nshows \"n < length cl\" and \"n < length dl\"", "lemma theFTOne_intro[intro]:\nassumes \"\\<And> n. (n < length cl \\<and> finished (cl!n)) \\<or> (n < length dl \\<and> finished (dl!n))\"\nshows \"n \\<in> theFTOne cl dl\"", "lemma pickFT_theFTOne[simp]:\nassumes \"WtFT cl = 1\"\nshows \"pickFT cl \\<in> theFTOne cl dl\"", "lemma finite_theNFTBoth[simp]:\n\"finite (theNFTBoth cl dl)\"", "lemma theNFTBoth_sym: \"theNFTBoth cl dl = theNFTBoth dl cl\"", "lemma theNFTBoth_length_finished[simp]:\nassumes \"n \\<in> theNFTBoth cl dl\"\nshows \"n < length cl\" and \"\\<not> finished (cl!n)\"\nand \"n < length dl\" and \"\\<not> finished (dl!n)\"", "lemma theNFTBoth_intro[intro]:\nassumes \"\\<And> n. n < length cl \\<and> \\<not> finished (cl!n) \\<and> n < length dl \\<and> \\<not> finished (dl!n)\"\nshows \"n \\<in> theNFTBoth cl dl\"", "lemma theFTOne_Int_theNFTBoth[simp]:\n\"theFTOne cl dl \\<inter> theNFTBoth cl dl = {}\"\nand \"theNFTBoth cl dl \\<inter> theFTOne cl dl = {}\"", "lemma theFT_Un_theNFT_One_Both[simp]:\nassumes \"length cl = length dl\"\nshows\n\"theFTOne cl dl \\<union> theNFTBoth cl dl = {..< length cl}\" and\n\"theNFTBoth cl dl \\<union> theFTOne cl dl = {..< length cl}\"", "lemma in_theFTOne_theNFTBoth[simp]:\nassumes \"n1 \\<in> theFTOne cl dl\" and \"n2 \\<in> theNFTBoth cl dl\"\nshows \"n1 \\<noteq> n2\" and \"n2 \\<noteq> n1\"", "lemma BrnFT_elim[elim, consumes 1, case_names Local]:\nassumes \"ii \\<in> BrnFT cl dl\"\nand \"\\<And> n i. \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl!n); ii = brnL cl n + i\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi", "lemma finite_BrnFT[simp]:\n\"finite (BrnFT cl dl)\"", "lemma BrnFT_incl_brnL[simp]:\nassumes l: \"length cl = length dl\" and cl: \"properL cl\"\nshows \"BrnFT cl dl \\<subseteq> {..< brnL cl (length cl)}\" (is \"?L \\<subseteq> ?R\")", "lemma BrnNFT_elim[elim, consumes 1, case_names Local]:\nassumes \"ii \\<in> BrnNFT cl dl\"\nand \"\\<And> n i. \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl!n); ii = brnL cl n + i\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi", "lemma finite_BrnNFT[simp]:\n\"finite (BrnNFT cl dl)\"", "lemma BrnNFT_incl_brnL[simp]:\nassumes cl: \"properL cl\"\nshows \"BrnNFT cl dl \\<subseteq> {..< brnL cl (length cl)}\" (is \"?L \\<subseteq> ?R\")", "lemma BrnFT_Int_BrnNFT[simp]:\nassumes l: \"length cl = length dl\"\nshows\n\"BrnFT cl dl \\<inter> BrnNFT cl dl = {}\" (is \"?L\")\nand \"BrnNFT cl dl \\<inter> BrnFT cl dl = {}\" (is \"?R\")", "lemma BrnFT_Un_BrnNFT[simp]:\nassumes l: \"length cl = length dl\" and cl: \"properL cl\"\nshows \"BrnFT cl dl \\<union> BrnNFT cl dl = {..< brnL cl (length cl)}\" (is \"?L1 = ?R\")\nand \"BrnNFT cl dl \\<union> BrnFT cl dl = {..< brnL cl (length cl)}\" (is \"?L2 = ?R\")", "lemma BrnFT_part:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"BrnFT cl dl = (\\<Union> n \\<in> theFTOne cl dl. Union (shift cl n ` (P n)))\" (is \"?L = ?R\")", "lemma brnL_pickFT_BrnFT[simp]:\nassumes \"properL cl\" and \"WtFT cl = 1\"\nshows \"brnL cl (pickFT cl) \\<in> BrnFT cl dl\"", "lemma WtFT_ParT_BrnFT[simp]:\nassumes \"length cl = length dl\" \"properL cl\" and \"WtFT cl = 1\"\nshows \"sum (wt (ParT cl) s) (BrnFT cl dl) = 1\"", "lemma BrnFT_UNpart01[simp]:\n\"BrnFT cl dl \\<in> UNpart01 cl dl P\"", "lemma UNpart1_cases[elim, consumes 1, case_names Local]:\nassumes \"II \\<in> UNpart1 cl dl P\"\n\"\\<And> n I. \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n; II = shift cl n I\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi", "lemma UNpart01_cases[elim, consumes 1, case_names Local0 Local]:\nassumes \"II \\<in> UNpart01 cl dl P\" and \"II = BrnFT cl dl \\<Longrightarrow> phi\"\n\"\\<And> n I. \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n; II = shift cl n I; II \\<in> UNpart1 cl dl P\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi", "lemma emp_UNpart1:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart1 cl dl P\"", "lemma emp_UNpart01:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart01 cl dl P - {BrnFT cl dl}\"", "lemma BrnFT_Int_UNpart1[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand II: \"II \\<in> UNpart1 cl dl P\"\nshows \"BrnFT cl dl \\<inter> II = {}\"", "lemma BrnFT_notIn_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"BrnFT cl dl \\<notin> UNpart1 cl dl P\"", "lemma UNpart1_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}\"", "lemma part_UNpart1[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"part (BrnNFT cl dl) (UNpart1 cl dl P)\"", "lemma part_UNpart01:\nassumes cl: \"properL cl\" and l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"part {..< brnL cl (length cl)} (UNpart01 cl dl P)\"", "lemma UNlift01_BrnFT[simp]:\n\"UNlift01 cl dl P F (BrnFT cl dl) = BrnFT dl cl\"", "lemma UNlift01_shift[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n: \"n \\<in> theNFTBoth cl dl\" and I: \"I \\<in> P n\"\nshows \"UNlift01 cl dl P F (shift cl n I) = shift dl n (F n I)\"", "lemma UNlift01_inj_on_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)\" (is \"inj_on ?G ?Q\")", "lemma inj_on_singl:\nassumes \"inj_on f A\" and \"a0 \\<notin> A\" and \"\\<And> a. a \\<in> A \\<Longrightarrow> f a \\<noteq> f a0\"\nshows \"inj_on f ({a0} Un A)\"", "lemma UNlift01_inj_on:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift01 cl dl P F) (UNpart01 cl dl P)\"", "lemma UNlift01_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift01 cl dl P F) ` (UNpart1 cl dl P) = UNpart1 dl cl (%n. F n ` (P n))\" (is \"?G ` ?Q = ?R\")", "lemma UNlift01_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift01 cl dl P F) ` (UNpart01 cl dl P) = UNpart01 dl cl (%n. F n ` (P n))\"", "lemma emp_UNlift01_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift01 cl dl P F) ` (UNpart1 cl dl P)\" (is \"{} \\<notin> ?R\")", "lemma emp_UNlift01_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift01 cl dl P F) ` (UNpart01 cl dl P - {BrnFT cl dl})\"\n(is \"{} \\<notin> ?U ` ?V\")", "lemma part_UNlift01_UNpart1:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nshows \"part (BrnNFT dl cl) ((UNlift01 cl dl P F) ` (UNpart1 cl dl P))\" (is \"part ?C ?R\")", "lemma part_UNlift01_UNpart01:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> (F n ` (P n))\"\nshows \"part {..< brnL dl (length dl)} ((UNlift01 cl dl P F) ` (UNpart01 cl dl P))\"\n(is \"part ?K ?R\")", "lemma diff_frac_eq_1:\nassumes \"b \\<noteq> (0::real)\"\nshows \"1 - a / b = (b - a) / b\"", "lemma diff_frac_eq_2:\nassumes \"b \\<noteq> (1::real)\"\nshows \"1 - (a - b) / (1 - b) = (1 - a) / (1 - b)\"\n(is \"?L = ?R\")", "lemma triv_div_mult:\nassumes vSF: \"vSF \\<noteq> (1::real)\"\nand L: \"L = (K - vSF) / (1 - vSF)\" and Ln: \"L \\<noteq> 1\"\nshows \"(VS / (1 - vSF) * V) / (1 - L) = (VS * V) / (1 - K)\"\n(is \"?A = ?B\")", "lemma ss_wt_ParT_UNlift01:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" and II: \"II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand sw:\n\"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) s) I =\n     sum (wt (dl ! n) t) (F n I)\"\nand st: \"s \\<approx> t\"\nand le1: \"sum (wt (ParT cl) s) (BrnFT cl dl) < 1\"\n\"sum (wt (ParT dl) t) (BrnFT dl cl) < 1\"\nshows\n\"sum (wt (ParT cl) s) II /\n (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\"\n(is \"sum ?vP II / (1 - sum ?vP ?II_0) =\n     sum ?wP ?JJ / (1 - sum ?wP ?JJ_0)\")", "lemma cont_eff_ParT_BrnFT_L:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand ii: \"ii \\<in> BrnFT cl dl\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nshows\n\"s \\<approx> eff (ParT cl) s ii \\<and>\n (cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")", "lemma cont_eff_ParT_BrnFT_R:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand jj: \"jj \\<in> BrnFT dl cl\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and> cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nshows\n\"t \\<approx> eff (ParT dl) t jj \\<and>\n (ParT cl, cont (ParT dl) t jj) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")", "lemma cont_eff_ParT_UNlift01:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand II: \"II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\"\nand ii: \"ii \\<in> II\" and jj: \"jj \\<in> UNlift01 cl dl P F II\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx>\n  eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s\n  cont (dl!n) t j\"\nand st: \"s \\<approx> t\"\nshows\n\"eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n (cont (ParT cl) s ii, cont (ParT dl) t jj) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")", "lemma thetaZOParT_ZOretr: \"thetaZOParT \\<subseteq> ZOretr (thetaZOParT)\"", "lemma thetaZOParT_ZObis: \"thetaZOParT \\<subseteq> ZObis\"", "theorem ParT_ZObis[simp]:\nassumes \"properL cl\" and \"properL dl\" and \"SbisL cl dl\"\nshows \"ParT cl \\<approx>01 ParT dl\""], "translations": [["", "lemma discrAt_compatAt[simp]:\nassumes \"presAtm atm\"\nshows \"compatAtm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. compatAtm atm", "using assms"], ["proof (prove)\nusing this:\n  presAtm atm\n\ngoal (1 subgoal):\n 1. compatAtm atm", "unfolding compatAtm_def"], ["proof (prove)\nusing this:\n  presAtm atm\n\ngoal (1 subgoal):\n 1. \\<forall>s t.\n       s \\<approx> t \\<longrightarrow> aval atm s \\<approx> aval atm t", "by (metis presAtm_def indis_sym indis_trans)"], ["", "definition compatCh where\n\"compatCh ch \\<equiv> \\<forall> s t. s \\<approx> t \\<longrightarrow> cval ch s = cval ch t\""], ["", "lemma compatCh_cval[simp]:\nassumes \"compatCh ch\" and \"s \\<approx> t\"\nshows \" cval ch s = cval ch t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cval ch s = cval ch t", "using assms"], ["proof (prove)\nusing this:\n  compatCh ch\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. cval ch s = cval ch t", "unfolding compatCh_def"], ["proof (prove)\nusing this:\n  \\<forall>s t. s \\<approx> t \\<longrightarrow> cval ch s = cval ch t\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. cval ch s = cval ch t", "by auto"], ["", "subsection\\<open>Compositionality of self-isomorphism\\<close>"], ["", "text\\<open>Self-Isomorphism versus language constructs:\\<close>"], ["", "lemma siso_Done[simp]:\n\"siso Done\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso Done", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso Done", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso Done", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso Done", "assume \"c = Done\""], ["proof (state)\nthis:\n  c = Done\n\ngoal (1 subgoal):\n 1. siso Done", "hence \"siso c\""], ["proof (prove)\nusing this:\n  c = Done\n\ngoal (1 subgoal):\n 1. siso c", "apply induct"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c; c = Done; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c; c = Done\\<rbrakk>\n       \\<Longrightarrow> local.cont c s i = Done \\<or>\n                         siso (local.cont c s i)", "by auto"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso Done", "}"], ["proof (state)\nthis:\n  ?c3 = Done \\<Longrightarrow> siso ?c3\n\ngoal (1 subgoal):\n 1. siso Done", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?c3 = Done \\<Longrightarrow> siso ?c3\n\ngoal (1 subgoal):\n 1. siso Done", "by blast"], ["proof (state)\nthis:\n  siso Done\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_Atm[simp]:\n\"siso (Atm atm) = compatAtm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "assume \"\\<exists> atm. c = Atm atm \\<and> compatAtm atm\""], ["proof (state)\nthis:\n  \\<exists>atm. c = Atm atm \\<and> compatAtm atm\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "hence \"siso c\""], ["proof (prove)\nusing this:\n  \\<exists>atm. c = Atm atm \\<and> compatAtm atm\n\ngoal (1 subgoal):\n 1. siso c", "apply induct"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c; \\<exists>atm. c = Atm atm \\<and> compatAtm atm;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>atm. c = Atm atm \\<and> compatAtm atm\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>atm.\n                             local.cont c s i = Atm atm \\<and>\n                             compatAtm atm) \\<or>\n                         siso (local.cont c s i)", "apply (metis compatAtm_def eff_Atm cont_Atm wt_Atm)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>atm. c = Atm atm \\<and> compatAtm atm\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>atm.\n                             local.cont c s i = Atm atm \\<and>\n                             compatAtm atm) \\<or>\n                         siso (local.cont c s i)", "by (metis cont_Atm siso_Done)"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "}"], ["proof (state)\nthis:\n  \\<exists>atm. ?c3 = Atm atm \\<and> compatAtm atm \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "moreover"], ["proof (state)\nthis:\n  \\<exists>atm. ?c3 = Atm atm \\<and> compatAtm atm \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "have \"siso (Atm atm) \\<Longrightarrow> compatAtm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (Atm atm) \\<Longrightarrow> compatAtm atm", "unfolding compatAtm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (Atm atm) \\<Longrightarrow>\n    \\<forall>s t.\n       s \\<approx> t \\<longrightarrow> aval atm s \\<approx> aval atm t", "by (metis brn.simps eff_Atm less_Suc_eq mult_less_cancel1 nat_mult_1 siso_cont_indis)"], ["proof (state)\nthis:\n  siso (Atm atm) \\<Longrightarrow> compatAtm atm\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>atm. ?c3 = Atm atm \\<and> compatAtm atm \\<Longrightarrow>\n  siso ?c3\n  siso (Atm atm) \\<Longrightarrow> compatAtm atm", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>atm. ?c3 = Atm atm \\<and> compatAtm atm \\<Longrightarrow>\n  siso ?c3\n  siso (Atm atm) \\<Longrightarrow> compatAtm atm\n\ngoal (1 subgoal):\n 1. siso (Atm atm) = compatAtm atm", "by blast"], ["proof (state)\nthis:\n  siso (Atm atm) = compatAtm atm\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_Seq[simp]:\nassumes *: \"siso c1\" and **: \"siso c2\"\nshows \"siso (c1 ;; c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "assume \"\\<exists> c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\""], ["proof (state)\nthis:\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "hence \"siso c\""], ["proof (prove)\nusing this:\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. siso c", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "case (Obs c s t i)"], ["proof (state)\nthis:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t", "obtain c1 c2 where \"i < brn c1\"\n     and \"c = c1 ;; c2\" and \"siso c1 \\<and> siso c2\"\n     and \"s \\<approx> t\""], ["proof (prove)\nusing this:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2.\n        \\<lbrakk>i < brn c1; c = c1 ;; c2; siso c1 \\<and> siso c2;\n         s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < brn c1\n  c = c1 ;; c2\n  siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "thus ?case"], ["proof (prove)\nusing this:\n  i < brn c1\n  c = c1 ;; c2\n  siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "by (cases \"finished (cont c1 s i)\") auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff c t i \\<and>\n  wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "case (Cont c s i)"], ["proof (state)\nthis:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2", "obtain c1 c2 where \"i < brn c1\" and\n     \"c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\""], ["proof (prove)\nusing this:\n  i < brn c\n  \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2.\n        \\<lbrakk>i < brn c1;\n         c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  i < brn c1\n  c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>c1 c2. c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>c1 c2.\n                             local.cont c s i = c1 ;; c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "thus ?case"], ["proof (prove)\nusing this:\n  i < brn c1\n  c = c1 ;; c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. (\\<exists>c1 c2.\n        local.cont c s i = c1 ;; c2 \\<and> siso c1 \\<and> siso c2) \\<or>\n    siso (local.cont c s i)", "by(cases \"finished (cont c1 s i)\", auto)"], ["proof (state)\nthis:\n  (\\<exists>c1 c2.\n      local.cont c s i = c1 ;; c2 \\<and> siso c1 \\<and> siso c2) \\<or>\n  siso (local.cont c s i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "}"], ["proof (state)\nthis:\n  \\<exists>c1 c2.\n     ?c3 = c1 ;; c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>c1 c2.\n     ?c3 = c1 ;; c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "using assms"], ["proof (prove)\nusing this:\n  \\<exists>c1 c2.\n     ?c3 = c1 ;; c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n  siso c1\n  siso c2\n\ngoal (1 subgoal):\n 1. siso (c1 ;; c2)", "by blast"], ["proof (state)\nthis:\n  siso (c1 ;; c2)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_While[simp]:\nassumes \"compatTst tst\" and \"siso c\"\nshows \"siso (While tst c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (While tst c)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (While tst c)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (While tst c)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (While tst c)", "assume\n   \"(\\<exists> tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n    (\\<exists> tst d1 d. compatTst tst \\<and> c = d1 ;; (While tst d) \\<and> siso d1 \\<and> siso d)\""], ["proof (state)\nthis:\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n\ngoal (1 subgoal):\n 1. siso (While tst c)", "hence \"siso c\""], ["proof (prove)\nusing this:\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n\ngoal (1 subgoal):\n 1. siso c", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d);\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "case (Obs c s t i)"], ["proof (state)\nthis:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d);\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "hence i: \" i < brn c\" and st: \"s \\<approx> t\""], ["proof (prove)\nusing this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. i < brn c &&& s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  i < brn c\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d);\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "from Obs"], ["proof (chain)\npicking this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n  s \\<approx> t", "show ?case"], ["proof (prove)\nusing this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "proof(elim disjE exE conjE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst; c = While tst d;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "fix tst d"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst; c = While tst d;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "assume \"compatTst tst\" and \"c = While tst d\" and \"siso d\""], ["proof (state)\nthis:\n  compatTst tst\n  c = While tst d\n  siso d\n\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst; c = While tst d;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "thus ?thesis"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = While tst d\n  siso d\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "using i st"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = While tst d\n  siso d\n  i < brn c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "unfolding compatTst_def"], ["proof (prove)\nusing this:\n  \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t\n  c = While tst d\n  siso d\n  i < brn c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "by (cases \"tval tst s\", simp_all)"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff c t i \\<and>\n  wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i\n\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "fix tst d1 d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "assume \"compatTst tst\" and \"c = d1 ;; While tst d\"\n       and \"siso d1\" and \"siso d\""], ["proof (state)\nthis:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; s \\<approx> t; compatTst tst;\n        c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i", "thus ?thesis"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "using i st"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n  i < brn c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "unfolding compatTst_def"], ["proof (prove)\nusing this:\n  \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n  i < brn c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "apply(cases \"tval tst s\", simp_all)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>i < brn d1; tval tst t;\n     \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t;\n     c = d1 ;; While tst d; siso d1; siso d; s \\<approx> t\\<rbrakk>\n    \\<Longrightarrow> local.cont (d1 ;; While tst d) s i =\n                      local.cont (d1 ;; While tst d) t i\n 2. \\<lbrakk>i < brn d1; \\<not> tval tst t;\n     \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t;\n     c = d1 ;; While tst d; siso d1; siso d; s \\<approx> t\\<rbrakk>\n    \\<Longrightarrow> local.cont (d1 ;; While tst d) s i =\n                      local.cont (d1 ;; While tst d) t i", "by (cases \"finished (cont d1 s i)\", simp_all)+"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff c t i \\<and>\n  wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff c t i \\<and>\n  wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "case (Cont c s i)"], ["proof (state)\nthis:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "hence i: \" i < brn c\""], ["proof (prove)\nusing this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n\ngoal (1 subgoal):\n 1. i < brn c", "by simp"], ["proof (state)\nthis:\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        (\\<exists>tst d.\n            compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n        (\\<exists>tst d1 d.\n            compatTst tst \\<and>\n            c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "from Cont"], ["proof (chain)\npicking this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)", "show ?case"], ["proof (prove)\nusing this:\n  i < brn c\n  (\\<exists>tst d. compatTst tst \\<and> c = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      c = d1 ;; While tst d \\<and> siso d1 \\<and> siso d)\n\ngoal (1 subgoal):\n 1. ((\\<exists>tst d.\n         compatTst tst \\<and>\n         local.cont c s i = While tst d \\<and> siso d) \\<or>\n     (\\<exists>tst d1 d.\n         compatTst tst \\<and>\n         local.cont c s i = d1 ;; While tst d \\<and>\n         siso d1 \\<and> siso d)) \\<or>\n    siso (local.cont c s i)", "proof(elim disjE exE conjE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; compatTst tst; c = While tst d; siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "fix tst d"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; compatTst tst; c = While tst d; siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "assume \"compatTst tst\" and \"c = While tst d\" and \"siso d\""], ["proof (state)\nthis:\n  compatTst tst\n  c = While tst d\n  siso d\n\ngoal (2 subgoals):\n 1. \\<And>tst d.\n       \\<lbrakk>i < brn c; compatTst tst; c = While tst d; siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)\n 2. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "thus ?thesis"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = While tst d\n  siso d\n\ngoal (1 subgoal):\n 1. ((\\<exists>tst d.\n         compatTst tst \\<and>\n         local.cont c s i = While tst d \\<and> siso d) \\<or>\n     (\\<exists>tst d1 d.\n         compatTst tst \\<and>\n         local.cont c s i = d1 ;; While tst d \\<and>\n         siso d1 \\<and> siso d)) \\<or>\n    siso (local.cont c s i)", "by (cases \"tval tst s\", simp_all)"], ["proof (state)\nthis:\n  ((\\<exists>tst d.\n       compatTst tst \\<and>\n       local.cont c s i = While tst d \\<and> siso d) \\<or>\n   (\\<exists>tst d1 d.\n       compatTst tst \\<and>\n       local.cont c s i = d1 ;; While tst d \\<and>\n       siso d1 \\<and> siso d)) \\<or>\n  siso (local.cont c s i)\n\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "fix tst d1 d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "assume \"compatTst tst\" and \"c = d1 ;; While tst d\" and \"siso d1\" and \"siso d\""], ["proof (state)\nthis:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n\ngoal (1 subgoal):\n 1. \\<And>tst d1 d.\n       \\<lbrakk>i < brn c; compatTst tst; c = d1 ;; While tst d; siso d1;\n        siso d\\<rbrakk>\n       \\<Longrightarrow> ((\\<exists>tst d.\n                              compatTst tst \\<and>\n                              local.cont c s i = While tst d \\<and>\n                              siso d) \\<or>\n                          (\\<exists>tst d1 d.\n                              compatTst tst \\<and>\n                              local.cont c s i = d1 ;; While tst d \\<and>\n                              siso d1 \\<and> siso d)) \\<or>\n                         siso (local.cont c s i)", "thus ?thesis"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n\ngoal (1 subgoal):\n 1. ((\\<exists>tst d.\n         compatTst tst \\<and>\n         local.cont c s i = While tst d \\<and> siso d) \\<or>\n     (\\<exists>tst d1 d.\n         compatTst tst \\<and>\n         local.cont c s i = d1 ;; While tst d \\<and>\n         siso d1 \\<and> siso d)) \\<or>\n    siso (local.cont c s i)", "using i"], ["proof (prove)\nusing this:\n  compatTst tst\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n  i < brn c\n\ngoal (1 subgoal):\n 1. ((\\<exists>tst d.\n         compatTst tst \\<and>\n         local.cont c s i = While tst d \\<and> siso d) \\<or>\n     (\\<exists>tst d1 d.\n         compatTst tst \\<and>\n         local.cont c s i = d1 ;; While tst d \\<and>\n         siso d1 \\<and> siso d)) \\<or>\n    siso (local.cont c s i)", "unfolding compatTst_def"], ["proof (prove)\nusing this:\n  \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t\n  c = d1 ;; While tst d\n  siso d1\n  siso d\n  i < brn c\n\ngoal (1 subgoal):\n 1. ((\\<exists>tst d.\n         (\\<forall>s t.\n             s \\<approx> t \\<longrightarrow> tval tst s = tval tst t) \\<and>\n         local.cont c s i = While tst d \\<and> siso d) \\<or>\n     (\\<exists>tst d1 d.\n         (\\<forall>s t.\n             s \\<approx> t \\<longrightarrow> tval tst s = tval tst t) \\<and>\n         local.cont c s i = d1 ;; While tst d \\<and>\n         siso d1 \\<and> siso d)) \\<or>\n    siso (local.cont c s i)", "apply (cases \"tval tst s\", simp_all)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>i < brn d1; tval tst s;\n     \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t;\n     c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>tst.\n                          (\\<forall>s t.\n                              s \\<approx> t \\<longrightarrow>\n                              tval tst s = tval tst t) \\<and>\n                          (\\<exists>da.\n                              local.cont (d1 ;; While tst d) s i =\n                              While tst da \\<and>\n                              siso da)) \\<or>\n                      (\\<exists>tst.\n                          (\\<forall>s t.\n                              s \\<approx> t \\<longrightarrow>\n                              tval tst s = tval tst t) \\<and>\n                          (\\<exists>d1a da.\n                              local.cont (d1 ;; While tst d) s i =\n                              d1a ;; While tst da \\<and>\n                              siso d1a \\<and> siso da)) \\<or>\n                      siso (local.cont (d1 ;; While tst d) s i)\n 2. \\<lbrakk>i < brn d1; \\<not> tval tst s;\n     \\<forall>s t. s \\<approx> t \\<longrightarrow> tval tst s = tval tst t;\n     c = d1 ;; While tst d; siso d1; siso d\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>tst.\n                          (\\<forall>s t.\n                              s \\<approx> t \\<longrightarrow>\n                              tval tst s = tval tst t) \\<and>\n                          (\\<exists>da.\n                              local.cont (d1 ;; While tst d) s i =\n                              While tst da \\<and>\n                              siso da)) \\<or>\n                      (\\<exists>tst.\n                          (\\<forall>s t.\n                              s \\<approx> t \\<longrightarrow>\n                              tval tst s = tval tst t) \\<and>\n                          (\\<exists>d1a da.\n                              local.cont (d1 ;; While tst d) s i =\n                              d1a ;; While tst da \\<and>\n                              siso d1a \\<and> siso da)) \\<or>\n                      siso (local.cont (d1 ;; While tst d) s i)", "by (cases \"finished (cont d1 s i)\", simp_all)+"], ["proof (state)\nthis:\n  ((\\<exists>tst d.\n       compatTst tst \\<and>\n       local.cont c s i = While tst d \\<and> siso d) \\<or>\n   (\\<exists>tst d1 d.\n       compatTst tst \\<and>\n       local.cont c s i = d1 ;; While tst d \\<and>\n       siso d1 \\<and> siso d)) \\<or>\n  siso (local.cont c s i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((\\<exists>tst d.\n       compatTst tst \\<and>\n       local.cont c s i = While tst d \\<and> siso d) \\<or>\n   (\\<exists>tst d1 d.\n       compatTst tst \\<and>\n       local.cont c s i = d1 ;; While tst d \\<and>\n       siso d1 \\<and> siso d)) \\<or>\n  siso (local.cont c s i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (While tst c)", "}"], ["proof (state)\nthis:\n  (\\<exists>tst d.\n      compatTst tst \\<and> ?ca3 = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      ?ca3 = d1 ;; While tst d \\<and>\n      siso d1 \\<and> siso d) \\<Longrightarrow>\n  siso ?ca3\n\ngoal (1 subgoal):\n 1. siso (While tst c)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>tst d.\n      compatTst tst \\<and> ?ca3 = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      ?ca3 = d1 ;; While tst d \\<and>\n      siso d1 \\<and> siso d) \\<Longrightarrow>\n  siso ?ca3\n\ngoal (1 subgoal):\n 1. siso (While tst c)", "using assms"], ["proof (prove)\nusing this:\n  (\\<exists>tst d.\n      compatTst tst \\<and> ?ca3 = While tst d \\<and> siso d) \\<or>\n  (\\<exists>tst d1 d.\n      compatTst tst \\<and>\n      ?ca3 = d1 ;; While tst d \\<and>\n      siso d1 \\<and> siso d) \\<Longrightarrow>\n  siso ?ca3\n  compatTst tst\n  siso c\n\ngoal (1 subgoal):\n 1. siso (While tst c)", "by blast"], ["proof (state)\nthis:\n  siso (While tst c)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_Ch[simp]:\nassumes \"compatCh ch\"\nand *: \"siso c1\" and **: \"siso c2\"\nshows \"siso (Ch ch c1 c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "assume \"\\<exists> ch c1 c2. compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\""], ["proof (state)\nthis:\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "hence \"siso c\""], ["proof (prove)\nusing this:\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. siso c", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "case (Obs c s t i)"], ["proof (state)\nthis:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t", "obtain ch c1 c2 where \"i < 2\"\n     and \"compatCh ch\" and \"c = Ch ch c1 c2\" and \"siso c1 \\<and> siso c2\"\n     and \"s \\<approx> t\""], ["proof (prove)\nusing this:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>ch c1 c2.\n        \\<lbrakk>i < 2; compatCh ch; c = Ch ch c1 c2;\n         siso c1 \\<and> siso c2; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  i < 2\n  compatCh ch\n  c = Ch ch c1 c2\n  siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "thus ?case"], ["proof (prove)\nusing this:\n  i < 2\n  compatCh ch\n  c = Ch ch c1 c2\n  siso c1 \\<and> siso c2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff c t i \\<and>\n    wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i", "by (cases i) auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff c t i \\<and>\n  wt c s i = wt c t i \\<and> local.cont c s i = local.cont c t i\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "case (Cont c s i)"], ["proof (state)\nthis:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2", "obtain ch c1 c2 where \"i < 2\" and\n     \"compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\""], ["proof (prove)\nusing this:\n  i < brn c\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. (\\<And>ch c1 c2.\n        \\<lbrakk>i < 2;\n         compatCh ch \\<and>\n         c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  i < 2\n  compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>ch c1 c2.\n           compatCh ch \\<and>\n           c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>ch c1 c2.\n                             compatCh ch \\<and>\n                             local.cont c s i = Ch ch c1 c2 \\<and>\n                             siso c1 \\<and> siso c2) \\<or>\n                         siso (local.cont c s i)", "thus ?case"], ["proof (prove)\nusing this:\n  i < 2\n  compatCh ch \\<and> c = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2\n\ngoal (1 subgoal):\n 1. (\\<exists>ch c1 c2.\n        compatCh ch \\<and>\n        local.cont c s i = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2) \\<or>\n    siso (local.cont c s i)", "by (cases i) auto"], ["proof (state)\nthis:\n  (\\<exists>ch c1 c2.\n      compatCh ch \\<and>\n      local.cont c s i = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2) \\<or>\n  siso (local.cont c s i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "}"], ["proof (state)\nthis:\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and>\n     ?c3 = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and>\n     ?c3 = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "using assms"], ["proof (prove)\nusing this:\n  \\<exists>ch c1 c2.\n     compatCh ch \\<and>\n     ?c3 = Ch ch c1 c2 \\<and> siso c1 \\<and> siso c2 \\<Longrightarrow>\n  siso ?c3\n  compatCh ch\n  siso c1\n  siso c2\n\ngoal (1 subgoal):\n 1. siso (Ch ch c1 c2)", "by blast"], ["proof (state)\nthis:\n  siso (Ch ch c1 c2)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_Par[simp]:\nassumes \"properL cl\" and \"sisoL cl\"\nshows \"siso (Par cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (Par cl)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Par cl)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Par cl)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (Par cl)", "assume \"\\<exists> cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\""], ["proof (state)\nthis:\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. siso (Par cl)", "hence \"siso c\""], ["proof (prove)\nusing this:\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. siso c", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "case (Obs c s t ii)"], ["proof (state)\nthis:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t", "obtain cl where ii: \"ii < brnL cl (length cl)\"\n     and cl: \"properL cl\"\n     and c: \"c = Par cl\" and siso: \"sisoL cl\"\n     and st: \"s \\<approx> t\""], ["proof (prove)\nusing this:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl.\n        \\<lbrakk>ii < brnL cl (length cl); properL cl; c = Par cl; sisoL cl;\n         s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ii < brnL cl (length cl)\n  properL cl\n  c = Par cl\n  sisoL cl\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "let ?N = \"length cl\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "from cl ii"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)", "show ?case"], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "apply(cases rule: brnL_cases)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> eff c s ii \\<approx> eff c t ii \\<and>\n                         wt c s ii = wt c t ii \\<and>\n                         local.cont c s ii = local.cont c t ii", "using siso st cl"], ["proof (prove)\nusing this:\n  sisoL cl\n  s \\<approx> t\n  properL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> eff c s ii \\<approx> eff c t ii \\<and>\n                         wt c s ii = wt c t ii \\<and>\n                         local.cont c s ii = local.cont c t ii", "unfolding c"], ["proof (prove)\nusing this:\n  sisoL cl\n  s \\<approx> t\n  properL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par cl) t ii \\<and>\n                         wt (Par cl) s ii = wt (Par cl) t ii \\<and>\n                         local.cont (Par cl) s ii = local.cont (Par cl) t ii", "by fastforce"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "case (Cont c s ii)"], ["proof (state)\nthis:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl", "obtain cl where ii: \"ii < brnL cl (length cl)\"\n     and cl: \"properL cl\"\n     and c: \"c = Par cl\" and sisoL: \"sisoL cl\""], ["proof (prove)\nusing this:\n  ii < brn c\n  \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. (\\<And>cl.\n        \\<lbrakk>ii < brnL cl (length cl); properL cl; c = Par cl;\n         sisoL cl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ii < brnL cl (length cl)\n  properL cl\n  c = Par cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = Par cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "from cl ii"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)", "show ?case"], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. (\\<exists>cl.\n        local.cont c s ii = Par cl \\<and> properL cl \\<and> sisoL cl) \\<or>\n    siso (local.cont c s ii)", "apply (cases rule: brnL_cases)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s ii = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s ii)", "using cl sisoL"], ["proof (prove)\nusing this:\n  properL cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s ii = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s ii)", "unfolding c"], ["proof (prove)\nusing this:\n  properL cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont (Par cl) s ii = Par cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont (Par cl) s ii)", "by auto"], ["proof (state)\nthis:\n  (\\<exists>cl.\n      local.cont c s ii = Par cl \\<and> properL cl \\<and> sisoL cl) \\<or>\n  siso (local.cont c s ii)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (Par cl)", "}"], ["proof (state)\nthis:\n  \\<exists>cl.\n     ?c3 = Par cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Par cl)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>cl.\n     ?c3 = Par cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (Par cl)", "using assms"], ["proof (prove)\nusing this:\n  \\<exists>cl.\n     ?c3 = Par cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n  properL cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. siso (Par cl)", "by blast"], ["proof (state)\nthis:\n  siso (Par cl)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma siso_ParT[simp]:\nassumes \"properL cl\" and \"sisoL cl\"\nshows \"siso (ParT cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso (ParT cl)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (ParT cl)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. siso (ParT cl)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. siso (ParT cl)", "assume \"\\<exists> cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\""], ["proof (state)\nthis:\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. siso (ParT cl)", "hence \"siso c\""], ["proof (prove)\nusing this:\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. siso c", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "case (Obs c s t ii)"], ["proof (state)\nthis:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t", "obtain cl where ii: \"ii < brnL cl (length cl)\"\n     and cl: \"properL cl\"\n     and c: \"c = ParT cl\" and siso: \"sisoL cl\"\n     and st: \"s \\<approx> t\""], ["proof (prove)\nusing this:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl.\n        \\<lbrakk>ii < brnL cl (length cl); properL cl; c = ParT cl;\n         sisoL cl; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ii < brnL cl (length cl)\n  properL cl\n  c = ParT cl\n  sisoL cl\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "let ?N = \"length cl\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c s t i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff c t i \\<and>\n                         wt c s i = wt c t i \\<and>\n                         local.cont c s i = local.cont c t i\n 2. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "from cl ii"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)", "show ?case"], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "proof (cases rule: brnL_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> eff c s ii \\<approx> eff c t ii \\<and>\n                         wt c s ii = wt c t ii \\<and>\n                         local.cont c s ii = local.cont c t ii", "case (Local n i)"], ["proof (state)\nthis:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> eff c s ii \\<approx> eff c t ii \\<and>\n                         wt c s ii = wt c t ii \\<and>\n                         local.cont c s ii = local.cont c t ii", "show ?thesis (is \"?eff \\<and> ?wt \\<and> ?mv\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "have eff_mv: \"?eff \\<and> ?mv\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    local.cont c s ii = local.cont c t ii", "using Local siso cl st"], ["proof (prove)\nusing this:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  sisoL cl\n  properL cl\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    local.cont c s ii = local.cont c t ii", "unfolding c"], ["proof (prove)\nusing this:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  sisoL cl\n  properL cl\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT cl) t ii \\<and>\n    local.cont (ParT cl) s ii = local.cont (ParT cl) t ii", "by force"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  local.cont c s ii = local.cont c t ii\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "have wt: ?wt"], ["proof (prove)\ngoal (1 subgoal):\n 1. wt c s ii = wt c t ii", "proof(cases \"WtFT cl = 1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. WtFT cl = 1 \\<Longrightarrow> wt c s ii = wt c t ii\n 2. WtFT cl \\<noteq> 1 \\<Longrightarrow> wt c s ii = wt c t ii", "case True"], ["proof (state)\nthis:\n  WtFT cl = 1\n\ngoal (2 subgoals):\n 1. WtFT cl = 1 \\<Longrightarrow> wt c s ii = wt c t ii\n 2. WtFT cl \\<noteq> 1 \\<Longrightarrow> wt c s ii = wt c t ii", "thus ?thesis"], ["proof (prove)\nusing this:\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. wt c s ii = wt c t ii", "unfolding c"], ["proof (prove)\nusing this:\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. wt (ParT cl) s ii = wt (ParT cl) t ii", "using Local cl st siso True"], ["proof (prove)\nusing this:\n  WtFT cl = 1\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  properL cl\n  s \\<approx> t\n  sisoL cl\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. wt (ParT cl) s ii = wt (ParT cl) t ii", "by (cases \"n = pickFT cl \\<and> i = 0\") auto"], ["proof (state)\nthis:\n  wt c s ii = wt c t ii\n\ngoal (1 subgoal):\n 1. WtFT cl \\<noteq> 1 \\<Longrightarrow> wt c s ii = wt c t ii", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. WtFT cl \\<noteq> 1 \\<Longrightarrow> wt c s ii = wt c t ii", "case False"], ["proof (state)\nthis:\n  WtFT cl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. WtFT cl \\<noteq> 1 \\<Longrightarrow> wt c s ii = wt c t ii", "thus ?thesis"], ["proof (prove)\nusing this:\n  WtFT cl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. wt c s ii = wt c t ii", "unfolding c"], ["proof (prove)\nusing this:\n  WtFT cl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. wt (ParT cl) s ii = wt (ParT cl) t ii", "using Local cl st siso False"], ["proof (prove)\nusing this:\n  WtFT cl \\<noteq> 1\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  properL cl\n  s \\<approx> t\n  sisoL cl\n  WtFT cl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. wt (ParT cl) s ii = wt (ParT cl) t ii", "by (cases \"finished (cl!n)\") auto"], ["proof (state)\nthis:\n  wt c s ii = wt c t ii\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wt c s ii = wt c t ii\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "from eff_mv wt"], ["proof (chain)\npicking this:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  local.cont c s ii = local.cont c t ii\n  wt c s ii = wt c t ii", "show ?thesis"], ["proof (prove)\nusing this:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  local.cont c s ii = local.cont c t ii\n  wt c s ii = wt c t ii\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff c t ii \\<and>\n    wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii", "by simp"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff c t ii \\<and>\n  wt c s ii = wt c t ii \\<and> local.cont c s ii = local.cont c t ii\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "case (Cont c s ii)"], ["proof (state)\nthis:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "then"], ["proof (chain)\npicking this:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl", "obtain cl where ii: \"ii < brnL cl (length cl)\"\n     and cl: \"properL cl\"\n     and c: \"c = ParT cl\" and siso: \"sisoL cl\""], ["proof (prove)\nusing this:\n  ii < brn c\n  \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\n\ngoal (1 subgoal):\n 1. (\\<And>cl.\n        \\<lbrakk>ii < brnL cl (length cl); properL cl; c = ParT cl;\n         sisoL cl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ii < brnL cl (length cl)\n  properL cl\n  c = ParT cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>i < brn c;\n        \\<exists>cl. c = ParT cl \\<and> properL cl \\<and> sisoL cl\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s i = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s i)", "from cl ii"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)", "show ?case"], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. (\\<exists>cl.\n        local.cont c s ii = ParT cl \\<and> properL cl \\<and> sisoL cl) \\<or>\n    siso (local.cont c s ii)", "apply (cases rule: brnL_cases)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s ii = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s ii)", "using siso cl"], ["proof (prove)\nusing this:\n  sisoL cl\n  properL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont c s ii = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont c s ii)", "unfolding c"], ["proof (prove)\nusing this:\n  sisoL cl\n  properL cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>cl.\n                             local.cont (ParT cl) s ii = ParT cl \\<and>\n                             properL cl \\<and> sisoL cl) \\<or>\n                         siso (local.cont (ParT cl) s ii)", "by force"], ["proof (state)\nthis:\n  (\\<exists>cl.\n      local.cont c s ii = ParT cl \\<and> properL cl \\<and> sisoL cl) \\<or>\n  siso (local.cont c s ii)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  siso c\n\ngoal (1 subgoal):\n 1. siso (ParT cl)", "}"], ["proof (state)\nthis:\n  \\<exists>cl.\n     ?c3 = ParT cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (ParT cl)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>cl.\n     ?c3 = ParT cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n\ngoal (1 subgoal):\n 1. siso (ParT cl)", "using assms"], ["proof (prove)\nusing this:\n  \\<exists>cl.\n     ?c3 = ParT cl \\<and> properL cl \\<and> sisoL cl \\<Longrightarrow>\n  siso ?c3\n  properL cl\n  sisoL cl\n\ngoal (1 subgoal):\n 1. siso (ParT cl)", "by blast"], ["proof (state)\nthis:\n  siso (ParT cl)\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Self-isomorphism implies strong bisimilarity:\\<close>"], ["", "lemma bij_betw_emp[simp]:\n\"bij_betw f {} {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw f {} {}", "unfolding bij_betw_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on f {} \\<and> f ` {} = {}", "by auto"], ["", "lemma part_full[simp]:\n\"part I {I}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part I {I}", "unfolding part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {I} = I \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> {I} \\<and>\n        J2 \\<in> {I} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "by auto"], ["", "definition singlPart where\n\"singlPart I \\<equiv> {{i} | i . i \\<in> I}\""], ["", "lemma part_singlPart[simp]:\n\"part I (singlPart I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part I (singlPart I)", "unfolding part_def singlPart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {{i} |i. i \\<in> I} = I \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> {{i} |i. i \\<in> I} \\<and>\n        J2 \\<in> {{i} |i. i \\<in> I} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "by auto"], ["", "lemma singlPart_inj_on[simp]:\n\"inj_on (image f) (singlPart I) = inj_on f I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on ((`) f) (singlPart I) = inj_on f I", "unfolding inj_on_def singlPart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x\\<in>{{i} |i. i \\<in> I}.\n        \\<forall>y\\<in>{{i} |i. i \\<in> I}.\n           f ` x = f ` y \\<longrightarrow> x = y) =\n    (\\<forall>x\\<in>I. \\<forall>y\\<in>I. f x = f y \\<longrightarrow> x = y)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x.\n                   (\\<exists>i. x = {i} \\<and> i \\<in> I) \\<longrightarrow>\n                   (\\<forall>y.\n                       (\\<exists>i.\n                           y = {i} \\<and> i \\<in> I) \\<longrightarrow>\n                       f ` x = f ` y \\<longrightarrow> x = y);\n        x \\<in> I; y \\<in> I; f x = f y\\<rbrakk>\n       \\<Longrightarrow> x = y", "by (metis image_insert insertI1 insert_absorb insert_code singleton_inject)"], ["", "lemma singlPart_surj[simp]:\n\"(image f) ` (singlPart I) = (singlPart J) \\<longleftrightarrow> f ` I = J\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((`) f ` singlPart I = singlPart J) = (f ` I = J)", "unfolding inj_on_def singlPart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((`) f ` {{i} |i. i \\<in> I} = {{i} |i. i \\<in> J}) = (f ` I = J)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>(`) f ` {{i} |i. i \\<in> I} = {{i} |i. i \\<in> J};\n        x \\<in> J\\<rbrakk>\n       \\<Longrightarrow> x \\<in> f ` I", "by blast"], ["", "lemma singlPart_bij_betw[simp]:\n\"bij_betw (image f) (singlPart I) (singlPart J) = bij_betw f I J\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw ((`) f) (singlPart I) (singlPart J) = bij_betw f I J", "unfolding bij_betw_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (inj_on ((`) f) (singlPart I) \\<and>\n     (`) f ` singlPart I = singlPart J) =\n    (inj_on f I \\<and> f ` I = J)", "by auto"], ["", "lemma singlPart_finite1:\nassumes \"finite (singlPart I)\"\nshows \"finite (I::'a set)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite I", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. finite I", "define u where \"u i = {i}\" for i :: 'a"], ["proof (state)\nthis:\n  u ?i = {?i}\n\ngoal (1 subgoal):\n 1. finite I", "have \"u ` I \\<subseteq> singlPart I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u ` I \\<subseteq> singlPart I", "unfolding u_def singlPart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. {i}) ` I \\<subseteq> {{i} |i. i \\<in> I}", "by auto"], ["proof (state)\nthis:\n  u ` I \\<subseteq> singlPart I\n\ngoal (1 subgoal):\n 1. finite I", "moreover"], ["proof (state)\nthis:\n  u ` I \\<subseteq> singlPart I\n\ngoal (1 subgoal):\n 1. finite I", "have \"inj_on u I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on u I", "unfolding u_def inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>I. \\<forall>y\\<in>I. {x} = {y} \\<longrightarrow> x = y", "by auto"], ["proof (state)\nthis:\n  inj_on u I\n\ngoal (1 subgoal):\n 1. finite I", "ultimately"], ["proof (chain)\npicking this:\n  u ` I \\<subseteq> singlPart I\n  inj_on u I", "show ?thesis"], ["proof (prove)\nusing this:\n  u ` I \\<subseteq> singlPart I\n  inj_on u I\n\ngoal (1 subgoal):\n 1. finite I", "using assms"], ["proof (prove)\nusing this:\n  u ` I \\<subseteq> singlPart I\n  inj_on u I\n  finite (singlPart I)\n\ngoal (1 subgoal):\n 1. finite I", "by (metis \\<open>inj_on u I\\<close> finite_imageD infinite_super)"], ["proof (state)\nthis:\n  finite I\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma singlPart_finite[simp]:\n\"finite (singlPart I) = finite I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (singlPart I) = finite I", "using singlPart_finite1[of I]"], ["proof (prove)\nusing this:\n  finite (singlPart I) \\<Longrightarrow> finite I\n\ngoal (1 subgoal):\n 1. finite (singlPart I) = finite I", "unfolding singlPart_def"], ["proof (prove)\nusing this:\n  finite {{i} |i. i \\<in> I} \\<Longrightarrow> finite I\n\ngoal (1 subgoal):\n 1. finite {{i} |i. i \\<in> I} = finite I", "by auto"], ["", "lemma emp_notIn_singlPart[simp]:\n\"{} \\<notin> singlPart I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> singlPart I", "unfolding singlPart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> {{i} |i. i \\<in> I}", "by auto"], ["", "lemma Sbis_coinduct[consumes 1, case_names step, coinduct set]:\n  \"R c d \\<Longrightarrow>\n    (\\<And>c d s t. R c d \\<Longrightarrow> s \\<approx> t \\<Longrightarrow>\n      \\<exists>P F. mC_C_part c d P F \\<and> inj_on F P \\<and> mC_C_wt c d s t P F \\<and>\n        (\\<forall>I\\<in>P. \\<forall>i\\<in>I. \\<forall>j\\<in>F I. \n                eff c s i \\<approx> eff d t j \\<and> (R (cont c s i) (cont d t j) \\<or> (cont c s i, cont d t j) \\<in> Sbis)))\n  \\<Longrightarrow> (c, d) \\<in> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R c d;\n     \\<And>c d s t.\n        \\<lbrakk>R c d; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P F.\n                             mC_C_part c d P F \\<and>\n                             inj_on F P \\<and>\n                             mC_C_wt c d s t P F \\<and>\n                             (\\<forall>I\\<in>P.\n                                 \\<forall>i\\<in>I.\n                                    \\<forall>j\\<in>F I.\n eff c s i \\<approx> eff d t j \\<and>\n (R (local.cont c s i) (local.cont d t j) \\<or>\n  local.cont c s i \\<approx>s local.cont d t j))\\<rbrakk>\n    \\<Longrightarrow> c \\<approx>s d", "using Sbis_coind[of \"{(x, y). R x y}\"]"], ["proof (prove)\nusing this:\n  {(x, y). R x y}\n  \\<subseteq> Sretr ({(x, y). R x y} \\<union> Sbis) \\<Longrightarrow>\n  {(x, y). R x y} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>R c d;\n     \\<And>c d s t.\n        \\<lbrakk>R c d; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P F.\n                             mC_C_part c d P F \\<and>\n                             inj_on F P \\<and>\n                             mC_C_wt c d s t P F \\<and>\n                             (\\<forall>I\\<in>P.\n                                 \\<forall>i\\<in>I.\n                                    \\<forall>j\\<in>F I.\n eff c s i \\<approx> eff d t j \\<and>\n (R (local.cont c s i) (local.cont d t j) \\<or>\n  local.cont c s i \\<approx>s local.cont d t j))\\<rbrakk>\n    \\<Longrightarrow> c \\<approx>s d", "unfolding Sretr_def matchC_C_def mC_C_def mC_C_eff_cont_def"], ["proof (prove)\nusing this:\n  {(x, y). R x y}\n  \\<subseteq> {(c, d).\n               \\<forall>s t.\n                  s \\<approx> t \\<longrightarrow>\n                  (\\<exists>P F.\n                      mC_C_part c d P F \\<and>\n                      inj_on F P \\<and>\n                      mC_C_wt c d s t P F \\<and>\n                      (\\<forall>I i j.\n                          I \\<in> P \\<and>\n                          i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n                          eff c s i \\<approx> eff d t j \\<and>\n                          (local.cont c s i, local.cont d t j)\n                          \\<in> {(x, y). R x y} \\<union>\n                                Sbis))} \\<Longrightarrow>\n  {(x, y). R x y} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>R c d;\n     \\<And>c d s t.\n        \\<lbrakk>R c d; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P F.\n                             mC_C_part c d P F \\<and>\n                             inj_on F P \\<and>\n                             mC_C_wt c d s t P F \\<and>\n                             (\\<forall>I\\<in>P.\n                                 \\<forall>i\\<in>I.\n                                    \\<forall>j\\<in>F I.\n eff c s i \\<approx> eff d t j \\<and>\n (R (local.cont c s i) (local.cont d t j) \\<or>\n  local.cont c s i \\<approx>s local.cont d t j))\\<rbrakk>\n    \\<Longrightarrow> c \\<approx>s d", "apply (simp add: subset_eq Ball_def )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R c d;\n     \\<And>c d s t.\n        \\<lbrakk>R c d; s \\<approx> t\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P F.\n                             mC_C_part c d P F \\<and>\n                             inj_on F P \\<and>\n                             mC_C_wt c d s t P F \\<and>\n                             (\\<forall>x.\n                                 x \\<in> P \\<longrightarrow>\n                                 (\\<forall>xa.\n                                     xa \\<in> x \\<longrightarrow>\n                                     (\\<forall>xb.\n   xb \\<in> F x \\<longrightarrow>\n   eff c s xa \\<approx> eff d t xb \\<and>\n   (R (local.cont c s xa) (local.cont d t xb) \\<or>\n    local.cont c s xa \\<approx>s local.cont d t xb))));\n     \\<forall>a b.\n        R a b \\<longrightarrow>\n        (\\<forall>s t.\n            s \\<approx> t \\<longrightarrow>\n            (\\<exists>P F.\n                mC_C_part a b P F \\<and>\n                inj_on F P \\<and>\n                mC_C_wt a b s t P F \\<and>\n                (\\<forall>I i j.\n                    I \\<in> P \\<and>\n                    i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n                    eff a s i \\<approx> eff b t j \\<and>\n                    (R (local.cont a s i) (local.cont b t j) \\<or>\n                     local.cont a s i \\<approx>s\n                     local.cont b t j)))) \\<Longrightarrow>\n     \\<forall>a b. R a b \\<longrightarrow> a \\<approx>s b\\<rbrakk>\n    \\<Longrightarrow> c \\<approx>s d", "apply metis"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma siso_Sbis[simp]: \"siso c \\<Longrightarrow> c \\<approx>s c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. siso c \\<Longrightarrow> c \\<approx>s c", "proof (coinduction arbitrary: c)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s t ca.\n       \\<lbrakk>siso ca; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P F.\n                            mC_C_part ca ca P F \\<and>\n                            inj_on F P \\<and>\n                            mC_C_wt ca ca s t P F \\<and>\n                            (\\<forall>I\\<in>P.\n                                \\<forall>i\\<in>I.\n                                   \\<forall>j\\<in>F I.\neff ca s i \\<approx> eff ca t j \\<and>\n((\\<exists>c.\n     local.cont ca s i = c \\<and> local.cont ca t j = c \\<and> siso c) \\<or>\n local.cont ca s i \\<approx>s local.cont ca t j))", "case (step s t c)"], ["proof (state)\nthis:\n  siso c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>s t ca.\n       \\<lbrakk>siso ca; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P F.\n                            mC_C_part ca ca P F \\<and>\n                            inj_on F P \\<and>\n                            mC_C_wt ca ca s t P F \\<and>\n                            (\\<forall>I\\<in>P.\n                                \\<forall>i\\<in>I.\n                                   \\<forall>j\\<in>F I.\neff ca s i \\<approx> eff ca t j \\<and>\n((\\<exists>c.\n     local.cont ca s i = c \\<and> local.cont ca t j = c \\<and> siso c) \\<or>\n local.cont ca s i \\<approx>s local.cont ca t j))", "with siso_cont_indis[of c s t] part_singlPart[of \"{..<brn c}\"]"], ["proof (chain)\npicking this:\n  \\<lbrakk>siso c; s \\<approx> t; ?i < brn c\\<rbrakk>\n  \\<Longrightarrow> eff c s ?i \\<approx> eff c t ?i \\<and>\n                    wt c s ?i = wt c t ?i \\<and>\n                    local.cont c s ?i = local.cont c t ?i\n  part {..<brn c} (singlPart {..<brn c})\n  siso c\n  s \\<approx> t", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>siso c; s \\<approx> t; ?i < brn c\\<rbrakk>\n  \\<Longrightarrow> eff c s ?i \\<approx> eff c t ?i \\<and>\n                    wt c s ?i = wt c t ?i \\<and>\n                    local.cont c s ?i = local.cont c t ?i\n  part {..<brn c} (singlPart {..<brn c})\n  siso c\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<exists>P F.\n       mC_C_part c c P F \\<and>\n       inj_on F P \\<and>\n       mC_C_wt c c s t P F \\<and>\n       (\\<forall>I\\<in>P.\n           \\<forall>i\\<in>I.\n              \\<forall>j\\<in>F I.\n                 eff c s i \\<approx> eff c t j \\<and>\n                 ((\\<exists>c.\n                      local.cont c s i = c \\<and>\n                      local.cont c t j = c \\<and> siso c) \\<or>\n                  local.cont c s i \\<approx>s local.cont c t j))", "by (intro exI[of _ \"singlPart {..< brn c}\"] exI[of _ id])\n       (auto simp add: mC_C_part_def mC_C_wt_def singlPart_def)"], ["proof (state)\nthis:\n  \\<exists>P F.\n     mC_C_part c c P F \\<and>\n     inj_on F P \\<and>\n     mC_C_wt c c s t P F \\<and>\n     (\\<forall>I\\<in>P.\n         \\<forall>i\\<in>I.\n            \\<forall>j\\<in>F I.\n               eff c s i \\<approx> eff c t j \\<and>\n               ((\\<exists>c.\n                    local.cont c s i = c \\<and>\n                    local.cont c t j = c \\<and> siso c) \\<or>\n                local.cont c s i \\<approx>s local.cont c t j))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Discreetness versus language constructs:\\<close>"], ["", "lemma discr_Done[simp]: \"discr Done\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr Done", "by coinduction auto"], ["", "lemma discr_Atm_presAtm[simp]: \"discr (Atm atm) = presAtm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "have \"presAtm atm \\<Longrightarrow> discr (Atm atm)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. presAtm atm \\<Longrightarrow> discr (Atm atm)", "by (coinduction arbitrary: atm) (auto simp: presAtm_def)"], ["proof (state)\nthis:\n  presAtm atm \\<Longrightarrow> discr (Atm atm)\n\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "moreover"], ["proof (state)\nthis:\n  presAtm atm \\<Longrightarrow> discr (Atm atm)\n\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "have \"discr (Atm atm) \\<Longrightarrow> presAtm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (Atm atm) \\<Longrightarrow> presAtm atm", "unfolding presAtm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (Atm atm) \\<Longrightarrow> \\<forall>s. s \\<approx> aval atm s", "by (metis One_nat_def brn.simps(2) discr.simps eff_Atm lessI)"], ["proof (state)\nthis:\n  discr (Atm atm) \\<Longrightarrow> presAtm atm\n\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "ultimately"], ["proof (chain)\npicking this:\n  presAtm atm \\<Longrightarrow> discr (Atm atm)\n  discr (Atm atm) \\<Longrightarrow> presAtm atm", "show ?thesis"], ["proof (prove)\nusing this:\n  presAtm atm \\<Longrightarrow> discr (Atm atm)\n  discr (Atm atm) \\<Longrightarrow> presAtm atm\n\ngoal (1 subgoal):\n 1. discr (Atm atm) = presAtm atm", "by blast"], ["proof (state)\nthis:\n  discr (Atm atm) = presAtm atm\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma discr_Seq[simp]:\n  \"discr c1 \\<Longrightarrow> discr c2 \\<Longrightarrow> discr (c1 ;; c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>discr c1; discr c2\\<rbrakk> \\<Longrightarrow> discr (c1 ;; c2)", "by (coinduction arbitrary: c1 c2)\n     (simp, metis cont_Seq_finished discr_cont cont_Seq_notFinished)"], ["", "lemma discr_While[simp]: assumes \"discr c\" shows \"discr (While tst c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (While tst c)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. discr (While tst c)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. discr (While tst c)", "fix c :: \"('test, 'atom, 'choice) cmd\""], ["proof (state)\ngoal (1 subgoal):\n 1. discr (While tst c)", "assume\n   \"(\\<exists> tst d. c = While tst d \\<and> discr d) \\<or>\n    (\\<exists> tst d1 d. c = d1 ;; (While tst d) \\<and> discr d1 \\<and> discr d)\""], ["proof (state)\nthis:\n  (\\<exists>tst d. c = While tst d \\<and> discr d) \\<or>\n  (\\<exists>tst d1 d. c = d1 ;; While tst d \\<and> discr d1 \\<and> discr d)\n\ngoal (1 subgoal):\n 1. discr (While tst c)", "hence \"discr c\""], ["proof (prove)\nusing this:\n  (\\<exists>tst d. c = While tst d \\<and> discr d) \\<or>\n  (\\<exists>tst d1 d. c = d1 ;; While tst d \\<and> discr d1 \\<and> discr d)\n\ngoal (1 subgoal):\n 1. discr c", "apply induct"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>c s i.\n       \\<lbrakk>(\\<exists>tst d. c = While tst d \\<and> discr d) \\<or>\n                (\\<exists>tst d1 d.\n                    c = d1 ;; While tst d \\<and> discr d1 \\<and> discr d);\n        i < brn c\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff c s i \\<and>\n                         (((\\<exists>tst d.\n                               local.cont c s i = While tst d \\<and>\n                               discr d) \\<or>\n                           (\\<exists>tst d1 d.\n                               local.cont c s i = d1 ;; While tst d \\<and>\n                               discr d1 \\<and> discr d)) \\<or>\n                          discr (local.cont c s i))", "apply safe"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>c s i tst d.\n       \\<lbrakk>i < brn (While tst d); discr d\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (While tst d) s i\n 2. \\<And>c s i tst d.\n       \\<lbrakk>i < brn (While tst d); discr d;\n        \\<not> discr (local.cont (While tst d) s i);\n        \\<nexists>tsta d1 da.\n           local.cont (While tst d) s i = d1 ;; While tsta da \\<and>\n           discr d1 \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (While tst d) s i =\n                            While tsta da \\<and>\n                            discr da\n 3. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (d1 ;; While tst d) s i\n 4. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d;\n        \\<not> discr (local.cont (d1 ;; While tst d) s i);\n        \\<nexists>tsta d1a da.\n           local.cont (d1 ;; While tst d) s i = d1a ;; While tsta da \\<and>\n           discr d1a \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (d1 ;; While tst d) s i =\n                            While tsta da \\<and>\n                            discr da", "apply (metis eff_While indis_refl)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>c s i tst d.\n       \\<lbrakk>i < brn (While tst d); discr d;\n        \\<not> discr (local.cont (While tst d) s i);\n        \\<nexists>tsta d1 da.\n           local.cont (While tst d) s i = d1 ;; While tsta da \\<and>\n           discr d1 \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (While tst d) s i =\n                            While tsta da \\<and>\n                            discr da\n 2. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (d1 ;; While tst d) s i\n 3. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d;\n        \\<not> discr (local.cont (d1 ;; While tst d) s i);\n        \\<nexists>tsta d1a da.\n           local.cont (d1 ;; While tst d) s i = d1a ;; While tsta da \\<and>\n           discr d1a \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (d1 ;; While tst d) s i =\n                            While tsta da \\<and>\n                            discr da", "apply (metis cont_While_False discr_Done cont_While_True)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (d1 ;; While tst d) s i\n 2. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d;\n        \\<not> discr (local.cont (d1 ;; While tst d) s i);\n        \\<nexists>tsta d1a da.\n           local.cont (d1 ;; While tst d) s i = d1a ;; While tsta da \\<and>\n           discr d1a \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (d1 ;; While tst d) s i =\n                            While tsta da \\<and>\n                            discr da", "apply (metis eff_Seq discr.simps brn.simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>c s i tst d1 d.\n       \\<lbrakk>i < brn (d1 ;; While tst d); discr d1; discr d;\n        \\<not> discr (local.cont (d1 ;; While tst d) s i);\n        \\<nexists>tsta d1a da.\n           local.cont (d1 ;; While tst d) s i = d1a ;; While tsta da \\<and>\n           discr d1a \\<and> discr da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>tsta da.\n                            local.cont (d1 ;; While tst d) s i =\n                            While tsta da \\<and>\n                            discr da", "by (metis cont_Seq_finished discr.simps cont_Seq_notFinished brn.simps)"], ["proof (state)\nthis:\n  discr c\n\ngoal (1 subgoal):\n 1. discr (While tst c)", "}"], ["proof (state)\nthis:\n  (\\<exists>tst d. ?ca3 = While tst d \\<and> discr d) \\<or>\n  (\\<exists>tst d1 d.\n      ?ca3 = d1 ;; While tst d \\<and>\n      discr d1 \\<and> discr d) \\<Longrightarrow>\n  discr ?ca3\n\ngoal (1 subgoal):\n 1. discr (While tst c)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>tst d. ?ca3 = While tst d \\<and> discr d) \\<or>\n  (\\<exists>tst d1 d.\n      ?ca3 = d1 ;; While tst d \\<and>\n      discr d1 \\<and> discr d) \\<Longrightarrow>\n  discr ?ca3\n\ngoal (1 subgoal):\n 1. discr (While tst c)", "using assms"], ["proof (prove)\nusing this:\n  (\\<exists>tst d. ?ca3 = While tst d \\<and> discr d) \\<or>\n  (\\<exists>tst d1 d.\n      ?ca3 = d1 ;; While tst d \\<and>\n      discr d1 \\<and> discr d) \\<Longrightarrow>\n  discr ?ca3\n  discr c\n\ngoal (1 subgoal):\n 1. discr (While tst c)", "by blast"], ["proof (state)\nthis:\n  discr (While tst c)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma discr_Ch[simp]: \"discr c1 \\<Longrightarrow> discr c2 \\<Longrightarrow> discr (Ch ch c1 c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>discr c1; discr c2\\<rbrakk>\n    \\<Longrightarrow> discr (Ch ch c1 c2)", "by coinduction (simp, metis indis_refl less_2_cases cont_Ch_L cont_Ch_R)"], ["", "lemma discr_Par[simp]: \"properL cl \\<Longrightarrow> discrL cl \\<Longrightarrow> discr (Par cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>properL cl; discrL cl\\<rbrakk> \\<Longrightarrow> discr (Par cl)", "proof (coinduction arbitrary: cl, clarsimp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (Par cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (Par cl) x xa = Par cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (Par cl) x xa))", "fix cl ii s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (Par cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (Par cl) x xa = Par cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (Par cl) x xa))", "assume *: \"properL cl\" \"ii < brnL cl (length cl)\" and \"discrL cl\""], ["proof (state)\nthis:\n  properL cl\n  ii < brnL cl (length cl)\n  discrL cl\n\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (Par cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (Par cl) x xa = Par cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (Par cl) x xa))", "from *"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)", "show \"s \\<approx> eff (Par cl) s ii \\<and>\n    ((\\<exists>cl'. cont (Par cl) s ii = Par cl' \\<and> properL cl' \\<and> discrL cl') \\<or> discr (cont (Par cl) s ii))\""], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (Par cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (Par cl) s ii = Par cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (Par cl) s ii))", "proof (cases rule: brnL_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (Par cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (Par cl) s ii = Par cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (Par cl) s ii))", "case (Local n i)"], ["proof (state)\nthis:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (Par cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (Par cl) s ii = Par cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (Par cl) s ii))", "with \\<open>discrL cl\\<close>"], ["proof (chain)\npicking this:\n  discrL cl\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i", "have \"s \\<approx> eff (cl ! n) s i\""], ["proof (prove)\nusing this:\n  discrL cl\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n < length cl; i < brn (cl ! n); ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (Par cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (Par cl) s ii = Par cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (Par cl) s ii))", "thus ?thesis"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (Par cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (Par cl) s ii = Par cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (Par cl) s ii))", "using Local \\<open>discrL cl\\<close> \\<open>properL cl\\<close>"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  discrL cl\n  properL cl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (Par cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (Par cl) s ii = Par cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (Par cl) s ii))", "by auto"], ["proof (state)\nthis:\n  s \\<approx> eff (Par cl) s ii \\<and>\n  ((\\<exists>cl'.\n       local.cont (Par cl) s ii = Par cl' \\<and>\n       properL cl' \\<and> discrL cl') \\<or>\n   discr (local.cont (Par cl) s ii))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<approx> eff (Par cl) s ii \\<and>\n  ((\\<exists>cl'.\n       local.cont (Par cl) s ii = Par cl' \\<and>\n       properL cl' \\<and> discrL cl') \\<or>\n   discr (local.cont (Par cl) s ii))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma discr_ParT[simp]: \"properL cl \\<Longrightarrow> discrL cl \\<Longrightarrow> discr (ParT cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>properL cl; discrL cl\\<rbrakk>\n    \\<Longrightarrow> discr (ParT cl)", "proof (coinduction arbitrary: cl, clarsimp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (ParT cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (ParT cl) x xa = ParT cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (ParT cl) x xa))", "fix p cl s ii"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (ParT cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (ParT cl) x xa = ParT cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (ParT cl) x xa))", "assume \"properL cl\" \"ii < brnL cl (length cl)\" \"discrL cl\""], ["proof (state)\nthis:\n  properL cl\n  ii < brnL cl (length cl)\n  discrL cl\n\ngoal (1 subgoal):\n 1. \\<And>cl x xa.\n       \\<lbrakk>properL cl; discrL cl; xa < brnL cl (length cl)\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff (ParT cl) x xa \\<and>\n                         ((\\<exists>cla.\n                              local.cont (ParT cl) x xa = ParT cla \\<and>\n                              properL cla \\<and> discrL cla) \\<or>\n                          discr (local.cont (ParT cl) x xa))", "then"], ["proof (chain)\npicking this:\n  properL cl\n  ii < brnL cl (length cl)\n  discrL cl", "show \"s \\<approx> eff (ParT cl) s ii \\<and>\n    ((\\<exists>cl'. cont (ParT cl) s ii = ParT cl' \\<and> properL cl' \\<and> discrL cl') \\<or> discr (cont (ParT cl) s ii))\""], ["proof (prove)\nusing this:\n  properL cl\n  ii < brnL cl (length cl)\n  discrL cl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (ParT cl) s ii = ParT cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (ParT cl) s ii))", "proof (cases rule: brnL_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>discrL cl; n < length cl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (ParT cl) s ii = ParT cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (ParT cl) s ii))", "case (Local n i)"], ["proof (state)\nthis:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>discrL cl; n < length cl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (ParT cl) s ii = ParT cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (ParT cl) s ii))", "have \"s \\<approx> eff (cl ! n) s i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i", "using Local \\<open>discrL cl\\<close>"], ["proof (prove)\nusing this:\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  discrL cl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>discrL cl; n < length cl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         ((\\<exists>cl'.\n                              local.cont (ParT cl) s ii = ParT cl' \\<and>\n                              properL cl' \\<and> discrL cl') \\<or>\n                          discr (local.cont (ParT cl) s ii))", "thus ?thesis"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (ParT cl) s ii = ParT cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (ParT cl) s ii))", "using Local \\<open>discrL cl\\<close> \\<open>properL cl\\<close>"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n  n < length cl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n  discrL cl\n  properL cl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    ((\\<exists>cl'.\n         local.cont (ParT cl) s ii = ParT cl' \\<and>\n         properL cl' \\<and> discrL cl') \\<or>\n     discr (local.cont (ParT cl) s ii))", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff (ParT cl) s ii \\<and>\n  ((\\<exists>cl'.\n       local.cont (ParT cl) s ii = ParT cl' \\<and>\n       properL cl' \\<and> discrL cl') \\<or>\n   discr (local.cont (ParT cl) s ii))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<approx> eff (ParT cl) s ii \\<and>\n  ((\\<exists>cl'.\n       local.cont (ParT cl) s ii = ParT cl' \\<and>\n       properL cl' \\<and> discrL cl') \\<or>\n   discr (local.cont (ParT cl) s ii))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma discr_finished[simp]: \"proper c \\<Longrightarrow> finished c \\<Longrightarrow> discr c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>proper c; finished c\\<rbrakk> \\<Longrightarrow> discr c", "by (induct c rule: proper_induct) (auto simp: discrL_intro)"], ["", "subsection\\<open>Strong bisimilarity versus language constructs\\<close>"], ["", "lemma Sbis_pres_discr_L:\n  \"c \\<approx>s d \\<Longrightarrow> discr d \\<Longrightarrow> discr c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>c \\<approx>s d; discr d\\<rbrakk> \\<Longrightarrow> discr c", "proof (coinduction arbitrary: d c, clarsimp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "fix c d s i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "assume d: \"c \\<approx>s d\" \"discr d\" and i: \"i < brn c\""], ["proof (state)\nthis:\n  c \\<approx>s d\n  discr d\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "then"], ["proof (chain)\npicking this:\n  c \\<approx>s d\n  discr d\n  i < brn c", "obtain P F where\n    match: \"mC_C Sbis c d s s P F\""], ["proof (prove)\nusing this:\n  c \\<approx>s d\n  discr d\n  i < brn c\n\ngoal (1 subgoal):\n 1. (\\<And>P F.\n        mC_C Sbis c d s s P F \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Sbis_mC_C[of c d s s]"], ["proof (prove)\nusing this:\n  c \\<approx>s d\n  discr d\n  i < brn c\n  \\<lbrakk>c \\<approx>s d; s \\<approx> s\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P F. mC_C Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. (\\<And>P F.\n        mC_C Sbis c d s s P F \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mC_C Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "hence \"\\<Union>P = {..<brn c}\""], ["proof (prove)\nusing this:\n  mC_C Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "using i"], ["proof (prove)\nusing this:\n  mC_C Sbis c d s s P F\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "unfolding mC_C_def mC_C_part_def part_def"], ["proof (prove)\nusing this:\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   (\\<Union> P = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c d s s P F \\<and> mC_C_eff_cont Sbis c d s s P F\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "by simp"], ["proof (state)\nthis:\n  \\<Union> P = {..<brn c}\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "then"], ["proof (chain)\npicking this:\n  \\<Union> P = {..<brn c}", "obtain I where I: \"I \\<in> P\" and i: \"i \\<in> I\""], ["proof (prove)\nusing this:\n  \\<Union> P = {..<brn c}\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P; i \\<in> I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using i"], ["proof (prove)\nusing this:\n  \\<Union> P = {..<brn c}\n  i < brn c\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P; i \\<in> I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I \\<in> P\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "obtain j where j: \"j \\<in> F I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using match I"], ["proof (prove)\nusing this:\n  mC_C Sbis c d s s P F\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding mC_C_def mC_C_part_def"], ["proof (prove)\nusing this:\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c} P \\<and> part {..<brn d} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c d s s P F \\<and> mC_C_eff_cont Sbis c d s s P F\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "hence \"j < brn d\""], ["proof (prove)\nusing this:\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. j < brn d", "using I match"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P\n  mC_C Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. j < brn d", "unfolding mC_C_def mC_C_part_def part_def"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   (\\<Union> P = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c d s s P F \\<and> mC_C_eff_cont Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. j < brn d", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>j \\<in> F I; I \\<in> P;\n     {} \\<notin> P \\<and>\n     {} \\<notin> F ` P \\<and>\n     \\<Union> P = {..<brn c} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> P \\<and>\n         J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {}) \\<and>\n     \\<Union> (F ` P) = {..<brn d} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> F ` P \\<and>\n         J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {}) \\<and>\n     inj_on F P \\<and>\n     mC_C_wt c d s s P F \\<and> mC_C_eff_cont Sbis c d s s P F\\<rbrakk>\n    \\<Longrightarrow> j < brn d", "by blast"], ["proof (state)\nthis:\n  j < brn d\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "hence md: \"discr (cont d s j)\" and s: \"s \\<approx> eff d s j\""], ["proof (prove)\nusing this:\n  j < brn d\n\ngoal (1 subgoal):\n 1. discr (local.cont d s j) &&& s \\<approx> eff d s j", "using d discr_cont[of d j s] discr_eff_indis[of d j s]"], ["proof (prove)\nusing this:\n  j < brn d\n  c \\<approx>s d\n  discr d\n  \\<lbrakk>discr d; j < brn d\\<rbrakk>\n  \\<Longrightarrow> discr (local.cont d s j)\n  \\<lbrakk>discr d; j < brn d\\<rbrakk>\n  \\<Longrightarrow> s \\<approx> eff d s j\n\ngoal (1 subgoal):\n 1. discr (local.cont d s j) &&& s \\<approx> eff d s j", "by auto"], ["proof (state)\nthis:\n  discr (local.cont d s j)\n  s \\<approx> eff d s j\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "have \"eff c s i \\<approx> eff d s j\" and md2: \"cont c s i \\<approx>s cont d s j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>s local.cont d s j", "using I i j match"], ["proof (prove)\nusing this:\n  I \\<in> P\n  i \\<in> I\n  j \\<in> F I\n  mC_C Sbis c d s s P F\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>s local.cont d s j", "unfolding mC_C_def mC_C_eff_cont_def"], ["proof (prove)\nusing this:\n  I \\<in> P\n  i \\<in> I\n  j \\<in> F I\n  mC_C_part c d P F \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c d s s P F \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c s i \\<approx> eff d s j \\<and>\n      local.cont c s i \\<approx>s local.cont d s j)\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>s local.cont d s j", "by auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>s local.cont d s j\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "hence \"s \\<approx> eff c s i\""], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>s local.cont d s j\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "using s indis_sym indis_trans"], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>s local.cont d s j\n  s \\<approx> eff d s j\n  ?s \\<approx> ?s' \\<Longrightarrow> ?s' \\<approx> ?s\n  \\<lbrakk>?s \\<approx> ?s'; ?s' \\<approx> ?s''\\<rbrakk>\n  \\<Longrightarrow> ?s \\<approx> ?s''\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>s d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>s d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "thus \"s \\<approx> eff c s i \\<and> ((\\<exists>d. cont c s i \\<approx>s d \\<and> discr d) \\<or> discr (cont c s i))\""], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>s d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "using md md2"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n  discr (local.cont d s j)\n  local.cont c s i \\<approx>s local.cont d s j\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>s d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i \\<and>\n  ((\\<exists>d. local.cont c s i \\<approx>s d \\<and> discr d) \\<or>\n   discr (local.cont c s i))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Sbis_pres_discr_R:\nassumes \"discr c\" and \"c \\<approx>s d\"\nshows \"discr d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr d", "using assms Sbis_pres_discr_L Sbis_sym"], ["proof (prove)\nusing this:\n  discr c\n  c \\<approx>s d\n  \\<lbrakk>?c \\<approx>s ?d; discr ?d\\<rbrakk> \\<Longrightarrow> discr ?c\n  ?c \\<approx>s ?d \\<Longrightarrow> ?d \\<approx>s ?c\n\ngoal (1 subgoal):\n 1. discr d", "by blast"], ["", "lemma Sbis_finished_discr_L:\nassumes \"c \\<approx>s d\" and \"proper d\" and \"finished d\"\nshows \"discr c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr c", "using assms Sbis_pres_discr_L"], ["proof (prove)\nusing this:\n  c \\<approx>s d\n  proper d\n  finished d\n  \\<lbrakk>?c \\<approx>s ?d; discr ?d\\<rbrakk> \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr c", "by auto"], ["", "lemma Sbis_finished_discr_R:\nassumes \"proper c\" and \"finished c\" and \"c \\<approx>s d\"\nshows \"discr d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr d", "using assms Sbis_pres_discr_R[of c d]"], ["proof (prove)\nusing this:\n  proper c\n  finished c\n  c \\<approx>s d\n  \\<lbrakk>discr c; c \\<approx>s d\\<rbrakk> \\<Longrightarrow> discr d\n\ngoal (1 subgoal):\n 1. discr d", "by auto"], ["", "(*  *)"], ["", "definition thetaSD where\n\"thetaSD \\<equiv> {(c, d) | c d . proper c \\<and> proper d \\<and> discr c \\<and> discr d}\""], ["", "lemma thetaSD_Sretr:\n\"thetaSD \\<subseteq> Sretr thetaSD\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSD \\<subseteq> Sretr thetaSD", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSD\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F. mC_C thetaSD c d s t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "assume c_d: \"(c, d) \\<in> thetaSD\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaSD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "hence p: \"proper c \\<and> proper d\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaSD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. proper c \\<and> proper d", "unfolding thetaSD_def"], ["proof (prove)\nusing this:\n  (c, d)\n  \\<in> {(c, d) |c d.\n         proper c \\<and> proper d \\<and> discr c \\<and> discr d}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. proper c \\<and> proper d", "by auto"], ["proof (state)\nthis:\n  proper c \\<and> proper d\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "let ?P = \"{{..<brn c}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "let ?F = \"% I. {..< brn d}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "have 0: \"{..<brn c} \\<noteq> {}\"  \"{..<brn d} \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<brn c} \\<noteq> {} &&& {..<brn d} \\<noteq> {}", "using p int_emp brn_gt_0"], ["proof (prove)\nusing this:\n  proper c \\<and> proper d\n  (0::?'a) < ?i \\<Longrightarrow> {..<?i} \\<noteq> {}\n  proper ?c \\<Longrightarrow> 0 < brn ?c\n\ngoal (1 subgoal):\n 1. {..<brn c} \\<noteq> {} &&& {..<brn d} \\<noteq> {}", "by blast+"], ["proof (state)\nthis:\n  {..<brn c} \\<noteq> {}\n  {..<brn d} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSD a b s t P)", "show \"\\<exists>P F. mC_C thetaSD c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C thetaSD c d s t P F", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C thetaSD c d s t P F", "apply(rule exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F. mC_C thetaSD c d s t {{..<brn c}} F", "apply(rule exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "unfolding mC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d {{..<brn c}} (\\<lambda>I. {..<brn d}) \\<and>\n    inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}} \\<and>\n    mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d}) \\<and>\n    mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "proof(intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. mC_C_part c d {{..<brn c}} (\\<lambda>I. {..<brn d})\n 2. inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}}\n 3. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n 4. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "show \"mC_C_part c d ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d {{..<brn c}} (\\<lambda>I. {..<brn d})", "unfolding mC_C_part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> {{..<brn c}} \\<and>\n    {} \\<notin> (\\<lambda>I. {..<brn d}) ` {{..<brn c}} \\<and>\n    part {..<brn c} {{..<brn c}} \\<and>\n    part {..<brn d} ((\\<lambda>I. {..<brn d}) ` {{..<brn c}})", "using 0"], ["proof (prove)\nusing this:\n  {..<brn c} \\<noteq> {}\n  {..<brn d} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. {} \\<notin> {{..<brn c}} \\<and>\n    {} \\<notin> (\\<lambda>I. {..<brn d}) ` {{..<brn c}} \\<and>\n    part {..<brn c} {{..<brn c}} \\<and>\n    part {..<brn d} ((\\<lambda>I. {..<brn d}) ` {{..<brn c}})", "unfolding part_def"], ["proof (prove)\nusing this:\n  {..<brn c} \\<noteq> {}\n  {..<brn d} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. {} \\<notin> {{..<brn c}} \\<and>\n    {} \\<notin> (\\<lambda>I. {..<brn d}) ` {{..<brn c}} \\<and>\n    (\\<Union> {{..<brn c}} = {..<brn c} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> {{..<brn c}} \\<and>\n         J2 \\<in> {{..<brn c}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    (\\<Union>I\\<in>{{..<brn c}}. {..<brn d}) = {..<brn d} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> (\\<lambda>I. {..<brn d}) ` {{..<brn c}} \\<and>\n        J2 \\<in> (\\<lambda>I. {..<brn d}) ` {{..<brn c}} \\<and>\n        J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "by auto"], ["proof (state)\nthis:\n  mC_C_part c d {{..<brn c}} (\\<lambda>I. {..<brn d})\n\ngoal (3 subgoals):\n 1. inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}}\n 2. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n 3. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}}\n 2. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n 3. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "show \"inj_on ?F ?P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}}", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{{..<brn c}}.\n       \\<forall>y\\<in>{{..<brn c}}.\n          {..<brn d} = {..<brn d} \\<longrightarrow> x = y", "by simp"], ["proof (state)\nthis:\n  inj_on (\\<lambda>I. {..<brn d}) {{..<brn c}}\n\ngoal (2 subgoals):\n 1. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n 2. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n 2. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "show \"mC_C_wt c d s t ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "unfolding mC_C_wt_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I\\<in>{{..<brn c}}. sum (wt c s) I = sum (wt d t) {..<brn d}", "using p"], ["proof (prove)\nusing this:\n  proper c \\<and> proper d\n\ngoal (1 subgoal):\n 1. \\<forall>I\\<in>{{..<brn c}}. sum (wt c s) I = sum (wt d t) {..<brn d}", "by auto"], ["proof (state)\nthis:\n  mC_C_wt c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "show \"mC_C_eff_cont thetaSD c d s t ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})", "unfolding mC_C_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> {{..<brn c}} \\<and>\n       i \\<in> I \\<and> j \\<in> {..<brn d} \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaSD", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "fix I i j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "assume i: \"i < brn c\" and j: \"j < brn d\""], ["proof (state)\nthis:\n  i < brn c\n  j < brn d\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "hence \"s \\<approx> eff c s i\""], ["proof (prove)\nusing this:\n  i < brn c\n  j < brn d\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "using c_d"], ["proof (prove)\nusing this:\n  i < brn c\n  j < brn d\n  (c, d) \\<in> thetaSD\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "unfolding thetaSD_def"], ["proof (prove)\nusing this:\n  i < brn c\n  j < brn d\n  (c, d)\n  \\<in> {(c, d) |c d.\n         proper c \\<and> proper d \\<and> discr c \\<and> discr d}\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff c s i\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "moreover"], ["proof (state)\nthis:\n  s \\<approx> eff c s i\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "have \"t \\<approx> eff d t j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<approx> eff d t j", "using i j c_d"], ["proof (prove)\nusing this:\n  i < brn c\n  j < brn d\n  (c, d) \\<in> thetaSD\n\ngoal (1 subgoal):\n 1. t \\<approx> eff d t j", "unfolding thetaSD_def"], ["proof (prove)\nusing this:\n  i < brn c\n  j < brn d\n  (c, d)\n  \\<in> {(c, d) |c d.\n         proper c \\<and> proper d \\<and> discr c \\<and> discr d}\n\ngoal (1 subgoal):\n 1. t \\<approx> eff d t j", "by simp"], ["proof (state)\nthis:\n  t \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "ultimately"], ["proof (chain)\npicking this:\n  s \\<approx> eff c s i\n  t \\<approx> eff d t j", "have \"eff c s i \\<approx> eff d t j\""], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n  t \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "using st indis_sym indis_trans"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n  t \\<approx> eff d t j\n  s \\<approx> t\n  ?s \\<approx> ?s' \\<Longrightarrow> ?s' \\<approx> ?s\n  \\<lbrakk>?s \\<approx> ?s'; ?s' \\<approx> ?s''\\<rbrakk>\n  \\<Longrightarrow> ?s \\<approx> ?s''\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "by blast"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>i < brn c; j < brn d\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j) \\<in> thetaSD", "thus \"eff c s i \\<approx> eff d t j \\<and> (cont c s i, cont d t j) \\<in> thetaSD\""], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSD", "using c_d i j"], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d t j\n  (c, d) \\<in> thetaSD\n  i < brn c\n  j < brn d\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSD", "unfolding thetaSD_def"], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d t j\n  (c, d)\n  \\<in> {(c, d) |c d.\n         proper c \\<and> proper d \\<and> discr c \\<and> discr d}\n  i < brn c\n  j < brn d\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j)\n    \\<in> {(c, d) |c d.\n           proper c \\<and> proper d \\<and> discr c \\<and> discr d}", "by auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaSD\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_eff_cont thetaSD c d s t {{..<brn c}} (\\<lambda>I. {..<brn d})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C thetaSD c d s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSD_Sbis:\n\"thetaSD \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSD \\<subseteq> Sbis", "using Sbis_raw_coind thetaSD_Sretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr ?theta \\<Longrightarrow> ?theta \\<subseteq> Sbis\n  thetaSD \\<subseteq> Sretr thetaSD\n\ngoal (1 subgoal):\n 1. thetaSD \\<subseteq> Sbis", "by blast"], ["", "theorem discr_Sbis[simp]:\nassumes \"proper c\" and \"proper d\" and \"discr c\" and \"discr d\"\nshows \"c \\<approx>s d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<approx>s d", "using assms thetaSD_Sbis"], ["proof (prove)\nusing this:\n  proper c\n  proper d\n  discr c\n  discr d\n  thetaSD \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. c \\<approx>s d", "unfolding thetaSD_def"], ["proof (prove)\nusing this:\n  proper c\n  proper d\n  discr c\n  discr d\n  {(c, d) |c d. proper c \\<and> proper d \\<and> discr c \\<and> discr d}\n  \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. c \\<approx>s d", "by auto"], ["", "(* Done: *)"], ["", "definition thetaSDone where\n\"thetaSDone \\<equiv> {(Done, Done)}\""], ["", "lemma thetaSDone_Sretr:\n\"thetaSDone \\<subseteq> Sretr thetaSDone\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSDone \\<subseteq> Sretr thetaSDone", "unfolding Sretr_def matchC_C_def thetaSDone_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(Done, Done)}\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F. mC_C {(Done, Done)} c d s t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P. Ex (mC_C {(Done, Done)} Done Done s t P)", "fix s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P. Ex (mC_C {(Done, Done)} Done Done s t P)", "assume st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P. Ex (mC_C {(Done, Done)} Done Done s t P)", "let ?P = \"{{0}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P. Ex (mC_C {(Done, Done)} Done Done s t P)", "let ?F = id"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P. Ex (mC_C {(Done, Done)} Done Done s t P)", "show \"\\<exists>P F. mC_C {(Done, Done)} Done Done s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C {(Done, Done)} Done Done s t P F", "apply(intro exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F. mC_C {(Done, Done)} Done Done s t {{0}} F", "apply(intro exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C {(Done, Done)} Done Done s t {{0}} id", "unfolding m_defsAll part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn Done} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn Done} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt Done s) I = sum (wt Done t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff Done s i \\<approx> eff Done t j \\<and>\n        (local.cont Done s i, local.cont Done t j) \\<in> {(Done, Done)})", "using st"], ["proof (prove)\nusing this:\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn Done} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn Done} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt Done s) I = sum (wt Done t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff Done s i \\<approx> eff Done t j \\<and>\n        (local.cont Done s i, local.cont Done t j) \\<in> {(Done, Done)})", "by auto"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C {(Done, Done)} Done Done s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSDone_Sbis:\n\"thetaSDone \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSDone \\<subseteq> Sbis", "using Sbis_raw_coind thetaSDone_Sretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr ?theta \\<Longrightarrow> ?theta \\<subseteq> Sbis\n  thetaSDone \\<subseteq> Sretr thetaSDone\n\ngoal (1 subgoal):\n 1. thetaSDone \\<subseteq> Sbis", "by blast"], ["", "theorem Done_Sbis[simp]:\n\"Done \\<approx>s Done\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Done \\<approx>s Done", "using thetaSDone_Sbis"], ["proof (prove)\nusing this:\n  thetaSDone \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Done \\<approx>s Done", "unfolding thetaSDone_def"], ["proof (prove)\nusing this:\n  {(Done, Done)} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Done \\<approx>s Done", "by auto"], ["", "(* Atm: *)"], ["", "definition thetaSAtm where\n\"thetaSAtm atm \\<equiv>\n {(Atm atm, Atm atm), (Done, Done)}\""], ["", "lemma thetaSAtm_Sretr:\nassumes \"compatAtm atm\"\nshows \"thetaSAtm atm \\<subseteq> Sretr (thetaSAtm atm)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSAtm atm \\<subseteq> Sretr (thetaSAtm atm)", "unfolding Sretr_def matchC_C_def thetaSAtm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(Atm atm, Atm atm), (Done, Done)}\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F.\n                        mC_C {(Atm atm, Atm atm), (Done, Done)} c d s t P\n                         F)}", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)\n 2. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P)", "fix s t"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)\n 2. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P)", "assume st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  s \\<approx> t\n\ngoal (2 subgoals):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)\n 2. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P)", "let ?P = \"{{0}}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)\n 2. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P)", "let ?F = id"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)\n 2. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P)", "show \"\\<exists>P F. mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P F", "apply(intro exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t {{0}} F", "apply(intro exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t {{0}} id", "unfolding m_defsAll part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn Done} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn Done} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt Done s) I = sum (wt Done t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff Done s i \\<approx> eff Done t j \\<and>\n        (local.cont Done s i, local.cont Done t j)\n        \\<in> {(Atm atm, Atm atm), (Done, Done)})", "using st"], ["proof (prove)\nusing this:\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn Done} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn Done} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt Done s) I = sum (wt Done t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff Done s i \\<approx> eff Done t j \\<and>\n        (local.cont Done s i, local.cont Done t j)\n        \\<in> {(Atm atm, Atm atm), (Done, Done)})", "by auto"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C {(Atm atm, Atm atm), (Done, Done)} Done Done s t P F\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "fix s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "assume st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "let ?P = \"{{0}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "let ?F = id"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       s \\<approx> t \\<Longrightarrow>\n       \\<exists>P.\n          Ex (mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s\n               t P)", "show \"\\<exists>P F. mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F.\n       mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s t P F", "apply(intro exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s t {{0}}\n        F", "apply(intro exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s t {{0}} id", "unfolding m_defsAll part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn (Atm atm)} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn (Atm atm)} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt (Atm atm) s) I = sum (wt (Atm atm) t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff (Atm atm) s i \\<approx> eff (Atm atm) t j \\<and>\n        (local.cont (Atm atm) s i, local.cont (Atm atm) t j)\n        \\<in> {(Atm atm, Atm atm), (Done, Done)})", "using st assms"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  compatAtm atm\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn (Atm atm)} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn (Atm atm)} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt (Atm atm) s) I = sum (wt (Atm atm) t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff (Atm atm) s i \\<approx> eff (Atm atm) t j \\<and>\n        (local.cont (Atm atm) s i, local.cont (Atm atm) t j)\n        \\<in> {(Atm atm, Atm atm), (Done, Done)})", "unfolding compatAtm_def"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  \\<forall>s t.\n     s \\<approx> t \\<longrightarrow> aval atm s \\<approx> aval atm t\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}} \\<and>\n     {} \\<notin> id ` {{0}} \\<and>\n     (\\<Union> {{0}} = {..<brn (Atm atm)} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}} \\<and>\n          J2 \\<in> {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     \\<Union> (id ` {{0}}) = {..<brn (Atm atm)} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> id ` {{0}} \\<and>\n         J2 \\<in> id ` {{0}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on id {{0}} \\<and>\n    (\\<forall>I\\<in>{{0}}.\n        sum (wt (Atm atm) s) I = sum (wt (Atm atm) t) (id I)) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}} \\<and> i \\<in> I \\<and> j \\<in> id I \\<longrightarrow>\n        eff (Atm atm) s i \\<approx> eff (Atm atm) t j \\<and>\n        (local.cont (Atm atm) s i, local.cont (Atm atm) t j)\n        \\<in> {(Atm atm, Atm atm), (Done, Done)})", "by auto"], ["proof (state)\nthis:\n  \\<exists>P F.\n     mC_C {(Atm atm, Atm atm), (Done, Done)} (Atm atm) (Atm atm) s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSAtm_Sbis:\nassumes \"compatAtm atm\"\nshows \"thetaSAtm atm \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSAtm atm \\<subseteq> Sbis", "using assms Sbis_raw_coind thetaSAtm_Sretr"], ["proof (prove)\nusing this:\n  compatAtm atm\n  ?theta \\<subseteq> Sretr ?theta \\<Longrightarrow> ?theta \\<subseteq> Sbis\n  compatAtm ?atm \\<Longrightarrow>\n  thetaSAtm ?atm \\<subseteq> Sretr (thetaSAtm ?atm)\n\ngoal (1 subgoal):\n 1. thetaSAtm atm \\<subseteq> Sbis", "by blast"], ["", "theorem Atm_Sbis[simp]:\nassumes \"compatAtm atm\"\nshows \"Atm atm \\<approx>s Atm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Atm atm \\<approx>s Atm atm", "using assms thetaSAtm_Sbis"], ["proof (prove)\nusing this:\n  compatAtm atm\n  compatAtm ?atm \\<Longrightarrow> thetaSAtm ?atm \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Atm atm \\<approx>s Atm atm", "unfolding thetaSAtm_def"], ["proof (prove)\nusing this:\n  compatAtm atm\n  compatAtm ?atm \\<Longrightarrow>\n  {(Atm ?atm, Atm ?atm), (Done, Done)} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Atm atm \\<approx>s Atm atm", "by auto"], ["", "(* Seq *)"], ["", "definition thetaSSeqI where\n\"thetaSSeqI \\<equiv>\n {(e ;; c, e ;; d) | e c d . siso e \\<and> c \\<approx>s d}\""], ["", "lemma thetaSSeqI_Sretr:\n\"thetaSSeqI \\<subseteq> Sretr (thetaSSeqI Un Sbis)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqI \\<subseteq> Sretr (thetaSSeqI \\<union> Sbis)", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqI\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F.\n                        mC_C (thetaSSeqI \\<union> Sbis) c d s t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "assume c_d: \"(c, d) \\<in> thetaSSeqI\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaSSeqI\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaSSeqI\n  s \\<approx> t", "obtain e c1 d1 where e: \"siso e\" and c1d1: \"c1 \\<approx>s d1\"\n  and c: \"c = e ;; c1\" and d: \"d = e ;; d1\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaSSeqI\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>e c1 d1.\n        \\<lbrakk>siso e; c1 \\<approx>s d1; c = e ;; c1; d = e ;; d1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaSSeqI_def"], ["proof (prove)\nusing this:\n  (c, d) \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>s d}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>e c1 d1.\n        \\<lbrakk>siso e; c1 \\<approx>s d1; c = e ;; c1; d = e ;; d1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  siso e\n  c1 \\<approx>s d1\n  c = e ;; c1\n  d = e ;; d1\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "let ?P = \"{{i} | i . i < brn e}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "let ?F = \"%I. I\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqI \\<union> Sbis) a b s t P)", "show \"\\<exists>P F. mC_C (thetaSSeqI Un Sbis) c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C (thetaSSeqI \\<union> Sbis) c d s t P F", "apply(rule exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_C (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e} F", "apply(rule exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "unfolding mC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d {{i} |i. i < brn e} (\\<lambda>I. I) \\<and>\n    inj_on (\\<lambda>I. I) {{i} |i. i < brn e} \\<and>\n    mC_C_wt c d s t {{i} |i. i < brn e} (\\<lambda>I. I) \\<and>\n    mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. mC_C_part c d {{i} |i. i < brn e} (\\<lambda>I. I)\n 2. inj_on (\\<lambda>I. I) {{i} |i. i < brn e}\n 3. mC_C_wt c d s t {{i} |i. i < brn e} (\\<lambda>I. I)\n 4. mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "show \"mC_C_part c d ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d {{i} |i. i < brn e} (\\<lambda>I. I)", "unfolding mC_C_part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> {{i} |i. i < brn e} \\<and>\n    {} \\<notin> (\\<lambda>I. I) ` {{i} |i. i < brn e} \\<and>\n    part {..<brn c} {{i} |i. i < brn e} \\<and>\n    part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. {} \\<notin> {{i} |i. i < brn e}\n 2. {} \\<notin> (\\<lambda>I. I) ` {{i} |i. i < brn e}\n 3. part {..<brn c} {{i} |i. i < brn e}\n 4. part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "show \"part {..<brn c} ?P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn c} {{i} |i. i < brn e}", "unfolding part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {{i} |i. i < brn e} = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> {{i} |i. i < brn e} \\<and>\n        J2 \\<in> {{i} |i. i < brn e} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow> x \\<in> \\<Union> {{i} |i. i < brn e}", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow> x \\<in> \\<Union> {{i} |i. i < brn e}", "assume \"i < brn c\""], ["proof (state)\nthis:\n  i < brn c\n\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow> x \\<in> \\<Union> {{i} |i. i < brn e}", "thus \"i \\<in> \\<Union> ?P\""], ["proof (prove)\nusing this:\n  i < brn c\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> {{i} |i. i < brn e}", "using c e st siso_cont_indis[of e s t]"], ["proof (prove)\nusing this:\n  i < brn c\n  c = e ;; c1\n  siso e\n  s \\<approx> t\n  \\<lbrakk>siso e; s \\<approx> t; ?i < brn e\\<rbrakk>\n  \\<Longrightarrow> eff e s ?i \\<approx> eff e t ?i \\<and>\n                    wt e s ?i = wt e t ?i \\<and>\n                    local.cont e s ?i = local.cont e t ?i\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> {{i} |i. i < brn e}", "by auto"], ["proof (state)\nthis:\n  i \\<in> \\<Union> {{i} |i. i < brn e}\n\ngoal (1 subgoal):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c", "qed (unfold c, simp)"], ["proof (state)\nthis:\n  part {..<brn c} {{i} |i. i < brn e}\n\ngoal (3 subgoals):\n 1. {} \\<notin> {{i} |i. i < brn e}\n 2. {} \\<notin> (\\<lambda>I. I) ` {{i} |i. i < brn e}\n 3. part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "(*  *)"], ["proof (state)\nthis:\n  part {..<brn c} {{i} |i. i < brn e}\n\ngoal (3 subgoals):\n 1. {} \\<notin> {{i} |i. i < brn e}\n 2. {} \\<notin> (\\<lambda>I. I) ` {{i} |i. i < brn e}\n 3. part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "thus \"part {..<brn d} (?F ` ?P)\""], ["proof (prove)\nusing this:\n  part {..<brn c} {{i} |i. i < brn e}\n\ngoal (1 subgoal):\n 1. part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "unfolding c d"], ["proof (prove)\nusing this:\n  part {..<brn (e ;; c1)} {{i} |i. i < brn e}\n\ngoal (1 subgoal):\n 1. part {..<brn (e ;; d1)} ((\\<lambda>I. I) ` {{i} |i. i < brn e})", "by auto"], ["proof (state)\nthis:\n  part {..<brn d} ((\\<lambda>I. I) ` {{i} |i. i < brn e})\n\ngoal (2 subgoals):\n 1. {} \\<notin> {{i} |i. i < brn e}\n 2. {} \\<notin> (\\<lambda>I. I) ` {{i} |i. i < brn e}", "qed auto"], ["proof (state)\nthis:\n  mC_C_part c d {{i} |i. i < brn e} (\\<lambda>I. I)\n\ngoal (3 subgoals):\n 1. inj_on (\\<lambda>I. I) {{i} |i. i < brn e}\n 2. mC_C_wt c d s t {{i} |i. i < brn e} (\\<lambda>I. I)\n 3. mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on (\\<lambda>I. I) {{i} |i. i < brn e}\n 2. mC_C_wt c d s t {{i} |i. i < brn e} (\\<lambda>I. I)\n 3. mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "show \"mC_C_eff_cont (thetaSSeqI Un Sbis) c d s t ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n     (\\<lambda>I. I)", "unfolding mC_C_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> {{i} |i. i < brn e} \\<and>\n       i \\<in> I \\<and> j \\<in> I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "proof (intro impI allI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{i} |i. i < brn e}; i \\<in> I; j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqI \\<union> Sbis", "fix I i j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{i} |i. i < brn e}; i \\<in> I; j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqI \\<union> Sbis", "assume I: \"I \\<in> ?P\" and i: \"i \\<in> I\" and j: \"j \\<in> I\""], ["proof (state)\nthis:\n  I \\<in> {{i} |i. i < brn e}\n  i \\<in> I\n  j \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{i} |i. i < brn e}; i \\<in> I; j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqI \\<union> Sbis", "show \"eff c s i \\<approx> eff d t j \\<and> (cont c s i, cont d t j) \\<in> thetaSSeqI \\<union> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "proof(cases \"I = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. I = {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis\n 2. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "case True"], ["proof (state)\nthis:\n  I = {}\n\ngoal (2 subgoals):\n 1. I = {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis\n 2. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  I = {}\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "using i"], ["proof (prove)\nusing this:\n  I = {}\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "by simp"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis\n\ngoal (1 subgoal):\n 1. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "case False"], ["proof (state)\nthis:\n  I \\<noteq> {}\n\ngoal (1 subgoal):\n 1. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "then"], ["proof (chain)\npicking this:\n  I \\<noteq> {}", "obtain i' where \"j \\<in> ?F {i'}\" and \"i' < brn e\""], ["proof (prove)\nusing this:\n  I \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>i'.\n        \\<lbrakk>j \\<in> {i'}; i' < brn e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using I j"], ["proof (prove)\nusing this:\n  I \\<noteq> {}\n  I \\<in> {{i} |i. i < brn e}\n  j \\<in> I\n\ngoal (1 subgoal):\n 1. (\\<And>i'.\n        \\<lbrakk>j \\<in> {i'}; i' < brn e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  j \\<in> {i'}\n  i' < brn e\n\ngoal (1 subgoal):\n 1. I \\<noteq> {} \\<Longrightarrow>\n    eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "using st c_d e i j I"], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n  s \\<approx> t\n  (c, d) \\<in> thetaSSeqI\n  siso e\n  i \\<in> I\n  j \\<in> I\n  I \\<in> {{i} |i. i < brn e}\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis", "unfolding c d thetaSSeqI_def"], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n  s \\<approx> t\n  (e ;; c1, e ;; d1)\n  \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>s d}\n  siso e\n  i \\<in> I\n  j \\<in> I\n  I \\<in> {{i} |i. i < brn e}\n\ngoal (1 subgoal):\n 1. eff (e ;; c1) s i \\<approx> eff (e ;; d1) t j \\<and>\n    (local.cont (e ;; c1) s i, local.cont (e ;; d1) t j)\n    \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>s d} \\<union>\n          Sbis", "by (cases \"finished (cont e s i')\") auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqI \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_eff_cont (thetaSSeqI \\<union> Sbis) c d s t {{i} |i. i < brn e}\n   (\\<lambda>I. I)\n\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>I. I) {{i} |i. i < brn e}\n 2. mC_C_wt c d s t {{i} |i. i < brn e} (\\<lambda>I. I)", "qed (insert st c_d c, unfold m_defsAll thetaSSeqI_def part_def, auto)"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C (thetaSSeqI \\<union> Sbis) c d s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSSeqI_Sbis:\n\"thetaSSeqI \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqI \\<subseteq> Sbis", "using Sbis_coind thetaSSeqI_Sretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr (?theta \\<union> Sbis) \\<Longrightarrow>\n  ?theta \\<subseteq> Sbis\n  thetaSSeqI \\<subseteq> Sretr (thetaSSeqI \\<union> Sbis)\n\ngoal (1 subgoal):\n 1. thetaSSeqI \\<subseteq> Sbis", "by blast"], ["", "theorem Seq_siso_Sbis[simp]:\nassumes \"siso e\" and \"c2 \\<approx>s d2\"\nshows \"e ;; c2 \\<approx>s e ;; d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>s e ;; d2", "using assms thetaSSeqI_Sbis"], ["proof (prove)\nusing this:\n  siso e\n  c2 \\<approx>s d2\n  thetaSSeqI \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>s e ;; d2", "unfolding thetaSSeqI_def"], ["proof (prove)\nusing this:\n  siso e\n  c2 \\<approx>s d2\n  {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>s d} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>s e ;; d2", "by auto"], ["", "(*  *)"], ["", "definition thetaSSeqD where\n\"thetaSSeqD \\<equiv>\n {(c1 ;; c2, d1 ;; d2) |\n     c1 c2 d1 d2.\n        proper c1 \\<and> proper d1 \\<and> proper c2 \\<and> proper d2 \\<and>\n        discr c2 \\<and> discr d2 \\<and>\n        c1 \\<approx>s d1}\""], ["", "lemma thetaSSeqD_Sretr:\n\"thetaSSeqD \\<subseteq> Sretr (thetaSSeqD Un Sbis)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqD \\<subseteq> Sretr (thetaSSeqD \\<union> Sbis)", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqD\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F.\n                        mC_C (thetaSSeqD \\<union> Sbis) c d s t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "assume c_d: \"(c, d) \\<in> thetaSSeqD\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaSSeqD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaSSeqD\n  s \\<approx> t", "obtain c1 c2 d1 d2 where\n  c1d1: \"proper c1\" \"proper d1\" \"c1 \\<approx>s d1\" and\n  c2d2: \"proper c2\" \"proper d2\" \"discr c2\" \"discr d2\"\n  and c: \"c = c1 ;; c2\" and d: \"d = d1 ;; d2\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaSSeqD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>c1 d1 c2 d2.\n        \\<lbrakk>proper c1; proper d1; c1 \\<approx>s d1; proper c2;\n         proper d2; discr c2; discr d2; c = c1 ;; c2; d = d1 ;; d2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaSSeqD_def"], ["proof (prove)\nusing this:\n  (c, d)\n  \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n         proper c1 \\<and>\n         proper d1 \\<and>\n         proper c2 \\<and>\n         proper d2 \\<and> discr c2 \\<and> discr d2 \\<and> c1 \\<approx>s d1}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>c1 d1 c2 d2.\n        \\<lbrakk>proper c1; proper d1; c1 \\<approx>s d1; proper c2;\n         proper d2; discr c2; discr d2; c = c1 ;; c2; d = d1 ;; d2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  c = c1 ;; c2\n  d = d1 ;; d2\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "from c1d1 st"], ["proof (chain)\npicking this:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  s \\<approx> t", "obtain P F\n  where match: \"mC_C Sbis c1 d1 s t P F\""], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>P F.\n        mC_C Sbis c1 d1 s t P F \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Sbis_mC_C"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  s \\<approx> t\n  \\<lbrakk>?c \\<approx>s ?d; ?s \\<approx> ?t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P F. mC_C Sbis ?c ?d ?s ?t P F\n\ngoal (1 subgoal):\n 1. (\\<And>P F.\n        mC_C Sbis c1 d1 s t P F \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "have P: \"\\<Union>P = {..<brn c1}\" and FP: \"\\<Union> (F ` P) = {..<brn d1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "using match"], ["proof (prove)\nusing this:\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "unfolding mC_C_def mC_C_part_def part_def"], ["proof (prove)\nusing this:\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   (\\<Union> P = {..<brn c1} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d1} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c1 d1 s t P F \\<and> mC_C_eff_cont Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "by metis+"], ["proof (state)\nthis:\n  \\<Union> P = {..<brn c1}\n  \\<Union> (F ` P) = {..<brn d1}\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSSeqD \\<union> Sbis) a b s t P)", "show \"\\<exists>P F. mC_C (thetaSSeqD Un Sbis) c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C (thetaSSeqD \\<union> Sbis) c d s t P F", "apply(rule exI[of _ P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F. mC_C (thetaSSeqD \\<union> Sbis) c d s t P F", "apply(rule exI[of _ F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C (thetaSSeqD \\<union> Sbis) c d s t P F", "unfolding mC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d P F \\<and>\n    inj_on F P \\<and>\n    mC_C_wt c d s t P F \\<and>\n    mC_C_eff_cont (thetaSSeqD \\<union> Sbis) c d s t P F", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. mC_C_part c d P F\n 2. inj_on F P\n 3. mC_C_wt c d s t P F\n 4. mC_C_eff_cont (thetaSSeqD \\<union> Sbis) c d s t P F", "show \"mC_C_eff_cont (thetaSSeqD \\<union> Sbis) c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_eff_cont (thetaSSeqD \\<union> Sbis) c d s t P F", "unfolding mC_C_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "proof(intro allI impI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "fix i j I"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "assume I : \"I \\<in> P\" and i: \"i \\<in> I\" and j: \"j \\<in> F I\""], ["proof (state)\nthis:\n  I \\<in> P\n  i \\<in> I\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "let ?c1' = \"cont c1 s i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "let ?d1' = \"cont d1 t j\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "let ?s' = \"eff c1 s i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "let ?t' = \"eff d1 t j\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "have \"i < brn c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn c1", "using i I P"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P\n  \\<Union> P = {..<brn c1}\n\ngoal (1 subgoal):\n 1. i < brn c1", "by blast"], ["proof (state)\nthis:\n  i < brn c1\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "note i = this i"], ["proof (state)\nthis:\n  i < brn c1\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "have \"j < brn d1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j < brn d1", "using j I FP"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P\n  \\<Union> (F ` P) = {..<brn d1}\n\ngoal (1 subgoal):\n 1. j < brn d1", "by blast"], ["proof (state)\nthis:\n  j < brn d1\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "note j = this j"], ["proof (state)\nthis:\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "have c1'd1': \"?c1' \\<approx>s ?d1'\"\n      \"proper ?c1'\" \"proper ?d1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>s local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "using c1d1 i j I match"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n  I \\<in> P\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>s local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "unfolding c mC_C_def mC_C_eff_cont_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>s d1\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n  I \\<in> P\n  mC_C_part c1 d1 P F \\<and>\n  inj_on F P \\<and>\n  mC_C_wt c1 d1 s t P F \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>s local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "by auto"], ["proof (state)\nthis:\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSSeqD \\<union> Sbis", "show \"eff c s i \\<approx> eff d t j \\<and> (cont c s i, cont d t j) \\<in> thetaSSeqD \\<union> Sbis\"\n      (is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. eff c s i \\<approx> eff d t j\n 2. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "show ?eff"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "using match I i j"], ["proof (prove)\nusing this:\n  mC_C Sbis c1 d1 s t P F\n  I \\<in> P\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "unfolding c d m_defsAll"], ["proof (prove)\nusing this:\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n  I \\<in> P\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. eff (c1 ;; c2) s i \\<approx> eff (d1 ;; d2) t j", "by simp"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "show ?cont"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "proof(cases \"finished ?c1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "note c1' = True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence csi: \"cont c s i = c2\""], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "using i match"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "unfolding c m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = c2\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "proof(cases \"finished ?d1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence \"cont d t j = d2\""], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "using j match"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = d2\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "using csi c2d2"], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n  local.cont c s i = c2\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence dtj: \"cont d t j = ?d1' ;; d2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "using j match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = local.cont d1 t j ;; d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "have \"discr ?d1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (local.cont d1 t j)", "using c1'd1'  c1' Sbis_finished_discr_R"], ["proof (prove)\nusing this:\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  finished (local.cont c1 s i)\n  \\<lbrakk>proper ?c; finished ?c; ?c \\<approx>s ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?d\n\ngoal (1 subgoal):\n 1. discr (local.cont d1 t j)", "by blast"], ["proof (state)\nthis:\n  discr (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "unfolding csi dtj"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (c2, local.cont d1 t j ;; d2) \\<in> thetaSSeqD \\<union> Sbis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "note Done_c = False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence csi: \"cont c s i = ?c1' ;; c2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "using i match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "unfolding c m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = local.cont c1 s i ;; c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = local.cont c1 s i ;; c2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "proof(cases \"finished (cont d1 t j)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "note d1' = True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence dtj: \"cont d t j = d2\""], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "using j match"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = d2\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "have \"discr ?c1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (local.cont c1 s i)", "using c1'd1'  d1' Sbis_finished_discr_L"], ["proof (prove)\nusing this:\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  finished (local.cont d1 t j)\n  \\<lbrakk>?c \\<approx>s ?d; proper ?d; finished ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr (local.cont c1 s i)", "by blast"], ["proof (state)\nthis:\n  discr (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "unfolding csi dtj"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, d2) \\<in> thetaSSeqD \\<union> Sbis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "hence dtj: \"cont d t j = ?d1' ;; d2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "using j match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_C Sbis c1 d1 s t P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P \\<and>\n   {} \\<notin> F ` P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (\\<forall>I\\<in>P. sum (wt c1 s) I = sum (wt d1 t) (F I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>s local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = local.cont d1 t j ;; d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis", "unfolding csi dtj thetaSSeqD_def"], ["proof (prove)\nusing this:\n  local.cont d1 t j ;; d2 = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, local.cont d1 t j ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>s d1} \\<union>\n          Sbis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  local.cont d1 t j ;; d2 = local.cont d1 t j ;; d2\n  local.cont c1 s i \\<approx>s local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, local.cont d1 t j ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>s d1} \\<union>\n          Sbis", "by blast"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaSSeqD \\<union> Sbis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_eff_cont (thetaSSeqD \\<union> Sbis) c d s t P F\n\ngoal (3 subgoals):\n 1. mC_C_part c d P F\n 2. inj_on F P\n 3. mC_C_wt c d s t P F", "qed(insert match, unfold m_defsAll c d, auto)"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C (thetaSSeqD \\<union> Sbis) c d s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSSeqD_Sbis:\n\"thetaSSeqD \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSSeqD \\<subseteq> Sbis", "using Sbis_coind thetaSSeqD_Sretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr (?theta \\<union> Sbis) \\<Longrightarrow>\n  ?theta \\<subseteq> Sbis\n  thetaSSeqD \\<subseteq> Sretr (thetaSSeqD \\<union> Sbis)\n\ngoal (1 subgoal):\n 1. thetaSSeqD \\<subseteq> Sbis", "by blast"], ["", "theorem Seq_Sbis[simp]:\nassumes \"proper c1\" and \"proper d1\" and \"proper c2\" and \"proper d2\"\nand \"c1 \\<approx>s d1\" and \"discr c2\" and \"discr d2\"\nshows \"c1 ;; c2 \\<approx>s d1 ;; d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>s d1 ;; d2", "using assms thetaSSeqD_Sbis"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  proper c2\n  proper d2\n  c1 \\<approx>s d1\n  discr c2\n  discr d2\n  thetaSSeqD \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>s d1 ;; d2", "unfolding thetaSSeqD_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  proper c2\n  proper d2\n  c1 \\<approx>s d1\n  discr c2\n  discr d2\n  {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n   proper c1 \\<and>\n   proper d1 \\<and>\n   proper c2 \\<and>\n   proper d2 \\<and> discr c2 \\<and> discr d2 \\<and> c1 \\<approx>s d1}\n  \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>s d1 ;; d2", "by auto"], ["", "(* Note: no compositionality w.r.t. while loop. *)\n\n(* Ch *)"], ["", "definition thetaSCh where\n\"thetaSCh ch c1 c2 d1 d2 \\<equiv> {(Ch ch c1 c2, Ch ch d1 d2)}\""], ["", "lemma thetaSCh_Sretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"thetaSCh ch c1 c2 d1 d2 \\<subseteq>\n       Sretr (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\"\n(is \"?th \\<subseteq> Sretr (?th \\<union> Sbis)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSCh ch c1 c2 d1 d2\n    \\<subseteq> Sretr (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSCh ch c1 c2 d1 d2\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F.\n                        mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t\n                         P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "assume c_d: \"(c, d) \\<in> ?th\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaSCh ch c1 c2 d1 d2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "hence c: \"c = Ch ch c1 c2\" \"brn c = 2\"\n  and d: \"d = Ch ch d1 d2\" \"brn d = 2\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaSCh ch c1 c2 d1 d2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (c = Ch ch c1 c2 &&& brn c = 2) &&& d = Ch ch d1 d2 &&& brn d = 2", "unfolding thetaSCh_def"], ["proof (prove)\nusing this:\n  (c, d) \\<in> {(Ch ch c1 c2, Ch ch d1 d2)}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (c = Ch ch c1 c2 &&& brn c = 2) &&& d = Ch ch d1 d2 &&& brn d = 2", "by auto"], ["proof (state)\nthis:\n  c = Ch ch c1 c2\n  brn c = 2\n  d = Ch ch d1 d2\n  brn d = 2\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "let ?P = \"{{0}, {1}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "let ?F = \"%I. I\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSCh ch c1 c2 d1 d2; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n                                 a b s t P)", "show \"\\<exists>P F. mC_C (?th Un Sbis) c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t P F", "apply(rule exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t {{0}, {1}} F", "apply(rule exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t {{0}, {1}}\n     (\\<lambda>I. I)", "using assms st c_d c"], ["proof (prove)\nusing this:\n  compatCh ch\n  c1 \\<approx>s d1\n  c2 \\<approx>s d2\n  s \\<approx> t\n  (c, d) \\<in> thetaSCh ch c1 c2 d1 d2\n  c = Ch ch c1 c2\n  brn c = 2\n\ngoal (1 subgoal):\n 1. mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t {{0}, {1}}\n     (\\<lambda>I. I)", "unfolding m_defsAll thetaSCh_def part_def"], ["proof (prove)\nusing this:\n  compatCh ch\n  c1 \\<approx>s d1\n  c2 \\<approx>s d2\n  s \\<approx> t\n  (c, d) \\<in> {(Ch ch c1 c2, Ch ch d1 d2)}\n  c = Ch ch c1 c2\n  brn c = 2\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}, {1}} \\<and>\n     {} \\<notin> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n     (\\<Union> {{0}, {1}} = {..<brn c} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}, {1}} \\<and>\n          J2 \\<in> {{0}, {1}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     (\\<Union>I\\<in>{{0}, {1}}. I) = {..<brn d} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n         J2 \\<in> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n         J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on (\\<lambda>I. I) {{0}, {1}} \\<and>\n    (\\<forall>I\\<in>{{0}, {1}}. sum (wt c s) I = sum (wt d t) I) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}, {1}} \\<and>\n        i \\<in> I \\<and> j \\<in> I \\<longrightarrow>\n        eff c s i \\<approx> eff d t j \\<and>\n        (local.cont c s i, local.cont d t j)\n        \\<in> {(Ch ch c1 c2, Ch ch d1 d2)} \\<union> Sbis)", "by auto"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis) c d s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSCh_Sbis:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"thetaSCh ch c1 c2 d1 d2 \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSCh ch c1 c2 d1 d2 \\<subseteq> Sbis", "using Sbis_coind thetaSCh_Sretr[OF assms]"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr (?theta \\<union> Sbis) \\<Longrightarrow>\n  ?theta \\<subseteq> Sbis\n  thetaSCh ch c1 c2 d1 d2\n  \\<subseteq> Sretr (thetaSCh ch c1 c2 d1 d2 \\<union> Sbis)\n\ngoal (1 subgoal):\n 1. thetaSCh ch c1 c2 d1 d2 \\<subseteq> Sbis", "by blast"], ["", "theorem Ch_siso_Sbis[simp]:\nassumes \"compatCh ch\" and \"c1 \\<approx>s d1\" and \"c2 \\<approx>s d2\"\nshows \"Ch ch c1 c2 \\<approx>s Ch ch d1 d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>s Ch ch d1 d2", "using thetaSCh_Sbis[OF assms]"], ["proof (prove)\nusing this:\n  thetaSCh ch c1 c2 d1 d2 \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>s Ch ch d1 d2", "unfolding thetaSCh_def"], ["proof (prove)\nusing this:\n  {(Ch ch c1 c2, Ch ch d1 d2)} \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>s Ch ch d1 d2", "by auto"], ["", "(* Par: *)"], ["", "definition shift where\n\"shift cl n \\<equiv> image (%i. brnL cl n + i)\""], ["", "definition \"back\" where\n\"back cl n \\<equiv> image (% ii. ii - brnL cl n)\""], ["", "lemma emp_shift[simp]:\n\"shift cl n I = {} \\<longleftrightarrow> I = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n I = {}) = (I = {})", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((+) (brnL cl n) ` I = {}) = (I = {})", "by auto"], ["", "lemma emp_shift_rev[simp]:\n\"{} = shift cl n I \\<longleftrightarrow> I = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} = local.shift cl n I) = (I = {})", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} = (+) (brnL cl n) ` I) = (I = {})", "by auto"], ["", "lemma emp_back[simp]:\n\"back cl n II = {} \\<longleftrightarrow> II = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II = {}) = (II = {})", "unfolding back_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>ii. ii - brnL cl n) ` II = {}) = (II = {})", "by force"], ["", "lemma emp_back_rev[simp]:\n\"{} = back cl n II \\<longleftrightarrow> II = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} = back cl n II) = (II = {})", "unfolding back_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({} = (\\<lambda>ii. ii - brnL cl n) ` II) = (II = {})", "by force"], ["", "lemma in_shift[simp]:\n\"brnL cl n + i \\<in> shift cl n I \\<longleftrightarrow> i \\<in> I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (brnL cl n + i \\<in> local.shift cl n I) = (i \\<in> I)", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (brnL cl n + i \\<in> (+) (brnL cl n) ` I) = (i \\<in> I)", "by auto"], ["", "lemma in_back[simp]:\n\"ii \\<in> II \\<Longrightarrow> ii - brnL cl n \\<in> back cl n II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii \\<in> II \\<Longrightarrow> ii - brnL cl n \\<in> back cl n II", "unfolding back_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ii \\<in> II \\<Longrightarrow>\n    ii - brnL cl n \\<in> (\\<lambda>ii. ii - brnL cl n) ` II", "by auto"], ["", "lemma in_back2[simp]:\nassumes \"ii > brnL cl n\" and \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"ii - brnL cl n \\<in> back cl n II \\<longleftrightarrow> ii \\<in> II\" (is \"?L \\<longleftrightarrow> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (ii - brnL cl n \\<in> back cl n II) = (ii \\<in> II)", "using assms"], ["proof (prove)\nusing this:\n  brnL cl n < ii\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (ii - brnL cl n \\<in> back cl n II) = (ii \\<in> II)", "unfolding back_def"], ["proof (prove)\nusing this:\n  brnL cl n < ii\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (ii - brnL cl n \\<in> (\\<lambda>ii. ii - brnL cl n) ` II) =\n    (ii \\<in> II)", "by force"], ["", "lemma shift[simp]:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nshows \"shift cl n I \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n I \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}", "using assms"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. local.shift cl n I \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}", "unfolding shift_def"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (+) (brnL cl n) ` I \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}", "by auto"], ["", "lemma shift2[simp]:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nand \"ii \\<in> shift cl n I\"\nshows \"brnL cl n \\<le> ii \\<and> ii < brnL cl n + brn (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n \\<le> ii \\<and> ii < brnL cl n + brn (cl ! n)", "using assms"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> local.shift cl n I\n\ngoal (1 subgoal):\n 1. brnL cl n \\<le> ii \\<and> ii < brnL cl n + brn (cl ! n)", "unfolding shift_def"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. brnL cl n \\<le> ii \\<and> ii < brnL cl n + brn (cl ! n)", "by auto"], ["", "lemma shift3[simp]:\nassumes n: \"n < length cl\" and I: \"I \\<subseteq> {..< brn (cl!n)}\"\nand ii: \"ii \\<in> shift cl n I\"\nshows \"ii < brnL cl (length cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "have \"ii < brnL cl n + brn (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii < brnL cl n + brn (cl ! n)", "using I ii"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> local.shift cl n I\n\ngoal (1 subgoal):\n 1. ii < brnL cl n + brn (cl ! n)", "by simp"], ["proof (state)\nthis:\n  ii < brnL cl n + brn (cl ! n)\n\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "also"], ["proof (state)\nthis:\n  ii < brnL cl n + brn (cl ! n)\n\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "have \"... \\<le> brnL cl (length cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n + brn (cl ! n) \\<le> brnL cl (length cl)", "using n"], ["proof (prove)\nusing this:\n  n < length cl\n\ngoal (1 subgoal):\n 1. brnL cl n + brn (cl ! n) \\<le> brnL cl (length cl)", "by (metis brnL_Suc brnL_mono Suc_leI)"], ["proof (state)\nthis:\n  brnL cl n + brn (cl ! n) \\<le> brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "finally"], ["proof (chain)\npicking this:\n  ii < brnL cl (length cl)", "show ?thesis"], ["proof (prove)\nusing this:\n  ii < brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. ii < brnL cl (length cl)", "."], ["proof (state)\nthis:\n  ii < brnL cl (length cl)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \"back\"[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"back cl n II \\<subseteq> {..< brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n II \\<subseteq> {..<brn (cl ! n)}", "using assms"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. back cl n II \\<subseteq> {..<brn (cl ! n)}", "unfolding back_def"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>ii. ii - brnL cl n) ` II \\<subseteq> {..<brn (cl ! n)}", "by force"], ["", "lemma back2[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"i \\<in> back cl n II\"\nshows \"i < brn (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "using assms"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  i \\<in> back cl n II\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "unfolding back_def"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  i \\<in> (\\<lambda>ii. ii - brnL cl n) ` II\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "by force"], ["", "lemma shift_inj[simp]:\n\"shift cl n I1 = shift cl n I2 \\<longleftrightarrow> I1 = I2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n I1 = local.shift cl n I2) = (I1 = I2)", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((+) (brnL cl n) ` I1 = (+) (brnL cl n) ` I2) = (I1 = I2)", "by force"], ["", "lemma shift_mono[simp]:\n\"shift cl n I1 \\<subseteq> shift cl n I2 \\<longleftrightarrow> I1 \\<subseteq> I2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n I1 \\<subseteq> local.shift cl n I2) =\n    (I1 \\<subseteq> I2)", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((+) (brnL cl n) ` I1 \\<subseteq> (+) (brnL cl n) ` I2) =\n    (I1 \\<subseteq> I2)", "by auto"], ["", "lemma shift_Int[simp]:\n\"shift cl n I1 \\<inter> shift cl n I2 = {} \\<longleftrightarrow> I1 \\<inter> I2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n I1 \\<inter> local.shift cl n I2 = {}) =\n    (I1 \\<inter> I2 = {})", "unfolding shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((+) (brnL cl n) ` I1 \\<inter> (+) (brnL cl n) ` I2 = {}) =\n    (I1 \\<inter> I2 = {})", "by force"], ["", "lemma inj_shift: \"inj (shift cl n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj (local.shift cl n)", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>UNIV.\n       \\<forall>y\\<in>UNIV.\n          local.shift cl n x = local.shift cl n y \\<longrightarrow> x = y", "by simp"], ["", "lemma inj_on_shift: \"inj_on (shift cl n) K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (local.shift cl n) K", "using inj_shift"], ["proof (prove)\nusing this:\n  inj (local.shift ?cl ?n)\n\ngoal (1 subgoal):\n 1. inj_on (local.shift cl n) K", "unfolding inj_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>UNIV.\n     \\<forall>y\\<in>UNIV.\n        local.shift ?cl ?n x = local.shift ?cl ?n y \\<longrightarrow> x = y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>K.\n       \\<forall>y\\<in>K.\n          local.shift cl n x = local.shift cl n y \\<longrightarrow> x = y", "by simp"], ["", "lemma back_shift[simp]:\n\"back cl n (shift cl n I) = I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n (local.shift cl n I) = I", "unfolding back_def shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>ii. ii - brnL cl n) ` (+) (brnL cl n) ` I = I", "by force"], ["", "lemma shift_back[simp]:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"shift cl n (back cl n II) = II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n (back cl n II) = II", "using assms"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. local.shift cl n (back cl n II) = II", "unfolding shift_def back_def atLeastLessThan_def"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..} \\<inter> {..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (+) (brnL cl n) ` (\\<lambda>ii. ii - brnL cl n) ` II = II", "by force"], ["", "lemma back_inj[simp]:\nassumes II1: \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand II2: \"II2 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"back cl n II1 = back cl n II2 \\<longleftrightarrow> II1 = II2\" (is \"?L = ?R \\<longleftrightarrow> II1 = II2\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II1 = back cl n II2) = (II1 = II2)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "have \"II1 = shift cl n ?L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II1 = local.shift cl n (back cl n II1)", "using II1"], ["proof (prove)\nusing this:\n  II1 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. II1 = local.shift cl n (back cl n II1)", "by simp"], ["proof (state)\nthis:\n  II1 = local.shift cl n (back cl n II1)\n\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "also"], ["proof (state)\nthis:\n  II1 = local.shift cl n (back cl n II1)\n\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "assume \"?L = ?R\""], ["proof (state)\nthis:\n  back cl n II1 = back cl n II2\n\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "also"], ["proof (state)\nthis:\n  back cl n II1 = back cl n II2\n\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "have \"shift cl n ?R = II2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n (back cl n II2) = II2", "using II2"], ["proof (prove)\nusing this:\n  II2 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. local.shift cl n (back cl n II2) = II2", "by simp"], ["proof (state)\nthis:\n  local.shift cl n (back cl n II2) = II2\n\ngoal (2 subgoals):\n 1. back cl n II1 = back cl n II2 \\<Longrightarrow> II1 = II2\n 2. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "finally"], ["proof (chain)\npicking this:\n  II1 = II2", "show \"II1 = II2\""], ["proof (prove)\nusing this:\n  II1 = II2\n\ngoal (1 subgoal):\n 1. II1 = II2", "."], ["proof (state)\nthis:\n  II1 = II2\n\ngoal (1 subgoal):\n 1. II1 = II2 \\<Longrightarrow> back cl n II1 = back cl n II2", "qed auto"], ["", "lemma back_mono[simp]:\nassumes \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"II2 \\<subseteq> {brnL cl n ..< brnL cl n + brn (cl!n)}\"\nshows \"back cl n II1 \\<subseteq> back cl n II2 \\<longleftrightarrow> II1 \\<subseteq> II2\"\n(is \"?L \\<subseteq> ?R \\<longleftrightarrow> II1 \\<subseteq> II2\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "have \"?L \\<subseteq> ?R \\<longleftrightarrow> shift cl n ?L \\<subseteq> shift cl n ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) =\n    (local.shift cl n (back cl n II1)\n     \\<subseteq> local.shift cl n (back cl n II2))", "by simp"], ["proof (state)\nthis:\n  (back cl n II1 \\<subseteq> back cl n II2) =\n  (local.shift cl n (back cl n II1)\n   \\<subseteq> local.shift cl n (back cl n II2))\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "also"], ["proof (state)\nthis:\n  (back cl n II1 \\<subseteq> back cl n II2) =\n  (local.shift cl n (back cl n II1)\n   \\<subseteq> local.shift cl n (back cl n II2))\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "have \"... \\<longleftrightarrow> II1 \\<subseteq> II2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n (back cl n II1)\n     \\<subseteq> local.shift cl n (back cl n II2)) =\n    (II1 \\<subseteq> II2)", "using assms"], ["proof (prove)\nusing this:\n  II1 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  II2 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (local.shift cl n (back cl n II1)\n     \\<subseteq> local.shift cl n (back cl n II2)) =\n    (II1 \\<subseteq> II2)", "by simp"], ["proof (state)\nthis:\n  (local.shift cl n (back cl n II1)\n   \\<subseteq> local.shift cl n (back cl n II2)) =\n  (II1 \\<subseteq> II2)\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "finally"], ["proof (chain)\npicking this:\n  (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "show ?thesis"], ["proof (prove)\nusing this:\n  (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)", "."], ["proof (state)\nthis:\n  (back cl n II1 \\<subseteq> back cl n II2) = (II1 \\<subseteq> II2)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma back_Int[simp]:\nassumes \"II1 \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nand \"II2 \\<subseteq> {brnL cl n ..< brnL cl n + brn (cl!n)}\"\nshows \"back cl n II1 \\<inter> back cl n II2 = {} \\<longleftrightarrow> II1 \\<inter> II2 = {}\"\n(is \"?L \\<inter> ?R = {} \\<longleftrightarrow> II1 \\<inter> II2 = {}\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "have \"?L \\<inter> ?R = {} \\<longleftrightarrow> shift cl n ?L \\<inter> shift cl n ?R = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) =\n    (local.shift cl n (back cl n II1) \\<inter>\n     local.shift cl n (back cl n II2) =\n     {})", "by simp"], ["proof (state)\nthis:\n  (back cl n II1 \\<inter> back cl n II2 = {}) =\n  (local.shift cl n (back cl n II1) \\<inter>\n   local.shift cl n (back cl n II2) =\n   {})\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "also"], ["proof (state)\nthis:\n  (back cl n II1 \\<inter> back cl n II2 = {}) =\n  (local.shift cl n (back cl n II1) \\<inter>\n   local.shift cl n (back cl n II2) =\n   {})\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "have \"... \\<longleftrightarrow> II1 \\<inter> II2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.shift cl n (back cl n II1) \\<inter>\n     local.shift cl n (back cl n II2) =\n     {}) =\n    (II1 \\<inter> II2 = {})", "using assms"], ["proof (prove)\nusing this:\n  II1 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  II2 \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (local.shift cl n (back cl n II1) \\<inter>\n     local.shift cl n (back cl n II2) =\n     {}) =\n    (II1 \\<inter> II2 = {})", "by simp"], ["proof (state)\nthis:\n  (local.shift cl n (back cl n II1) \\<inter>\n   local.shift cl n (back cl n II2) =\n   {}) =\n  (II1 \\<inter> II2 = {})\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "finally"], ["proof (chain)\npicking this:\n  (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "show ?thesis"], ["proof (prove)\nusing this:\n  (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})\n\ngoal (1 subgoal):\n 1. (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})", "."], ["proof (state)\nthis:\n  (back cl n II1 \\<inter> back cl n II2 = {}) = (II1 \\<inter> II2 = {})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma inj_on_back:\n\"inj_on (back cl n) (Pow {brnL cl n ..<+ brn (cl!n)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (back cl n) (Pow {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>Pow {brnL cl n..<brnL cl n + brn (cl ! n)}.\n       \\<forall>y\\<in>Pow {brnL cl n..<brnL cl n + brn (cl ! n)}.\n          back cl n x = back cl n y \\<longrightarrow> x = y", "by simp"], ["", "lemma shift_surj:\nassumes \"II \\<subseteq> {brnL cl n ..<+ brn (cl!n)}\"\nshows \"\\<exists> I. I \\<subseteq> {..< brn (cl!n)} \\<and> shift cl n I = II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>I\\<subseteq>{..<brn (cl ! n)}. local.shift cl n I = II", "apply(intro exI[of _ \"back cl n II\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n II \\<subseteq> {..<brn (cl ! n)} \\<and>\n    local.shift cl n (back cl n II) = II", "using assms"], ["proof (prove)\nusing this:\n  II \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. back cl n II \\<subseteq> {..<brn (cl ! n)} \\<and>\n    local.shift cl n (back cl n II) = II", "by simp"], ["", "lemma back_surj:\nassumes \"I \\<subseteq> {..< brn (cl!n)}\"\nshows \"\\<exists> II. II \\<subseteq> {brnL cl n ..<+ brn (cl!n)} \\<and> back cl n II = I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>II\\<subseteq>{brnL cl n..<brnL cl n + brn (cl ! n)}.\n       back cl n II = I", "apply(intro exI[of _ \"shift cl n I\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n I\n    \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<and>\n    back cl n (local.shift cl n I) = I", "using assms"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. local.shift cl n I\n    \\<subseteq> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<and>\n    back cl n (local.shift cl n I) = I", "by simp"], ["", "lemma shift_part[simp]:\nassumes \"part {..< brn (cl!n)} P\"\nshows \"part {brnL cl n ..<+ brn (cl!n)} (shift cl n ` P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {brnL cl n..<brnL cl n + brn (cl ! n)} (local.shift cl n ` P)", "unfolding part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (local.shift cl n ` P) =\n    {brnL cl n..<brnL cl n + brn (cl ! n)} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> local.shift cl n ` P \\<and>\n        J2 \\<in> local.shift cl n ` P \\<and>\n        J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "proof(intro conjI allI impI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Union> (local.shift cl n ` P) = {brnL cl n..<brnL cl n + brn (cl ! n)}\n 2. \\<And>J1 J2.\n       J1 \\<in> local.shift cl n ` P \\<and>\n       J2 \\<in> local.shift cl n ` P \\<and> J1 \\<noteq> J2 \\<Longrightarrow>\n       J1 \\<inter> J2 = {}", "show \"\\<Union> (shift cl n ` P) = {brnL cl n ..<+ brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (local.shift cl n ` P) = {brnL cl n..<brnL cl n + brn (cl ! n)}", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> P; x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n 2. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "fix ii I"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> P; x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n 2. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "assume ii: \"ii \\<in> shift cl n I\" and \"I \\<in> P\""], ["proof (state)\nthis:\n  ii \\<in> local.shift cl n I\n  I \\<in> P\n\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> P; x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n 2. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "hence \"I \\<subseteq> {..< brn (cl!n)}\""], ["proof (prove)\nusing this:\n  ii \\<in> local.shift cl n I\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "using assms"], ["proof (prove)\nusing this:\n  ii \\<in> local.shift cl n I\n  I \\<in> P\n  part {..<brn (cl ! n)} P\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  ii \\<in> local.shift cl n I\n  I \\<in> P\n  \\<Union> P = {..<brn (cl ! n)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "by blast"], ["proof (state)\nthis:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> P; x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n 2. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "thus \"ii \\<in> {brnL cl n ..<+ brn (cl!n)}\""], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}", "using ii"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> local.shift cl n I\n\ngoal (1 subgoal):\n 1. ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}", "by simp"], ["proof (state)\nthis:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "fix ii"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "assume ii_in: \"ii \\<in> {brnL cl n..<+brn (cl ! n)}\""], ["proof (state)\nthis:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "define i where \"i = ii - brnL cl n\""], ["proof (state)\nthis:\n  i = ii - brnL cl n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "have ii: \"ii = brnL cl n + i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii = brnL cl n + i", "unfolding i_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ii = brnL cl n + (ii - brnL cl n)", "using ii_in"], ["proof (prove)\nusing this:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. ii = brnL cl n + (ii - brnL cl n)", "by force"], ["proof (state)\nthis:\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "have \"i \\<in> {..< brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<in> {..<brn (cl ! n)}", "unfolding i_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ii - brnL cl n \\<in> {..<brn (cl ! n)}", "using ii_in"], ["proof (prove)\nusing this:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. ii - brnL cl n \\<in> {..<brn (cl ! n)}", "by auto"], ["proof (state)\nthis:\n  i \\<in> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "then"], ["proof (chain)\npicking this:\n  i \\<in> {..<brn (cl ! n)}", "obtain I where i: \"i \\<in> I\" and I: \"I \\<in> P\""], ["proof (prove)\nusing this:\n  i \\<in> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>i \\<in> I; I \\<in> P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  i \\<in> {..<brn (cl ! n)}\n  part {..<brn (cl ! n)} P\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>i \\<in> I; I \\<in> P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding part_def"], ["proof (prove)\nusing this:\n  i \\<in> {..<brn (cl ! n)}\n  \\<Union> P = {..<brn (cl ! n)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>i \\<in> I; I \\<in> P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  i \\<in> I\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)} \\<Longrightarrow>\n       x \\<in> \\<Union> (local.shift cl n ` P)", "thus \"ii \\<in> \\<Union> (shift cl n ` P)\""], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. ii \\<in> \\<Union> (local.shift cl n ` P)", "unfolding ii"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P\n\ngoal (1 subgoal):\n 1. brnL cl n + i \\<in> \\<Union> (local.shift cl n ` P)", "by force"], ["proof (state)\nthis:\n  ii \\<in> \\<Union> (local.shift cl n ` P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Union> (local.shift cl n ` P) = {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>J1 J2.\n       J1 \\<in> local.shift cl n ` P \\<and>\n       J2 \\<in> local.shift cl n ` P \\<and> J1 \\<noteq> J2 \\<Longrightarrow>\n       J1 \\<inter> J2 = {}", "qed(insert assms, unfold part_def, force)"], ["", "lemma part_brn_disj1:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\"\nand II1: \"II1 \\<in> shift cl n1 ` (P n1)\" and II2: \"II2 \\<in> shift cl n2 ` (P n2)\" and d: \"n1 \\<noteq> n2\"\nshows \"II1 \\<inter> II2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "obtain I1 I2 where I1: \"I1 \\<in> P n1\" and I2: \"I2 \\<in> P n2\"\n  and II1: \"II1 = shift cl n1 I1\" and II2: \"II2 = shift cl n2 I2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>I1 I2.\n        \\<lbrakk>I1 \\<in> P n1; I2 \\<in> P n2; II1 = local.shift cl n1 I1;\n         II2 = local.shift cl n2 I2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using II1 II2"], ["proof (prove)\nusing this:\n  II1 \\<in> local.shift cl n1 ` P n1\n  II2 \\<in> local.shift cl n2 ` P n2\n\ngoal (1 subgoal):\n 1. (\\<And>I1 I2.\n        \\<lbrakk>I1 \\<in> P n1; I2 \\<in> P n2; II1 = local.shift cl n1 I1;\n         II2 = local.shift cl n2 I2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I1 \\<in> P n1\n  I2 \\<in> P n2\n  II1 = local.shift cl n1 I1\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "have \"I1 \\<subseteq> {..< brn (cl!n1)}\" and \"I2 \\<subseteq> {..< brn (cl!n2)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I1 \\<subseteq> {..<brn (cl ! n1)} &&& I2 \\<subseteq> {..<brn (cl ! n2)}", "using n1 I1 n2 I2 P"], ["proof (prove)\nusing this:\n  n1 < length cl\n  I1 \\<in> P n1\n  n2 < length cl\n  I2 \\<in> P n2\n  ?n1 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n1)} (P ?n1)\n\ngoal (1 subgoal):\n 1. I1 \\<subseteq> {..<brn (cl ! n1)} &&& I2 \\<subseteq> {..<brn (cl ! n2)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  n1 < length cl\n  I1 \\<in> P n1\n  n2 < length cl\n  I2 \\<in> P n2\n  ?n1 < length cl \\<Longrightarrow>\n  \\<Union> (P ?n1) = {..<brn (cl ! ?n1)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> P ?n1 \\<and>\n      J2 \\<in> P ?n1 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. I1 \\<subseteq> {..<brn (cl ! n1)} &&& I2 \\<subseteq> {..<brn (cl ! n2)}", "by blast+"], ["proof (state)\nthis:\n  I1 \\<subseteq> {..<brn (cl ! n1)}\n  I2 \\<subseteq> {..<brn (cl ! n2)}\n\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "hence \"II1 \\<subseteq> {brnL cl n1 ..<+ brn (cl!n1)}\" and \"II2 \\<subseteq> {brnL cl n2 ..<+ brn (cl!n2)}\""], ["proof (prove)\nusing this:\n  I1 \\<subseteq> {..<brn (cl ! n1)}\n  I2 \\<subseteq> {..<brn (cl ! n2)}\n\ngoal (1 subgoal):\n 1. II1 \\<subseteq> {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} &&&\n    II2 \\<subseteq> {brnL cl n2..<brnL cl n2 + brn (cl ! n2)}", "unfolding II1 II2"], ["proof (prove)\nusing this:\n  I1 \\<subseteq> {..<brn (cl ! n1)}\n  I2 \\<subseteq> {..<brn (cl ! n2)}\n\ngoal (1 subgoal):\n 1. local.shift cl n1 I1\n    \\<subseteq> {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} &&&\n    local.shift cl n2 I2\n    \\<subseteq> {brnL cl n2..<brnL cl n2 + brn (cl ! n2)}", "by auto"], ["proof (state)\nthis:\n  II1 \\<subseteq> {brnL cl n1..<brnL cl n1 + brn (cl ! n1)}\n  II2 \\<subseteq> {brnL cl n2..<brnL cl n2 + brn (cl ! n2)}\n\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  II1 \\<subseteq> {brnL cl n1..<brnL cl n1 + brn (cl ! n1)}\n  II2 \\<subseteq> {brnL cl n2..<brnL cl n2 + brn (cl ! n2)}\n\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "using n1 n2 d brnL_Int"], ["proof (prove)\nusing this:\n  II1 \\<subseteq> {brnL cl n1..<brnL cl n1 + brn (cl ! n1)}\n  II2 \\<subseteq> {brnL cl n2..<brnL cl n2 + brn (cl ! n2)}\n  n1 < length cl\n  n2 < length cl\n  n1 \\<noteq> n2\n  \\<lbrakk>?n1.0 \\<noteq> ?n2.0; ?n1.0 < length ?cl;\n   ?n2.0 < length ?cl\\<rbrakk>\n  \\<Longrightarrow> {brnL ?cl\n                      ?n1.0..<brnL ?cl ?n1.0 + brn (?cl ! ?n1.0)} \\<inter>\n                    {brnL ?cl ?n2.0..<brnL ?cl ?n2.0 + brn (?cl ! ?n2.0)} =\n                    {}\n\ngoal (1 subgoal):\n 1. II1 \\<inter> II2 = {}", "by blast"], ["proof (state)\nthis:\n  II1 \\<inter> II2 = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_brn_disj2:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\" and d: \"n1 \\<noteq> n2\"\nshows \"shift cl n1 ` (P n1) \\<inter> shift cl n2 ` (P n2) = {}\" (is \"?L \\<inter> ?R = {}\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "fix II"], ["proof (state)\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "assume II: \"II \\<in> ?L \\<inter> ?R\""], ["proof (state)\nthis:\n  II \\<in> local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "hence \"II = {}\""], ["proof (prove)\nusing this:\n  II \\<in> local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2\n\ngoal (1 subgoal):\n 1. II = {}", "using part_brn_disj1[of cl P n1 n2 II II] assms"], ["proof (prove)\nusing this:\n  II \\<in> local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2\n  \\<lbrakk>\\<And>n.\n              n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (P n);\n   n1 < length cl; n2 < length cl; II \\<in> local.shift cl n1 ` P n1;\n   II \\<in> local.shift cl n2 ` P n2; n1 \\<noteq> n2\\<rbrakk>\n  \\<Longrightarrow> II \\<inter> II = {}\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n1 < length cl\n  n2 < length cl\n  n1 \\<noteq> n2\n\ngoal (1 subgoal):\n 1. II = {}", "by blast"], ["proof (state)\nthis:\n  II = {}\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "hence \"{} \\<in> ?L\""], ["proof (prove)\nusing this:\n  II = {}\n\ngoal (1 subgoal):\n 1. {} \\<in> local.shift cl n1 ` P n1", "using II"], ["proof (prove)\nusing this:\n  II = {}\n  II \\<in> local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2\n\ngoal (1 subgoal):\n 1. {} \\<in> local.shift cl n1 ` P n1", "by blast"], ["proof (state)\nthis:\n  {} \\<in> local.shift cl n1 ` P n1\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "then"], ["proof (chain)\npicking this:\n  {} \\<in> local.shift cl n1 ` P n1", "obtain I where I: \"I \\<in> P n1\" and II: \"{} = shift cl n1 I\""], ["proof (prove)\nusing this:\n  {} \\<in> local.shift cl n1 ` P n1\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P n1; {} = local.shift cl n1 I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  I \\<in> P n1\n  {} = local.shift cl n1 I\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "hence \"I = {}\""], ["proof (prove)\nusing this:\n  I \\<in> P n1\n  {} = local.shift cl n1 I\n\ngoal (1 subgoal):\n 1. I = {}", "by simp"], ["proof (state)\nthis:\n  I = {}\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "hence False"], ["proof (prove)\nusing this:\n  I = {}\n\ngoal (1 subgoal):\n 1. False", "using n1 P I"], ["proof (prove)\nusing this:\n  I = {}\n  n1 < length cl\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  I \\<in> P n1\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "}"], ["proof (state)\nthis:\n  ?II3\n  \\<in> local.shift cl n1 ` P n1 \\<inter>\n        local.shift cl n2 ` P n2 \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?II3\n  \\<in> local.shift cl n1 ` P n1 \\<inter>\n        local.shift cl n2 ` P n2 \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "by blast"], ["proof (state)\nthis:\n  local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_brn_disj3:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nand n1: \"n1 < length cl\" and n2: \"n2 < length cl\"\nand I1: \"I1 \\<in> P n1\" and I2: \"I2 \\<in> P n2\" and d: \"n1 \\<noteq> n2\"\nshows \"shift cl n1 I1 \\<inter> shift cl n2 I2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n1 I1 \\<inter> local.shift cl n2 I2 = {}", "apply(rule part_brn_disj1)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>n. n < length ?cl \\<Longrightarrow> part {..<brn (?cl ! n)} (?P n)\n 2. ?n1.0 < length ?cl\n 3. ?n2.0 < length ?cl\n 4. local.shift cl n1 I1 \\<in> local.shift ?cl ?n1.0 ` ?P ?n1.0\n 5. local.shift cl n2 I2 \\<in> local.shift ?cl ?n2.0 ` ?P ?n2.0\n 6. ?n1.0 \\<noteq> ?n2.0", "using assms"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n1)} (P ?n1)\n  n1 < length cl\n  n2 < length cl\n  I1 \\<in> P n1\n  I2 \\<in> P n2\n  n1 \\<noteq> n2\n\ngoal (6 subgoals):\n 1. \\<And>n. n < length ?cl \\<Longrightarrow> part {..<brn (?cl ! n)} (?P n)\n 2. ?n1.0 < length ?cl\n 3. ?n2.0 < length ?cl\n 4. local.shift cl n1 I1 \\<in> local.shift ?cl ?n1.0 ` ?P ?n1.0\n 5. local.shift cl n2 I2 \\<in> local.shift ?cl ?n2.0 ` ?P ?n2.0\n 6. ?n1.0 \\<noteq> ?n2.0", "by auto"], ["", "lemma sum_wt_Par_sub_shift[simp]:\nassumes cl: \"properL cl\" and n: \"n < length cl\" and\nI: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows\n\"sum (wt (Par cl) s) (shift cl n I) =\n 1 / (length cl) * sum (wt (cl ! n) s) I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) (local.shift cl n I) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I", "using assms sum_wt_Par_sub"], ["proof (prove)\nusing this:\n  properL cl\n  n < length cl\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; ?n < length ?cl;\n   ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (Par ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) =\n                    1 / real (length ?cl) * sum (wt (?cl ! ?n) ?s) ?I\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) (local.shift cl n I) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I", "unfolding shift_def"], ["proof (prove)\nusing this:\n  properL cl\n  n < length cl\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; ?n < length ?cl;\n   ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (Par ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) =\n                    1 / real (length ?cl) * sum (wt (?cl ! ?n) ?s) ?I\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) ((+) (brnL cl n) ` I) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I", "by simp"], ["", "lemma sum_wt_ParT_sub_WtFT_pickFT_0_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl = 1\"\nand I: \"I \\<subseteq> {..< brn (cl ! (pickFT cl))}\" \"0 \\<in> I\"\nshows\n\"sum (wt (ParT cl) s) (shift cl (pickFT cl) I) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl (pickFT cl) I) = 1", "using assms sum_wt_ParT_sub_WtFT_pickFT_0"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  I \\<subseteq> {..<brn (cl ! pickFT cl)}\n  0 \\<in> I\n  \\<lbrakk>properL ?cl; WtFT ?cl = 1;\n   ?I \\<subseteq> {..<brn (?cl ! pickFT ?cl)}; 0 \\<in> ?I\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s)\n                     ((+) (brnL ?cl (pickFT ?cl)) ` ?I) =\n                    1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl (pickFT cl) I) = 1", "unfolding shift_def"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  I \\<subseteq> {..<brn (cl ! pickFT cl)}\n  0 \\<in> I\n  \\<lbrakk>properL ?cl; WtFT ?cl = 1;\n   ?I \\<subseteq> {..<brn (?cl ! pickFT ?cl)}; 0 \\<in> ?I\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s)\n                     ((+) (brnL ?cl (pickFT ?cl)) ` ?I) =\n                    1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) ((+) (brnL cl (pickFT cl)) ` I) = 1", "by simp"], ["", "lemma sum_wt_ParT_sub_WtFT_notPickFT_0_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl = 1\" and n: \"n < length cl\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\" and nI: \"n = pickFT cl \\<longrightarrow> 0 \\<notin> I\"\nshows \"sum (wt (ParT cl) s) (shift cl n I) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) = 0", "using assms sum_wt_ParT_sub_WtFT_notPickFT_0"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  n < length cl\n  I \\<subseteq> {..<brn (cl ! n)}\n  n = pickFT cl \\<longrightarrow> 0 \\<notin> I\n  \\<lbrakk>properL ?cl; WtFT ?cl = 1; ?n < length ?cl;\n   ?I \\<subseteq> {..<brn (?cl ! ?n)};\n   ?n = pickFT ?cl \\<longrightarrow> 0 \\<notin> ?I\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) = 0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) = 0", "unfolding shift_def"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  n < length cl\n  I \\<subseteq> {..<brn (cl ! n)}\n  n = pickFT cl \\<longrightarrow> 0 \\<notin> I\n  \\<lbrakk>properL ?cl; WtFT ?cl = 1; ?n < length ?cl;\n   ?I \\<subseteq> {..<brn (?cl ! ?n)};\n   ?n = pickFT ?cl \\<longrightarrow> 0 \\<notin> ?I\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) = 0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) ((+) (brnL cl n) ` I) = 0", "by simp"], ["", "lemma sum_wt_ParT_sub_notWtFT_finished_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl \\<noteq> 1\" and n: \"n < length cl\" and cln: \"finished (cl!n)\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows \"sum (wt (ParT cl) s) (shift cl n I) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) = 0", "using assms sum_wt_ParT_sub_notWtFT_finished"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl \\<noteq> 1\n  n < length cl\n  finished (cl ! n)\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; WtFT ?cl \\<noteq> 1; ?n < length ?cl;\n   finished (?cl ! ?n); ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) = 0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) = 0", "unfolding shift_def"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl \\<noteq> 1\n  n < length cl\n  finished (cl ! n)\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; WtFT ?cl \\<noteq> 1; ?n < length ?cl;\n   finished (?cl ! ?n); ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) = 0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) ((+) (brnL cl n) ` I) = 0", "by simp"], ["", "lemma sum_wt_ParT_sub_notWtFT_notFinished_shift[simp]:\nassumes cl: \"properL cl\" and nf: \"WtFT cl \\<noteq> 1\"\nand n: \"n < length cl\" and cln: \"\\<not> finished (cl!n)\"\nand I: \"I \\<subseteq> {..< brn (cl ! n)}\"\nshows\n\"sum (wt (ParT cl) s) (shift cl n I) =\n (1 / (length cl)) / (1 - WtFT cl) * sum (wt (cl ! n) s) I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I", "using assms sum_wt_ParT_sub_notWtFT_notFinished"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl \\<noteq> 1\n  n < length cl\n  \\<not> finished (cl ! n)\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; WtFT ?cl \\<noteq> 1; ?n < length ?cl;\n   \\<not> finished (?cl ! ?n); ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) =\n                    1 / real (length ?cl) / (1 - WtFT ?cl) *\n                    sum (wt (?cl ! ?n) ?s) ?I\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I", "unfolding shift_def"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl \\<noteq> 1\n  n < length cl\n  \\<not> finished (cl ! n)\n  I \\<subseteq> {..<brn (cl ! n)}\n  \\<lbrakk>properL ?cl; WtFT ?cl \\<noteq> 1; ?n < length ?cl;\n   \\<not> finished (?cl ! ?n); ?I \\<subseteq> {..<brn (?cl ! ?n)}\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT ?cl) ?s) ((+) (brnL ?cl ?n) ` ?I) =\n                    1 / real (length ?cl) / (1 - WtFT ?cl) *\n                    sum (wt (?cl ! ?n) ?s) ?I\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) ((+) (brnL cl n) ` I) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I", "by simp"], ["", "(*  *)"], ["", "definition UNpart where\n\"UNpart cl P \\<equiv> \\<Union> n < length cl. shift cl n ` (P n)\""], ["", "lemma UNpart_cases[elim, consumes 1, case_names Local]:\nassumes \"II \\<in> UNpart cl P\" and\n\"\\<And> n I. \\<lbrakk>n < length cl; I \\<in> P n; II = shift cl n I\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi"], ["proof (prove)\ngoal (1 subgoal):\n 1. phi", "using assms"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1;\n   II = local.shift cl ?n1 ?I1\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "unfolding UNpart_def"], ["proof (prove)\nusing this:\n  II \\<in> (\\<Union>n<length cl. local.shift cl n ` P n)\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1;\n   II = local.shift cl ?n1 ?I1\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "by auto"], ["", "lemma emp_UNpart:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart cl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart cl P", "using assms"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart cl P", "unfolding UNpart_def"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. {} \\<notin> (\\<Union>n<length cl. local.shift cl n ` P n)", "by auto"], ["", "lemma part_UNpart:\nassumes cl: \"properL cl\" and\nP: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"part {..< brnL cl (length cl)} (UNpart cl P)\"\n(is \"part ?J ?Q\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "have J: \"?J = (\\<Union> n \\<in> {..< ?N}. {brnL cl n ..<+ brn (cl!n)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<brnL cl (length cl)} =\n    (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "using cl brnL_UN"], ["proof (prove)\nusing this:\n  properL cl\n  properL ?cl \\<Longrightarrow>\n  {..<brnL ?cl (length ?cl)} =\n  (\\<Union>n<length ?cl. {brnL ?cl n..<brnL ?cl n + brn (?cl ! n)})\n\ngoal (1 subgoal):\n 1. {..<brnL cl (length cl)} =\n    (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["proof (state)\nthis:\n  {..<brnL cl (length cl)} =\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "have Q: \"?Q = (\\<Union> n \\<in> {..< ?N}. shift cl n ` (P n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNpart cl P = (\\<Union>n<length cl. local.shift cl n ` P n)", "unfolding UNpart_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>n<length cl. local.shift cl n ` P n) =\n    (\\<Union>n<length cl. local.shift cl n ` P n)", "by auto"], ["proof (state)\nthis:\n  UNpart cl P = (\\<Union>n<length cl. local.shift cl n ` P n)\n\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "unfolding J Q"], ["proof (prove)\ngoal (1 subgoal):\n 1. part (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n     (\\<Union>n<length cl. local.shift cl n ` P n)", "apply(rule part_UN)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {..<length cl} \\<Longrightarrow>\n       part {brnL cl n..<brnL cl n + brn (cl ! n)} (local.shift cl n ` P n)\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> {..<length cl} \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} \\<inter>\n       {brnL cl n2..<brnL cl n2 + brn (cl ! n2)} =\n       {}", "using P brnL_Int"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n1)} (P ?n1)\n  \\<lbrakk>?n1.0 \\<noteq> ?n2.0; ?n1.0 < length ?cl;\n   ?n2.0 < length ?cl\\<rbrakk>\n  \\<Longrightarrow> {brnL ?cl\n                      ?n1.0..<brnL ?cl ?n1.0 + brn (?cl ! ?n1.0)} \\<inter>\n                    {brnL ?cl ?n2.0..<brnL ?cl ?n2.0 + brn (?cl ! ?n2.0)} =\n                    {}\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {..<length cl} \\<Longrightarrow>\n       part {brnL cl n..<brnL cl n + brn (cl ! n)} (local.shift cl n ` P n)\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> {..<length cl} \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} \\<inter>\n       {brnL cl n2..<brnL cl n2 + brn (cl ! n2)} =\n       {}", "by auto"], ["proof (state)\nthis:\n  part {..<brnL cl (length cl)} (UNpart cl P)\n\ngoal:\nNo subgoals!", "qed"], ["", "(*  *)"], ["", "definition pickT_pred where\n\"pickT_pred cl P II n \\<equiv> n < length cl \\<and> II \\<in> shift cl n ` (P n)\""], ["", "definition pickT where\n\"pickT cl P II \\<equiv> SOME n. pickT_pred cl P II n\""], ["", "lemma pickT_pred:\nassumes \"II \\<in> UNpart cl P\"\nshows \"\\<exists> n. pickT_pred cl P II n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n. pickT_pred cl P II n", "using assms"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. \\<exists>n. pickT_pred cl P II n", "unfolding UNpart_def pickT_pred_def"], ["proof (prove)\nusing this:\n  II \\<in> (\\<Union>n<length cl. local.shift cl n ` P n)\n\ngoal (1 subgoal):\n 1. \\<exists>n<length cl. II \\<in> local.shift cl n ` P n", "by auto"], ["", "lemma pickT_pred_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)  \\<and> {} \\<notin> P n\"\nand 1: \"pickT_pred cl P II n1\" and 2: \"pickT_pred cl P II n2\"\nshows \"n1 = n2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n1 = n2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. n1 = n2", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. n1 = n2", "assume \"n1 \\<noteq> n2\""], ["proof (state)\nthis:\n  n1 \\<noteq> n2\n\ngoal (1 subgoal):\n 1. n1 = n2", "hence \"shift cl n1 ` (P n1) \\<inter> shift cl n2 ` (P n2) = {}\""], ["proof (prove)\nusing this:\n  n1 \\<noteq> n2\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "using assms part_brn_disj2"], ["proof (prove)\nusing this:\n  n1 \\<noteq> n2\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  pickT_pred cl P II n1\n  pickT_pred cl P II n2\n  \\<lbrakk>\\<And>n.\n              n < length ?cl \\<Longrightarrow>\n              part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   ?n1.0 < length ?cl; ?n2.0 < length ?cl; ?n1.0 \\<noteq> ?n2.0\\<rbrakk>\n  \\<Longrightarrow> local.shift ?cl ?n1.0 ` ?P ?n1.0 \\<inter>\n                    local.shift ?cl ?n2.0 ` ?P ?n2.0 =\n                    {}\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "unfolding pickT_pred_def"], ["proof (prove)\nusing this:\n  n1 \\<noteq> n2\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n1 < length cl \\<and> II \\<in> local.shift cl n1 ` P n1\n  n2 < length cl \\<and> II \\<in> local.shift cl n2 ` P n2\n  \\<lbrakk>\\<And>n.\n              n < length ?cl \\<Longrightarrow>\n              part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   ?n1.0 < length ?cl; ?n2.0 < length ?cl; ?n1.0 \\<noteq> ?n2.0\\<rbrakk>\n  \\<Longrightarrow> local.shift ?cl ?n1.0 ` ?P ?n1.0 \\<inter>\n                    local.shift ?cl ?n2.0 ` ?P ?n2.0 =\n                    {}\n\ngoal (1 subgoal):\n 1. local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}", "by blast"], ["proof (state)\nthis:\n  local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}\n\ngoal (1 subgoal):\n 1. n1 = n2", "hence False"], ["proof (prove)\nusing this:\n  local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}\n\ngoal (1 subgoal):\n 1. False", "using 1 2"], ["proof (prove)\nusing this:\n  local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}\n  pickT_pred cl P II n1\n  pickT_pred cl P II n2\n\ngoal (1 subgoal):\n 1. False", "unfolding pickT_pred_def"], ["proof (prove)\nusing this:\n  local.shift cl n1 ` P n1 \\<inter> local.shift cl n2 ` P n2 = {}\n  n1 < length cl \\<and> II \\<in> local.shift cl n1 ` P n1\n  n2 < length cl \\<and> II \\<in> local.shift cl n2 ` P n2\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. n1 = n2", "}"], ["proof (state)\nthis:\n  n1 \\<noteq> n2 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. n1 = n2", "thus ?thesis"], ["proof (prove)\nusing this:\n  n1 \\<noteq> n2 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. n1 = n2", "by auto"], ["proof (state)\nthis:\n  n1 = n2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma pickT_pred_pickT:\nassumes \"II \\<in> UNpart cl P\"\nshows \"pickT_pred cl P II (pickT cl P II)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pickT_pred cl P II (pickT cl P II)", "unfolding pickT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. pickT_pred cl P II (SOME n. pickT_pred cl P II n)", "apply(rule someI_ex)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n. pickT_pred cl P II n", "using assms pickT_pred"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ?II \\<in> UNpart ?cl ?P \\<Longrightarrow>\n  \\<exists>n. pickT_pred ?cl ?P ?II n\n\ngoal (1 subgoal):\n 1. \\<exists>n. pickT_pred cl P II n", "by auto"], ["", "lemma pickT_pred_pickT_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand \"pickT_pred cl P II n\"\nshows \"n = pickT cl P II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n = pickT cl P II", "unfolding pickT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. n = (SOME n. pickT_pred cl P II n)", "apply(rule sym, rule some_equality)"], ["proof (prove)\ngoal (2 subgoals):\n 1. pickT_pred cl P II n\n 2. \\<And>na. pickT_pred cl P II na \\<Longrightarrow> na = n", "using assms pickT_pred_unique[of cl P II]"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  pickT_pred cl P II n\n  \\<lbrakk>\\<And>n.\n              n < length cl \\<Longrightarrow>\n              part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n   pickT_pred cl P II ?n1.0; pickT_pred cl P II ?n2.0\\<rbrakk>\n  \\<Longrightarrow> ?n1.0 = ?n2.0\n\ngoal (2 subgoals):\n 1. pickT_pred cl P II n\n 2. \\<And>na. pickT_pred cl P II na \\<Longrightarrow> na = n", "by auto"], ["", "lemma pickT_length[simp]:\nassumes \"II \\<in> UNpart cl P\"\nshows \"pickT cl P II < length cl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pickT cl P II < length cl", "using assms pickT_pred_pickT"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ?II \\<in> UNpart ?cl ?P \\<Longrightarrow>\n  pickT_pred ?cl ?P ?II (pickT ?cl ?P ?II)\n\ngoal (1 subgoal):\n 1. pickT cl P II < length cl", "unfolding pickT_pred_def"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ?II \\<in> UNpart ?cl ?P \\<Longrightarrow>\n  pickT ?cl ?P ?II < length ?cl \\<and>\n  ?II \\<in> local.shift ?cl (pickT ?cl ?P ?II) ` ?P (pickT ?cl ?P ?II)\n\ngoal (1 subgoal):\n 1. pickT cl P II < length cl", "by auto"], ["", "lemma pickT_shift[simp]:\nassumes \"II \\<in> UNpart cl P\"\nshows \"II \\<in> shift cl (pickT cl P II) ` (P (pickT cl P II))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II \\<in> local.shift cl (pickT cl P II) ` P (pickT cl P II)", "using assms pickT_pred_pickT"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ?II \\<in> UNpart ?cl ?P \\<Longrightarrow>\n  pickT_pred ?cl ?P ?II (pickT ?cl ?P ?II)\n\ngoal (1 subgoal):\n 1. II \\<in> local.shift cl (pickT cl P II) ` P (pickT cl P II)", "unfolding pickT_pred_def"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ?II \\<in> UNpart ?cl ?P \\<Longrightarrow>\n  pickT ?cl ?P ?II < length ?cl \\<and>\n  ?II \\<in> local.shift ?cl (pickT ?cl ?P ?II) ` ?P (pickT ?cl ?P ?II)\n\ngoal (1 subgoal):\n 1. II \\<in> local.shift cl (pickT cl P II) ` P (pickT cl P II)", "by auto"], ["", "lemma pickT_unique:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand \"n < length cl\" and \"II \\<in> shift cl n ` (P n)\"\nshows \"n = pickT cl P II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n = pickT cl P II", "using assms pickT_pred_pickT_unique"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  II \\<in> local.shift cl n ` P n\n  \\<lbrakk>\\<And>n.\n              n < length ?cl \\<Longrightarrow>\n              part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   pickT_pred ?cl ?P ?II ?n\\<rbrakk>\n  \\<Longrightarrow> ?n = pickT ?cl ?P ?II\n\ngoal (1 subgoal):\n 1. n = pickT cl P II", "unfolding pickT_pred_def"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  II \\<in> local.shift cl n ` P n\n  \\<lbrakk>\\<And>n.\n              n < length ?cl \\<Longrightarrow>\n              part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   ?n < length ?cl \\<and> ?II \\<in> local.shift ?cl ?n ` ?P ?n\\<rbrakk>\n  \\<Longrightarrow> ?n = pickT ?cl ?P ?II\n\ngoal (1 subgoal):\n 1. n = pickT cl P II", "by auto"], ["", "definition UNlift where\n\"UNlift cl dl P F II \\<equiv>\n shift dl (pickT cl P II) (F (pickT cl P II) (back cl (pickT cl P II) II))\""], ["", "lemma UNlift_shift[simp]:\nassumes P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n: \"n < length cl\" and I: \"I \\<in> P n\"\nshows \"UNlift cl dl P F (shift cl n I) = shift dl n (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "define II where \"II = shift cl n I\""], ["proof (state)\nthis:\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have II: \"shift cl n I = II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n I = II", "using II_def"], ["proof (prove)\nusing this:\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. local.shift cl n I = II", "by simp"], ["proof (state)\nthis:\n  local.shift cl n I = II\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have n: \"n = pickT cl P II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n = pickT cl P II", "apply(rule pickT_unique)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. II \\<in> local.shift cl n ` P n", "using assms"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  I \\<in> P n\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. II \\<in> local.shift cl n ` P n", "unfolding II_def"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  I \\<in> P n\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. local.shift cl n I \\<in> local.shift cl n ` P n", "by auto"], ["proof (state)\nthis:\n  n = pickT cl P II\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have \"back cl n II = I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n II = I", "unfolding II_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n (local.shift cl n I) = I", "by simp"], ["proof (state)\nthis:\n  back cl n II = I\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "hence \"shift dl n (F n (back cl n II)) = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  back cl n II = I\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "unfolding UNlift_def II n[THEN sym]"], ["proof (prove)\nusing this:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)", "."], ["proof (state)\nthis:\n  UNlift cl dl P F (local.shift cl n I) = local.shift dl n (F n I)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNlift_inj_on:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift cl dl P F) (UNpart cl P)\" (is \"inj_on ?G ?Q\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift cl dl P F) (UNpart cl P)", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>UNpart cl P.\n       \\<forall>y\\<in>UNpart cl P.\n          UNlift cl dl P F x = UNlift cl dl P F y \\<longrightarrow> x = y", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart cl P; y \\<in> UNpart cl P;\n        UNlift cl dl P F x = UNlift cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix II1 II2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart cl P; y \\<in> UNpart cl P;\n        UNlift cl dl P F x = UNlift cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume II1: \"II1 \\<in> ?Q\" and II2: \"II2 \\<in> ?Q\" and G: \"?G II1 = ?G II2\""], ["proof (state)\nthis:\n  II1 \\<in> UNpart cl P\n  II2 \\<in> UNpart cl P\n  UNlift cl dl P F II1 = UNlift cl dl P F II2\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart cl P; y \\<in> UNpart cl P;\n        UNlift cl dl P F x = UNlift cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "from II1"], ["proof (chain)\npicking this:\n  II1 \\<in> UNpart cl P", "show \"II1 = II2\""], ["proof (prove)\nusing this:\n  II1 \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. II1 = II2", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "case (Local n1 I1)"], ["proof (state)\nthis:\n  n1 < length cl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence n1: \"n1 < length cl\" \"n1 < length dl\" and I1: \"I1 \\<in> P n1\"\n    and II1: \"II1 = shift cl n1 I1\""], ["proof (prove)\nusing this:\n  n1 < length cl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. (n1 < length cl &&& n1 < length dl) &&&\n    I1 \\<in> P n1 &&& II1 = local.shift cl n1 I1", "using l"], ["proof (prove)\nusing this:\n  n1 < length cl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n1 < length cl &&& n1 < length dl) &&&\n    I1 \\<in> P n1 &&& II1 = local.shift cl n1 I1", "by auto"], ["proof (state)\nthis:\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G1_def: \"?G II1 = shift dl n1 (F n1 I1)\""], ["proof (prove)\nusing this:\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II1 = local.shift dl n1 (F n1 I1)", "using P"], ["proof (prove)\nusing this:\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II1 = local.shift dl n1 (F n1 I1)", "by simp"], ["proof (state)\nthis:\n  UNlift cl dl P F II1 = local.shift dl n1 (F n1 I1)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have Pn1: \"part {..< brn (dl!n1)} (F n1 ` (P n1))\" \"{} \\<notin> F n1 ` (P n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n1)} (F n1 ` P n1) &&& {} \\<notin> F n1 ` P n1", "using n1 FP"], ["proof (prove)\nusing this:\n  n1 < length cl\n  n1 < length dl\n  ?n1 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1) \\<and> {} \\<notin> F ?n1 ` P ?n1\n\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n1)} (F n1 ` P n1) &&& {} \\<notin> F n1 ` P n1", "by auto"], ["proof (state)\nthis:\n  part {..<brn (dl ! n1)} (F n1 ` P n1)\n  {} \\<notin> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have F1_in: \"F n1 I1 \\<in> F n1 ` (P n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n1 I1 \\<in> F n1 ` P n1", "using I1"], ["proof (prove)\nusing this:\n  I1 \\<in> P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<in> F n1 ` P n1", "by simp"], ["proof (state)\nthis:\n  F n1 I1 \\<in> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence Fn1I1: \"F n1 I1 \\<noteq> {}\" \"F n1 I1 \\<subseteq> {..< brn (dl!n1)}\""], ["proof (prove)\nusing this:\n  F n1 I1 \\<in> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<noteq> {} &&& F n1 I1 \\<subseteq> {..<brn (dl ! n1)}", "using Pn1"], ["proof (prove)\nusing this:\n  F n1 I1 \\<in> F n1 ` P n1\n  part {..<brn (dl ! n1)} (F n1 ` P n1)\n  {} \\<notin> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<noteq> {} &&& F n1 I1 \\<subseteq> {..<brn (dl ! n1)}", "by (blast, unfold part_def, blast)"], ["proof (state)\nthis:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G1: \"?G II1 \\<noteq> {}\" \"?G II1 \\<subseteq> {brnL dl n1 ..<+ brn (dl!n1)}\""], ["proof (prove)\nusing this:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II1 \\<noteq> {} &&&\n    UNlift cl dl P F II1\n    \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}", "unfolding G1_def"], ["proof (prove)\nusing this:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. local.shift dl n1 (F n1 I1) \\<noteq> {} &&&\n    local.shift dl n1 (F n1 I1)\n    \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}", "by simp_all"], ["proof (state)\nthis:\n  UNlift cl dl P F II1 \\<noteq> {}\n  UNlift cl dl P F II1 \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "from II2"], ["proof (chain)\npicking this:\n  II2 \\<in> UNpart cl P", "show ?thesis"], ["proof (prove)\nusing this:\n  II2 \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. II1 = II2", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "case (Local n2 I2)"], ["proof (state)\nthis:\n  n2 < length cl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence n2: \"n2 < length cl\" \"n2 < length dl\" and I2: \"I2 \\<in> P n2\"\n      and II2: \"II2 = shift cl n2 I2\""], ["proof (prove)\nusing this:\n  n2 < length cl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. (n2 < length cl &&& n2 < length dl) &&&\n    I2 \\<in> P n2 &&& II2 = local.shift cl n2 I2", "using l"], ["proof (prove)\nusing this:\n  n2 < length cl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n2 < length cl &&& n2 < length dl) &&&\n    I2 \\<in> P n2 &&& II2 = local.shift cl n2 I2", "by auto"], ["proof (state)\nthis:\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G2_def: \"?G II2 = shift dl n2 (F n2 I2)\""], ["proof (prove)\nusing this:\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II2 = local.shift dl n2 (F n2 I2)", "using P"], ["proof (prove)\nusing this:\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II2 = local.shift dl n2 (F n2 I2)", "by simp"], ["proof (state)\nthis:\n  UNlift cl dl P F II2 = local.shift dl n2 (F n2 I2)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have Pn2: \"part {..< brn (dl!n2)} (F n2 ` (P n2))\" \"{} \\<notin> F n2 ` (P n2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n2)} (F n2 ` P n2) &&& {} \\<notin> F n2 ` P n2", "using n2 FP"], ["proof (prove)\nusing this:\n  n2 < length cl\n  n2 < length dl\n  ?n1 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1) \\<and> {} \\<notin> F ?n1 ` P ?n1\n\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n2)} (F n2 ` P n2) &&& {} \\<notin> F n2 ` P n2", "by auto"], ["proof (state)\nthis:\n  part {..<brn (dl ! n2)} (F n2 ` P n2)\n  {} \\<notin> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have F2_in: \"F n2 I2 \\<in> F n2 ` (P n2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n2 I2 \\<in> F n2 ` P n2", "using I2"], ["proof (prove)\nusing this:\n  I2 \\<in> P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<in> F n2 ` P n2", "by simp"], ["proof (state)\nthis:\n  F n2 I2 \\<in> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence Fn2I2: \"F n2 I2 \\<noteq> {}\" \"F n2 I2 \\<subseteq> {..< brn (dl!n2)}\""], ["proof (prove)\nusing this:\n  F n2 I2 \\<in> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<noteq> {} &&& F n2 I2 \\<subseteq> {..<brn (dl ! n2)}", "using Pn2"], ["proof (prove)\nusing this:\n  F n2 I2 \\<in> F n2 ` P n2\n  part {..<brn (dl ! n2)} (F n2 ` P n2)\n  {} \\<notin> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<noteq> {} &&& F n2 I2 \\<subseteq> {..<brn (dl ! n2)}", "by (blast, unfold part_def, blast)"], ["proof (state)\nthis:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G2: \"?G II2 \\<noteq> {}\" \"?G II2 \\<subseteq> {brnL dl n2 ..<+ brn (dl!n2)}\""], ["proof (prove)\nusing this:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II2 \\<noteq> {} &&&\n    UNlift cl dl P F II2\n    \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}", "unfolding G2_def"], ["proof (prove)\nusing this:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. local.shift dl n2 (F n2 I2) \\<noteq> {} &&&\n    local.shift dl n2 (F n2 I2)\n    \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}", "by simp_all"], ["proof (state)\nthis:\n  UNlift cl dl P F II2 \\<noteq> {}\n  UNlift cl dl P F II2 \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "(*  *)"], ["proof (state)\nthis:\n  UNlift cl dl P F II2 \\<noteq> {}\n  UNlift cl dl P F II2 \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have n12: \"n1 = n2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n1 = n2", "using n1 n2 G1 G2 G brnL_Int"], ["proof (prove)\nusing this:\n  n1 < length cl\n  n1 < length dl\n  n2 < length cl\n  n2 < length dl\n  UNlift cl dl P F II1 \\<noteq> {}\n  UNlift cl dl P F II1 \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}\n  UNlift cl dl P F II2 \\<noteq> {}\n  UNlift cl dl P F II2 \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n  UNlift cl dl P F II1 = UNlift cl dl P F II2\n  \\<lbrakk>?n1.0 \\<noteq> ?n2.0; ?n1.0 < length ?cl;\n   ?n2.0 < length ?cl\\<rbrakk>\n  \\<Longrightarrow> {brnL ?cl\n                      ?n1.0..<brnL ?cl ?n1.0 + brn (?cl ! ?n1.0)} \\<inter>\n                    {brnL ?cl ?n2.0..<brnL ?cl ?n2.0 + brn (?cl ! ?n2.0)} =\n                    {}\n\ngoal (1 subgoal):\n 1. n1 = n2", "by blast"], ["proof (state)\nthis:\n  n1 = n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have \"F n1 I1 = F n2 I2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n1 I1 = F n2 I2", "using G"], ["proof (prove)\nusing this:\n  UNlift cl dl P F II1 = UNlift cl dl P F II2\n\ngoal (1 subgoal):\n 1. F n1 I1 = F n2 I2", "unfolding G1_def G2_def n12"], ["proof (prove)\nusing this:\n  local.shift dl n2 (F n2 I1) = local.shift dl n2 (F n2 I2)\n\ngoal (1 subgoal):\n 1. F n2 I1 = F n2 I2", "by simp"], ["proof (state)\nthis:\n  F n1 I1 = F n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence \"I1 = I2\""], ["proof (prove)\nusing this:\n  F n1 I1 = F n2 I2\n\ngoal (1 subgoal):\n 1. I1 = I2", "using I1 I2 n1 F"], ["proof (prove)\nusing this:\n  F n1 I1 = F n2 I2\n  I1 \\<in> P n1\n  I2 \\<in> P n2\n  n1 < length cl\n  n1 < length dl\n  ?n1 < length cl \\<Longrightarrow> inj_on (F ?n1) (P ?n1)\n\ngoal (1 subgoal):\n 1. I1 = I2", "unfolding n12 inj_on_def"], ["proof (prove)\nusing this:\n  F n2 I1 = F n2 I2\n  I1 \\<in> P n2\n  I2 \\<in> P n2\n  n2 < length cl\n  n2 < length dl\n  ?n1 < length cl \\<Longrightarrow>\n  \\<forall>x\\<in>P ?n1.\n     \\<forall>y\\<in>P ?n1. F ?n1 x = F ?n1 y \\<longrightarrow> x = y\n\ngoal (1 subgoal):\n 1. I1 = I2", "by simp"], ["proof (state)\nthis:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "thus ?thesis"], ["proof (prove)\nusing this:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. II1 = II2", "unfolding II1 II2 n12"], ["proof (prove)\nusing this:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. local.shift cl n2 I1 = local.shift cl n2 I2", "by simp"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNlift_UNpart:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift cl dl P F) ` (UNpart cl P) = UNpart dl (%n. F n ` (P n))\" (is \"?G ` ?Q = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift cl dl P F ` UNpart cl P = UNpart dl (\\<lambda>n. F n ` P n)", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart cl P \\<Longrightarrow>\n       UNlift cl dl P F xa \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "fix II"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart cl P \\<Longrightarrow>\n       UNlift cl dl P F xa \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "assume II: \"II \\<in> ?Q\""], ["proof (state)\nthis:\n  II \\<in> UNpart cl P\n\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart cl P \\<Longrightarrow>\n       UNlift cl dl P F xa \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "thus \"?G II \\<in> ?R\""], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift cl dl P F II\n                         \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "case (Local n I)"], ["proof (state)\nthis:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift cl dl P F II\n                         \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "hence n: \"n < length cl\" \"n < length dl\" and I: \"I \\<in> P n\"\n    and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l"], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift cl dl P F II\n                         \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "hence G: \"?G II = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II = local.shift dl n (F n I)", "using P"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  UNlift cl dl P F II = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift cl dl P F II\n                         \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift cl dl P F II \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "using n I"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F II \\<in> UNpart dl (\\<lambda>n. F n ` P n)", "unfolding G UNpart_def"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I)\n    \\<in> (\\<Union>n<length dl. local.shift dl n ` F n ` P n)", "by auto"], ["proof (state)\nthis:\n  UNlift cl dl P F II \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  UNlift cl dl P F II \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "fix JJ"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "assume JJ: \"JJ \\<in> ?R\""], ["proof (state)\nthis:\n  JJ \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart dl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift cl dl P F ` UNpart cl P", "thus \"JJ \\<in> ?G ` ?Q\""], ["proof (prove)\nusing this:\n  JJ \\<in> UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift cl dl P F ` UNpart cl P", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "case (Local n J)"], ["proof (state)\nthis:\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "hence n: \"n < length cl\" \"n < length dl\" and J: \"J \\<in> F n ` (P n)\"\n    and JJ: \"JJ = shift dl n J\""], ["proof (prove)\nusing this:\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    J \\<in> F n ` P n &&& JJ = local.shift dl n J", "using l"], ["proof (prove)\nusing this:\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    J \\<in> F n ` P n &&& JJ = local.shift dl n J", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "then"], ["proof (chain)\npicking this:\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J", "obtain I where I: \"I \\<in> P n\" and \"J = F n I\""], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P n; J = F n I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I \\<in> P n\n  J = F n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "hence \"JJ = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  I \\<in> P n\n  J = F n I\n\ngoal (1 subgoal):\n 1. JJ = local.shift dl n (F n I)", "using JJ"], ["proof (prove)\nusing this:\n  I \\<in> P n\n  J = F n I\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. JJ = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  JJ = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "also"], ["proof (state)\nthis:\n  JJ = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "have \"... = UNlift cl dl P F (shift cl n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) = UNlift cl dl P F (local.shift cl n I)", "using n I P"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) = UNlift cl dl P F (local.shift cl n I)", "by simp"], ["proof (state)\nthis:\n  local.shift dl n (F n I) = UNlift cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "finally"], ["proof (chain)\npicking this:\n  JJ = UNlift cl dl P F (local.shift cl n I)", "have JJ: \"JJ = UNlift cl dl P F (shift cl n I)\""], ["proof (prove)\nusing this:\n  JJ = UNlift cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. JJ = UNlift cl dl P F (local.shift cl n I)", "."], ["proof (state)\nthis:\n  JJ = UNlift cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length dl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift cl dl P F ` UNpart cl P", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift cl dl P F ` UNpart cl P", "using n I"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift cl dl P F ` UNpart cl P", "unfolding JJ UNpart_def"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. UNlift cl dl P F (local.shift cl n I)\n    \\<in> UNlift cl dl P F ` (\\<Union>n<length cl. local.shift cl n ` P n)", "by auto"], ["proof (state)\nthis:\n  JJ \\<in> UNlift cl dl P F ` UNpart cl P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  JJ \\<in> UNlift cl dl P F ` UNpart cl P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma emp_UNlift_UNpart:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift cl dl P F) ` (UNpart cl P)\" (is \"{} \\<notin> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift cl dl P F ` UNpart cl P", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift cl dl P F ` UNpart cl P", "have R: \"?R = UNpart dl (%n. F n ` (P n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift cl dl P F ` UNpart cl P = UNpart dl (\\<lambda>n. F n ` P n)", "apply(rule UNlift_UNpart)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  ?n1 < length dl \\<Longrightarrow> {} \\<notin> F ?n1 ` P ?n1\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  UNlift cl dl P F ` UNpart cl P = UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift cl dl P F ` UNpart cl P", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift cl dl P F ` UNpart cl P", "unfolding R"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart dl (\\<lambda>n. F n ` P n)", "apply(rule emp_UNpart)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "using FP"], ["proof (prove)\nusing this:\n  ?n1 < length dl \\<Longrightarrow> {} \\<notin> F ?n1 ` P ?n1\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "by simp"], ["proof (state)\nthis:\n  {} \\<notin> UNlift cl dl P F ` UNpart cl P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_UNlift_UNpart:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nshows \"part {..< brnL dl (length dl)} ((UNlift cl dl P F) ` (UNpart cl P))\" (is \"part ?C ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)", "have R: \"?R = UNpart dl (%n. F n ` (P n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift cl dl P F ` UNpart cl P = UNpart dl (\\<lambda>n. F n ` P n)", "apply(rule UNlift_UNpart)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL dl\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  UNlift cl dl P F ` UNpart cl P = UNpart dl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)", "unfolding R"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNpart dl (\\<lambda>n. F n ` P n))", "apply(rule part_UNpart)"], ["proof (prove)\ngoal (2 subgoals):\n 1. properL dl\n 2. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "using dl FP"], ["proof (prove)\nusing this:\n  properL dl\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n\ngoal (2 subgoals):\n 1. properL dl\n 2. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "by auto"], ["proof (state)\nthis:\n  part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ss_wt_Par_UNlift:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" and II: \"II \\<in> UNpart cl P\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand sw:\n\"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) s) I =\n     sum (wt (dl ! n) t) (F n I)\"\nand st: \"s \\<approx> t\"\nshows\n\"sum (wt (Par cl) s) II =\n sum (wt (Par dl) t) (UNlift cl dl P F II)\" (is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "let ?p = \"%n. 1 / ?N\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "let ?q = \"%n. 1 / (length dl)\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st"], ["proof (prove)\nusing this:\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n5 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "have pq: \"\\<And> n. n < ?N \\<Longrightarrow> ?p n = ?q n\" and sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "using assms l"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  II \\<in> UNpart cl P\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n1) s) ?I1 =\n                    sum (wt (dl ! ?n1) t) (F ?n1 ?I1)\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "by auto"], ["proof (state)\nthis:\n  ?n5 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  ?n5 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "from II"], ["proof (chain)\npicking this:\n  II \\<in> UNpart cl P", "show ?thesis"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "case (Local n I)"], ["proof (state)\nthis:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "hence n: \"n < ?N\" \"n < length dl\" and I: \"I \\<in> P n\"\n    and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l"], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "have I_sub: \"I \\<subseteq> {..< brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "using n I P"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  ?n1 < length cl \\<Longrightarrow>\n  (\\<Union> (P ?n1) = {..<brn (cl ! ?n1)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> P ?n1 \\<and>\n       J2 \\<in> P ?n1 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "by blast"], ["proof (state)\nthis:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "hence FnI_sub: \"F n I \\<subseteq> {..< brn (dl!n)}\""], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "using n I FP"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  ?n1 < length dl \\<Longrightarrow>\n  \\<Union> (F ?n1 ` P ?n1) = {..<brn (dl ! ?n1)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> F ?n1 ` P ?n1 \\<and>\n      J2 \\<in> F ?n1 ` P ?n1 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "by blast"], ["proof (state)\nthis:\n  F n I \\<subseteq> {..<brn (dl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "have \"?L = (?p n) * sum (wt (cl ! n) (?ss n)) I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = 1 / real (length cl) * sum (wt (cl ! n) s) I", "unfolding II"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) (local.shift cl n I) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I", "using n cldl I_sub"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  properL cl\n  properL dl\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) (local.shift cl n I) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I", "by simp"], ["proof (state)\nthis:\n  sum (wt (Par cl) s) II = 1 / real (length cl) * sum (wt (cl ! n) s) I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "also"], ["proof (state)\nthis:\n  sum (wt (Par cl) s) II = 1 / real (length cl) * sum (wt (cl ! n) s) I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "have \"... = (?q n) * sum (wt (dl ! n) (?tt n)) (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length cl) * sum (wt (cl ! n) s) I =\n    1 / real (length dl) * sum (wt (dl ! n) t) (F n I)", "using n pq"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  ?n5 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n\ngoal (1 subgoal):\n 1. 1 / real (length cl) * sum (wt (cl ! n) s) I =\n    1 / real (length dl) * sum (wt (dl ! n) t) (F n I)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n < length cl;\n     \\<And>n. n < length cl \\<Longrightarrow> length cl = length dl\\<rbrakk>\n    \\<Longrightarrow> cl = [] \\<or>\n                      sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "using I sw[of n I]"], ["proof (prove)\nusing this:\n  I \\<in> P n\n  \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n < length cl;\n     \\<And>n. n < length cl \\<Longrightarrow> length cl = length dl\\<rbrakk>\n    \\<Longrightarrow> cl = [] \\<or>\n                      sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "unfolding l"], ["proof (prove)\nusing this:\n  I \\<in> P n\n  \\<lbrakk>n < length dl; I \\<in> P n\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n < length dl;\n     \\<And>n. n < length dl \\<Longrightarrow> length dl = length dl\\<rbrakk>\n    \\<Longrightarrow> cl = [] \\<or>\n                      sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "by auto"], ["proof (state)\nthis:\n  1 / real (length cl) * sum (wt (cl ! n) s) I =\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "also"], ["proof (state)\nthis:\n  1 / real (length cl) * sum (wt (cl ! n) s) I =\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "have \"... = ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length dl) * sum (wt (dl ! n) t) (F n I) =\n    sum (wt (Par dl) t) (UNlift cl dl P F II)", "unfolding II"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length dl) * sum (wt (dl ! n) t) (F n I) =\n    sum (wt (Par dl) t) (UNlift cl dl P F (local.shift cl n I))", "using l cldl n FnI_sub P I"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  n < length cl\n  n < length dl\n  F n I \\<subseteq> {..<brn (dl ! n)}\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. 1 / real (length dl) * sum (wt (dl ! n) t) (F n I) =\n    sum (wt (Par dl) t) (UNlift cl dl P F (local.shift cl n I))", "by simp"], ["proof (state)\nthis:\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I) =\n  sum (wt (Par dl) t) (UNlift cl dl P F II)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (Par cl) s) II =\n                         sum (wt (Par dl) t) (UNlift cl dl P F II)", "finally"], ["proof (chain)\npicking this:\n  sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "show ?thesis"], ["proof (prove)\nusing this:\n  sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)", "."], ["proof (state)\nthis:\n  sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum (wt (Par cl) s) II = sum (wt (Par dl) t) (UNlift cl dl P F II)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* *)"], ["", "definition thetaSPar where\n\"thetaSPar \\<equiv>\n {(Par cl, Par dl) |\n    cl dl. properL cl \\<and> properL dl \\<and> SbisL cl dl}\""], ["", "lemma cont_eff_Par_UNlift:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand II: \"II \\<in> UNpart cl P\" and ii: \"ii \\<in> II\" and jj: \"jj \\<in> UNlift cl dl P F II\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nand st: \"s \\<approx> t\"\nshows\n\"eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n (cont (Par cl) s ii, cont (Par dl) t jj) \\<in> thetaSPar\"\n(is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "let ?p = \"%n. 1/?N\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "let ?q = \"%n. 1/(length dl)\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st l"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n5 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "have pq: \"\\<And> n. n < ?N \\<Longrightarrow> ?p n = ?q n\" and sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "using assms l"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  II \\<in> UNpart cl P\n  ii \\<in> II\n  jj \\<in> UNlift cl dl P F II\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1; ?i1 \\<in> ?I1;\n   ?j1 \\<in> F ?n1 ?I1\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n1) s ?i1 \\<approx>\n                    eff (dl ! ?n1) t ?j1 \\<and>\n                    local.cont (cl ! ?n1) s ?i1 \\<approx>s\n                    local.cont (dl ! ?n1) t ?j1\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "by auto"], ["proof (state)\nthis:\n  ?n5 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  ?n5 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "from II"], ["proof (chain)\npicking this:\n  II \\<in> UNpart cl P", "show ?thesis"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "proof(cases rule: UNpart_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "case (Local n I)"], ["proof (state)\nthis:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "hence n: \"n < length cl\" \"n < length dl\" and I: \"I \\<in> P n\"\n    and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l"], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "from ii II"], ["proof (chain)\npicking this:\n  ii \\<in> II\n  II = local.shift cl n I", "obtain i where i: \"i \\<in> I\" and ii: \"ii = brnL cl n + i\""], ["proof (prove)\nusing this:\n  ii \\<in> II\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i \\<in> I; ii = brnL cl n + i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding shift_def"], ["proof (prove)\nusing this:\n  ii \\<in> II\n  II = (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i \\<in> I; ii = brnL cl n + i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i \\<in> I\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "have \"i < brn (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "using i I n P"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "unfolding part_def"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  ?n1 < length cl \\<Longrightarrow>\n  (\\<Union> (P ?n1) = {..<brn (cl ! ?n1)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> P ?n1 \\<and>\n       J2 \\<in> P ?n1 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  {} \\<notin> P ?n1\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "by blast"], ["proof (state)\nthis:\n  i < brn (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "note i = this i"], ["proof (state)\nthis:\n  i < brn (cl ! n)\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "have jj: \"jj \\<in> shift dl n (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "using jj P n I"], ["proof (prove)\nusing this:\n  jj \\<in> UNlift cl dl P F II\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "unfolding II"], ["proof (prove)\nusing this:\n  jj \\<in> UNlift cl dl P F (local.shift cl n I)\n  ?n1 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n1)} (P ?n1) \\<and> {} \\<notin> P ?n1\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  jj \\<in> local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "from jj II"], ["proof (chain)\npicking this:\n  jj \\<in> local.shift dl n (F n I)\n  II = local.shift cl n I", "obtain j where j: \"j \\<in> F n I\" and jj: \"jj = brnL dl n + j\""], ["proof (prove)\nusing this:\n  jj \\<in> local.shift dl n (F n I)\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> F n I; jj = brnL dl n + j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding shift_def"], ["proof (prove)\nusing this:\n  jj \\<in> (+) (brnL dl n) ` F n I\n  II = (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> F n I; jj = brnL dl n + j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  j \\<in> F n I\n  jj = brnL dl n + j\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "have \"j < brn (dl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "using j I n FP"], ["proof (prove)\nusing this:\n  j \\<in> F n I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  ?n1 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n1)} (F ?n1 ` P ?n1)\n\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "unfolding part_def"], ["proof (prove)\nusing this:\n  j \\<in> F n I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  ?n1 < length dl \\<Longrightarrow>\n  \\<Union> (F ?n1 ` P ?n1) = {..<brn (dl ! ?n1)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> F ?n1 ` P ?n1 \\<and>\n      J2 \\<in> F ?n1 ` P ?n1 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "by blast"], ["proof (state)\nthis:\n  j < brn (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "note j = this j"], ["proof (state)\nthis:\n  j < brn (dl ! n)\n  j \\<in> F n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n; II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (Par cl) s ii \\<approx>\n                         eff (Par dl) t jj \\<and>\n                         (local.cont (Par cl) s ii,\n                          local.cont (Par dl) t jj)\n                         \\<in> thetaSPar", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj\n 2. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "have \"eff (cl!n) (?ss n) i \\<approx> eff (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (cl ! n) s i \\<approx> eff (dl ! n) t j", "using n I i j eff_cont"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1; ?i1 \\<in> ?I1;\n   ?j1 \\<in> F ?n1 ?I1\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n1) s ?i1 \\<approx>\n                    eff (dl ! ?n1) t ?j1 \\<and>\n                    local.cont (cl ! ?n1) s ?i1 \\<approx>s\n                    local.cont (dl ! ?n1) t ?j1\n\ngoal (1 subgoal):\n 1. eff (cl ! n) s i \\<approx> eff (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (2 subgoals):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj\n 2. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "thus ?eff"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj", "unfolding ii jj"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (1 subgoal):\n 1. eff (Par cl) s (brnL cl n + i) \\<approx> eff (Par dl) t (brnL dl n + j)", "using st cldl n i j"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n  s \\<approx> t\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n\ngoal (1 subgoal):\n 1. eff (Par cl) s (brnL cl n + i) \\<approx> eff (Par dl) t (brnL dl n + j)", "by simp"], ["proof (state)\nthis:\n  eff (Par cl) s ii \\<approx> eff (Par dl) t jj\n\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "have \"cont (cl!n) (?ss n) i \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "using n I i j eff_cont"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  \\<lbrakk>?n1 < length cl; ?I1 \\<in> P ?n1; ?i1 \\<in> ?I1;\n   ?j1 \\<in> F ?n1 ?I1\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n1) s ?i1 \\<approx>\n                    eff (dl ! ?n1) t ?j1 \\<and>\n                    local.cont (cl ! ?n1) s ?i1 \\<approx>s\n                    local.cont (dl ! ?n1) t ?j1\n\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "thus ?cont"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "unfolding ii jj thetaSPar_def"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s (brnL cl n + i),\n     local.cont (Par dl) t (brnL dl n + j))\n    \\<in> {(Par cl, Par dl) |cl dl.\n           properL cl \\<and> properL dl \\<and> SbisL cl dl}", "using n i j l cldl"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n  n < length cl\n  n < length dl\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (local.cont (Par cl) s (brnL cl n + i),\n     local.cont (Par dl) t (brnL dl n + j))\n    \\<in> {(Par cl, Par dl) |cl dl.\n           properL cl \\<and> properL dl \\<and> SbisL cl dl}", "by simp"], ["proof (state)\nthis:\n  (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n  (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n  (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSPar_Sretr: \"thetaSPar \\<subseteq> Sretr (thetaSPar)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSPar \\<subseteq> Sretr thetaSPar", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSPar\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F. mC_C thetaSPar c d s t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "assume c_d: \"(c, d) \\<in> thetaSPar\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaSPar\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaSPar\n  s \\<approx> t", "obtain cl dl where\n  c: \"c = Par cl\" and d: \"d = Par dl\" and\n  cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaSPar\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl dl.\n        \\<lbrakk>c = Par cl; d = Par dl; properL cl; properL dl;\n         SbisL cl dl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaSPar_def"], ["proof (prove)\nusing this:\n  (c, d)\n  \\<in> {(Par cl, Par dl) |cl dl.\n         properL cl \\<and> properL dl \\<and> SbisL cl dl}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl dl.\n        \\<lbrakk>c = Par cl; d = Par dl; properL cl; properL dl;\n         SbisL cl dl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  c = Par cl\n  d = Par dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have N: \"?N = length dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length cl = length dl", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. length cl = length dl", "by simp"], ["proof (state)\nthis:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st N"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "let ?phi = \"%n PFn. mC_C Sbis (cl ! n) (dl ! n) (?ss n) (?tt n) (fst PFn) (snd PFn)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "assume n: \"n < ?N\""], ["proof (state)\nthis:\n  n < length cl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "hence \"cl ! n \\<approx>s dl ! n\""], ["proof (prove)\nusing this:\n  n < length cl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "using cldl"], ["proof (prove)\nusing this:\n  n < length cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "by auto"], ["proof (state)\nthis:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "hence \"\\<exists> PFn. ?phi n PFn\""], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)", "using n Sbis_mC_C sstt"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n  n < length cl\n  \\<lbrakk>?c \\<approx>s ?d; ?s \\<approx> ?t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P F. mC_C Sbis ?c ?d ?s ?t P F\n  ?n3 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "}"], ["proof (state)\nthis:\n  ?n5 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n5) (dl ! ?n5) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "then"], ["proof (chain)\npicking this:\n  ?n5 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n5) (dl ! ?n5) s t (fst PFn) (snd PFn)", "obtain PF where phi: \"\\<And>n. n < ?N \\<Longrightarrow> ?phi n (PF n)\""], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n5) (dl ! ?n5) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. (\\<And>PF.\n        (\\<And>n.\n            n < length cl \\<Longrightarrow>\n            mC_C Sbis (cl ! n) (dl ! n) s t (fst (PF n))\n             (snd (PF n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using bchoice[of \"{..< ?N}\" ?phi]"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n5) (dl ! ?n5) s t (fst PFn) (snd PFn)\n  \\<forall>x\\<in>{..<length cl}.\n     \\<exists>y.\n        mC_C Sbis (cl ! x) (dl ! x) s t (fst y) (snd y) \\<Longrightarrow>\n  \\<exists>f.\n     \\<forall>x\\<in>{..<length cl}.\n        mC_C Sbis (cl ! x) (dl ! x) s t (fst (f x)) (snd (f x))\n\ngoal (1 subgoal):\n 1. (\\<And>PF.\n        (\\<And>n.\n            n < length cl \\<Longrightarrow>\n            mC_C Sbis (cl ! n) (dl ! n) s t (fst (PF n))\n             (snd (PF n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (fst (PF ?n3)) (snd (PF ?n3))\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "define P F where \"P = fst o PF\" and \"F = snd o PF\""], ["proof (state)\nthis:\n  P = fst \\<circ> PF\n  F = snd \\<circ> PF\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have m: \"\\<And>n. n < ?N \\<Longrightarrow> mC_C Sbis (cl ! n) (dl ! n) (?ss n) (?tt n) (P n) (F n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t (P n) (F n)", "using phi"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (fst (PF ?n3)) (snd (PF ?n3))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t (P n) (F n)", "unfolding P_def F_def"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (fst (PF ?n3)) (snd (PF ?n3))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t ((fst \\<circ> PF) n)\n        ((snd \\<circ> PF) n)", "by auto"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "(*  *)"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have brn_c: \"brn c = brnL cl ?N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brn c = brnL cl (length cl)", "unfolding c"], ["proof (prove)\ngoal (1 subgoal):\n 1. brn (Par cl) = brnL cl (length cl)", "by simp"], ["proof (state)\nthis:\n  brn c = brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have brn_d: \"brn d = brnL dl (length dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brn d = brnL dl (length dl)", "unfolding d"], ["proof (prove)\ngoal (1 subgoal):\n 1. brn (Par dl) = brnL dl (length dl)", "by simp"], ["proof (state)\nthis:\n  brn d = brnL dl (length dl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have P: \"\\<And>n. n < ?N \\<Longrightarrow> part {..< brn (cl ! n)} (P n) \\<and> {} \\<notin> (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using m"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "unfolding m_defsAll part_def"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n3 \\<and>\n   {} \\<notin> F ?n3 ` P ?n3 \\<and>\n   (\\<Union> (P ?n3) = {..<brn (cl ! ?n3)} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P ?n3 \\<and>\n        J2 \\<in> P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ?n3 ` P ?n3) = {..<brn (dl ! ?n3)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ?n3 ` P ?n3 \\<and>\n       J2 \\<in> F ?n3 ` P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on (F ?n3) (P ?n3) \\<and>\n  (\\<forall>I\\<in>P ?n3.\n      sum (wt (cl ! ?n3) s) I = sum (wt (dl ! ?n3) t) (F ?n3 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n3 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n3 I \\<longrightarrow>\n      eff (cl ! ?n3) s i \\<approx> eff (dl ! ?n3) t j \\<and>\n      local.cont (cl ! ?n3) s i \\<approx>s local.cont (dl ! ?n3) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       (\\<Union> (P n) = {..<brn (cl ! n)} \\<and>\n        (\\<forall>J1 J2.\n            J1 \\<in> P n \\<and>\n            J2 \\<in> P n \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n            J1 \\<inter> J2 = {})) \\<and>\n       {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have FP: \"\\<And>n. n < length dl \\<Longrightarrow> part {..< brn (dl ! n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "using m N"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "unfolding m_defsAll part_def"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n3 \\<and>\n   {} \\<notin> F ?n3 ` P ?n3 \\<and>\n   (\\<Union> (P ?n3) = {..<brn (cl ! ?n3)} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P ?n3 \\<and>\n        J2 \\<in> P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ?n3 ` P ?n3) = {..<brn (dl ! ?n3)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ?n3 ` P ?n3 \\<and>\n       J2 \\<in> F ?n3 ` P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on (F ?n3) (P ?n3) \\<and>\n  (\\<forall>I\\<in>P ?n3.\n      sum (wt (cl ! ?n3) s) I = sum (wt (dl ! ?n3) t) (F ?n3 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n3 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n3 I \\<longrightarrow>\n      eff (cl ! ?n3) s i \\<approx> eff (dl ! ?n3) t j \\<and>\n      local.cont (cl ! ?n3) s i \\<approx>s local.cont (dl ! ?n3) t j)\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       (\\<Union> (F n ` P n) = {..<brn (dl ! n)} \\<and>\n        (\\<forall>J1 J2.\n            J1 \\<in> F n ` P n \\<and>\n            J2 \\<in> F n ` P n \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n            J1 \\<inter> J2 = {})) \\<and>\n       {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have F: \"\\<And>n. n < ?N \\<Longrightarrow> inj_on (F n) (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "using m"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "unfolding m_defsAll"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n3 \\<and>\n   {} \\<notin> F ?n3 ` P ?n3 \\<and>\n   part {..<brn (cl ! ?n3)} (P ?n3) \\<and>\n   part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3)) \\<and>\n  inj_on (F ?n3) (P ?n3) \\<and>\n  (\\<forall>I\\<in>P ?n3.\n      sum (wt (cl ! ?n3) s) I = sum (wt (dl ! ?n3) t) (F ?n3 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n3 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n3 I \\<longrightarrow>\n      eff (cl ! ?n3) s i \\<approx> eff (dl ! ?n3) t j \\<and>\n      local.cont (cl ! ?n3) s i \\<approx>s local.cont (dl ! ?n3) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "by auto"], ["proof (state)\nthis:\n  ?n3 < length cl \\<Longrightarrow> inj_on (F ?n3) (P ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have sw: \"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) (?ss n)) I = sum (wt (dl ! n) (?tt n)) (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "using m"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "unfolding mC_C_def mC_C_wt_def"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C_part (cl ! ?n3) (dl ! ?n3) (P ?n3) (F ?n3) \\<and>\n  inj_on (F ?n3) (P ?n3) \\<and>\n  (\\<forall>I\\<in>P ?n3.\n      sum (wt (cl ! ?n3) s) I = sum (wt (dl ! ?n3) t) (F ?n3 I)) \\<and>\n  mC_C_eff_cont Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?n3 < length cl; ?I3 \\<in> P ?n3\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n3) s) ?I3 =\n                    sum (wt (dl ! ?n3) t) (F ?n3 ?I3)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "have eff_cont: \"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n     eff (cl!n) (?ss n) i \\<approx> eff (dl!n) (?tt n) j \\<and>\n     cont (cl!n) (?ss n) i \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "using m"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3)\n\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "unfolding mC_C_def mC_C_eff_cont_def"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  mC_C_part (cl ! ?n3) (dl ! ?n3) (P ?n3) (F ?n3) \\<and>\n  inj_on (F ?n3) (P ?n3) \\<and>\n  mC_C_wt (cl ! ?n3) (dl ! ?n3) s t (P ?n3) (F ?n3) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n3 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n3 I \\<longrightarrow>\n      eff (cl ! ?n3) s i \\<approx> eff (dl ! ?n3) t j \\<and>\n      local.cont (cl ! ?n3) s i \\<approx>s local.cont (dl ! ?n3) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?n3 < length cl; ?I3 \\<in> P ?n3; ?i3 \\<in> ?I3;\n   ?j3 \\<in> F ?n3 ?I3\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n3) s ?i3 \\<approx>\n                    eff (dl ! ?n3) t ?j3 \\<and>\n                    local.cont (cl ! ?n3) s ?i3 \\<approx>s\n                    local.cont (dl ! ?n3) t ?j3\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "(*  *)"], ["proof (state)\nthis:\n  \\<lbrakk>?n3 < length cl; ?I3 \\<in> P ?n3; ?i3 \\<in> ?I3;\n   ?j3 \\<in> F ?n3 ?I3\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n3) s ?i3 \\<approx>\n                    eff (dl ! ?n3) t ?j3 \\<and>\n                    local.cont (cl ! ?n3) s ?i3 \\<approx>s\n                    local.cont (dl ! ?n3) t ?j3\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "define Q G where \"Q = UNpart cl P\" and \"G = UNlift cl dl P F\""], ["proof (state)\nthis:\n  Q = UNpart cl P\n  G = UNlift cl dl P F\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "note defi = Q_def G_def brn_c brn_d"], ["proof (state)\nthis:\n  Q = UNpart cl P\n  G = UNlift cl dl P F\n  brn c = brnL cl (length cl)\n  brn d = brnL dl (length dl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaSPar; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P. Ex (mC_C thetaSPar a b s t P)", "show \"\\<exists>Q G. mC_C (thetaSPar) c d s t Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Q G. mC_C thetaSPar c d s t Q G", "apply(rule exI[of _ Q])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>G. mC_C thetaSPar c d s t Q G", "apply(rule exI[of _ G])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C thetaSPar c d s t Q G", "unfolding mC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d Q G \\<and>\n    inj_on G Q \\<and>\n    mC_C_wt c d s t Q G \\<and> mC_C_eff_cont thetaSPar c d s t Q G", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. mC_C_part c d Q G\n 2. inj_on G Q\n 3. mC_C_wt c d s t Q G\n 4. mC_C_eff_cont thetaSPar c d s t Q G", "show \"mC_C_part c d Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_part c d Q G", "unfolding mC_C_part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> Q \\<and>\n    {} \\<notin> G ` Q \\<and>\n    part {..<brn c} Q \\<and> part {..<brn d} (G ` Q)", "proof(intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. {} \\<notin> Q\n 2. {} \\<notin> G ` Q\n 3. part {..<brn c} Q\n 4. part {..<brn d} (G ` Q)", "show \"{} \\<notin> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart cl P", "apply(rule emp_UNpart)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> {} \\<notin> P n", "using P"], ["proof (prove)\nusing this:\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> {} \\<notin> P n", "by simp"], ["proof (state)\nthis:\n  {} \\<notin> Q\n\ngoal (3 subgoals):\n 1. {} \\<notin> G ` Q\n 2. part {..<brn c} Q\n 3. part {..<brn d} (G ` Q)", "show \"{} \\<notin> G ` Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> G ` Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift cl dl P F ` UNpart cl P", "apply(rule emp_UNlift_UNpart)"], ["proof (prove)\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "using N P FP"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  {} \\<notin> G ` Q\n\ngoal (2 subgoals):\n 1. part {..<brn c} Q\n 2. part {..<brn d} (G ` Q)", "show \"part {..<brn c} Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn c} Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart cl P)", "apply(rule part_UNpart)"], ["proof (prove)\ngoal (2 subgoals):\n 1. properL cl\n 2. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (P n)", "using cldl P"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n\ngoal (2 subgoals):\n 1. properL cl\n 2. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (P n)", "by auto"], ["proof (state)\nthis:\n  part {..<brn c} Q\n\ngoal (1 subgoal):\n 1. part {..<brn d} (G ` Q)", "show \"part {..<brn d} (G ` Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn d} (G ` Q)", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift cl dl P F ` UNpart cl P)", "apply(rule part_UNlift_UNpart)"], ["proof (prove)\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. properL dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 4. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "using N cldl P FP"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. properL dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 4. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "by auto"], ["proof (state)\nthis:\n  part {..<brn d} (G ` Q)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_part c d Q G\n\ngoal (3 subgoals):\n 1. inj_on G Q\n 2. mC_C_wt c d s t Q G\n 3. mC_C_eff_cont thetaSPar c d s t Q G", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on G Q\n 2. mC_C_wt c d s t Q G\n 3. mC_C_eff_cont thetaSPar c d s t Q G", "show \"inj_on G Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on G Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift cl dl P F) (UNpart cl P)", "apply(rule UNlift_inj_on)"], ["proof (prove)\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "using N P FP F"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n  ?n3 < length cl \\<Longrightarrow> inj_on (F ?n3) (P ?n3)\n\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "by auto"], ["proof (state)\nthis:\n  inj_on G Q\n\ngoal (2 subgoals):\n 1. mC_C_wt c d s t Q G\n 2. mC_C_eff_cont thetaSPar c d s t Q G", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. mC_C_wt c d s t Q G\n 2. mC_C_eff_cont thetaSPar c d s t Q G", "show \"mC_C_wt c d s t Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_wt c d s t Q G", "unfolding mC_C_wt_def defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I\\<in>UNpart cl P.\n       sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I.\n       I \\<in> UNpart cl P \\<Longrightarrow>\n       sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)", "fix I"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I.\n       I \\<in> UNpart cl P \\<Longrightarrow>\n       sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)", "assume \"I \\<in> UNpart cl P\""], ["proof (state)\nthis:\n  I \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. \\<And>I.\n       I \\<in> UNpart cl P \\<Longrightarrow>\n       sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)", "thus \"sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)\""], ["proof (prove)\nusing this:\n  I \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)", "unfolding c d"], ["proof (prove)\nusing this:\n  I \\<in> UNpart cl P\n\ngoal (1 subgoal):\n 1. sum (wt (Par cl) s) I = sum (wt (Par dl) t) (UNlift cl dl P F I)", "apply(intro ss_wt_Par_UNlift)"], ["proof (prove)\ngoal (8 subgoals):\n 1. I \\<in> UNpart cl P \\<Longrightarrow> length cl = length dl\n 2. I \\<in> UNpart cl P \\<Longrightarrow> properL cl\n 3. I \\<in> UNpart cl P \\<Longrightarrow> properL dl\n 4. I \\<in> UNpart cl P \\<Longrightarrow> I \\<in> UNpart cl P\n 5. \\<And>n.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 6. \\<And>n.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)\n 7. \\<And>n Ia.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length cl; Ia \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) Ia =\n                         sum (wt (dl ! n) t) (F n Ia)\n 8. I \\<in> UNpart cl P \\<Longrightarrow> s \\<approx> t", "using N cldl P FP sw st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n  \\<lbrakk>?n3 < length cl; ?I3 \\<in> P ?n3\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n3) s) ?I3 =\n                    sum (wt (dl ! ?n3) t) (F ?n3 ?I3)\n  s \\<approx> t\n\ngoal (8 subgoals):\n 1. I \\<in> UNpart cl P \\<Longrightarrow> length cl = length dl\n 2. I \\<in> UNpart cl P \\<Longrightarrow> properL cl\n 3. I \\<in> UNpart cl P \\<Longrightarrow> properL dl\n 4. I \\<in> UNpart cl P \\<Longrightarrow> I \\<in> UNpart cl P\n 5. \\<And>n.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 6. \\<And>n.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)\n 7. \\<And>n Ia.\n       \\<lbrakk>I \\<in> UNpart cl P; n < length cl; Ia \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) Ia =\n                         sum (wt (dl ! n) t) (F n Ia)\n 8. I \\<in> UNpart cl P \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  sum (wt c s) I = sum (wt d t) (UNlift cl dl P F I)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_wt c d s t Q G\n\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSPar c d s t Q G", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSPar c d s t Q G", "show \"mC_C_eff_cont (thetaSPar) c d s t Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C_eff_cont thetaSPar c d s t Q G", "unfolding mC_C_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> Q \\<and> i \\<in> I \\<and> j \\<in> G I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaSPar", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSPar", "fix II ii jj"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSPar", "assume II: \"II \\<in> Q\" and ii: \"ii \\<in> II\" and jj: \"jj \\<in> G II\""], ["proof (state)\nthis:\n  II \\<in> Q\n  ii \\<in> II\n  jj \\<in> G II\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaSPar", "thus \"eff c s ii \\<approx> eff d t jj \\<and> (cont c s ii, cont d t jj) \\<in> thetaSPar\""], ["proof (prove)\nusing this:\n  II \\<in> Q\n  ii \\<in> II\n  jj \\<in> G II\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff d t jj \\<and>\n    (local.cont c s ii, local.cont d t jj) \\<in> thetaSPar", "unfolding defi c d"], ["proof (prove)\nusing this:\n  II \\<in> UNpart cl P\n  ii \\<in> II\n  jj \\<in> UNlift cl dl P F II\n\ngoal (1 subgoal):\n 1. eff (Par cl) s ii \\<approx> eff (Par dl) t jj \\<and>\n    (local.cont (Par cl) s ii, local.cont (Par dl) t jj) \\<in> thetaSPar", "apply(intro cont_eff_Par_UNlift)"], ["proof (prove)\ngoal (11 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> SbisL cl dl\n 5. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ?II3 \\<in> UNpart cl ?P3\n 6. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ii \\<in> ?II3\n 7. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> jj \\<in> UNlift cl dl ?P3 ?F3 ?II3\n 8. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n        jj \\<in> UNlift cl dl P F II; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (?P3 n) \\<and>\n                         {} \\<notin> ?P3 n\n 9. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n        jj \\<in> UNlift cl dl P F II; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (?F3 n ` ?P3 n)\n 10. \\<And>n I i j.\n        \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n         jj \\<in> UNlift cl dl P F II; n < length cl; I \\<in> ?P3 n;\n         i \\<in> I; j \\<in> ?F3 n I\\<rbrakk>\n        \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                          local.cont (cl ! n) s i \\<approx>s\n                          local.cont (dl ! n) t j\nA total of 11 subgoals...", "using N cldl P FP eff_cont st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n3 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n3)} (P ?n3) \\<and> {} \\<notin> P ?n3\n  ?n3 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n3)} (F ?n3 ` P ?n3) \\<and> {} \\<notin> F ?n3 ` P ?n3\n  \\<lbrakk>?n3 < length cl; ?I3 \\<in> P ?n3; ?i3 \\<in> ?I3;\n   ?j3 \\<in> F ?n3 ?I3\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n3) s ?i3 \\<approx>\n                    eff (dl ! ?n3) t ?j3 \\<and>\n                    local.cont (cl ! ?n3) s ?i3 \\<approx>s\n                    local.cont (dl ! ?n3) t ?j3\n  s \\<approx> t\n\ngoal (11 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> SbisL cl dl\n 5. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ?II3 \\<in> UNpart cl ?P3\n 6. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ii \\<in> ?II3\n 7. \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n     jj \\<in> UNlift cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> jj \\<in> UNlift cl dl ?P3 ?F3 ?II3\n 8. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n        jj \\<in> UNlift cl dl P F II; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (?P3 n) \\<and>\n                         {} \\<notin> ?P3 n\n 9. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n        jj \\<in> UNlift cl dl P F II; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (?F3 n ` ?P3 n)\n 10. \\<And>n I i j.\n        \\<lbrakk>II \\<in> UNpart cl P; ii \\<in> II;\n         jj \\<in> UNlift cl dl P F II; n < length cl; I \\<in> ?P3 n;\n         i \\<in> I; j \\<in> ?F3 n I\\<rbrakk>\n        \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                          local.cont (cl ! n) s i \\<approx>s\n                          local.cont (dl ! n) t j\nA total of 11 subgoals...", "by blast+"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff d t jj \\<and>\n  (local.cont c s ii, local.cont d t jj) \\<in> thetaSPar\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_C_eff_cont thetaSPar c d s t Q G\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>Q G. mC_C thetaSPar c d s t Q G\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaSPar_Sbis: \"thetaSPar \\<subseteq> Sbis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaSPar \\<subseteq> Sbis", "using Sbis_raw_coind thetaSPar_Sretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> Sretr ?theta \\<Longrightarrow> ?theta \\<subseteq> Sbis\n  thetaSPar \\<subseteq> Sretr thetaSPar\n\ngoal (1 subgoal):\n 1. thetaSPar \\<subseteq> Sbis", "by blast"], ["", "theorem Par_Sbis[simp]:\nassumes \"properL cl\" and \"properL dl\" \"SbisL cl dl\"\nshows \"Par cl \\<approx>s Par dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Par cl \\<approx>s Par dl", "using assms thetaSPar_Sbis"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  thetaSPar \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Par cl \\<approx>s Par dl", "unfolding thetaSPar_def"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  {(Par cl, Par dl) |cl dl. properL cl \\<and> properL dl \\<and> SbisL cl dl}\n  \\<subseteq> Sbis\n\ngoal (1 subgoal):\n 1. Par cl \\<approx>s Par dl", "by blast"], ["", "subsection\\<open>01-bisimilarity versus language constructs\\<close>"], ["", "(* Discreetness: *)"], ["", "lemma ZObis_pres_discr_L: \"c \\<approx>01 d \\<Longrightarrow> discr d \\<Longrightarrow> discr c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>c \\<approx>01 d; discr d\\<rbrakk> \\<Longrightarrow> discr c", "proof (coinduction arbitrary: d c, clarsimp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "fix s i c d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "assume i: \"i < brn c\" and d: \"discr d\" and c_d: \"c \\<approx>01 d\""], ["proof (state)\nthis:\n  i < brn c\n  discr d\n  c \\<approx>01 d\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "then"], ["proof (chain)\npicking this:\n  i < brn c\n  discr d\n  c \\<approx>01 d", "obtain I0 P F where\n    match: \"mC_ZOC ZObis c d s s I0 P F\""], ["proof (prove)\nusing this:\n  i < brn c\n  discr d\n  c \\<approx>01 d\n\ngoal (1 subgoal):\n 1. (\\<And>I0 P F.\n        mC_ZOC ZObis c d s s I0 P F \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ZObis_mC_ZOC[of c d s s]"], ["proof (prove)\nusing this:\n  i < brn c\n  discr d\n  c \\<approx>01 d\n  \\<lbrakk>c \\<approx>01 d; s \\<approx> s\\<rbrakk>\n  \\<Longrightarrow> \\<exists>I0 P F. mC_ZOC ZObis c d s s I0 P F\n\ngoal (1 subgoal):\n 1. (\\<And>I0 P F.\n        mC_ZOC ZObis c d s s I0 P F \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mC_ZOC ZObis c d s s I0 P F\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "hence \"\\<Union>P = {..<brn c}\""], ["proof (prove)\nusing this:\n  mC_ZOC ZObis c d s s I0 P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "using i"], ["proof (prove)\nusing this:\n  mC_ZOC ZObis c d s s I0 P F\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "unfolding mC_ZOC_def mC_ZOC_part_def part_def"], ["proof (prove)\nusing this:\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   (\\<Union> P = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c d s s I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c d s s I0 F \\<and>\n  mC_ZOC_eff_cont ZObis c d s s I0 P F\n  i < brn c\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c}", "by simp"], ["proof (state)\nthis:\n  \\<Union> P = {..<brn c}\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "then"], ["proof (chain)\npicking this:\n  \\<Union> P = {..<brn c}", "obtain I where I: \"I \\<in> P\" and i: \"i \\<in> I\""], ["proof (prove)\nusing this:\n  \\<Union> P = {..<brn c}\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P; i \\<in> I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using i"], ["proof (prove)\nusing this:\n  \\<Union> P = {..<brn c}\n  i < brn c\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P; i \\<in> I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I \\<in> P\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>d c x xa.\n       \\<lbrakk>c \\<approx>01 d; discr d; xa < brn c\\<rbrakk>\n       \\<Longrightarrow> x \\<approx> eff c x xa \\<and>\n                         ((\\<exists>d.\n                              local.cont c x xa \\<approx>01 d \\<and>\n                              discr d) \\<or>\n                          discr (local.cont c x xa))", "show \"s \\<approx> eff c s i \\<and> ((\\<exists>d. cont c s i \\<approx>01 d \\<and> discr d) \\<or> discr (cont c s i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "proof(cases \"I = I0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "case False"], ["proof (state)\nthis:\n  I \\<noteq> I0\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "then"], ["proof (chain)\npicking this:\n  I \\<noteq> I0", "obtain j where j: \"j \\<in> F I\""], ["proof (prove)\nusing this:\n  I \\<noteq> I0\n\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using match I False"], ["proof (prove)\nusing this:\n  I \\<noteq> I0\n  mC_ZOC ZObis c d s s I0 P F\n  I \\<in> P\n  I \\<noteq> I0\n\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "unfolding mC_ZOC_def mC_ZOC_part_def"], ["proof (prove)\nusing this:\n  I \\<noteq> I0\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c} P \\<and> part {..<brn d} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c d s s I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c d s s I0 F \\<and>\n  mC_ZOC_eff_cont ZObis c d s s I0 P F\n  I \\<in> P\n  I \\<noteq> I0\n\ngoal (1 subgoal):\n 1. (\\<And>j. j \\<in> F I \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  j \\<in> F I\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "hence \"j < brn d\""], ["proof (prove)\nusing this:\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. j < brn d", "using I match"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P\n  mC_ZOC ZObis c d s s I0 P F\n\ngoal (1 subgoal):\n 1. j < brn d", "unfolding mC_ZOC_def mC_ZOC_part_def part_def"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   (\\<Union> P = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c d s s I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c d s s I0 F \\<and>\n  mC_ZOC_eff_cont ZObis c d s s I0 P F\n\ngoal (1 subgoal):\n 1. j < brn d", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>j \\<in> F I; I \\<in> P;\n     ({} \\<in> P \\<longrightarrow> {} = I0) \\<and>\n     {} \\<notin> F ` (P - {I0}) \\<and>\n     I0 \\<in> P \\<and>\n     \\<Union> P = {..<brn c} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> P \\<and>\n         J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {}) \\<and>\n     \\<Union> (F ` P) = {..<brn d} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> F ` P \\<and>\n         J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {}) \\<and>\n     inj_on F P \\<and>\n     mC_ZOC_wt c d s s I0 P F \\<and>\n     mC_ZOC_eff_cont0 ZObis c d s s I0 F \\<and>\n     mC_ZOC_eff_cont ZObis c d s s I0 P F\\<rbrakk>\n    \\<Longrightarrow> j < brn d", "by blast"], ["proof (state)\nthis:\n  j < brn d\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "hence md: \"discr (cont d s j)\" and s: \"s \\<approx> eff d s j\""], ["proof (prove)\nusing this:\n  j < brn d\n\ngoal (1 subgoal):\n 1. discr (local.cont d s j) &&& s \\<approx> eff d s j", "using d discr_cont[of d j s] discr_eff_indis[of d j s]"], ["proof (prove)\nusing this:\n  j < brn d\n  discr d\n  \\<lbrakk>discr d; j < brn d\\<rbrakk>\n  \\<Longrightarrow> discr (local.cont d s j)\n  \\<lbrakk>discr d; j < brn d\\<rbrakk>\n  \\<Longrightarrow> s \\<approx> eff d s j\n\ngoal (1 subgoal):\n 1. discr (local.cont d s j) &&& s \\<approx> eff d s j", "by auto"], ["proof (state)\nthis:\n  discr (local.cont d s j)\n  s \\<approx> eff d s j\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "have \"eff c s i \\<approx> eff d s j\" and md2: \"cont c s i \\<approx>01 cont d s j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>01 local.cont d s j", "using I i j match False"], ["proof (prove)\nusing this:\n  I \\<in> P\n  i \\<in> I\n  j \\<in> F I\n  mC_ZOC ZObis c d s s I0 P F\n  I \\<noteq> I0\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>01 local.cont d s j", "unfolding mC_ZOC_def mC_ZOC_eff_cont_def"], ["proof (prove)\nusing this:\n  I \\<in> P\n  i \\<in> I\n  j \\<in> F I\n  mC_ZOC_part c d s s I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c d s s I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c d s s I0 F \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c s i \\<approx> eff d s j \\<and>\n      local.cont c s i \\<approx>01 local.cont d s j)\n  I \\<noteq> I0\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d s j &&&\n    local.cont c s i \\<approx>01 local.cont d s j", "by auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>01 local.cont d s j\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "hence \"s \\<approx> eff c s i\""], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>01 local.cont d s j\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "using s indis_sym indis_trans"], ["proof (prove)\nusing this:\n  eff c s i \\<approx> eff d s j\n  local.cont c s i \\<approx>01 local.cont d s j\n  s \\<approx> eff d s j\n  ?s \\<approx> ?s' \\<Longrightarrow> ?s' \\<approx> ?s\n  \\<lbrakk>?s \\<approx> ?s'; ?s' \\<approx> ?s''\\<rbrakk>\n  \\<Longrightarrow> ?s \\<approx> ?s''\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i\n\ngoal (2 subgoals):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))\n 2. I \\<noteq> I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "thus ?thesis"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "using md md2"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i\n  discr (local.cont d s j)\n  local.cont c s i \\<approx>01 local.cont d s j\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i \\<and>\n  ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n   discr (local.cont c s i))\n\ngoal (1 subgoal):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "case True"], ["proof (state)\nthis:\n  I = I0\n\ngoal (1 subgoal):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "hence \"s \\<approx> eff c s i \\<and> cont c s i \\<approx>01 d\""], ["proof (prove)\nusing this:\n  I = I0\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d", "using match i ZObis_sym"], ["proof (prove)\nusing this:\n  I = I0\n  mC_ZOC ZObis c d s s I0 P F\n  i \\<in> I\n  ?c \\<approx>01 ?d \\<Longrightarrow> ?d \\<approx>01 ?c\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d", "unfolding mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  I = I0\n  mC_ZOC_part c d s s I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c d s s I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d) \\<and>\n   (\\<forall>j\\<in>F I0.\n       s \\<approx> eff d s j \\<and> c \\<approx>01 local.cont d s j)) \\<and>\n  mC_ZOC_eff_cont ZObis c d s s I0 P F\n  i \\<in> I\n  ?c \\<approx>01 ?d \\<Longrightarrow> ?d \\<approx>01 ?c\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d\n\ngoal (1 subgoal):\n 1. I = I0 \\<Longrightarrow>\n    s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "thus ?thesis"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "using d"], ["proof (prove)\nusing this:\n  s \\<approx> eff c s i \\<and> local.cont c s i \\<approx>01 d\n  discr d\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i \\<and>\n    ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n     discr (local.cont c s i))", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff c s i \\<and>\n  ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n   discr (local.cont c s i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<approx> eff c s i \\<and>\n  ((\\<exists>d. local.cont c s i \\<approx>01 d \\<and> discr d) \\<or>\n   discr (local.cont c s i))\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem ZObis_pres_discr_R:\nassumes \"discr c\" and \"c \\<approx>01 d\"\nshows \"discr d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr d", "using assms ZObis_pres_discr_L ZObis_sym"], ["proof (prove)\nusing this:\n  discr c\n  c \\<approx>01 d\n  \\<lbrakk>?c \\<approx>01 ?d; discr ?d\\<rbrakk> \\<Longrightarrow> discr ?c\n  ?c \\<approx>01 ?d \\<Longrightarrow> ?d \\<approx>01 ?c\n\ngoal (1 subgoal):\n 1. discr d", "by blast"], ["", "theorem ZObis_finished_discr_L:\nassumes \"c \\<approx>01 d\" and \"proper d\" and \"finished d\"\nshows \"discr c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr c", "using assms ZObis_pres_discr_L"], ["proof (prove)\nusing this:\n  c \\<approx>01 d\n  proper d\n  finished d\n  \\<lbrakk>?c \\<approx>01 ?d; discr ?d\\<rbrakk> \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr c", "by auto"], ["", "theorem ZObis_finished_discr_R:\nassumes \"proper c\" and \"finished c\" and \"c \\<approx>01 d\"\nshows \"discr d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr d", "using assms ZObis_pres_discr_R[of c d]"], ["proof (prove)\nusing this:\n  proper c\n  finished c\n  c \\<approx>01 d\n  \\<lbrakk>discr c; c \\<approx>01 d\\<rbrakk> \\<Longrightarrow> discr d\n\ngoal (1 subgoal):\n 1. discr d", "by auto"], ["", "theorem discr_ZObis[simp]:\nassumes \"proper c\" and \"proper d\" and \"discr c\" and \"discr d\"\nshows \"c \\<approx>01 d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<approx>01 d", "using assms"], ["proof (prove)\nusing this:\n  proper c\n  proper d\n  discr c\n  discr d\n\ngoal (1 subgoal):\n 1. c \\<approx>01 d", "by auto"], ["", "(* Done: *)"], ["", "theorem Done_ZObis[simp]:\n\"Done \\<approx>01 Done\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Done \\<approx>01 Done", "by simp"], ["", "(* Atm: *)"], ["", "theorem Atm_ZObis[simp]:\nassumes \"compatAtm atm\"\nshows \"Atm atm \\<approx>01 Atm atm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Atm atm \\<approx>01 Atm atm", "using assms"], ["proof (prove)\nusing this:\n  compatAtm atm\n\ngoal (1 subgoal):\n 1. Atm atm \\<approx>01 Atm atm", "by simp"], ["", "(* Seq *)"], ["", "definition thetaZOSeqI where\n\"thetaZOSeqI \\<equiv>\n {(e ;; c, e ;; d) | e c d . siso e \\<and> c \\<approx>01 d}\""], ["", "lemma thetaZOSeqI_ZOretr:\n\"thetaZOSeqI \\<subseteq> ZOretr (thetaZOSeqI Un ZObis)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqI \\<subseteq> ZOretr (thetaZOSeqI \\<union> ZObis)", "unfolding ZOretr_def matchC_LC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqI\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>I0 P F.\n                        mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t I0 P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "assume c_d: \"(c, d) \\<in> thetaZOSeqI\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaZOSeqI\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaZOSeqI\n  s \\<approx> t", "obtain e c1 d1 where e: \"siso e\" and c1d1: \"c1 \\<approx>01 d1\"\n  and c: \"c = e ;; c1\" and d: \"d = e ;; d1\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaZOSeqI\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>e c1 d1.\n        \\<lbrakk>siso e; c1 \\<approx>01 d1; c = e ;; c1;\n         d = e ;; d1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaZOSeqI_def"], ["proof (prove)\nusing this:\n  (c, d) \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>01 d}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>e c1 d1.\n        \\<lbrakk>siso e; c1 \\<approx>01 d1; c = e ;; c1;\n         d = e ;; d1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  siso e\n  c1 \\<approx>01 d1\n  c = e ;; c1\n  d = e ;; d1\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "let ?I0 = \"{}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "let ?J0 = \"{}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "let ?P = \"{?I0} Un {{i} | i . i < brn e}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "let ?F = \"%I. I\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqI; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqI \\<union> ZObis) a b s t\n                                 I0 P)", "show \"\\<exists>I0 P F. mC_ZOC (thetaZOSeqI Un ZObis) c d s t I0 P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>I0 P F. mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t I0 P F", "apply(rule exI[of _ ?I0])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t {} P F", "apply(rule exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t {}\n        ({{}} \\<union> {{i} |i. i < brn e}) F", "apply(rule exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "unfolding mC_ZOC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_part c d s t {} ({{}} \\<union> {{i} |i. i < brn e})\n     (\\<lambda>I. I) \\<and>\n    inj_on (\\<lambda>I. I) ({{}} \\<union> {{i} |i. i < brn e}) \\<and>\n    mC_ZOC_wt c d s t {} ({{}} \\<union> {{i} |i. i < brn e})\n     (\\<lambda>I. I) \\<and>\n    mC_ZOC_eff_cont0 (thetaZOSeqI \\<union> ZObis) c d s t {}\n     (\\<lambda>I. I) \\<and>\n    mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "proof (intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. mC_ZOC_part c d s t {} ({{}} \\<union> {{i} |i. i < brn e})\n     (\\<lambda>I. I)\n 2. inj_on (\\<lambda>I. I) ({{}} \\<union> {{i} |i. i < brn e})\n 3. mC_ZOC_wt c d s t {} ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n 4. mC_ZOC_eff_cont0 (thetaZOSeqI \\<union> ZObis) c d s t {} (\\<lambda>I. I)\n 5. mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "show \"mC_ZOC_part c d s t ?I0 ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_part c d s t {} ({{}} \\<union> {{i} |i. i < brn e})\n     (\\<lambda>I. I)", "unfolding mC_ZOC_part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> {{}} \\<union> {{i} |i. i < brn e} - {{}} \\<and>\n    {} \\<notin> (\\<lambda>I. I) `\n                ({{}} \\<union> {{i} |i. i < brn e} - {{}}) \\<and>\n    {} \\<in> {{}} \\<union> {{i} |i. i < brn e} \\<and>\n    part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e}) \\<and>\n    part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "proof (intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. {} \\<notin> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n 2. {} \\<notin> (\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e} - {{}})\n 3. {} \\<in> {{}} \\<union> {{i} |i. i < brn e}\n 4. part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e})\n 5. part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "show \"part {..<brn c} ?P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e})", "unfolding part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> ({{}} \\<union> {{i} |i. i < brn e}) = {..<brn c} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> {{}} \\<union> {{i} |i. i < brn e} \\<and>\n        J2 \\<in> {{}} \\<union> {{i} |i. i < brn e} \\<and>\n        J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow>\n       x \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow>\n       x \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})", "assume \"i < brn c\""], ["proof (state)\nthis:\n  i < brn c\n\ngoal (2 subgoals):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c\n 2. \\<And>x.\n       x < brn c \\<Longrightarrow>\n       x \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})", "thus \"i \\<in> \\<Union> ?P\""], ["proof (prove)\nusing this:\n  i < brn c\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})", "using c e st siso_cont_indis[of e s t]"], ["proof (prove)\nusing this:\n  i < brn c\n  c = e ;; c1\n  siso e\n  s \\<approx> t\n  \\<lbrakk>siso e; s \\<approx> t; ?i < brn e\\<rbrakk>\n  \\<Longrightarrow> eff e s ?i \\<approx> eff e t ?i \\<and>\n                    wt e s ?i = wt e t ?i \\<and>\n                    local.cont e s ?i = local.cont e t ?i\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})", "by auto"], ["proof (state)\nthis:\n  i \\<in> \\<Union> ({{}} \\<union> {{i} |i. i < brn e})\n\ngoal (1 subgoal):\n 1. \\<And>x X i. i < brn e \\<Longrightarrow> i < brn c", "qed (unfold c, simp)"], ["proof (state)\nthis:\n  part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e})\n\ngoal (4 subgoals):\n 1. {} \\<notin> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n 2. {} \\<notin> (\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e} - {{}})\n 3. {} \\<in> {{}} \\<union> {{i} |i. i < brn e}\n 4. part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "(*  *)"], ["proof (state)\nthis:\n  part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e})\n\ngoal (4 subgoals):\n 1. {} \\<notin> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n 2. {} \\<notin> (\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e} - {{}})\n 3. {} \\<in> {{}} \\<union> {{i} |i. i < brn e}\n 4. part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "thus \"part {..<brn d} (?F ` ?P)\""], ["proof (prove)\nusing this:\n  part {..<brn c} ({{}} \\<union> {{i} |i. i < brn e})\n\ngoal (1 subgoal):\n 1. part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "unfolding c d"], ["proof (prove)\nusing this:\n  part {..<brn (e ;; c1)} ({{}} \\<union> {{i} |i. i < brn e})\n\ngoal (1 subgoal):\n 1. part {..<brn (e ;; d1)}\n     ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))", "by auto"], ["proof (state)\nthis:\n  part {..<brn d} ((\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e}))\n\ngoal (3 subgoals):\n 1. {} \\<notin> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n 2. {} \\<notin> (\\<lambda>I. I) ` ({{}} \\<union> {{i} |i. i < brn e} - {{}})\n 3. {} \\<in> {{}} \\<union> {{i} |i. i < brn e}", "qed auto"], ["proof (state)\nthis:\n  mC_ZOC_part c d s t {} ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n\ngoal (4 subgoals):\n 1. inj_on (\\<lambda>I. I) ({{}} \\<union> {{i} |i. i < brn e})\n 2. mC_ZOC_wt c d s t {} ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n 3. mC_ZOC_eff_cont0 (thetaZOSeqI \\<union> ZObis) c d s t {} (\\<lambda>I. I)\n 4. mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. inj_on (\\<lambda>I. I) ({{}} \\<union> {{i} |i. i < brn e})\n 2. mC_ZOC_wt c d s t {} ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n 3. mC_ZOC_eff_cont0 (thetaZOSeqI \\<union> ZObis) c d s t {} (\\<lambda>I. I)\n 4. mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "show \"mC_ZOC_eff_cont (thetaZOSeqI Un ZObis) c d s t ?I0 ?P ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n     ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)", "unfolding mC_ZOC_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}} \\<and>\n       i \\<in> I \\<and> j \\<in> I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqI \\<union> ZObis", "proof(intro allI impI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}; i \\<in> I;\n        j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqI \\<union> ZObis", "fix I i j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}; i \\<in> I;\n        j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqI \\<union> ZObis", "assume I: \"I \\<in> ?P - {?I0}\" and i: \"i \\<in> I\" and j: \"j \\<in> I\""], ["proof (state)\nthis:\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n  i \\<in> I\n  j \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}; i \\<in> I;\n        j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqI \\<union> ZObis", "then"], ["proof (chain)\npicking this:\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n  i \\<in> I\n  j \\<in> I", "obtain i' where \"j \\<in> ?F {i'}\" and \"i' < brn e\""], ["proof (prove)\nusing this:\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n  i \\<in> I\n  j \\<in> I\n\ngoal (1 subgoal):\n 1. (\\<And>i'.\n        \\<lbrakk>j \\<in> {i'}; i' < brn e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using I j"], ["proof (prove)\nusing this:\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n  i \\<in> I\n  j \\<in> I\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n  j \\<in> I\n\ngoal (1 subgoal):\n 1. (\\<And>i'.\n        \\<lbrakk>j \\<in> {i'}; i' < brn e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  j \\<in> {i'}\n  i' < brn e\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}; i \\<in> I;\n        j \\<in> I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqI \\<union> ZObis", "thus \"eff c s i \\<approx> eff d t j \\<and> (cont c s i, cont d t j) \\<in> thetaZOSeqI \\<union> ZObis\""], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqI \\<union> ZObis", "using st c_d e i j I"], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n  s \\<approx> t\n  (c, d) \\<in> thetaZOSeqI\n  siso e\n  i \\<in> I\n  j \\<in> I\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqI \\<union> ZObis", "unfolding c d thetaZOSeqI_def"], ["proof (prove)\nusing this:\n  j \\<in> {i'}\n  i' < brn e\n  s \\<approx> t\n  (e ;; c1, e ;; d1)\n  \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>01 d}\n  siso e\n  i \\<in> I\n  j \\<in> I\n  I \\<in> {{}} \\<union> {{i} |i. i < brn e} - {{}}\n\ngoal (1 subgoal):\n 1. eff (e ;; c1) s i \\<approx> eff (e ;; d1) t j \\<and>\n    (local.cont (e ;; c1) s i, local.cont (e ;; d1) t j)\n    \\<in> {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>01 d} \\<union>\n          ZObis", "by (cases \"finished (cont e s i')\") auto"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqI \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_eff_cont (thetaZOSeqI \\<union> ZObis) c d s t {}\n   ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n\ngoal (3 subgoals):\n 1. inj_on (\\<lambda>I. I) ({{}} \\<union> {{i} |i. i < brn e})\n 2. mC_ZOC_wt c d s t {} ({{}} \\<union> {{i} |i. i < brn e}) (\\<lambda>I. I)\n 3. mC_ZOC_eff_cont0 (thetaZOSeqI \\<union> ZObis) c d s t {} (\\<lambda>I. I)", "qed (insert st c_d c, unfold m_defsAll thetaZOSeqI_def part_def, auto)"], ["proof (state)\nthis:\n  \\<exists>I0 P F. mC_ZOC (thetaZOSeqI \\<union> ZObis) c d s t I0 P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaZOSeqI_ZObis:\n\"thetaZOSeqI \\<subseteq> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqI \\<subseteq> ZObis", "using ZObis_coind thetaZOSeqI_ZOretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> ZOretr (?theta \\<union> ZObis) \\<Longrightarrow>\n  ?theta \\<subseteq> ZObis\n  thetaZOSeqI \\<subseteq> ZOretr (thetaZOSeqI \\<union> ZObis)\n\ngoal (1 subgoal):\n 1. thetaZOSeqI \\<subseteq> ZObis", "by blast"], ["", "theorem Seq_siso_ZObis[simp]:\nassumes \"siso e\" and \"c2 \\<approx>01 d2\"\nshows \"e ;; c2 \\<approx>01 e ;; d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>01 e ;; d2", "using assms thetaZOSeqI_ZObis"], ["proof (prove)\nusing this:\n  siso e\n  c2 \\<approx>01 d2\n  thetaZOSeqI \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>01 e ;; d2", "unfolding thetaZOSeqI_def"], ["proof (prove)\nusing this:\n  siso e\n  c2 \\<approx>01 d2\n  {(e ;; c, e ;; d) |e c d. siso e \\<and> c \\<approx>01 d} \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. e ;; c2 \\<approx>01 e ;; d2", "by auto"], ["", "(*  *)"], ["", "definition thetaZOSeqD where\n\"thetaZOSeqD \\<equiv>\n {(c1 ;; c2, d1 ;; d2) |\n     c1 c2 d1 d2.\n        proper c1 \\<and> proper d1 \\<and> proper c2 \\<and> proper d2 \\<and>\n        discr c2 \\<and> discr d2 \\<and>\n        c1 \\<approx>01 d1}\""], ["", "lemma thetaZOSeqD_ZOretr:\n\"thetaZOSeqD \\<subseteq> ZOretr (thetaZOSeqD Un ZObis)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqD \\<subseteq> ZOretr (thetaZOSeqD \\<union> ZObis)", "unfolding ZOretr_def matchC_LC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqD\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>I0 P F.\n                        mC_ZOC (thetaZOSeqD \\<union> ZObis) c d s t I0 P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "assume c_d: \"(c, d) \\<in> thetaZOSeqD\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaZOSeqD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaZOSeqD\n  s \\<approx> t", "obtain c1 c2 d1 d2 where\n  c1d1: \"proper c1\" \"proper d1\" \"c1 \\<approx>01 d1\" and\n  c2d2: \"proper c2\" \"proper d2\" \"discr c2\" \"discr d2\"\n  and c: \"c = c1 ;; c2\" and d: \"d = d1 ;; d2\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaZOSeqD\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>c1 d1 c2 d2.\n        \\<lbrakk>proper c1; proper d1; c1 \\<approx>01 d1; proper c2;\n         proper d2; discr c2; discr d2; c = c1 ;; c2; d = d1 ;; d2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaZOSeqD_def"], ["proof (prove)\nusing this:\n  (c, d)\n  \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n         proper c1 \\<and>\n         proper d1 \\<and>\n         proper c2 \\<and>\n         proper d2 \\<and> discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>c1 d1 c2 d2.\n        \\<lbrakk>proper c1; proper d1; c1 \\<approx>01 d1; proper c2;\n         proper d2; discr c2; discr d2; c = c1 ;; c2; d = d1 ;; d2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  c = c1 ;; c2\n  d = d1 ;; d2\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "from c1d1 st"], ["proof (chain)\npicking this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  s \\<approx> t", "obtain P F I0\n  where match: \"mC_ZOC ZObis c1 d1 s t I0 P F\""], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>I0 P F.\n        mC_ZOC ZObis c1 d1 s t I0 P F \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ZObis_mC_ZOC"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  s \\<approx> t\n  \\<lbrakk>?c \\<approx>01 ?d; ?s \\<approx> ?t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>I0 P F. mC_ZOC ZObis ?c ?d ?s ?t I0 P F\n\ngoal (1 subgoal):\n 1. (\\<And>I0 P F.\n        mC_ZOC ZObis c1 d1 s t I0 P F \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "have P: \"\\<Union>P = {..<brn c1}\" and FP: \"\\<Union>(F ` P) = {..<brn d1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "using match"], ["proof (prove)\nusing this:\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "unfolding mC_ZOC_def mC_ZOC_part_def part_def"], ["proof (prove)\nusing this:\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   (\\<Union> P = {..<brn c1} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P \\<and> J2 \\<in> P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ` P) = {..<brn d1} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ` P \\<and>\n       J2 \\<in> F ` P \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c1 d1 s t I0 F \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. \\<Union> P = {..<brn c1} &&& \\<Union> (F ` P) = {..<brn d1}", "by metis+"], ["proof (state)\nthis:\n  \\<Union> P = {..<brn c1}\n  \\<Union> (F ` P) = {..<brn d1}\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOSeqD; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P.\n                            Ex (mC_ZOC (thetaZOSeqD \\<union> ZObis) a b s t\n                                 I0 P)", "show \"\\<exists>I0 P F. mC_ZOC (thetaZOSeqD Un ZObis) c d s t I0 P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>I0 P F. mC_ZOC (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "apply(intro exI[of _ I0] exI[of _ P] exI[of _ F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "unfolding mC_ZOC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_part c d s t I0 P F \\<and>\n    inj_on F P \\<and>\n    mC_ZOC_wt c d s t I0 P F \\<and>\n    mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F \\<and>\n    mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "proof (intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. mC_ZOC_part c d s t I0 P F\n 2. inj_on F P\n 3. mC_ZOC_wt c d s t I0 P F\n 4. mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F\n 5. mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "have I0: \"I0 \\<in> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I0 \\<in> P", "using match"], ["proof (prove)\nusing this:\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. I0 \\<in> P", "unfolding m_defsAll"], ["proof (prove)\nusing this:\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. I0 \\<in> P", "by blast"], ["proof (state)\nthis:\n  I0 \\<in> P\n\ngoal (5 subgoals):\n 1. mC_ZOC_part c d s t I0 P F\n 2. inj_on F P\n 3. mC_ZOC_wt c d s t I0 P F\n 4. mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F\n 5. mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "show \"mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F", "unfolding mC_ZOC_eff_cont0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i\\<in>I0.\n        s \\<approx> eff c s i \\<and>\n        (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis) \\<and>\n    (\\<forall>j\\<in>F I0.\n        t \\<approx> eff d t j \\<and>\n        (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis)", "proof(intro conjI ballI)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "fix i"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "assume i: \"i \\<in> I0\""], ["proof (state)\nthis:\n  i \\<in> I0\n\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "let ?c1' = \"cont c1 s i\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "let ?s' = \"eff c1 s i\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have \"i < brn c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn c1", "using i I0 P"], ["proof (prove)\nusing this:\n  i \\<in> I0\n  I0 \\<in> P\n  \\<Union> P = {..<brn c1}\n\ngoal (1 subgoal):\n 1. i < brn c1", "by blast"], ["proof (state)\nthis:\n  i < brn c1\n\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note i = this i"], ["proof (state)\nthis:\n  i < brn c1\n  i \\<in> I0\n\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have c1'd1: \"?c1' \\<approx>01 d1\" \"proper ?c1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 d1 &&& proper (local.cont c1 s i)", "using c1d1 i I0 match"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  i < brn c1\n  i \\<in> I0\n  I0 \\<in> P\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 d1 &&& proper (local.cont c1 s i)", "unfolding mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  i < brn c1\n  i \\<in> I0\n  I0 \\<in> P\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 d1 &&& proper (local.cont c1 s i)", "by auto"], ["proof (state)\nthis:\n  local.cont c1 s i \\<approx>01 d1\n  proper (local.cont c1 s i)\n\ngoal (4 subgoals):\n 1. \\<And>i. i \\<in> I0 \\<Longrightarrow> s \\<approx> eff c s i\n 2. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 3. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 4. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show \"s \\<approx> eff c s i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "using i match"], ["proof (prove)\nusing this:\n  i < brn c1\n  i \\<in> I0\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s i", "unfolding c mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  i < brn c1\n  i \\<in> I0\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (c1 ;; c2) s i", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff c s i\n\ngoal (3 subgoals):\n 1. \\<And>i.\n       i \\<in> I0 \\<Longrightarrow>\n       (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 3. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show \"(cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "proof(cases \"finished ?c1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "note f_c1' = False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "hence csi: \"cont c s i = ?c1' ;; c2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "using i"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "unfolding c"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = local.cont c1 s i ;; c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = local.cont c1 s i ;; c2\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"(cont c s i, d) \\<in> thetaZOSeqD\""], ["proof (prove)\nusing this:\n  local.cont c s i = local.cont c1 s i ;; c2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, d) \\<in> thetaZOSeqD", "using c1'd1 c1d1 c2d2 f_c1' i match"], ["proof (prove)\nusing this:\n  local.cont c s i = local.cont c1 s i ;; c2\n  local.cont c1 s i \\<approx>01 d1\n  proper (local.cont c1 s i)\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. (local.cont c s i, d) \\<in> thetaZOSeqD", "unfolding csi d thetaZOSeqD_def mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  local.cont c1 s i ;; c2 = local.cont c1 s i ;; c2\n  local.cont c1 s i \\<approx>01 d1\n  proper (local.cont c1 s i)\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, d1 ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1}", "by blast"], ["proof (state)\nthis:\n  (local.cont c s i, d) \\<in> thetaZOSeqD\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  (local.cont c s i, d) \\<in> thetaZOSeqD\n\ngoal (1 subgoal):\n 1. (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "case True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "note f_c1' = True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "hence csi: \"cont c s i = c2\""], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "using i"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "unfolding c"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I0\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = c2\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "have \"discr d1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr d1", "using f_c1' c1'd1 ZObis_finished_discr_R"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  local.cont c1 s i \\<approx>01 d1\n  proper (local.cont c1 s i)\n  \\<lbrakk>proper ?c; finished ?c; ?c \\<approx>01 ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?d\n\ngoal (1 subgoal):\n 1. discr d1", "by blast"], ["proof (state)\nthis:\n  discr d1\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"c2 \\<approx>01 d\""], ["proof (prove)\nusing this:\n  discr d1\n\ngoal (1 subgoal):\n 1. c2 \\<approx>01 d", "using c2d2 c1d1"], ["proof (prove)\nusing this:\n  discr d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n\ngoal (1 subgoal):\n 1. c2 \\<approx>01 d", "unfolding d"], ["proof (prove)\nusing this:\n  discr d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n\ngoal (1 subgoal):\n 1. c2 \\<approx>01 d1 ;; d2", "by simp"], ["proof (state)\nthis:\n  c2 \\<approx>01 d\n\ngoal (1 subgoal):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  c2 \\<approx>01 d\n\ngoal (1 subgoal):\n 1. (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis", "unfolding csi"], ["proof (prove)\nusing this:\n  c2 \\<approx>01 d\n\ngoal (1 subgoal):\n 1. (c2, d) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, d) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "fix j"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "assume j: \"j \\<in> F I0\""], ["proof (state)\nthis:\n  j \\<in> F I0\n\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "let ?d1' = \"cont d1 t j\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "let ?t' = \"eff d1 t j\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have \"j < brn d1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j < brn d1", "using j I0 FP"], ["proof (prove)\nusing this:\n  j \\<in> F I0\n  I0 \\<in> P\n  \\<Union> (F ` P) = {..<brn d1}\n\ngoal (1 subgoal):\n 1. j < brn d1", "by blast"], ["proof (state)\nthis:\n  j < brn d1\n\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note j = this j"], ["proof (state)\nthis:\n  j < brn d1\n  j \\<in> F I0\n\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have c1d1': \"c1 \\<approx>01 ?d1'\" \"proper ?d1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1 \\<approx>01 local.cont d1 t j &&& proper (local.cont d1 t j)", "using c1d1 j I0 match"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  j < brn d1\n  j \\<in> F I0\n  I0 \\<in> P\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. c1 \\<approx>01 local.cont d1 t j &&& proper (local.cont d1 t j)", "unfolding mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  j < brn d1\n  j \\<in> F I0\n  I0 \\<in> P\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. c1 \\<approx>01 local.cont d1 t j &&& proper (local.cont d1 t j)", "by auto"], ["proof (state)\nthis:\n  c1 \\<approx>01 local.cont d1 t j\n  proper (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. \\<And>j. j \\<in> F I0 \\<Longrightarrow> t \\<approx> eff d t j\n 2. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show \"t \\<approx> eff d t j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<approx> eff d t j", "using j match"], ["proof (prove)\nusing this:\n  j < brn d1\n  j \\<in> F I0\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. t \\<approx> eff d t j", "unfolding d mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  j < brn d1\n  j \\<in> F I0\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (d1 ;; d2) t j", "by simp"], ["proof (state)\nthis:\n  t \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       j \\<in> F I0 \\<Longrightarrow>\n       (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show \"(c, cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof (cases \"finished ?d1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note f_d1' = False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence dtj: \"cont d t j = ?d1' ;; d2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "using j"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "unfolding d"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = local.cont d1 t j ;; d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"(c, cont d t j) \\<in> thetaZOSeqD\""], ["proof (prove)\nusing this:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. (c, local.cont d t j) \\<in> thetaZOSeqD", "using c1d1' c1d1 c2d2 f_d1' j match"], ["proof (prove)\nusing this:\n  local.cont d t j = local.cont d1 t j ;; d2\n  c1 \\<approx>01 local.cont d1 t j\n  proper (local.cont d1 t j)\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. (c, local.cont d t j) \\<in> thetaZOSeqD", "unfolding c dtj thetaZOSeqD_def mC_ZOC_def mC_ZOC_eff_cont0_def"], ["proof (prove)\nusing this:\n  local.cont d1 t j ;; d2 = local.cont d1 t j ;; d2\n  c1 \\<approx>01 local.cont d1 t j\n  proper (local.cont d1 t j)\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  mC_ZOC_eff_cont ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. (c1 ;; c2, local.cont d1 t j ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1}", "by blast"], ["proof (state)\nthis:\n  (c, local.cont d t j) \\<in> thetaZOSeqD\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  (c, local.cont d t j) \\<in> thetaZOSeqD\n\ngoal (1 subgoal):\n 1. (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note f_d1' = True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence dtj: \"cont d t j = d2\""], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "using j"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "unfolding d"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I0\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = d2\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"discr c1\""], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n\ngoal (1 subgoal):\n 1. discr c1", "using f_d1' c1d1' ZObis_finished_discr_L"], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n  finished (local.cont d1 t j)\n  c1 \\<approx>01 local.cont d1 t j\n  proper (local.cont d1 t j)\n  \\<lbrakk>?c \\<approx>01 ?d; proper ?d; finished ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr c1", "by blast"], ["proof (state)\nthis:\n  discr c1\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"c \\<approx>01 d2\""], ["proof (prove)\nusing this:\n  discr c1\n\ngoal (1 subgoal):\n 1. c \\<approx>01 d2", "using c2d2 c1d1"], ["proof (prove)\nusing this:\n  discr c1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n\ngoal (1 subgoal):\n 1. c \\<approx>01 d2", "unfolding c"], ["proof (prove)\nusing this:\n  discr c1\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>01 d2", "by simp"], ["proof (state)\nthis:\n  c \\<approx>01 d2\n\ngoal (1 subgoal):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  c \\<approx>01 d2\n\ngoal (1 subgoal):\n 1. (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "unfolding dtj"], ["proof (prove)\nusing this:\n  c \\<approx>01 d2\n\ngoal (1 subgoal):\n 1. (c, d2) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (c, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_eff_cont0 (thetaZOSeqD \\<union> ZObis) c d s t I0 F\n\ngoal (4 subgoals):\n 1. mC_ZOC_part c d s t I0 P F\n 2. inj_on F P\n 3. mC_ZOC_wt c d s t I0 P F\n 4. mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. mC_ZOC_part c d s t I0 P F\n 2. inj_on F P\n 3. mC_ZOC_wt c d s t I0 P F\n 4. mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "show \"mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F", "unfolding mC_ZOC_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> P - {I0} \\<and>\n       i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof(intro allI impI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "fix i j I"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "assume I : \"I \\<in> P - {I0}\" and i: \"i \\<in> I\" and j: \"j \\<in> F I\""], ["proof (state)\nthis:\n  I \\<in> P - {I0}\n  i \\<in> I\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "let ?c1' = \"cont c1 s i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "let ?d1' = \"cont d1 t j\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "let ?s' = \"eff c1 s i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "let ?t' = \"eff d1 t j\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "have \"i < brn c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn c1", "using i I P"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P - {I0}\n  \\<Union> P = {..<brn c1}\n\ngoal (1 subgoal):\n 1. i < brn c1", "by blast"], ["proof (state)\nthis:\n  i < brn c1\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "note i = this i"], ["proof (state)\nthis:\n  i < brn c1\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "have \"j < brn d1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j < brn d1", "using j I FP"], ["proof (prove)\nusing this:\n  j \\<in> F I\n  I \\<in> P - {I0}\n  \\<Union> (F ` P) = {..<brn d1}\n\ngoal (1 subgoal):\n 1. j < brn d1", "by blast"], ["proof (state)\nthis:\n  j < brn d1\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "note j = this j"], ["proof (state)\nthis:\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "have c1'd1': \"?c1' \\<approx>01 ?d1'\" \"proper ?c1'\" \"proper ?d1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "using c1d1 i j I match"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n  I \\<in> P - {I0}\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "unfolding c mC_ZOC_def mC_ZOC_eff_cont_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  c1 \\<approx>01 d1\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n  I \\<in> P - {I0}\n  mC_ZOC_part c1 d1 s t I0 P F \\<and>\n  inj_on F P \\<and>\n  mC_ZOC_wt c1 d1 s t I0 P F \\<and>\n  mC_ZOC_eff_cont0 ZObis c1 d1 s t I0 F \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont c1 s i \\<approx>01 local.cont d1 t j &&&\n    proper (local.cont c1 s i) &&& proper (local.cont d1 t j)", "by auto"], ["proof (state)\nthis:\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> P - {I0}; i \\<in> I; j \\<in> F I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOSeqD \\<union> ZObis", "show \"eff c s i \\<approx> eff d t j \\<and> (cont c s i, cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\"\n      (is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j \\<and>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. eff c s i \\<approx> eff d t j\n 2. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show ?eff"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "using match I i j"], ["proof (prove)\nusing this:\n  mC_ZOC ZObis c1 d1 s t I0 P F\n  I \\<in> P - {I0}\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. eff c s i \\<approx> eff d t j", "unfolding c d m_defsAll"], ["proof (prove)\nusing this:\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n  I \\<in> P - {I0}\n  i < brn c1\n  i \\<in> I\n  j < brn d1\n  j \\<in> F I\n\ngoal (1 subgoal):\n 1. eff (c1 ;; c2) s i \\<approx> eff (d1 ;; d2) t j", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>({} \\<in> P \\<longrightarrow> {} = I0) \\<and>\n             {} \\<notin> F ` (P - {I0}) \\<and>\n             I0 \\<in> P \\<and>\n             part {..<brn c1} P \\<and>\n             part {..<brn d1} (F ` P) \\<and>\n             inj_on F P \\<and>\n             (sum (wt c1 s) I0 < 1 \\<and>\n              sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n              (\\<forall>I\\<in>P - {I0}.\n                  sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n                  sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n             (\\<forall>i\\<in>I0.\n                 s \\<approx> eff c1 s i \\<and>\n                 local.cont c1 s i \\<approx>01 d1) \\<and>\n             (\\<forall>j\\<in>F I0.\n                 t \\<approx> eff d1 t j \\<and>\n                 c1 \\<approx>01 local.cont d1 t j) \\<and>\n             (\\<forall>I i j.\n                 I \\<in> P \\<and>\n                 I \\<noteq> I0 \\<and>\n                 i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n                 eff c1 s i \\<approx> eff d1 t j \\<and>\n                 local.cont c1 s i \\<approx>01 local.cont d1 t j);\n     I \\<in> P \\<and> I \\<noteq> I0; i < brn c1; i \\<in> I; j < brn d1;\n     j \\<in> F I\\<rbrakk>\n    \\<Longrightarrow> eff c1 s i \\<approx> eff d1 t j", "by blast"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show ?cont"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof(cases \"finished ?c1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note c1' = True"], ["proof (state)\nthis:\n  finished (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence csi: \"cont c s i = c2\""], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "using i match"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont c s i = c2", "unfolding c m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = c2\n\ngoal (2 subgoals):\n 1. finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof(cases \"finished ?d1'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence \"cont d t j = d2\""], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "using j match"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = d2\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "using csi c2d2"], ["proof (prove)\nusing this:\n  local.cont d t j = d2\n  local.cont c s i = c2\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence dtj: \"cont d t j = ?d1' ;; d2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "using j match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = local.cont d1 t j ;; d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have \"discr ?d1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (local.cont d1 t j)", "using c1'd1' c1' ZObis_finished_discr_R"], ["proof (prove)\nusing this:\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  finished (local.cont c1 s i)\n  \\<lbrakk>proper ?c; finished ?c; ?c \\<approx>01 ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?d\n\ngoal (1 subgoal):\n 1. discr (local.cont d1 t j)", "by blast"], ["proof (state)\nthis:\n  discr (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "unfolding csi dtj"], ["proof (prove)\nusing this:\n  discr (local.cont d1 t j)\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (c2, local.cont d1 t j ;; d2) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence csi: \"cont c s i = ?c1' ;; c2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "using i match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont c s i = local.cont c1 s i ;; c2", "unfolding c m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont c1 s i)\n  i < brn c1\n  i \\<in> I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (c1 ;; c2) s i = local.cont c1 s i ;; c2", "by simp"], ["proof (state)\nthis:\n  local.cont c s i = local.cont c1 s i ;; c2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont c1 s i) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "proof(cases \"finished (cont d1 t j)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "note d1' = True"], ["proof (state)\nthis:\n  finished (local.cont d1 t j)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence dtj: \"cont d t j = d2\""], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "using j match"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = d2\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "have \"discr ?c1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (local.cont c1 s i)", "using c1'd1' d1' ZObis_finished_discr_L"], ["proof (prove)\nusing this:\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  finished (local.cont d1 t j)\n  \\<lbrakk>?c \\<approx>01 ?d; proper ?d; finished ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr (local.cont c1 s i)", "by blast"], ["proof (state)\nthis:\n  discr (local.cont c1 s i)\n\ngoal (2 subgoals):\n 1. finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n 2. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "unfolding csi dtj"], ["proof (prove)\nusing this:\n  discr (local.cont c1 s i)\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, d2) \\<in> thetaZOSeqD \\<union> ZObis", "by simp"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "case False"], ["proof (state)\nthis:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "hence dtj: \"cont d t j = ?d1' ;; d2\""], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "using j match"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  mC_ZOC ZObis c1 d1 s t I0 P F\n\ngoal (1 subgoal):\n 1. local.cont d t j = local.cont d1 t j ;; d2", "unfolding d m_defsAll"], ["proof (prove)\nusing this:\n  \\<not> finished (local.cont d1 t j)\n  j < brn d1\n  j \\<in> F I\n  ({} \\<notin> P - {I0} \\<and>\n   {} \\<notin> F ` (P - {I0}) \\<and>\n   I0 \\<in> P \\<and>\n   part {..<brn c1} P \\<and> part {..<brn d1} (F ` P)) \\<and>\n  inj_on F P \\<and>\n  (sum (wt c1 s) I0 < 1 \\<and> sum (wt d1 t) (F I0) < 1 \\<longrightarrow>\n   (\\<forall>I\\<in>P - {I0}.\n       sum (wt c1 s) I / (1 - sum (wt c1 s) I0) =\n       sum (wt d1 t) (F I) / (1 - sum (wt d1 t) (F I0)))) \\<and>\n  ((\\<forall>i\\<in>I0.\n       s \\<approx> eff c1 s i \\<and>\n       local.cont c1 s i \\<approx>01 d1) \\<and>\n   (\\<forall>j\\<in>F I0.\n       t \\<approx> eff d1 t j \\<and>\n       c1 \\<approx>01 local.cont d1 t j)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P - {I0} \\<and> i \\<in> I \\<and> j \\<in> F I \\<longrightarrow>\n      eff c1 s i \\<approx> eff d1 t j \\<and>\n      local.cont c1 s i \\<approx>01 local.cont d1 t j)\n\ngoal (1 subgoal):\n 1. local.cont (d1 ;; d2) t j = local.cont d1 t j ;; d2", "by simp"], ["proof (state)\nthis:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. \\<not> finished (local.cont d1 t j) \\<Longrightarrow>\n    (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.cont d t j = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis", "unfolding csi dtj thetaZOSeqD_def"], ["proof (prove)\nusing this:\n  local.cont d1 t j ;; d2 = local.cont d1 t j ;; d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, local.cont d1 t j ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1} \\<union>\n          ZObis", "using c1'd1' c2d2"], ["proof (prove)\nusing this:\n  local.cont d1 t j ;; d2 = local.cont d1 t j ;; d2\n  local.cont c1 s i \\<approx>01 local.cont d1 t j\n  proper (local.cont c1 s i)\n  proper (local.cont d1 t j)\n  proper c2\n  proper d2\n  discr c2\n  discr d2\n\ngoal (1 subgoal):\n 1. (local.cont c1 s i ;; c2, local.cont d1 t j ;; d2)\n    \\<in> {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n           proper c1 \\<and>\n           proper d1 \\<and>\n           proper c2 \\<and>\n           proper d2 \\<and>\n           discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1} \\<union>\n          ZObis", "by blast"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff c s i \\<approx> eff d t j \\<and>\n  (local.cont c s i, local.cont d t j) \\<in> thetaZOSeqD \\<union> ZObis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_eff_cont (thetaZOSeqD \\<union> ZObis) c d s t I0 P F\n\ngoal (3 subgoals):\n 1. mC_ZOC_part c d s t I0 P F\n 2. inj_on F P\n 3. mC_ZOC_wt c d s t I0 P F", "qed(insert match, unfold m_defsAll c d, auto)"], ["proof (state)\nthis:\n  \\<exists>I0 P F. mC_ZOC (thetaZOSeqD \\<union> ZObis) c d s t I0 P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaZOSeqD_ZObis:\n\"thetaZOSeqD \\<subseteq> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOSeqD \\<subseteq> ZObis", "using ZObis_coind thetaZOSeqD_ZOretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> ZOretr (?theta \\<union> ZObis) \\<Longrightarrow>\n  ?theta \\<subseteq> ZObis\n  thetaZOSeqD \\<subseteq> ZOretr (thetaZOSeqD \\<union> ZObis)\n\ngoal (1 subgoal):\n 1. thetaZOSeqD \\<subseteq> ZObis", "by blast"], ["", "theorem Seq_ZObis[simp]:\nassumes \"proper c1\" and \"proper d1\" and \"proper c2\" and \"proper d2\"\nand \"c1 \\<approx>01 d1\" and \"discr c2\" and \"discr d2\"\nshows \"c1 ;; c2 \\<approx>01 d1 ;; d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>01 d1 ;; d2", "using assms thetaZOSeqD_ZObis"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  proper c2\n  proper d2\n  c1 \\<approx>01 d1\n  discr c2\n  discr d2\n  thetaZOSeqD \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>01 d1 ;; d2", "unfolding thetaZOSeqD_def"], ["proof (prove)\nusing this:\n  proper c1\n  proper d1\n  proper c2\n  proper d2\n  c1 \\<approx>01 d1\n  discr c2\n  discr d2\n  {(c1 ;; c2, d1 ;; d2) |c1 c2 d1 d2.\n   proper c1 \\<and>\n   proper d1 \\<and>\n   proper c2 \\<and>\n   proper d2 \\<and> discr c2 \\<and> discr d2 \\<and> c1 \\<approx>01 d1}\n  \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. c1 ;; c2 \\<approx>01 d1 ;; d2", "by auto"], ["", "(* Ch *)"], ["", "definition thetaZOCh where\n\"thetaZOCh ch c1 c2 d1 d2 \\<equiv> {(Ch ch c1 c2, Ch ch d1 d2)}\""], ["", "lemma thetaZOCh_Sretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq>\n       Sretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\"\n(is \"?th \\<subseteq> Sretr (?th \\<union> ZObis)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2\n    \\<subseteq> Sretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)", "unfolding Sretr_def matchC_C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>P F.\n                        mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s\n                         t P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "assume c_d: \"(c, d) \\<in> ?th\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaZOCh ch c1 c2 d1 d2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "hence c: \"c = Ch ch c1 c2\" \"brn c = 2\"\n  and d: \"d = Ch ch d1 d2\" \"brn d = 2\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaZOCh ch c1 c2 d1 d2\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (c = Ch ch c1 c2 &&& brn c = 2) &&& d = Ch ch d1 d2 &&& brn d = 2", "unfolding thetaZOCh_def"], ["proof (prove)\nusing this:\n  (c, d) \\<in> {(Ch ch c1 c2, Ch ch d1 d2)}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (c = Ch ch c1 c2 &&& brn c = 2) &&& d = Ch ch d1 d2 &&& brn d = 2", "by auto"], ["proof (state)\nthis:\n  c = Ch ch c1 c2\n  brn c = 2\n  d = Ch ch d1 d2\n  brn d = 2\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "let ?P = \"{{0}, {1}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "let ?F = \"%I. I\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOCh ch c1 c2 d1 d2;\n        s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P.\n                            Ex (mC_C\n                                 (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) a\n                                 b s t P)", "show \"\\<exists>P F. mC_C (?th Un ZObis) c d s t P F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P F. mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s t P F", "apply(rule exI[of _ ?P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F.\n       mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s t {{0}, {1}} F", "apply(rule exI[of _ ?F])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s t {{0}, {1}}\n     (\\<lambda>I. I)", "using assms st c_d c"], ["proof (prove)\nusing this:\n  compatCh ch\n  c1 \\<approx>01 d1\n  c2 \\<approx>01 d2\n  s \\<approx> t\n  (c, d) \\<in> thetaZOCh ch c1 c2 d1 d2\n  c = Ch ch c1 c2\n  brn c = 2\n\ngoal (1 subgoal):\n 1. mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s t {{0}, {1}}\n     (\\<lambda>I. I)", "unfolding m_defsAll thetaZOCh_def part_def"], ["proof (prove)\nusing this:\n  compatCh ch\n  c1 \\<approx>01 d1\n  c2 \\<approx>01 d2\n  s \\<approx> t\n  (c, d) \\<in> {(Ch ch c1 c2, Ch ch d1 d2)}\n  c = Ch ch c1 c2\n  brn c = 2\n\ngoal (1 subgoal):\n 1. ({} \\<notin> {{0}, {1}} \\<and>\n     {} \\<notin> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n     (\\<Union> {{0}, {1}} = {..<brn c} \\<and>\n      (\\<forall>J1 J2.\n          J1 \\<in> {{0}, {1}} \\<and>\n          J2 \\<in> {{0}, {1}} \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n          J1 \\<inter> J2 = {})) \\<and>\n     (\\<Union>I\\<in>{{0}, {1}}. I) = {..<brn d} \\<and>\n     (\\<forall>J1 J2.\n         J1 \\<in> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n         J2 \\<in> (\\<lambda>I. I) ` {{0}, {1}} \\<and>\n         J1 \\<noteq> J2 \\<longrightarrow>\n         J1 \\<inter> J2 = {})) \\<and>\n    inj_on (\\<lambda>I. I) {{0}, {1}} \\<and>\n    (\\<forall>I\\<in>{{0}, {1}}. sum (wt c s) I = sum (wt d t) I) \\<and>\n    (\\<forall>I i j.\n        I \\<in> {{0}, {1}} \\<and>\n        i \\<in> I \\<and> j \\<in> I \\<longrightarrow>\n        eff c s i \\<approx> eff d t j \\<and>\n        (local.cont c s i, local.cont d t j)\n        \\<in> {(Ch ch c1 c2, Ch ch d1 d2)} \\<union> ZObis)", "by auto"], ["proof (state)\nthis:\n  \\<exists>P F. mC_C (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis) c d s t P F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaZOCh_ZOretr:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq>\n       ZOretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2\n    \\<subseteq> ZOretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)", "using thetaZOCh_Sretr[OF assms]"], ["proof (prove)\nusing this:\n  thetaZOCh ch c1 c2 d1 d2\n  \\<subseteq> Sretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\n\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2\n    \\<subseteq> ZOretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)", "by (metis (no_types) Retr_incl subset_trans)"], ["", "lemma thetaZOCh_ZObis:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"thetaZOCh ch c1 c2 d1 d2 \\<subseteq> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2 \\<subseteq> ZObis", "using ZObis_coind thetaZOCh_ZOretr[OF assms]"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> ZOretr (?theta \\<union> ZObis) \\<Longrightarrow>\n  ?theta \\<subseteq> ZObis\n  thetaZOCh ch c1 c2 d1 d2\n  \\<subseteq> ZOretr (thetaZOCh ch c1 c2 d1 d2 \\<union> ZObis)\n\ngoal (1 subgoal):\n 1. thetaZOCh ch c1 c2 d1 d2 \\<subseteq> ZObis", "by blast"], ["", "theorem Ch_siso_ZObis[simp]:\nassumes \"compatCh ch\" and \"c1 \\<approx>01 d1\" and \"c2 \\<approx>01 d2\"\nshows \"Ch ch c1 c2 \\<approx>01 Ch ch d1 d2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>01 Ch ch d1 d2", "using thetaZOCh_ZObis[OF assms]"], ["proof (prove)\nusing this:\n  thetaZOCh ch c1 c2 d1 d2 \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>01 Ch ch d1 d2", "unfolding thetaZOCh_def"], ["proof (prove)\nusing this:\n  {(Ch ch c1 c2, Ch ch d1 d2)} \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. Ch ch c1 c2 \\<approx>01 Ch ch d1 d2", "by auto"], ["", "(*  *)"], ["", "definition theFTOne where\n\"theFTOne cl dl \\<equiv> theFT cl \\<union> theFT dl\""], ["", "definition theNFTBoth where\n\"theNFTBoth cl dl \\<equiv> theNFT cl \\<inter> theNFT dl\""], ["", "lemma theFTOne_sym: \"theFTOne cl dl = theFTOne dl cl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. theFTOne cl dl = theFTOne dl cl", "unfolding theFTOne_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. theFT cl \\<union> theFT dl = theFT dl \\<union> theFT cl", "by auto"], ["", "lemma finite_theFTOne[simp]:\n\"finite (theFTOne cl dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (theFTOne cl dl)", "unfolding theFTOne_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (theFT cl \\<union> theFT dl)", "by simp"], ["", "lemma theFTOne_length_finished[simp]:\nassumes \"n \\<in> theFTOne cl dl\"\nshows \"(n < length cl \\<and> finished (cl!n)) \\<or> (n < length dl \\<and> finished (dl!n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < length cl \\<and> finished (cl ! n) \\<or>\n    n < length dl \\<and> finished (dl ! n)", "using assms"], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. n < length cl \\<and> finished (cl ! n) \\<or>\n    n < length dl \\<and> finished (dl ! n)", "unfolding theFTOne_def"], ["proof (prove)\nusing this:\n  n \\<in> theFT cl \\<union> theFT dl\n\ngoal (1 subgoal):\n 1. n < length cl \\<and> finished (cl ! n) \\<or>\n    n < length dl \\<and> finished (dl ! n)", "by auto"], ["", "lemma theFTOne_length[simp]:\nassumes \"length cl = length dl\" and \"n \\<in> theFTOne cl dl\"\nshows \"n < length cl\" and \"n < length dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "using assms theFTOne_length_finished[of n cl dl]"], ["proof (prove)\nusing this:\n  length cl = length dl\n  n \\<in> theFTOne cl dl\n  n \\<in> theFTOne cl dl \\<Longrightarrow>\n  n < length cl \\<and> finished (cl ! n) \\<or>\n  n < length dl \\<and> finished (dl ! n)\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "by auto"], ["", "lemma theFTOne_intro[intro]:\nassumes \"\\<And> n. (n < length cl \\<and> finished (cl!n)) \\<or> (n < length dl \\<and> finished (dl!n))\"\nshows \"n \\<in> theFTOne cl dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<in> theFTOne cl dl", "using assms"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<and> finished (cl ! ?n1) \\<or>\n  ?n1 < length dl \\<and> finished (dl ! ?n1)\n\ngoal (1 subgoal):\n 1. n \\<in> theFTOne cl dl", "unfolding theFTOne_def"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<and> finished (cl ! ?n1) \\<or>\n  ?n1 < length dl \\<and> finished (dl ! ?n1)\n\ngoal (1 subgoal):\n 1. n \\<in> theFT cl \\<union> theFT dl", "by auto"], ["", "lemma pickFT_theFTOne[simp]:\nassumes \"WtFT cl = 1\"\nshows \"pickFT cl \\<in> theFTOne cl dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pickFT cl \\<in> theFTOne cl dl", "using assms"], ["proof (prove)\nusing this:\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. pickFT cl \\<in> theFTOne cl dl", "unfolding theFTOne_def"], ["proof (prove)\nusing this:\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. pickFT cl \\<in> theFT cl \\<union> theFT dl", "by auto"], ["", "lemma finite_theNFTBoth[simp]:\n\"finite (theNFTBoth cl dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (theNFTBoth cl dl)", "unfolding theNFTBoth_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (theNFT cl \\<inter> theNFT dl)", "by simp"], ["", "lemma theNFTBoth_sym: \"theNFTBoth cl dl = theNFTBoth dl cl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. theNFTBoth cl dl = theNFTBoth dl cl", "unfolding theNFTBoth_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. theNFT cl \\<inter> theNFT dl = theNFT dl \\<inter> theNFT cl", "by auto"], ["", "lemma theNFTBoth_length_finished[simp]:\nassumes \"n \\<in> theNFTBoth cl dl\"\nshows \"n < length cl\" and \"\\<not> finished (cl!n)\"\nand \"n < length dl\" and \"\\<not> finished (dl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (n < length cl &&& \\<not> finished (cl ! n)) &&&\n    n < length dl &&& \\<not> finished (dl ! n)", "using assms"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& \\<not> finished (cl ! n)) &&&\n    n < length dl &&& \\<not> finished (dl ! n)", "unfolding theNFTBoth_def"], ["proof (prove)\nusing this:\n  n \\<in> theNFT cl \\<inter> theNFT dl\n\ngoal (1 subgoal):\n 1. (n < length cl &&& \\<not> finished (cl ! n)) &&&\n    n < length dl &&& \\<not> finished (dl ! n)", "by auto"], ["", "lemma theNFTBoth_intro[intro]:\nassumes \"\\<And> n. n < length cl \\<and> \\<not> finished (cl!n) \\<and> n < length dl \\<and> \\<not> finished (dl!n)\"\nshows \"n \\<in> theNFTBoth cl dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<in> theNFTBoth cl dl", "using assms"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<and>\n  \\<not> finished (cl ! ?n1) \\<and>\n  ?n1 < length dl \\<and> \\<not> finished (dl ! ?n1)\n\ngoal (1 subgoal):\n 1. n \\<in> theNFTBoth cl dl", "unfolding theNFTBoth_def"], ["proof (prove)\nusing this:\n  ?n1 < length cl \\<and>\n  \\<not> finished (cl ! ?n1) \\<and>\n  ?n1 < length dl \\<and> \\<not> finished (dl ! ?n1)\n\ngoal (1 subgoal):\n 1. n \\<in> theNFT cl \\<inter> theNFT dl", "by auto"], ["", "lemma theFTOne_Int_theNFTBoth[simp]:\n\"theFTOne cl dl \\<inter> theNFTBoth cl dl = {}\"\nand \"theNFTBoth cl dl \\<inter> theFTOne cl dl = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. theFTOne cl dl \\<inter> theNFTBoth cl dl = {} &&&\n    theNFTBoth cl dl \\<inter> theFTOne cl dl = {}", "unfolding theFTOne_def theNFTBoth_def theFT_def theNFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ({n. n < length cl \\<and> finished (cl ! n)} \\<union>\n     {n. n < length dl \\<and> finished (dl ! n)}) \\<inter>\n    ({n. n < length cl \\<and> \\<not> finished (cl ! n)} \\<inter>\n     {n. n < length dl \\<and> \\<not> finished (dl ! n)}) =\n    {} &&&\n    {n. n < length cl \\<and> \\<not> finished (cl ! n)} \\<inter>\n    {n. n < length dl \\<and> \\<not> finished (dl ! n)} \\<inter>\n    ({n. n < length cl \\<and> finished (cl ! n)} \\<union>\n     {n. n < length dl \\<and> finished (dl ! n)}) =\n    {}", "by auto"], ["", "lemma theFT_Un_theNFT_One_Both[simp]:\nassumes \"length cl = length dl\"\nshows\n\"theFTOne cl dl \\<union> theNFTBoth cl dl = {..< length cl}\" and\n\"theNFTBoth cl dl \\<union> theFTOne cl dl = {..< length cl}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. theFTOne cl dl \\<union> theNFTBoth cl dl = {..<length cl} &&&\n    theNFTBoth cl dl \\<union> theFTOne cl dl = {..<length cl}", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. theFTOne cl dl \\<union> theNFTBoth cl dl = {..<length cl} &&&\n    theNFTBoth cl dl \\<union> theFTOne cl dl = {..<length cl}", "unfolding theFTOne_def theNFTBoth_def theFT_def theNFT_def"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. {n. n < length cl \\<and> finished (cl ! n)} \\<union>\n    {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n    {n. n < length cl \\<and> \\<not> finished (cl ! n)} \\<inter>\n    {n. n < length dl \\<and> \\<not> finished (dl ! n)} =\n    {..<length cl} &&&\n    {n. n < length cl \\<and> \\<not> finished (cl ! n)} \\<inter>\n    {n. n < length dl \\<and> \\<not> finished (dl ! n)} \\<union>\n    ({n. n < length cl \\<and> finished (cl ! n)} \\<union>\n     {n. n < length dl \\<and> finished (dl ! n)}) =\n    {..<length cl}", "by auto"], ["", "lemma in_theFTOne_theNFTBoth[simp]:\nassumes \"n1 \\<in> theFTOne cl dl\" and \"n2 \\<in> theNFTBoth cl dl\"\nshows \"n1 \\<noteq> n2\" and \"n2 \\<noteq> n1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n1 \\<noteq> n2 &&& n2 \\<noteq> n1", "using assms theFTOne_Int_theNFTBoth"], ["proof (prove)\nusing this:\n  n1 \\<in> theFTOne cl dl\n  n2 \\<in> theNFTBoth cl dl\n  theFTOne ?cl ?dl \\<inter> theNFTBoth ?cl ?dl = {}\n\ngoal (1 subgoal):\n 1. n1 \\<noteq> n2 &&& n2 \\<noteq> n1", "by blast+"], ["", "(*  *)"], ["", "definition BrnFT where\n\"BrnFT cl dl \\<equiv> \\<Union> n \\<in> theFTOne cl dl. {brnL cl n ..<+ brn (cl!n)}\""], ["", "definition BrnNFT where\n\"BrnNFT cl dl \\<equiv> \\<Union> n \\<in> theNFTBoth cl dl. {brnL cl n ..<+ brn (cl!n)}\""], ["", "lemma BrnFT_elim[elim, consumes 1, case_names Local]:\nassumes \"ii \\<in> BrnFT cl dl\"\nand \"\\<And> n i. \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl!n); ii = brnL cl n + i\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi"], ["proof (prove)\ngoal (1 subgoal):\n 1. phi", "using assms"], ["proof (prove)\nusing this:\n  ii \\<in> BrnFT cl dl\n  \\<lbrakk>?n3 \\<in> theFTOne cl dl; ?i3 < brn (cl ! ?n3);\n   ii = brnL cl ?n3 + ?i3\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "unfolding BrnFT_def"], ["proof (prove)\nusing this:\n  ii \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n               {brnL cl n..<brnL cl n + brn (cl ! n)})\n  \\<lbrakk>?n3 \\<in> theFTOne cl dl; ?i3 < brn (cl ! ?n3);\n   ii = brnL cl ?n3 + ?i3\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "by auto"], ["", "lemma finite_BrnFT[simp]:\n\"finite (BrnFT cl dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (BrnFT cl dl)", "unfolding BrnFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (\\<Union>n\\<in>theFTOne cl dl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["", "lemma BrnFT_incl_brnL[simp]:\nassumes l: \"length cl = length dl\" and cl: \"properL cl\"\nshows \"BrnFT cl dl \\<subseteq> {..< brnL cl (length cl)}\" (is \"?L \\<subseteq> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "have \"?L \\<subseteq> (\\<Union> n<length cl. {brnL cl n..<+brn (cl ! n)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl\n    \\<subseteq> (\\<Union>n<length cl.\n                    {brnL cl n..<brnL cl n + brn (cl ! n)})", "using l"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. BrnFT cl dl\n    \\<subseteq> (\\<Union>n<length cl.\n                    {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding BrnFT_def theFTOne_def theFT_def"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (\\<Union>n\\<in>{n. n < length cl \\<and> finished (cl ! n)} \\<union>\n                   {n. n < length dl \\<and> finished (dl ! n)}.\n        {brnL cl n..<brnL cl n + brn (cl ! n)})\n    \\<subseteq> (\\<Union>n<length cl.\n                    {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["proof (state)\nthis:\n  BrnFT cl dl\n  \\<subseteq> (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "also"], ["proof (state)\nthis:\n  BrnFT cl dl\n  \\<subseteq> (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "have \"... = ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    {..<brnL cl (length cl)}", "using cl brnL_UN"], ["proof (prove)\nusing this:\n  properL cl\n  properL ?cl \\<Longrightarrow>\n  {..<brnL ?cl (length ?cl)} =\n  (\\<Union>n<length ?cl. {brnL ?cl n..<brnL ?cl n + brn (?cl ! n)})\n\ngoal (1 subgoal):\n 1. (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    {..<brnL cl (length cl)}", "by auto"], ["proof (state)\nthis:\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "finally"], ["proof (chain)\npicking this:\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "show ?thesis"], ["proof (prove)\nusing this:\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "."], ["proof (state)\nthis:\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma BrnNFT_elim[elim, consumes 1, case_names Local]:\nassumes \"ii \\<in> BrnNFT cl dl\"\nand \"\\<And> n i. \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl!n); ii = brnL cl n + i\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi"], ["proof (prove)\ngoal (1 subgoal):\n 1. phi", "using assms"], ["proof (prove)\nusing this:\n  ii \\<in> BrnNFT cl dl\n  \\<lbrakk>?n3 \\<in> theNFTBoth cl dl; ?i3 < brn (cl ! ?n3);\n   ii = brnL cl ?n3 + ?i3\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "unfolding BrnNFT_def"], ["proof (prove)\nusing this:\n  ii \\<in> (\\<Union>n\\<in>theNFTBoth cl dl.\n               {brnL cl n..<brnL cl n + brn (cl ! n)})\n  \\<lbrakk>?n3 \\<in> theNFTBoth cl dl; ?i3 < brn (cl ! ?n3);\n   ii = brnL cl ?n3 + ?i3\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "by auto"], ["", "lemma finite_BrnNFT[simp]:\n\"finite (BrnNFT cl dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (BrnNFT cl dl)", "unfolding BrnNFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (\\<Union>n\\<in>theNFTBoth cl dl.\n         {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["", "lemma BrnNFT_incl_brnL[simp]:\nassumes cl: \"properL cl\"\nshows \"BrnNFT cl dl \\<subseteq> {..< brnL cl (length cl)}\" (is \"?L \\<subseteq> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "have \"?L \\<subseteq> (\\<Union> n<length cl. {brnL cl n..<+brn (cl ! n)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnNFT cl dl\n    \\<subseteq> (\\<Union>n<length cl.\n                    {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding BrnNFT_def theNFTBoth_def theNFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>n\\<in>{n. n < length cl \\<and>\n                       \\<not> finished (cl ! n)} \\<inter>\n                   {n. n < length dl \\<and> \\<not> finished (dl ! n)}.\n        {brnL cl n..<brnL cl n + brn (cl ! n)})\n    \\<subseteq> (\\<Union>n<length cl.\n                    {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["proof (state)\nthis:\n  BrnNFT cl dl\n  \\<subseteq> (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "also"], ["proof (state)\nthis:\n  BrnNFT cl dl\n  \\<subseteq> (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "have \"... = ?R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    {..<brnL cl (length cl)}", "using cl brnL_UN"], ["proof (prove)\nusing this:\n  properL cl\n  properL ?cl \\<Longrightarrow>\n  {..<brnL ?cl (length ?cl)} =\n  (\\<Union>n<length ?cl. {brnL ?cl n..<brnL ?cl n + brn (?cl ! n)})\n\ngoal (1 subgoal):\n 1. (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    {..<brnL cl (length cl)}", "by auto"], ["proof (state)\nthis:\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "finally"], ["proof (chain)\npicking this:\n  BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "show ?thesis"], ["proof (prove)\nusing this:\n  BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "."], ["proof (state)\nthis:\n  BrnNFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma BrnFT_Int_BrnNFT[simp]:\nassumes l: \"length cl = length dl\"\nshows\n\"BrnFT cl dl \\<inter> BrnNFT cl dl = {}\" (is \"?L\")\nand \"BrnNFT cl dl \\<inter> BrnFT cl dl = {}\" (is \"?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {} &&&\n    BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "proof-"], ["proof (state)\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "fix ii"], ["proof (state)\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "assume 1: \"ii \\<in> BrnFT cl dl\" and 2: \"ii \\<in> BrnNFT cl dl\""], ["proof (state)\nthis:\n  ii \\<in> BrnFT cl dl\n  ii \\<in> BrnNFT cl dl\n\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "from 1"], ["proof (chain)\npicking this:\n  ii \\<in> BrnFT cl dl", "have False"], ["proof (prove)\nusing this:\n  ii \\<in> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. False", "proof (cases rule: BrnFT_elim)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "case (Local n1 i1)"], ["proof (state)\nthis:\n  n1 \\<in> theFTOne cl dl\n  i1 < brn (cl ! n1)\n  ii = brnL cl n1 + i1\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "hence n1: \"n1 < length cl\" \"n1 < length dl\" \"n1 \\<in> theFTOne cl dl\"\n     and i1: \"i1 < brn (cl ! n1)\"\n     and ii1: \"ii = brnL cl n1 + i1\""], ["proof (prove)\nusing this:\n  n1 \\<in> theFTOne cl dl\n  i1 < brn (cl ! n1)\n  ii = brnL cl n1 + i1\n\ngoal (1 subgoal):\n 1. (n1 < length cl &&& n1 < length dl &&& n1 \\<in> theFTOne cl dl) &&&\n    i1 < brn (cl ! n1) &&& ii = brnL cl n1 + i1", "using l"], ["proof (prove)\nusing this:\n  n1 \\<in> theFTOne cl dl\n  i1 < brn (cl ! n1)\n  ii = brnL cl n1 + i1\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n1 < length cl &&& n1 < length dl &&& n1 \\<in> theFTOne cl dl) &&&\n    i1 < brn (cl ! n1) &&& ii = brnL cl n1 + i1", "by auto"], ["proof (state)\nthis:\n  n1 < length cl\n  n1 < length dl\n  n1 \\<in> theFTOne cl dl\n  i1 < brn (cl ! n1)\n  ii = brnL cl n1 + i1\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "from 2"], ["proof (chain)\npicking this:\n  ii \\<in> BrnNFT cl dl", "show ?thesis"], ["proof (prove)\nusing this:\n  ii \\<in> BrnNFT cl dl\n\ngoal (1 subgoal):\n 1. False", "proof (cases rule: BrnNFT_elim)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "case (Local n2 i2)"], ["proof (state)\nthis:\n  n2 \\<in> theNFTBoth cl dl\n  i2 < brn (cl ! n2)\n  ii = brnL cl n2 + i2\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "hence n2: \"n2 \\<in> theNFTBoth cl dl\" and i2: \"i2 < brn (cl ! n2)\"\n       and ii2: \"ii = brnL cl n2 + i2\""], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  i2 < brn (cl ! n2)\n  ii = brnL cl n2 + i2\n\ngoal (1 subgoal):\n 1. n2 \\<in> theNFTBoth cl dl &&&\n    i2 < brn (cl ! n2) &&& ii = brnL cl n2 + i2", "by auto"], ["proof (state)\nthis:\n  n2 \\<in> theNFTBoth cl dl\n  i2 < brn (cl ! n2)\n  ii = brnL cl n2 + i2\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "have n12: \"n1 \\<noteq> n2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n1 \\<noteq> n2", "using n1 n2"], ["proof (prove)\nusing this:\n  n1 < length cl\n  n1 < length dl\n  n1 \\<in> theFTOne cl dl\n  n2 \\<in> theNFTBoth cl dl\n\ngoal (1 subgoal):\n 1. n1 \\<noteq> n2", "by simp"], ["proof (state)\nthis:\n  n1 \\<noteq> n2\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> False", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof(cases \"n1 < n2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "case True"], ["proof (state)\nthis:\n  n1 < n2\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "hence Suc: \"Suc n1 \\<le> n2\""], ["proof (prove)\nusing this:\n  n1 < n2\n\ngoal (1 subgoal):\n 1. Suc n1 \\<le> n2", "by simp"], ["proof (state)\nthis:\n  Suc n1 \\<le> n2\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"ii < brnL cl (Suc n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii < brnL cl (Suc n1)", "unfolding ii1"], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n1 + i1 < brnL cl (Suc n1)", "using i1 n1"], ["proof (prove)\nusing this:\n  i1 < brn (cl ! n1)\n  n1 < length cl\n  n1 < length dl\n  n1 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. brnL cl n1 + i1 < brnL cl (Suc n1)", "by simp"], ["proof (state)\nthis:\n  ii < brnL cl (Suc n1)\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  ii < brnL cl (Suc n1)\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"... \\<le> brnL cl n2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl (Suc n1) \\<le> brnL cl n2", "using Suc"], ["proof (prove)\nusing this:\n  Suc n1 \\<le> n2\n\ngoal (1 subgoal):\n 1. brnL cl (Suc n1) \\<le> brnL cl n2", "by auto"], ["proof (state)\nthis:\n  brnL cl (Suc n1) \\<le> brnL cl n2\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  brnL cl (Suc n1) \\<le> brnL cl n2\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"... \\<le> ii\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n2 \\<le> ii", "unfolding ii2"], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n2 \\<le> brnL cl n2 + i2", "by simp"], ["proof (state)\nthis:\n  brnL cl n2 \\<le> ii\n\ngoal (2 subgoals):\n 1. n1 < n2 \\<Longrightarrow> False\n 2. \\<not> n1 < n2 \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  ii < ii", "show False"], ["proof (prove)\nusing this:\n  ii < ii\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "case False"], ["proof (state)\nthis:\n  \\<not> n1 < n2\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "hence Suc: \"Suc n2 \\<le> n1\""], ["proof (prove)\nusing this:\n  \\<not> n1 < n2\n\ngoal (1 subgoal):\n 1. Suc n2 \\<le> n1", "using n12"], ["proof (prove)\nusing this:\n  \\<not> n1 < n2\n  n1 \\<noteq> n2\n\ngoal (1 subgoal):\n 1. Suc n2 \\<le> n1", "by simp"], ["proof (state)\nthis:\n  Suc n2 \\<le> n1\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"ii < brnL cl (Suc n2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ii < brnL cl (Suc n2)", "unfolding ii2"], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n2 + i2 < brnL cl (Suc n2)", "using i2 n2"], ["proof (prove)\nusing this:\n  i2 < brn (cl ! n2)\n  n2 \\<in> theNFTBoth cl dl\n\ngoal (1 subgoal):\n 1. brnL cl n2 + i2 < brnL cl (Suc n2)", "by simp"], ["proof (state)\nthis:\n  ii < brnL cl (Suc n2)\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  ii < brnL cl (Suc n2)\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"... \\<le> brnL cl n1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl (Suc n2) \\<le> brnL cl n1", "using Suc"], ["proof (prove)\nusing this:\n  Suc n2 \\<le> n1\n\ngoal (1 subgoal):\n 1. brnL cl (Suc n2) \\<le> brnL cl n1", "by auto"], ["proof (state)\nthis:\n  brnL cl (Suc n2) \\<le> brnL cl n1\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  brnL cl (Suc n2) \\<le> brnL cl n1\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "have \"... \\<le> ii\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n1 \\<le> ii", "unfolding ii1"], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl n1 \\<le> brnL cl n1 + i1", "by simp"], ["proof (state)\nthis:\n  brnL cl n1 \\<le> ii\n\ngoal (1 subgoal):\n 1. \\<not> n1 < n2 \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  ii < ii", "show False"], ["proof (prove)\nusing this:\n  ii < ii\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?ii5 \\<in> BrnFT cl dl; ?ii5 \\<in> BrnNFT cl dl\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n 2. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "thus ?L"], ["proof (prove)\nusing this:\n  \\<lbrakk>?ii5 \\<in> BrnFT cl dl; ?ii5 \\<in> BrnNFT cl dl\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<inter> BrnNFT cl dl = {}", "by blast"], ["proof (state)\nthis:\n  BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "thus ?R"], ["proof (prove)\nusing this:\n  BrnFT cl dl \\<inter> BrnNFT cl dl = {}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<inter> BrnFT cl dl = {}", "by blast"], ["proof (state)\nthis:\n  BrnNFT cl dl \\<inter> BrnFT cl dl = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma BrnFT_Un_BrnNFT[simp]:\nassumes l: \"length cl = length dl\" and cl: \"properL cl\"\nshows \"BrnFT cl dl \\<union> BrnNFT cl dl = {..< brnL cl (length cl)}\" (is \"?L1 = ?R\")\nand \"BrnNFT cl dl \\<union> BrnFT cl dl = {..< brnL cl (length cl)}\" (is \"?L2 = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)} &&&\n    BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}", "proof-"], ["proof (state)\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)}\n 2. BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}", "have R: \"?R = (\\<Union> n<length cl. {brnL cl n..<+brn (cl ! n)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<brnL cl (length cl)} =\n    (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "using cl brnL_UN"], ["proof (prove)\nusing this:\n  properL cl\n  properL ?cl \\<Longrightarrow>\n  {..<brnL ?cl (length ?cl)} =\n  (\\<Union>n<length ?cl. {brnL ?cl n..<brnL ?cl n + brn (?cl ! n)})\n\ngoal (1 subgoal):\n 1. {..<brnL cl (length cl)} =\n    (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["proof (state)\nthis:\n  {..<brnL cl (length cl)} =\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)}\n 2. BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}", "thus \"?L1 = ?R\""], ["proof (prove)\nusing this:\n  {..<brnL cl (length cl)} =\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)}", "unfolding R"], ["proof (prove)\nusing this:\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<union> BrnNFT cl dl =\n    (\\<Union>n<length cl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding l BrnFT_def BrnNFT_def\n  theFTOne_def theNFTBoth_def theFT_def theNFT_def"], ["proof (prove)\nusing this:\n  (\\<Union>n<length dl. {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Union>n<length dl. {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. (\\<Union>n\\<in>{n. n < length dl \\<and> finished (cl ! n)} \\<union>\n                   {n. n < length dl \\<and> finished (dl ! n)}.\n        {brnL cl n..<brnL cl n + brn (cl ! n)}) \\<union>\n    (\\<Union>n\\<in>{n. n < length dl \\<and>\n                       \\<not> finished (cl ! n)} \\<inter>\n                   {n. n < length dl \\<and> \\<not> finished (dl ! n)}.\n        {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Union>n<length dl. {brnL cl n..<brnL cl n + brn (cl ! n)})", "by blast"], ["proof (state)\nthis:\n  BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}", "thus \"?L2 = ?R\""], ["proof (prove)\nusing this:\n  BrnFT cl dl \\<union> BrnNFT cl dl = {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}", "by blast"], ["proof (state)\nthis:\n  BrnNFT cl dl \\<union> BrnFT cl dl = {..<brnL cl (length cl)}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma BrnFT_part:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"BrnFT cl dl = (\\<Union> n \\<in> theFTOne cl dl. Union (shift cl n ` (P n)))\" (is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl =\n    (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))", "proof (safe elim!: BrnFT_elim)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "fix x n i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "assume n: \"n \\<in> theFTOne cl dl\" and i: \"i < brn (cl ! n)\""], ["proof (state)\nthis:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "hence \"n < length cl\" \"n < length dl\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "using l"], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "note n = this n"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "hence \"i \\<in> Union (P n)\""], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> (P n)", "using P i"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  ?n3 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n3)} (P ?n3)\n  i < brn (cl ! n)\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> (P n)", "unfolding part_def"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  ?n3 < length cl \\<Longrightarrow>\n  \\<Union> (P ?n3) = {..<brn (cl ! ?n3)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> P ?n3 \\<and>\n      J2 \\<in> P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n  i < brn (cl ! n)\n\ngoal (1 subgoal):\n 1. i \\<in> \\<Union> (P n)", "by auto"], ["proof (state)\nthis:\n  i \\<in> \\<Union> (P n)\n\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "then"], ["proof (chain)\npicking this:\n  i \\<in> \\<Union> (P n)", "obtain I where \"i \\<in> I\" and \"I \\<in> P n\""], ["proof (prove)\nusing this:\n  i \\<in> \\<Union> (P n)\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>i \\<in> I; I \\<in> P n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  i \\<in> I\n  I \\<in> P n\n\ngoal (2 subgoals):\n 1. \\<And>x n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n)\\<rbrakk>\n       \\<Longrightarrow> brnL cl n + i\n                         \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                                   \\<Union> (local.shift cl n ` P n))\n 2. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "thus \"brnL cl n + i \\<in> ?R\""], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. brnL cl n + i\n    \\<in> (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))", "using n"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. brnL cl n + i\n    \\<in> (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))", "unfolding shift_def"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. brnL cl n + i\n    \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n              \\<Union> ((`) ((+) (brnL cl n)) ` P n))", "by auto"], ["proof (state)\nthis:\n  brnL cl n + i\n  \\<in> (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))\n\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "fix n ii I"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "assume n: \"n \\<in> theFTOne cl dl\" and ii: \"ii \\<in> shift cl n I\" and I: \"I \\<in> P n\""], ["proof (state)\nthis:\n  n \\<in> theFTOne cl dl\n  ii \\<in> local.shift cl n I\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "hence \"n < length cl\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  ii \\<in> local.shift cl n I\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. n < length cl", "using l"], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  ii \\<in> local.shift cl n I\n  I \\<in> P n\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. n < length cl", "by simp"], ["proof (state)\nthis:\n  n < length cl\n\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "hence \"I \\<subseteq> {..< brn (cl ! n)}\""], ["proof (prove)\nusing this:\n  n < length cl\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "using I P"], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  ?n3 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n3)} (P ?n3)\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  n < length cl\n  I \\<in> P n\n  ?n3 < length cl \\<Longrightarrow>\n  \\<Union> (P ?n3) = {..<brn (cl ! ?n3)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> P ?n3 \\<and>\n      J2 \\<in> P ?n3 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "by blast"], ["proof (state)\nthis:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "hence \"ii \\<in> {brnL cl n..<+brn (cl ! n)}\""], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}", "using ii"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> local.shift cl n I\n\ngoal (1 subgoal):\n 1. ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}", "unfolding shift_def"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  ii \\<in> (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}", "by auto"], ["proof (state)\nthis:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>x n xa.\n       \\<lbrakk>n \\<in> theFTOne cl dl; xa \\<in> P n;\n        x \\<in> local.shift cl n xa\\<rbrakk>\n       \\<Longrightarrow> x \\<in> BrnFT cl dl", "thus \"ii \\<in> ?L\""], ["proof (prove)\nusing this:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. ii \\<in> BrnFT cl dl", "using n"], ["proof (prove)\nusing this:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. ii \\<in> BrnFT cl dl", "unfolding BrnFT_def"], ["proof (prove)\nusing this:\n  ii \\<in> {brnL cl n..<brnL cl n + brn (cl ! n)}\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. ii \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n                 {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["proof (state)\nthis:\n  ii \\<in> BrnFT cl dl\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma brnL_pickFT_BrnFT[simp]:\nassumes \"properL cl\" and \"WtFT cl = 1\"\nshows \"brnL cl (pickFT cl) \\<in> BrnFT cl dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl (pickFT cl) \\<in> BrnFT cl dl", "using assms brn_gt_0_L"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  \\<lbrakk>properL ?cl; ?c \\<in> set ?cl\\<rbrakk>\n  \\<Longrightarrow> 0 < brn ?c\n\ngoal (1 subgoal):\n 1. brnL cl (pickFT cl) \\<in> BrnFT cl dl", "unfolding BrnFT_def"], ["proof (prove)\nusing this:\n  properL cl\n  WtFT cl = 1\n  \\<lbrakk>properL ?cl; ?c \\<in> set ?cl\\<rbrakk>\n  \\<Longrightarrow> 0 < brn ?c\n\ngoal (1 subgoal):\n 1. brnL cl (pickFT cl)\n    \\<in> (\\<Union>n\\<in>theFTOne cl dl.\n              {brnL cl n..<brnL cl n + brn (cl ! n)})", "by auto"], ["", "lemma WtFT_ParT_BrnFT[simp]:\nassumes \"length cl = length dl\" \"properL cl\" and \"WtFT cl = 1\"\nshows \"sum (wt (ParT cl) s) (BrnFT cl dl) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) = 1", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) = 1", "have \"brnL cl (pickFT cl) \\<in> BrnFT cl dl\" and\n  \"BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brnL cl (pickFT cl) \\<in> BrnFT cl dl &&&\n    BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "using assms BrnFT_incl_brnL"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  WtFT cl = 1\n  \\<lbrakk>length ?cl = length ?dl; properL ?cl\\<rbrakk>\n  \\<Longrightarrow> BrnFT ?cl ?dl \\<subseteq> {..<brnL ?cl (length ?cl)}\n\ngoal (1 subgoal):\n 1. brnL cl (pickFT cl) \\<in> BrnFT cl dl &&&\n    BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}", "by (simp, blast)"], ["proof (state)\nthis:\n  brnL cl (pickFT cl) \\<in> BrnFT cl dl\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) = 1", "thus ?thesis"], ["proof (prove)\nusing this:\n  brnL cl (pickFT cl) \\<in> BrnFT cl dl\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) = 1", "using assms"], ["proof (prove)\nusing this:\n  brnL cl (pickFT cl) \\<in> BrnFT cl dl\n  BrnFT cl dl \\<subseteq> {..<brnL cl (length cl)}\n  length cl = length dl\n  properL cl\n  WtFT cl = 1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) = 1", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "(*  *)"], ["", "definition UNpart1 where\n\"UNpart1 cl dl P \\<equiv> \\<Union> n \\<in> theNFTBoth cl dl. shift cl n ` (P n)\""], ["", "definition UNpart01 where\n\"UNpart01 cl dl P \\<equiv> {BrnFT cl dl} \\<union> UNpart1 cl dl P\""], ["", "lemma BrnFT_UNpart01[simp]:\n\"BrnFT cl dl \\<in> UNpart01 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<in> UNpart01 cl dl P", "unfolding UNpart01_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<in> {BrnFT cl dl} \\<union> UNpart1 cl dl P", "by simp"], ["", "lemma UNpart1_cases[elim, consumes 1, case_names Local]:\nassumes \"II \\<in> UNpart1 cl dl P\"\n\"\\<And> n I. \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n; II = shift cl n I\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi"], ["proof (prove)\ngoal (1 subgoal):\n 1. phi", "using assms"], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n  \\<lbrakk>?n5 \\<in> theNFTBoth cl dl; ?I5 \\<in> P ?n5;\n   II = local.shift cl ?n5 ?I5\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "unfolding UNpart1_def"], ["proof (prove)\nusing this:\n  II \\<in> (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)\n  \\<lbrakk>?n5 \\<in> theNFTBoth cl dl; ?I5 \\<in> P ?n5;\n   II = local.shift cl ?n5 ?I5\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "by auto"], ["", "lemma UNpart01_cases[elim, consumes 1, case_names Local0 Local]:\nassumes \"II \\<in> UNpart01 cl dl P\" and \"II = BrnFT cl dl \\<Longrightarrow> phi\"\n\"\\<And> n I. \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n; II = shift cl n I; II \\<in> UNpart1 cl dl P\\<rbrakk> \\<Longrightarrow> phi\"\nshows phi"], ["proof (prove)\ngoal (1 subgoal):\n 1. phi", "using assms"], ["proof (prove)\nusing this:\n  II \\<in> UNpart01 cl dl P\n  II = BrnFT cl dl \\<Longrightarrow> phi\n  \\<lbrakk>?n5 \\<in> theNFTBoth cl dl; ?I5 \\<in> P ?n5;\n   II = local.shift cl ?n5 ?I5; II \\<in> UNpart1 cl dl P\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "unfolding UNpart01_def UNpart1_def"], ["proof (prove)\nusing this:\n  II \\<in> {BrnFT cl dl} \\<union>\n           (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)\n  II = BrnFT cl dl \\<Longrightarrow> phi\n  \\<lbrakk>?n5 \\<in> theNFTBoth cl dl; ?I5 \\<in> P ?n5;\n   II = local.shift cl ?n5 ?I5;\n   II \\<in> (\\<Union>n\\<in>theNFTBoth cl dl.\n                local.shift cl n ` P n)\\<rbrakk>\n  \\<Longrightarrow> phi\n\ngoal (1 subgoal):\n 1. phi", "by auto"], ["", "lemma emp_UNpart1:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart1 cl dl P", "using assms"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart1 cl dl P", "unfolding UNpart1_def"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. {} \\<notin> (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)", "by auto"], ["", "lemma emp_UNpart01:\nassumes \"\\<And> n. n < length cl \\<Longrightarrow> {} \\<notin> P n\"\nshows \"{} \\<notin> UNpart01 cl dl P - {BrnFT cl dl}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart01 cl dl P - {BrnFT cl dl}", "using assms emp_UNpart1"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow> {} \\<notin> P ?n5\n  (\\<And>n.\n      n < length ?cl \\<Longrightarrow> {} \\<notin> ?P n) \\<Longrightarrow>\n  {} \\<notin> UNpart1 ?cl ?dl ?P\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart01 cl dl P - {BrnFT cl dl}", "unfolding UNpart01_def"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow> {} \\<notin> P ?n5\n  (\\<And>n.\n      n < length ?cl \\<Longrightarrow> {} \\<notin> ?P n) \\<Longrightarrow>\n  {} \\<notin> UNpart1 ?cl ?dl ?P\n\ngoal (1 subgoal):\n 1. {} \\<notin> {BrnFT cl dl} \\<union> UNpart1 cl dl P - {BrnFT cl dl}", "by auto"], ["", "lemma BrnFT_Int_UNpart1[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand II: \"II \\<in> UNpart1 cl dl P\"\nshows \"BrnFT cl dl \\<inter> II = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<inter> II = {}", "using II"], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<inter> II = {}", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "have 1: \"BrnFT cl dl = (\\<Union> n \\<in> theFTOne cl dl. Union (shift cl n ` (P n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl =\n    (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))", "apply(rule BrnFT_part)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (P n)", "using l P"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (P n)", "by auto"], ["proof (state)\nthis:\n  BrnFT cl dl =\n  (\\<Union>n\\<in>theFTOne cl dl. \\<Union> (local.shift cl n ` P n))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "case (Local n I)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "hence n: \"n < length cl\" \"n < length dl\" \"n \\<in> theNFTBoth cl dl\"\n  and I: \"I \\<in> P n\" and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (n < length cl &&& n < length dl &&& n \\<in> theNFTBoth cl dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "{"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "fix n0"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "assume n0: \"n0 \\<in> theFTOne cl dl\""], ["proof (state)\nthis:\n  n0 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "hence \"n0 < length cl\" \"n0 < length dl\""], ["proof (prove)\nusing this:\n  n0 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. n0 < length cl &&& n0 < length dl", "using l"], ["proof (prove)\nusing this:\n  n0 \\<in> theFTOne cl dl\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. n0 < length cl &&& n0 < length dl", "by auto"], ["proof (state)\nthis:\n  n0 < length cl\n  n0 < length dl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "note n0 = this n0"], ["proof (state)\nthis:\n  n0 < length cl\n  n0 < length dl\n  n0 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "{"], ["proof (state)\nthis:\n  n0 < length cl\n  n0 < length dl\n  n0 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "fix JJ"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "assume  \"JJ \\<in> shift cl n0 ` (P n0)\""], ["proof (state)\nthis:\n  JJ \\<in> local.shift cl n0 ` P n0\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "then"], ["proof (chain)\npicking this:\n  JJ \\<in> local.shift cl n0 ` P n0", "obtain J where J: \"J \\<in> P n0\" and JJ: \"JJ = shift cl n0 J\""], ["proof (prove)\nusing this:\n  JJ \\<in> local.shift cl n0 ` P n0\n\ngoal (1 subgoal):\n 1. (\\<And>J.\n        \\<lbrakk>J \\<in> P n0; JJ = local.shift cl n0 J\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  J \\<in> P n0\n  JJ = local.shift cl n0 J\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "have \"n \\<noteq> n0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<noteq> n0", "using n n0"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  n0 < length cl\n  n0 < length dl\n  n0 \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. n \\<noteq> n0", "by simp"], ["proof (state)\nthis:\n  n \\<noteq> n0\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "have \"JJ Int II = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. JJ \\<inter> II = {}", "unfolding JJ II"], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n0 J \\<inter> local.shift cl n I = {}", "apply(rule part_brn_disj3)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (?P n)\n 2. n0 < length cl\n 3. n < length cl\n 4. J \\<in> ?P n0\n 5. I \\<in> ?P n\n 6. n0 \\<noteq> n", "using P I J n n0"], ["proof (prove)\nusing this:\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  I \\<in> P n\n  J \\<in> P n0\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  n0 < length cl\n  n0 < length dl\n  n0 \\<in> theFTOne cl dl\n\ngoal (6 subgoals):\n 1. \\<And>n. n < length cl \\<Longrightarrow> part {..<brn (cl ! n)} (?P n)\n 2. n0 < length cl\n 3. n < length cl\n 4. J \\<in> ?P n0\n 5. I \\<in> ?P n\n 6. n0 \\<noteq> n", "by auto"], ["proof (state)\nthis:\n  JJ \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "}"], ["proof (state)\nthis:\n  ?JJ7 \\<in> local.shift cl n0 ` P n0 \\<Longrightarrow>\n  ?JJ7 \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "hence \"Union (shift cl n0 ` (P n0)) Int II = {}\""], ["proof (prove)\nusing this:\n  ?JJ7 \\<in> local.shift cl n0 ` P n0 \\<Longrightarrow>\n  ?JJ7 \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. \\<Union> (local.shift cl n0 ` P n0) \\<inter> II = {}", "by blast"], ["proof (state)\nthis:\n  \\<Union> (local.shift cl n0 ` P n0) \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "}"], ["proof (state)\nthis:\n  ?n0.7 \\<in> theFTOne cl dl \\<Longrightarrow>\n  \\<Union> (local.shift cl ?n0.7 ` P ?n0.7) \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> BrnFT cl dl \\<inter> II = {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?n0.7 \\<in> theFTOne cl dl \\<Longrightarrow>\n  \\<Union> (local.shift cl ?n0.7 ` P ?n0.7) \\<inter> II = {}\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<inter> II = {}", "unfolding II 1"], ["proof (prove)\nusing this:\n  ?n0.7 \\<in> theFTOne cl dl \\<Longrightarrow>\n  \\<Union> (local.shift cl ?n0.7 ` P ?n0.7) \\<inter> local.shift cl n I = {}\n\ngoal (1 subgoal):\n 1. (\\<Union>n\\<in>theFTOne cl dl.\n        \\<Union> (local.shift cl n ` P n)) \\<inter>\n    local.shift cl n I =\n    {}", "by blast"], ["proof (state)\nthis:\n  BrnFT cl dl \\<inter> II = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma BrnFT_notIn_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"BrnFT cl dl \\<notin> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P", "using assms BrnFT_Int_UNpart1 emp_UNpart1"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length ?cl = length ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   ?II \\<in> UNpart1 ?cl ?dl ?P\\<rbrakk>\n  \\<Longrightarrow> BrnFT ?cl ?dl \\<inter> ?II = {}\n  (\\<And>n.\n      n < length ?cl \\<Longrightarrow> {} \\<notin> ?P n) \\<Longrightarrow>\n  {} \\<notin> UNpart1 ?cl ?dl ?P\n\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P", "by (metis Int_absorb)"], ["", "lemma UNpart1_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}", "have \"BrnFT cl dl \\<notin> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P", "apply(rule BrnFT_notIn_UNpart1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  BrnFT cl dl \\<notin> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}", "thus ?thesis"], ["proof (prove)\nusing this:\n  BrnFT cl dl \\<notin> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}", "unfolding UNpart01_def"], ["proof (prove)\nusing this:\n  BrnFT cl dl \\<notin> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNpart1 cl dl P = {BrnFT cl dl} \\<union> UNpart1 cl dl P - {BrnFT cl dl}", "by auto"], ["proof (state)\nthis:\n  UNpart1 cl dl P = UNpart01 cl dl P - {BrnFT cl dl}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_UNpart1[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n)\"\nshows \"part (BrnNFT cl dl) (UNpart1 cl dl P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part (BrnNFT cl dl) (UNpart1 cl dl P)", "unfolding BrnNFT_def UNpart1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. part\n     (\\<Union>n\\<in>theNFTBoth cl dl.\n         {brnL cl n..<brnL cl n + brn (cl ! n)})\n     (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)", "apply(rule part_UN)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> theNFTBoth cl dl \\<Longrightarrow>\n       part {brnL cl n..<brnL cl n + brn (cl ! n)} (local.shift cl n ` P n)\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} \\<inter>\n       {brnL cl n2..<brnL cl n2 + brn (cl ! n2)} =\n       {}", "using l P"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow> part {..<brn (cl ! ?n5)} (P ?n5)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> theNFTBoth cl dl \\<Longrightarrow>\n       part {brnL cl n..<brnL cl n + brn (cl ! n)} (local.shift cl n ` P n)\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} \\<inter>\n       {brnL cl n2..<brnL cl n2 + brn (cl ! n2)} =\n       {}", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       {brnL cl n1..<brnL cl n1 + brn (cl ! n1)} \\<inter>\n       {brnL cl n2..<brnL cl n2 + brn (cl ! n2)} =\n       {}", "apply(rule brnL_Int)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n1 \\<noteq> n2\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n1 < length cl\n 3. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n2 < length cl", "using l"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (3 subgoals):\n 1. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n1 \\<noteq> n2\n 2. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n1 < length cl\n 3. \\<And>n1 n2.\n       {n1, n2} \\<subseteq> theNFTBoth cl dl \\<and>\n       n1 \\<noteq> n2 \\<Longrightarrow>\n       n2 < length cl", "by auto"], ["", "lemma part_UNpart01:\nassumes cl: \"properL cl\" and l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"part {..< brnL cl (length cl)} (UNpart01 cl dl P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart01 cl dl P)", "unfolding UNpart01_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} ({BrnFT cl dl} \\<union> UNpart1 cl dl P)", "apply(rule part_Un_singl2[of _ _ \"BrnNFT cl dl\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. {..<brnL cl (length cl)} = BrnFT cl dl \\<union> BrnNFT cl dl\n 2. part (BrnNFT cl dl) (UNpart1 cl dl P)\n 3. \\<And>I.\n       I \\<in> UNpart1 cl dl P \\<Longrightarrow> BrnFT cl dl \\<inter> I = {}", "using assms"], ["proof (prove)\nusing this:\n  properL cl\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (3 subgoals):\n 1. {..<brnL cl (length cl)} = BrnFT cl dl \\<union> BrnNFT cl dl\n 2. part (BrnNFT cl dl) (UNpart1 cl dl P)\n 3. \\<And>I.\n       I \\<in> UNpart1 cl dl P \\<Longrightarrow> BrnFT cl dl \\<inter> I = {}", "using BrnFT_Int_UNpart1"], ["proof (prove)\nusing this:\n  properL cl\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length ?cl = length ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   ?II \\<in> UNpart1 ?cl ?dl ?P\\<rbrakk>\n  \\<Longrightarrow> BrnFT ?cl ?dl \\<inter> ?II = {}\n\ngoal (3 subgoals):\n 1. {..<brnL cl (length cl)} = BrnFT cl dl \\<union> BrnNFT cl dl\n 2. part (BrnNFT cl dl) (UNpart1 cl dl P)\n 3. \\<And>I.\n       I \\<in> UNpart1 cl dl P \\<Longrightarrow> BrnFT cl dl \\<inter> I = {}", "by (simp, simp, blast)"], ["", "(*  *)"], ["", "definition UNlift01 where\n\"UNlift01 cl dl P F II \\<equiv>\n if II = BrnFT cl dl\n   then BrnFT dl cl\n   else shift dl (pickT cl P II) (F (pickT cl P II) (back cl (pickT cl P II) II))\""], ["", "lemma UNlift01_BrnFT[simp]:\n\"UNlift01 cl dl P F (BrnFT cl dl) = BrnFT dl cl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (BrnFT cl dl) = BrnFT dl cl", "unfolding UNlift01_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if BrnFT cl dl = BrnFT cl dl then BrnFT dl cl\n     else local.shift dl (pickT cl P (BrnFT cl dl))\n           (F (pickT cl P (BrnFT cl dl))\n             (back cl (pickT cl P (BrnFT cl dl)) (BrnFT cl dl)))) =\n    BrnFT dl cl", "by simp"], ["", "lemma UNlift01_shift[simp]:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand n: \"n \\<in> theNFTBoth cl dl\" and I: \"I \\<in> P n\"\nshows \"UNlift01 cl dl P F (shift cl n I) = shift dl n (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "define II where \"II = shift cl n I\""], ["proof (state)\nthis:\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have \"n < length cl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < length cl", "using n l"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. n < length cl", "by auto"], ["proof (state)\nthis:\n  n < length cl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "note n = this n"], ["proof (state)\nthis:\n  n < length cl\n  n \\<in> theNFTBoth cl dl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have II: \"shift cl n I = II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n I = II", "using II_def"], ["proof (prove)\nusing this:\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. local.shift cl n I = II", "by simp"], ["proof (state)\nthis:\n  local.shift cl n I = II\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have \"II \\<in> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II \\<in> UNpart1 cl dl P", "unfolding II_def UNpart1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift cl n I\n    \\<in> (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)", "using n I"], ["proof (prove)\nusing this:\n  n < length cl\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. local.shift cl n I\n    \\<in> (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)", "by auto"], ["proof (state)\nthis:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "hence \"II \\<noteq> BrnFT cl dl\""], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. II \\<noteq> BrnFT cl dl", "using BrnFT_notIn_UNpart1[of cl dl P] l n P"], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n  \\<lbrakk>length cl = length dl;\n   \\<And>n.\n      n < length cl \\<Longrightarrow>\n      part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\\<rbrakk>\n  \\<Longrightarrow> BrnFT cl dl \\<notin> UNpart1 cl dl P\n  length cl = length dl\n  n < length cl\n  n \\<in> theNFTBoth cl dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. II \\<noteq> BrnFT cl dl", "by auto"], ["proof (state)\nthis:\n  II \\<noteq> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "hence 1: \"UNlift01 cl dl P F II =\n  shift dl (pickT cl P II) (F (pickT cl P II) (back cl (pickT cl P II) II))\""], ["proof (prove)\nusing this:\n  II \\<noteq> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II =\n    local.shift dl (pickT cl P II)\n     (F (pickT cl P II) (back cl (pickT cl P II) II))", "unfolding UNlift01_def"], ["proof (prove)\nusing this:\n  II \\<noteq> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. (if II = BrnFT cl dl then BrnFT dl cl\n     else local.shift dl (pickT cl P II)\n           (F (pickT cl P II) (back cl (pickT cl P II) II))) =\n    local.shift dl (pickT cl P II)\n     (F (pickT cl P II) (back cl (pickT cl P II) II))", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II =\n  local.shift dl (pickT cl P II)\n   (F (pickT cl P II) (back cl (pickT cl P II) II))\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have n: \"n = pickT cl P II\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n = pickT cl P II", "apply(rule pickT_unique)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. II \\<in> local.shift cl n ` P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. II \\<in> local.shift cl n ` P n", "unfolding II_def"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 2. n < length cl\n 3. local.shift cl n I \\<in> local.shift cl n ` P n", "by auto"], ["proof (state)\nthis:\n  n = pickT cl P II\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "have \"back cl n II = I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n II = I", "unfolding II_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. back cl n (local.shift cl n I) = I", "by simp"], ["proof (state)\nthis:\n  back cl n II = I\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "hence \"shift dl n (F n (back cl n II)) = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  back cl n II = I\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "unfolding 1 II n[THEN sym]"], ["proof (prove)\nusing this:\n  local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n (back cl n II)) = local.shift dl n (F n I)", "."], ["proof (state)\nthis:\n  UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNlift01_inj_on_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)\" (is \"inj_on ?G ?Q\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)", "unfolding inj_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>UNpart1 cl dl P.\n       \\<forall>y\\<in>UNpart1 cl dl P.\n          UNlift01 cl dl P F x = UNlift01 cl dl P F y \\<longrightarrow>\n          x = y", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart1 cl dl P; y \\<in> UNpart1 cl dl P;\n        UNlift01 cl dl P F x = UNlift01 cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix II1 II2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart1 cl dl P; y \\<in> UNpart1 cl dl P;\n        UNlift01 cl dl P F x = UNlift01 cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume II1: \"II1 \\<in> ?Q\" and II2: \"II2 \\<in> ?Q\" and G: \"?G II1 = ?G II2\""], ["proof (state)\nthis:\n  II1 \\<in> UNpart1 cl dl P\n  II2 \\<in> UNpart1 cl dl P\n  UNlift01 cl dl P F II1 = UNlift01 cl dl P F II2\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> UNpart1 cl dl P; y \\<in> UNpart1 cl dl P;\n        UNlift01 cl dl P F x = UNlift01 cl dl P F y\\<rbrakk>\n       \\<Longrightarrow> x = y", "from II1"], ["proof (chain)\npicking this:\n  II1 \\<in> UNpart1 cl dl P", "show \"II1 = II2\""], ["proof (prove)\nusing this:\n  II1 \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. II1 = II2", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "case (Local n1 I1)"], ["proof (state)\nthis:\n  n1 \\<in> theNFTBoth cl dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence n1: \"n1 \\<in> theNFTBoth cl dl\" \"n1 < length cl\" \"n1 < length dl\" and I1: \"I1 \\<in> P n1\"\n    and II1: \"II1 = shift cl n1 I1\""], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. (n1 \\<in> theNFTBoth cl dl &&& n1 < length cl &&& n1 < length dl) &&&\n    I1 \\<in> P n1 &&& II1 = local.shift cl n1 I1", "using l"], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n1 \\<in> theNFTBoth cl dl &&& n1 < length cl &&& n1 < length dl) &&&\n    I1 \\<in> P n1 &&& II1 = local.shift cl n1 I1", "by auto"], ["proof (state)\nthis:\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G1_def: \"?G II1 = shift dl n1 (F n1 I1)\""], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II1 = local.shift dl n1 (F n1 I1)", "using l P"], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  I1 \\<in> P n1\n  II1 = local.shift cl n1 I1\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II1 = local.shift dl n1 (F n1 I1)", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II1 = local.shift dl n1 (F n1 I1)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have Pn1: \"part {..< brn (dl!n1)} (F n1 ` (P n1))\" \"{} \\<notin> F n1 ` (P n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n1)} (F n1 ` P n1) &&& {} \\<notin> F n1 ` P n1", "using n1 FP"], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n1)} (F n1 ` P n1) &&& {} \\<notin> F n1 ` P n1", "by auto"], ["proof (state)\nthis:\n  part {..<brn (dl ! n1)} (F n1 ` P n1)\n  {} \\<notin> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have F1_in: \"F n1 I1 \\<in> F n1 ` (P n1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n1 I1 \\<in> F n1 ` P n1", "using I1"], ["proof (prove)\nusing this:\n  I1 \\<in> P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<in> F n1 ` P n1", "by simp"], ["proof (state)\nthis:\n  F n1 I1 \\<in> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence Fn1I1: \"F n1 I1 \\<noteq> {}\" \"F n1 I1 \\<subseteq> {..< brn (dl!n1)}\""], ["proof (prove)\nusing this:\n  F n1 I1 \\<in> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<noteq> {} &&& F n1 I1 \\<subseteq> {..<brn (dl ! n1)}", "using Pn1"], ["proof (prove)\nusing this:\n  F n1 I1 \\<in> F n1 ` P n1\n  part {..<brn (dl ! n1)} (F n1 ` P n1)\n  {} \\<notin> F n1 ` P n1\n\ngoal (1 subgoal):\n 1. F n1 I1 \\<noteq> {} &&& F n1 I1 \\<subseteq> {..<brn (dl ! n1)}", "by (blast, unfold part_def, blast)"], ["proof (state)\nthis:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G1: \"?G II1 \\<noteq> {}\" \"?G II1 \\<subseteq> {brnL dl n1 ..<+ brn (dl!n1)}\""], ["proof (prove)\nusing this:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II1 \\<noteq> {} &&&\n    UNlift01 cl dl P F II1\n    \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}", "unfolding G1_def"], ["proof (prove)\nusing this:\n  F n1 I1 \\<noteq> {}\n  F n1 I1 \\<subseteq> {..<brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. local.shift dl n1 (F n1 I1) \\<noteq> {} &&&\n    local.shift dl n1 (F n1 I1)\n    \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}", "by simp_all"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II1 \\<noteq> {}\n  UNlift01 cl dl P F II1\n  \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II1 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "from II2"], ["proof (chain)\npicking this:\n  II2 \\<in> UNpart1 cl dl P", "show ?thesis"], ["proof (prove)\nusing this:\n  II2 \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. II1 = II2", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "case (Local n2 I2)"], ["proof (state)\nthis:\n  n2 \\<in> theNFTBoth cl dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence n2: \"n2 \\<in> theNFTBoth cl dl\" \"n2 < length cl\" \"n2 < length dl\"\n      and I2: \"I2 \\<in> P n2\" and II2: \"II2 = shift cl n2 I2\""], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. (n2 \\<in> theNFTBoth cl dl &&& n2 < length cl &&& n2 < length dl) &&&\n    I2 \\<in> P n2 &&& II2 = local.shift cl n2 I2", "using l"], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (n2 \\<in> theNFTBoth cl dl &&& n2 < length cl &&& n2 < length dl) &&&\n    I2 \\<in> P n2 &&& II2 = local.shift cl n2 I2", "by auto"], ["proof (state)\nthis:\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G2_def: \"?G II2 = shift dl n2 (F n2 I2)\""], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II2 = local.shift dl n2 (F n2 I2)", "using l P"], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  I2 \\<in> P n2\n  II2 = local.shift cl n2 I2\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II2 = local.shift dl n2 (F n2 I2)", "by auto"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II2 = local.shift dl n2 (F n2 I2)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have Pn2: \"part {..< brn (dl!n2)} (F n2 ` (P n2))\" \"{} \\<notin> F n2 ` (P n2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n2)} (F n2 ` P n2) &&& {} \\<notin> F n2 ` P n2", "using n2 FP"], ["proof (prove)\nusing this:\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (1 subgoal):\n 1. part {..<brn (dl ! n2)} (F n2 ` P n2) &&& {} \\<notin> F n2 ` P n2", "by auto"], ["proof (state)\nthis:\n  part {..<brn (dl ! n2)} (F n2 ` P n2)\n  {} \\<notin> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have F2_in: \"F n2 I2 \\<in> F n2 ` (P n2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n2 I2 \\<in> F n2 ` P n2", "using I2"], ["proof (prove)\nusing this:\n  I2 \\<in> P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<in> F n2 ` P n2", "by simp"], ["proof (state)\nthis:\n  F n2 I2 \\<in> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence Fn2I2: \"F n2 I2 \\<noteq> {}\" \"F n2 I2 \\<subseteq> {..< brn (dl!n2)}\""], ["proof (prove)\nusing this:\n  F n2 I2 \\<in> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<noteq> {} &&& F n2 I2 \\<subseteq> {..<brn (dl ! n2)}", "using Pn2"], ["proof (prove)\nusing this:\n  F n2 I2 \\<in> F n2 ` P n2\n  part {..<brn (dl ! n2)} (F n2 ` P n2)\n  {} \\<notin> F n2 ` P n2\n\ngoal (1 subgoal):\n 1. F n2 I2 \\<noteq> {} &&& F n2 I2 \\<subseteq> {..<brn (dl ! n2)}", "by (blast, unfold part_def, blast)"], ["proof (state)\nthis:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence G2: \"?G II2 \\<noteq> {}\" \"?G II2 \\<subseteq> {brnL dl n2 ..<+ brn (dl!n2)}\""], ["proof (prove)\nusing this:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II2 \\<noteq> {} &&&\n    UNlift01 cl dl P F II2\n    \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}", "unfolding G2_def"], ["proof (prove)\nusing this:\n  F n2 I2 \\<noteq> {}\n  F n2 I2 \\<subseteq> {..<brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. local.shift dl n2 (F n2 I2) \\<noteq> {} &&&\n    local.shift dl n2 (F n2 I2)\n    \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}", "by simp_all"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II2 \\<noteq> {}\n  UNlift01 cl dl P F II2\n  \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "(*  *)"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II2 \\<noteq> {}\n  UNlift01 cl dl P F II2\n  \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have n12: \"n1 = n2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n1 = n2", "using n1 n2 G1 G2 G brnL_Int"], ["proof (prove)\nusing this:\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  UNlift01 cl dl P F II1 \\<noteq> {}\n  UNlift01 cl dl P F II1\n  \\<subseteq> {brnL dl n1..<brnL dl n1 + brn (dl ! n1)}\n  UNlift01 cl dl P F II2 \\<noteq> {}\n  UNlift01 cl dl P F II2\n  \\<subseteq> {brnL dl n2..<brnL dl n2 + brn (dl ! n2)}\n  UNlift01 cl dl P F II1 = UNlift01 cl dl P F II2\n  \\<lbrakk>?n1.0 \\<noteq> ?n2.0; ?n1.0 < length ?cl;\n   ?n2.0 < length ?cl\\<rbrakk>\n  \\<Longrightarrow> {brnL ?cl\n                      ?n1.0..<brnL ?cl ?n1.0 + brn (?cl ! ?n1.0)} \\<inter>\n                    {brnL ?cl ?n2.0..<brnL ?cl ?n2.0 + brn (?cl ! ?n2.0)} =\n                    {}\n\ngoal (1 subgoal):\n 1. n1 = n2", "by blast"], ["proof (state)\nthis:\n  n1 = n2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "have \"F n1 I1 = F n2 I2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F n1 I1 = F n2 I2", "using G"], ["proof (prove)\nusing this:\n  UNlift01 cl dl P F II1 = UNlift01 cl dl P F II2\n\ngoal (1 subgoal):\n 1. F n1 I1 = F n2 I2", "unfolding G1_def G2_def n12"], ["proof (prove)\nusing this:\n  local.shift dl n2 (F n2 I1) = local.shift dl n2 (F n2 I2)\n\ngoal (1 subgoal):\n 1. F n2 I1 = F n2 I2", "by simp"], ["proof (state)\nthis:\n  F n1 I1 = F n2 I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "hence \"I1 = I2\""], ["proof (prove)\nusing this:\n  F n1 I1 = F n2 I2\n\ngoal (1 subgoal):\n 1. I1 = I2", "using I1 I2 n1 F"], ["proof (prove)\nusing this:\n  F n1 I1 = F n2 I2\n  I1 \\<in> P n1\n  I2 \\<in> P n2\n  n1 \\<in> theNFTBoth cl dl\n  n1 < length cl\n  n1 < length dl\n  ?n5 < length cl \\<Longrightarrow> inj_on (F ?n5) (P ?n5)\n\ngoal (1 subgoal):\n 1. I1 = I2", "unfolding n12 inj_on_def"], ["proof (prove)\nusing this:\n  F n2 I1 = F n2 I2\n  I1 \\<in> P n2\n  I2 \\<in> P n2\n  n2 \\<in> theNFTBoth cl dl\n  n2 < length cl\n  n2 < length dl\n  ?n5 < length cl \\<Longrightarrow>\n  \\<forall>x\\<in>P ?n5.\n     \\<forall>y\\<in>P ?n5. F ?n5 x = F ?n5 y \\<longrightarrow> x = y\n\ngoal (1 subgoal):\n 1. I1 = I2", "by blast"], ["proof (state)\nthis:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II2 = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> II1 = II2", "thus ?thesis"], ["proof (prove)\nusing this:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. II1 = II2", "unfolding II1 II2 n12"], ["proof (prove)\nusing this:\n  I1 = I2\n\ngoal (1 subgoal):\n 1. local.shift cl n2 I1 = local.shift cl n2 I2", "by simp"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  II1 = II2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma inj_on_singl:\nassumes \"inj_on f A\" and \"a0 \\<notin> A\" and \"\\<And> a. a \\<in> A \\<Longrightarrow> f a \\<noteq> f a0\"\nshows \"inj_on f ({a0} Un A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on f ({a0} \\<union> A)", "using assms"], ["proof (prove)\nusing this:\n  inj_on f A\n  a0 \\<notin> A\n  ?a5 \\<in> A \\<Longrightarrow> f ?a5 \\<noteq> f a0\n\ngoal (1 subgoal):\n 1. inj_on f ({a0} \\<union> A)", "unfolding inj_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>A. \\<forall>y\\<in>A. f x = f y \\<longrightarrow> x = y\n  a0 \\<notin> A\n  ?a5 \\<in> A \\<Longrightarrow> f ?a5 \\<noteq> f a0\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{a0} \\<union> A.\n       \\<forall>y\\<in>{a0} \\<union> A. f x = f y \\<longrightarrow> x = y", "by fastforce"], ["", "lemma UNlift01_inj_on:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\"\nand F: \"\\<And> n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)\"\nshows \"inj_on (UNlift01 cl dl P F) (UNpart01 cl dl P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift01 cl dl P F) (UNpart01 cl dl P)", "unfolding UNpart01_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift01 cl dl P F) ({BrnFT cl dl} \\<union> UNpart1 cl dl P)", "proof(rule inj_on_singl)"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)\n 2. BrnFT cl dl \\<notin> UNpart1 cl dl P\n 3. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "show \"inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)", "apply (rule UNlift01_inj_on_UNpart1)"], ["proof (prove)\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n  ?n5 < length cl \\<Longrightarrow> inj_on (F ?n5) (P ?n5)\n\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "by auto"], ["proof (state)\nthis:\n  inj_on (UNlift01 cl dl P F) (UNpart1 cl dl P)\n\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P\n 2. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P\n 2. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "show \"BrnFT cl dl \\<notin> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<notin> UNpart1 cl dl P", "apply(rule BrnFT_notIn_UNpart1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using l P"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  BrnFT cl dl \\<notin> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "let ?Q = \"%n. F n ` (P n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "fix II"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "assume \"II \\<in> UNpart1 cl dl P\""], ["proof (state)\nthis:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "hence \"UNlift01 cl dl P F II \\<noteq> BrnFT dl cl\""], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "case (Local n I)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "hence n: \"n \\<in> theNFTBoth cl dl\" \"n \\<in> theNFTBoth dl cl\" \"n < length cl\" \"n < length dl\"\n    and I: \"I \\<in> P n\" and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l theNFTBoth_sym"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n  theNFTBoth ?cl ?dl = theNFTBoth ?dl ?cl\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "have \"shift dl n (F n I) \\<in> UNpart1 dl cl ?Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "unfolding UNpart1_def shift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (+) (brnL dl n) ` F n I\n    \\<in> (\\<Union>n\\<in>theNFTBoth dl cl.\n              (`) ((+) (brnL dl n)) ` F n ` P n)", "using n I"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. (+) (brnL dl n) ` F n I\n    \\<in> (\\<Union>n\\<in>theNFTBoth dl cl.\n              (`) ((+) (brnL dl n)) ` F n ` P n)", "by auto"], ["proof (state)\nthis:\n  local.shift dl n (F n I) \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "hence \"shift dl n (F n I) \\<noteq> BrnFT dl cl\""], ["proof (prove)\nusing this:\n  local.shift dl n (F n I) \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) \\<noteq> BrnFT dl cl", "using BrnFT_notIn_UNpart1[of dl cl ?Q] n l FP"], ["proof (prove)\nusing this:\n  local.shift dl n (F n I) \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n  \\<lbrakk>length dl = length cl;\n   \\<And>n.\n      n < length dl \\<Longrightarrow>\n      part {..<brn (dl ! n)} (F n ` P n) \\<and>\n      {} \\<notin> F n ` P n\\<rbrakk>\n  \\<Longrightarrow> BrnFT dl cl\n                    \\<notin> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  length cl = length dl\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) \\<noteq> BrnFT dl cl", "by auto"], ["proof (state)\nthis:\n  local.shift dl n (F n I) \\<noteq> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "thus ?thesis"], ["proof (prove)\nusing this:\n  local.shift dl n (F n I) \\<noteq> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<noteq> BrnFT dl cl", "unfolding II"], ["proof (prove)\nusing this:\n  local.shift dl n (F n I) \\<noteq> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) \\<noteq> BrnFT dl cl", "using n I l P"], ["proof (prove)\nusing this:\n  local.shift dl n (F n I) \\<noteq> BrnFT dl cl\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) \\<noteq> BrnFT dl cl", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II \\<noteq> BrnFT dl cl\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II \\<noteq> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F a \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "thus \"UNlift01 cl dl P F II \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)\""], ["proof (prove)\nusing this:\n  UNlift01 cl dl P F II \\<noteq> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II \\<noteq> UNlift01 cl dl P F (BrnFT cl dl)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNlift01_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift01 cl dl P F) ` (UNpart1 cl dl P) = UNpart1 dl cl (%n. F n ` (P n))\" (is \"?G ` ?Q = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart1 cl dl P =\n    UNpart1 dl cl (\\<lambda>n. F n ` P n)", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F xa \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "fix II"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F xa \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "assume II: \"II \\<in> ?Q\""], ["proof (state)\nthis:\n  II \\<in> UNpart1 cl dl P\n\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       xa \\<in> UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F xa \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n 2. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "thus \"?G II \\<in> ?R\""], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II\n                         \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "case (Local n I)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II\n                         \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "hence n: \"n \\<in> theNFTBoth cl dl\" \"n \\<in> theNFTBoth dl cl\" \"n < length cl\"\n    \"n < length dl\" and I: \"I \\<in> P n\"\n    and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l theNFTBoth_sym"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n  theNFTBoth ?cl ?dl = theNFTBoth ?dl ?cl\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II\n                         \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "hence G: \"?G II = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II = local.shift dl n (F n I)", "using l P"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> UNlift01 cl dl P F II\n                         \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "using n I"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "unfolding G UNpart1_def"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I)\n    \\<in> (\\<Union>n\\<in>theNFTBoth dl cl. local.shift dl n ` F n ` P n)", "by auto"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "fix JJ"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "assume JJ: \"JJ \\<in> ?R\""], ["proof (state)\nthis:\n  JJ \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n) \\<Longrightarrow>\n       x \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "thus \"JJ \\<in> ?G ` ?Q\""], ["proof (prove)\nusing this:\n  JJ \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "case (Local n J)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth dl cl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "hence n: \"n \\<in> theNFTBoth cl dl\" \"n \\<in> theNFTBoth dl cl\" \"n < length cl\" \"n < length dl\"\n    and J: \"J \\<in> F n ` (P n)\"\n    and JJ: \"JJ = shift dl n J\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth dl cl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    J \\<in> F n ` P n &&& JJ = local.shift dl n J", "using l theNFTBoth_sym"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth dl cl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n  length cl = length dl\n  theNFTBoth ?cl ?dl = theNFTBoth ?dl ?cl\n\ngoal (1 subgoal):\n 1. ((n \\<in> theNFTBoth cl dl &&& n \\<in> theNFTBoth dl cl) &&&\n     n < length cl &&& n < length dl) &&&\n    J \\<in> F n ` P n &&& JJ = local.shift dl n J", "by auto"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "then"], ["proof (chain)\npicking this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J", "obtain I where I: \"I \\<in> P n\" and \"J = F n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  J \\<in> F n ` P n\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. (\\<And>I.\n        \\<lbrakk>I \\<in> P n; J = F n I\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  I \\<in> P n\n  J = F n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "hence \"JJ = shift dl n (F n I)\""], ["proof (prove)\nusing this:\n  I \\<in> P n\n  J = F n I\n\ngoal (1 subgoal):\n 1. JJ = local.shift dl n (F n I)", "using JJ"], ["proof (prove)\nusing this:\n  I \\<in> P n\n  J = F n I\n  JJ = local.shift dl n J\n\ngoal (1 subgoal):\n 1. JJ = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  JJ = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "also"], ["proof (state)\nthis:\n  JJ = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "have \"... = UNlift01 cl dl P F (shift cl n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) = UNlift01 cl dl P F (local.shift cl n I)", "using n I l P"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  I \\<in> P n\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. local.shift dl n (F n I) = UNlift01 cl dl P F (local.shift cl n I)", "by simp"], ["proof (state)\nthis:\n  local.shift dl n (F n I) = UNlift01 cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "finally"], ["proof (chain)\npicking this:\n  JJ = UNlift01 cl dl P F (local.shift cl n I)", "have JJ: \"JJ = UNlift01 cl dl P F (shift cl n I)\""], ["proof (prove)\nusing this:\n  JJ = UNlift01 cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. JJ = UNlift01 cl dl P F (local.shift cl n I)", "."], ["proof (state)\nthis:\n  JJ = UNlift01 cl dl P F (local.shift cl n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth dl cl; I \\<in> F n ` P n;\n        JJ = local.shift dl n I\\<rbrakk>\n       \\<Longrightarrow> JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "using n l I"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  length cl = length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P", "unfolding JJ UNpart1_def"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  n \\<in> theNFTBoth dl cl\n  n < length cl\n  n < length dl\n  length cl = length dl\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I)\n    \\<in> UNlift01 cl dl P F `\n          (\\<Union>n\\<in>theNFTBoth cl dl. local.shift cl n ` P n)", "by auto"], ["proof (state)\nthis:\n  JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  JJ \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNlift01_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nshows \"(UNlift01 cl dl P F) ` (UNpart01 cl dl P) = UNpart01 dl cl (%n. F n ` (P n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart01 cl dl P =\n    UNpart01 dl cl (\\<lambda>n. F n ` P n)", "using assms UNlift01_UNpart1[of cl dl P]"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length cl = length dl;\n   \\<And>n.\n      n < length cl \\<Longrightarrow>\n      part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\\<rbrakk>\n  \\<Longrightarrow> UNlift01 cl dl P ?F ` UNpart1 cl dl P =\n                    UNpart1 dl cl (\\<lambda>n. ?F n ` P n)\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart01 cl dl P =\n    UNpart01 dl cl (\\<lambda>n. F n ` P n)", "unfolding UNpart01_def"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length cl = length dl;\n   \\<And>n.\n      n < length cl \\<Longrightarrow>\n      part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\\<rbrakk>\n  \\<Longrightarrow> UNlift01 cl dl P ?F ` UNpart1 cl dl P =\n                    UNpart1 dl cl (\\<lambda>n. ?F n ` P n)\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` ({BrnFT cl dl} \\<union> UNpart1 cl dl P) =\n    {BrnFT dl cl} \\<union> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "by auto"], ["", "lemma emp_UNlift01_UNpart1:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift01 cl dl P F) ` (UNpart1 cl dl P)\" (is \"{} \\<notin> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P", "have R: \"?R = UNpart1 dl cl (%n. F n ` (P n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart1 cl dl P =\n    UNpart1 dl cl (\\<lambda>n. F n ` P n)", "apply(rule UNlift01_UNpart1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  UNlift01 cl dl P F ` UNpart1 cl dl P =\n  UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P", "unfolding R"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "apply(rule emp_UNpart1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "using FP"], ["proof (prove)\nusing this:\n  ?n5 < length dl \\<Longrightarrow> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "by simp"], ["proof (state)\nthis:\n  {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma emp_UNlift01_UNpart01:\nassumes l: \"length cl = length dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` (P n)\"\nshows \"{} \\<notin> (UNlift01 cl dl P F) ` (UNpart01 cl dl P - {BrnFT cl dl})\"\n(is \"{} \\<notin> ?U ` ?V\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})", "have V: \"?V = UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNpart01 cl dl P - {BrnFT cl dl} = UNpart1 cl dl P", "apply(rule UNpart1_UNpart01[THEN sym])"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  UNpart01 cl dl P - {BrnFT cl dl} = UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})", "unfolding V"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` UNpart1 cl dl P", "apply(rule emp_UNlift01_UNpart1)"], ["proof (prove)\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_UNlift01_UNpart1:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nshows \"part (BrnNFT dl cl) ((UNlift01 cl dl P F) ` (UNpart1 cl dl P))\" (is \"part ?C ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)", "let ?Q = \"%n. F n ` (P n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)", "have R: \"?R = UNpart1 dl cl ?Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart1 cl dl P =\n    UNpart1 dl cl (\\<lambda>n. F n ` P n)", "apply(rule UNlift01_UNpart1[of cl dl P F])"], ["proof (prove)\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n\ngoal (2 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  UNlift01 cl dl P F ` UNpart1 cl dl P =\n  UNpart1 dl cl (\\<lambda>n. F n ` P n)\n\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)", "unfolding R"], ["proof (prove)\ngoal (1 subgoal):\n 1. part (BrnNFT dl cl) (UNpart1 dl cl (\\<lambda>n. F n ` P n))", "apply(rule part_UNpart1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length dl = length cl\n 2. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "using dl l FP"], ["proof (prove)\nusing this:\n  properL dl\n  length cl = length dl\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n\ngoal (2 subgoals):\n 1. length dl = length cl\n 2. \\<And>n.\n       n < length dl \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)", "by auto"], ["proof (state)\nthis:\n  part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma part_UNlift01_UNpart01:\nassumes l: \"length cl = length dl\" and dl: \"properL dl\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n)) \\<and> {} \\<notin> (F n ` (P n))\"\nshows \"part {..< brnL dl (length dl)} ((UNlift01 cl dl P F) ` (UNpart01 cl dl P))\"\n(is \"part ?K ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "let ?G = \"UNlift01 cl dl P F\""], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "let ?Q = \"%n. F n ` (P n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "have R: \"?R = {?G (BrnFT cl dl)} \\<union> ?G ` (UNpart1 cl dl P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` UNpart01 cl dl P =\n    {UNlift01 cl dl P F (BrnFT cl dl)} \\<union>\n    UNlift01 cl dl P F ` UNpart1 cl dl P", "unfolding UNpart01_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F ` ({BrnFT cl dl} \\<union> UNpart1 cl dl P) =\n    {UNlift01 cl dl P F (BrnFT cl dl)} \\<union>\n    UNlift01 cl dl P F ` UNpart1 cl dl P", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F ` UNpart01 cl dl P =\n  {UNlift01 cl dl P F (BrnFT cl dl)} \\<union>\n  UNlift01 cl dl P F ` UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "unfolding R"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)}\n     ({UNlift01 cl dl P F (BrnFT cl dl)} \\<union>\n      UNlift01 cl dl P F ` UNpart1 cl dl P)", "apply(rule part_Un_singl2[of _ _ \"BrnNFT dl cl\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. {..<brnL dl (length dl)} =\n    UNlift01 cl dl P F (BrnFT cl dl) \\<union> BrnNFT dl cl\n 2. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)\n 3. \\<And>I.\n       I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F (BrnFT cl dl) \\<inter> I = {}", "using assms part_UNlift01_UNpart1"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n  \\<lbrakk>length ?cl = length ?dl; properL ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n;\n   \\<And>n.\n      n < length ?dl \\<Longrightarrow>\n      part {..<brn (?dl ! n)} (?F n ` ?P n)\\<rbrakk>\n  \\<Longrightarrow> part (BrnNFT ?dl ?cl)\n                     (UNlift01 ?cl ?dl ?P ?F ` UNpart1 ?cl ?dl ?P)\n\ngoal (3 subgoals):\n 1. {..<brnL dl (length dl)} =\n    UNlift01 cl dl P F (BrnFT cl dl) \\<union> BrnNFT dl cl\n 2. part (BrnNFT dl cl) (UNlift01 cl dl P F ` UNpart1 cl dl P)\n 3. \\<And>I.\n       I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F (BrnFT cl dl) \\<inter> I = {}", "apply(force, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>I.\n       I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F (BrnFT cl dl) \\<inter> I = {}", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5) \\<and> {} \\<notin> F ?n5 ` P ?n5\n\ngoal (1 subgoal):\n 1. \\<And>I.\n       I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P \\<Longrightarrow>\n       UNlift01 cl dl P F (BrnFT cl dl) \\<inter> I = {}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and>\n           {} \\<notin> F n ` P n\\<rbrakk>\n       \\<Longrightarrow> BrnFT dl cl \\<inter> I = {}", "apply(rule BrnFT_Int_UNpart1[of dl cl ?Q])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and>\n           {} \\<notin> F n ` P n\\<rbrakk>\n       \\<Longrightarrow> length dl = length cl\n 2. \\<And>I n.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n;\n        n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n) \\<and>\n                         {} \\<notin> F n ` P n\n 3. \\<And>I.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and>\n           {} \\<notin> F n ` P n\\<rbrakk>\n       \\<Longrightarrow> I \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "apply(force, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and>\n           {} \\<notin> F n ` P n\\<rbrakk>\n       \\<Longrightarrow> I \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "using UNlift01_UNpart1"], ["proof (prove)\nusing this:\n  \\<lbrakk>length ?cl = length ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n\\<rbrakk>\n  \\<Longrightarrow> UNlift01 ?cl ?dl ?P ?F ` UNpart1 ?cl ?dl ?P =\n                    UNpart1 ?dl ?cl (\\<lambda>n. ?F n ` ?P n)\n\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> UNlift01 cl dl P F ` UNpart1 cl dl P;\n        length cl = length dl; properL dl;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n;\n        \\<And>n.\n           n < length dl \\<Longrightarrow>\n           part {..<brn (dl ! n)} (F n ` P n) \\<and>\n           {} \\<notin> F n ` P n\\<rbrakk>\n       \\<Longrightarrow> I \\<in> UNpart1 dl cl (\\<lambda>n. F n ` P n)", "by auto"], ["proof (state)\nthis:\n  part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* fixme: cont *)"], ["", "lemma diff_frac_eq_1:\nassumes \"b \\<noteq> (0::real)\"\nshows \"1 - a / b = (b - a) / b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - a / b = (b - a) / b", "by (metis assms diff_divide_distrib divide_self_if)"], ["", "lemma diff_frac_eq_2:\nassumes \"b \\<noteq> (1::real)\"\nshows \"1 - (a - b) / (1 - b) = (1 - a) / (1 - b)\"\n(is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "have b: \"1 - b \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - b \\<noteq> 0", "using assms"], ["proof (prove)\nusing this:\n  b \\<noteq> 1\n\ngoal (1 subgoal):\n 1. 1 - b \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  1 - b \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "hence \"?L = (1 - b - (a - b)) / (1 - b)\"  (is \"?L = ?A / ?B\")"], ["proof (prove)\nusing this:\n  1 - b \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - b - (a - b)) / (1 - b)", "using diff_frac_eq_1"], ["proof (prove)\nusing this:\n  1 - b \\<noteq> 0\n  ?b \\<noteq> 0 \\<Longrightarrow> 1 - ?a / ?b = (?b - ?a) / ?b\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - b - (a - b)) / (1 - b)", "by blast"], ["proof (state)\nthis:\n  1 - (a - b) / (1 - b) = (1 - b - (a - b)) / (1 - b)\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "also"], ["proof (state)\nthis:\n  1 - (a - b) / (1 - b) = (1 - b - (a - b)) / (1 - b)\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "have \"?A = 1 - a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - b - (a - b) = 1 - a", "by simp"], ["proof (state)\nthis:\n  1 - b - (a - b) = 1 - a\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "finally"], ["proof (chain)\npicking this:\n  1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "show ?thesis"], ["proof (prove)\nusing this:\n  1 - (a - b) / (1 - b) = (1 - a) / (1 - b)\n\ngoal (1 subgoal):\n 1. 1 - (a - b) / (1 - b) = (1 - a) / (1 - b)", "by simp"], ["proof (state)\nthis:\n  1 - (a - b) / (1 - b) = (1 - a) / (1 - b)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma triv_div_mult:\nassumes vSF: \"vSF \\<noteq> (1::real)\"\nand L: \"L = (K - vSF) / (1 - vSF)\" and Ln: \"L \\<noteq> 1\"\nshows \"(VS / (1 - vSF) * V) / (1 - L) = (VS * V) / (1 - K)\"\n(is \"?A = ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "have vSF_0: \"1 - vSF \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - vSF \\<noteq> 0", "using vSF"], ["proof (prove)\nusing this:\n  vSF \\<noteq> 1\n\ngoal (1 subgoal):\n 1. 1 - vSF \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  1 - vSF \\<noteq> 0\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "{"], ["proof (state)\nthis:\n  1 - vSF \\<noteq> 0\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "assume \"K = 1\""], ["proof (state)\nthis:\n  K = 1\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "hence \"L = 1\""], ["proof (prove)\nusing this:\n  K = 1\n\ngoal (1 subgoal):\n 1. L = 1", "using L vSF"], ["proof (prove)\nusing this:\n  K = 1\n  L = (K - vSF) / (1 - vSF)\n  vSF \\<noteq> 1\n\ngoal (1 subgoal):\n 1. L = 1", "by simp"], ["proof (state)\nthis:\n  L = 1\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "hence False"], ["proof (prove)\nusing this:\n  L = 1\n\ngoal (1 subgoal):\n 1. False", "using Ln"], ["proof (prove)\nusing this:\n  L = 1\n  L \\<noteq> 1\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "}"], ["proof (state)\nthis:\n  K = 1 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "hence Kn: \"K \\<noteq> 1\""], ["proof (prove)\nusing this:\n  K = 1 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. K \\<noteq> 1", "by auto"], ["proof (state)\nthis:\n  K \\<noteq> 1\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "hence K_0: \"1 - K \\<noteq> 0\""], ["proof (prove)\nusing this:\n  K \\<noteq> 1\n\ngoal (1 subgoal):\n 1. 1 - K \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  1 - K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "have \"1 - L = (1 - K) / (1 - vSF)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - L = (1 - K) / (1 - vSF)", "unfolding L"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - (K - vSF) / (1 - vSF) = (1 - K) / (1 - vSF)", "using vSF diff_frac_eq_2"], ["proof (prove)\nusing this:\n  vSF \\<noteq> 1\n  ?b \\<noteq> 1 \\<Longrightarrow>\n  1 - (?a - ?b) / (1 - ?b) = (1 - ?a) / (1 - ?b)\n\ngoal (1 subgoal):\n 1. 1 - (K - vSF) / (1 - vSF) = (1 - K) / (1 - vSF)", "by blast"], ["proof (state)\nthis:\n  1 - L = (1 - K) / (1 - vSF)\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "hence \"?A = (VS / (1 - vSF) * V) / ((1 - K) / (1 - vSF))\""], ["proof (prove)\nusing this:\n  1 - L = (1 - K) / (1 - vSF)\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) =\n    VS / (1 - vSF) * V / ((1 - K) / (1 - vSF))", "by simp"], ["proof (state)\nthis:\n  VS / (1 - vSF) * V / (1 - L) = VS / (1 - vSF) * V / ((1 - K) / (1 - vSF))\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "also"], ["proof (state)\nthis:\n  VS / (1 - vSF) * V / (1 - L) = VS / (1 - vSF) * V / ((1 - K) / (1 - vSF))\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "have \"... = ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / ((1 - K) / (1 - vSF)) = VS * V / (1 - K)", "using vSF_0 K_0"], ["proof (prove)\nusing this:\n  1 - vSF \\<noteq> 0\n  1 - K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / ((1 - K) / (1 - vSF)) = VS * V / (1 - K)", "by auto"], ["proof (state)\nthis:\n  VS / (1 - vSF) * V / ((1 - K) / (1 - vSF)) = VS * V / (1 - K)\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "finally"], ["proof (chain)\npicking this:\n  VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "show ?thesis"], ["proof (prove)\nusing this:\n  VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)\n\ngoal (1 subgoal):\n 1. VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)", "."], ["proof (state)\nthis:\n  VS / (1 - vSF) * V / (1 - L) = VS * V / (1 - K)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* end fixme *)"], ["", "lemma ss_wt_ParT_UNlift01:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" and II: \"II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand sw:\n\"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) s) I =\n     sum (wt (dl ! n) t) (F n I)\"\nand st: \"s \\<approx> t\"\nand le1: \"sum (wt (ParT cl) s) (BrnFT cl dl) < 1\"\n\"sum (wt (ParT dl) t) (BrnFT dl cl) < 1\"\nshows\n\"sum (wt (ParT cl) s) II /\n (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\"\n(is \"sum ?vP II / (1 - sum ?vP ?II_0) =\n     sum ?wP ?JJ / (1 - sum ?wP ?JJ_0)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?vS = \"%n. 1 / ?N\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?wS = \"%n. 1 / (length dl)\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?vSF = \"WtFT cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?wSF = \"WtFT dl\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?v = \"%n. wt (cl ! n) (?ss n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "let ?w = \"%n. wt (dl ! n) (?tt n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "(*  *)"], ["proof (state)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st l"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have vSwS: \"\\<And> n. n < ?N \\<Longrightarrow> ?vS n = ?wS n\" and sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "using assms"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n  \\<lbrakk>?n5 < length cl; ?I5 \\<in> P ?n5\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n5) s) ?I5 =\n                    sum (wt (dl ! ?n5) t) (F ?n5 ?I5)\n  s \\<approx> t\n  sum (wt (ParT cl) s) (BrnFT cl dl) < 1\n  sum (wt (ParT dl) t) (BrnFT dl cl) < 1\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "by auto"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  ?n9 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have nf: \"?vSF \\<noteq> 1\" \"?wSF \\<noteq> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. WtFT cl \\<noteq> 1 &&& WtFT dl \\<noteq> 1", "using le1 cldl l"], ["proof (prove)\nusing this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) < 1\n  sum (wt (ParT dl) t) (BrnFT dl cl) < 1\n  properL cl\n  properL dl\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. WtFT cl \\<noteq> 1 &&& WtFT dl \\<noteq> 1", "by auto"], ["proof (state)\nthis:\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have theFT_theNFT[simp]:\n  \"\\<And> n. n \\<in> theFT dl - theFT cl \\<Longrightarrow> n < length cl \\<and> \\<not> finished (cl ! n)\"\n  \"\\<And> n. n \\<in> theFT cl - theFT dl \\<Longrightarrow> n < length dl \\<and> \\<not> finished (dl ! n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n \\<in> theFT dl - theFT cl \\<Longrightarrow>\n        n < length cl \\<and> \\<not> finished (cl ! n)) &&&\n    (\\<And>n.\n        n \\<in> theFT cl - theFT dl \\<Longrightarrow>\n        n < length dl \\<and> \\<not> finished (dl ! n))", "unfolding theFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n \\<in> {n. n < length dl \\<and> finished (dl ! n)} -\n                {n. n < length cl \\<and>\n                    finished (cl ! n)} \\<Longrightarrow>\n        n < length cl \\<and> \\<not> finished (cl ! n)) &&&\n    (\\<And>n.\n        n \\<in> {n. n < length cl \\<and> finished (cl ! n)} -\n                {n. n < length dl \\<and>\n                    finished (dl ! n)} \\<Longrightarrow>\n        n < length dl \\<and> \\<not> finished (dl ! n))", "using l"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n \\<in> {n. n < length dl \\<and> finished (dl ! n)} -\n                {n. n < length cl \\<and>\n                    finished (cl ! n)} \\<Longrightarrow>\n        n < length cl \\<and> \\<not> finished (cl ! n)) &&&\n    (\\<And>n.\n        n \\<in> {n. n < length cl \\<and> finished (cl ! n)} -\n                {n. n < length dl \\<and>\n                    finished (dl ! n)} \\<Longrightarrow>\n        n < length dl \\<and> \\<not> finished (dl ! n))", "by auto"], ["proof (state)\nthis:\n  ?n9 \\<in> theFT dl - theFT cl \\<Longrightarrow>\n  ?n9 < length cl \\<and> \\<not> finished (cl ! ?n9)\n  ?n9 \\<in> theFT cl - theFT dl \\<Longrightarrow>\n  ?n9 < length dl \\<and> \\<not> finished (dl ! ?n9)\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have sum_v[simp]:\n  \"\\<And> n. n < length cl \\<Longrightarrow> sum (?v n) {..< brn (cl ! n)} = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       sum (wt (cl ! n) s) {..<brn (cl ! n)} = 1", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       sum (wt (cl ! n) s) {..<brn (cl ! n)} = 1", "by auto"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow>\n  sum (wt (cl ! ?n9) s) {..<brn (cl ! ?n9)} = 1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have sum_w[simp]:\n  \"\\<And> n. n < length dl \\<Longrightarrow> sum (?w n) {..< brn (dl ! n)} = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       sum (wt (dl ! n) t) {..<brn (dl ! n)} = 1", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       sum (wt (dl ! n) t) {..<brn (dl ! n)} = 1", "by auto"], ["proof (state)\nthis:\n  ?n9 < length dl \\<Longrightarrow>\n  sum (wt (dl ! ?n9) t) {..<brn (dl ! ?n9)} = 1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have theFTOne: \"theFTOne cl dl = theFT dl - theFT cl \\<union> theFT cl\"\n  \"theFTOne dl cl = theFT cl - theFT dl \\<union> theFT dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. theFTOne cl dl = theFT dl - theFT cl \\<union> theFT cl &&&\n    theFTOne dl cl = theFT cl - theFT dl \\<union> theFT dl", "unfolding theFTOne_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. theFT cl \\<union> theFT dl = theFT dl - theFT cl \\<union> theFT cl &&&\n    theFT dl \\<union> theFT cl = theFT cl - theFT dl \\<union> theFT dl", "by blast+"], ["proof (state)\nthis:\n  theFTOne cl dl = theFT dl - theFT cl \\<union> theFT cl\n  theFTOne dl cl = theFT cl - theFT dl \\<union> theFT dl\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have sum_vS_wS: \"sum ?vS (theFTOne cl dl) = sum ?wS (theFTOne dl cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) =\n    (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))", "unfolding theFTOne_sym[of cl dl]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length cl)) =\n    (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))", "apply (rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. theFTOne dl cl = theFTOne dl cl\n 2. \\<And>x.\n       x \\<in> theFTOne dl cl \\<Longrightarrow>\n       1 / real (length cl) = 1 / real (length dl)", "using vSwS l"], ["proof (prove)\nusing this:\n  ?n9 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  length cl = length dl\n\ngoal (2 subgoals):\n 1. theFTOne dl cl = theFTOne dl cl\n 2. \\<And>x.\n       x \\<in> theFTOne dl cl \\<Longrightarrow>\n       1 / real (length cl) = 1 / real (length dl)", "unfolding theFTOne_def theFT_def theNFT_def"], ["proof (prove)\nusing this:\n  ?n9 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  length cl = length dl\n\ngoal (2 subgoals):\n 1. {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n    {n. n < length cl \\<and> finished (cl ! n)} =\n    {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n    {n. n < length cl \\<and> finished (cl ! n)}\n 2. \\<And>x.\n       x \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n               {n. n < length cl \\<and> finished (cl ! n)} \\<Longrightarrow>\n       1 / real (length cl) = 1 / real (length dl)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) =\n  (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "(*  *)"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) =\n  (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have II: \"II \\<in> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II \\<in> UNpart1 cl dl P", "using II l P UNpart1_UNpart01"], ["proof (prove)\nusing this:\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length ?cl = length ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n\\<rbrakk>\n  \\<Longrightarrow> UNpart1 ?cl ?dl ?P =\n                    UNpart01 ?cl ?dl ?P - {BrnFT ?cl ?dl}\n\ngoal (1 subgoal):\n 1. II \\<in> UNpart1 cl dl P", "by blast"], ["proof (state)\nthis:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "thus ?thesis"], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "case (Local n I)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "hence n: \"n < ?N\" \"n < length dl\" \"n \\<in> theNFTBoth cl dl\"\n    \"\\<not> finished (cl!n)\"  \"\\<not> finished (dl!n)\"\n    and I: \"I \\<in> P n\"\n    and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. ((n < length cl &&& n < length dl) &&&\n     n \\<in> theNFTBoth cl dl &&&\n     \\<not> finished (cl ! n) &&& \\<not> finished (dl ! n)) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. ((n < length cl &&& n < length dl) &&&\n     n \\<in> theNFTBoth cl dl &&&\n     \\<not> finished (cl ! n) &&& \\<not> finished (dl ! n)) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have I_sub: \"I \\<subseteq> {..< brn (cl!n)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "using n I P"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  ?n5 < length cl \\<Longrightarrow>\n  (\\<Union> (P ?n5) = {..<brn (cl ! ?n5)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> P ?n5 \\<and>\n       J2 \\<in> P ?n5 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. I \\<subseteq> {..<brn (cl ! n)}", "by blast"], ["proof (state)\nthis:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "hence FnI_sub: \"F n I \\<subseteq> {..< brn (dl!n)}\""], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "using n I FP"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "unfolding part_def"], ["proof (prove)\nusing this:\n  I \\<subseteq> {..<brn (cl ! n)}\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  ?n5 < length dl \\<Longrightarrow>\n  \\<Union> (F ?n5 ` P ?n5) = {..<brn (dl ! ?n5)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> F ?n5 ` P ?n5 \\<and>\n      J2 \\<in> F ?n5 ` P ?n5 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. F n I \\<subseteq> {..<brn (dl ! n)}", "by blast"], ["proof (state)\nthis:\n  F n I \\<subseteq> {..<brn (dl ! n)}\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have JJ: \"?JJ = shift dl n (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F II = local.shift dl n (F n I)", "unfolding II"], ["proof (prove)\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "using l P n I"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. UNlift01 cl dl P F (local.shift cl n I) = local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "(*  *)"], ["proof (state)\nthis:\n  UNlift01 cl dl P F II = local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"sum ?vP ?II_0 =\n    sum (%n. sum ?vP {brnL cl n..<+brn (cl ! n)}) (theFTOne cl dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) =\n    (\\<Sum>n\\<in>theFTOne cl dl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding BrnFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s)\n     (\\<Union>n\\<in>theFTOne cl dl.\n         {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFTOne cl dl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "apply(rule sum.UNION_disjoint)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFTOne cl dl)\n 2. \\<forall>i\\<in>theFTOne cl dl.\n       finite {brnL cl i..<brnL cl i + brn (cl ! i)}\n 3. \\<forall>i\\<in>theFTOne cl dl.\n       \\<forall>j\\<in>theFTOne cl dl.\n          i \\<noteq> j \\<longrightarrow>\n          {brnL cl i..<brnL cl i + brn (cl ! i)} \\<inter>\n          {brnL cl j..<brnL cl j + brn (cl ! j)} =\n          {}", "using brnL_Int l"], ["proof (prove)\nusing this:\n  \\<lbrakk>?n1.0 \\<noteq> ?n2.0; ?n1.0 < length ?cl;\n   ?n2.0 < length ?cl\\<rbrakk>\n  \\<Longrightarrow> {brnL ?cl\n                      ?n1.0..<brnL ?cl ?n1.0 + brn (?cl ! ?n1.0)} \\<inter>\n                    {brnL ?cl ?n2.0..<brnL ?cl ?n2.0 + brn (?cl ! ?n2.0)} =\n                    {}\n  length cl = length dl\n\ngoal (3 subgoals):\n 1. finite (theFTOne cl dl)\n 2. \\<forall>i\\<in>theFTOne cl dl.\n       finite {brnL cl i..<brnL cl i + brn (cl ! i)}\n 3. \\<forall>i\\<in>theFTOne cl dl.\n       \\<forall>j\\<in>theFTOne cl dl.\n          i \\<noteq> j \\<longrightarrow>\n          {brnL cl i..<brnL cl i + brn (cl ! i)} \\<inter>\n          {brnL cl j..<brnL cl j + brn (cl ! j)} =\n          {}", "by auto"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFTOne cl dl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFTOne cl dl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. sum ?vP {brnL cl n..<+brn (cl ! n)})\n      ((theFT dl - theFT cl) \\<union> theFT cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFTOne cl dl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "unfolding theFTOne_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl \\<union> theFT dl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "by (metis Un_Diff_cancel2 Un_commute)"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne cl dl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne cl dl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. sum ?vP {brnL cl n..<+brn (cl ! n)})\n      (theFT dl - theFT cl) +\n    sum\n      (%n. sum ?vP {brnL cl n..<+brn (cl ! n)})\n      (theFT cl)\" (is \"... = ?L + ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) +\n    (\\<Sum>n\\<in>theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "apply(rule sum.union_disjoint)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFT dl - theFT cl)\n 2. finite (theFT cl)\n 3. (theFT dl - theFT cl) \\<inter> theFT cl = {}", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) +\n  (\\<Sum>n\\<in>theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) +\n  (\\<Sum>n\\<in>theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?R = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    0", "apply(rule sum.neutral)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>theFT cl.\n       sum (wt (ParT cl) s) {brnL cl x..<brnL cl x + brn (cl ! x)} = 0", "using cldl nf"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>theFT cl.\n       sum (wt (ParT cl) s) {brnL cl x..<brnL cl x + brn (cl ! x)} = 0", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  0\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) +\n  0", "have \"sum ?vP ?II_0 = ?L\""], ["proof (prove)\nusing this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) +\n  0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L =\n    sum\n      (%n. ?vS n / (1 - ?vSF) * sum (?v n) {..< brn (cl ! n)})\n      (theFT dl - theFT cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl.\n       sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 / real (length cl) / (1 - WtFT cl) *\n       sum (wt (cl ! n) s) {..<brn (cl ! n)})", "apply(intro sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. theFT dl - theFT cl = theFT dl - theFT cl\n 2. \\<And>x.\n       x \\<in> theFT dl - theFT cl \\<Longrightarrow>\n       sum (wt (ParT cl) s) {brnL cl x..<brnL cl x + brn (cl ! x)} =\n       1 / real (length cl) / (1 - WtFT cl) *\n       sum (wt (cl ! x) s) {..<brn (cl ! x)}", "using cldl nf"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n\ngoal (2 subgoals):\n 1. theFT dl - theFT cl = theFT dl - theFT cl\n 2. \\<And>x.\n       x \\<in> theFT dl - theFT cl \\<Longrightarrow>\n       sum (wt (ParT cl) s) {brnL cl x..<brnL cl x + brn (cl ! x)} =\n       1 / real (length cl) / (1 - WtFT cl) *\n       sum (wt (cl ! x) s) {..<brn (cl ! x)}", "using theFT_theNFT sum_wt_ParT_notWtFT_notFinished[of cl]"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n  ?n9 \\<in> theFT dl - theFT cl \\<Longrightarrow>\n  ?n9 < length cl \\<and> \\<not> finished (cl ! ?n9)\n  ?n9 \\<in> theFT cl - theFT dl \\<Longrightarrow>\n  ?n9 < length dl \\<and> \\<not> finished (dl ! ?n9)\n  \\<lbrakk>properL cl; WtFT cl \\<noteq> 1; ?n < length cl;\n   \\<not> finished (cl ! ?n)\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT cl) ?s)\n                     {brnL cl ?n..<brnL cl ?n + brn (cl ! ?n)} =\n                    1 / real (length cl) / (1 - WtFT cl) *\n                    sum (wt (cl ! ?n) ?s) {..<brn (cl ! ?n)}\n\ngoal (2 subgoals):\n 1. theFT dl - theFT cl = theFT dl - theFT cl\n 2. \\<And>x.\n       x \\<in> theFT dl - theFT cl \\<Longrightarrow>\n       sum (wt (ParT cl) s) {brnL cl x..<brnL cl x + brn (cl ! x)} =\n       1 / real (length cl) / (1 - WtFT cl) *\n       sum (wt (cl ! x) s) {..<brn (cl ! x)}", "by metis+"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) / (1 - WtFT cl) *\n     sum (wt (cl ! n) s) {..<brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     sum (wt (ParT cl) s) {brnL cl n..<brnL cl n + brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) / (1 - WtFT cl) *\n     sum (wt (cl ! n) s) {..<brn (cl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. ?vS n * sum (?v n) {..< brn (cl ! n)})\n      (theFT dl - theFT cl) / (1 - ?vSF)\" (is \"... = ?L / (1 - ?vSF)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 / real (length cl) / (1 - WtFT cl) *\n       sum (wt (cl ! n) s) {..<brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 / real (length cl) * sum (wt (cl ! n) s) {..<brn (cl ! n)}) /\n    (1 - WtFT cl)", "unfolding times_divide_eq_left sum_divide_distrib"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 * sum (wt (cl ! n) s) {..<brn (cl ! n)} / real (length cl) /\n       (1 - WtFT cl)) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 * sum (wt (cl ! n) s) {..<brn (cl ! n)} / real (length cl) /\n       (1 - WtFT cl))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) / (1 - WtFT cl) *\n     sum (wt (cl ! n) s) {..<brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) * sum (wt (cl ! n) s) {..<brn (cl ! n)}) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) / (1 - WtFT cl) *\n     sum (wt (cl ! n) s) {..<brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) * sum (wt (cl ! n) s) {..<brn (cl ! n)}) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L = sum ?vS (theFT dl - theFT cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl.\n       1 / real (length cl) * sum (wt (cl ! n) s) {..<brn (cl ! n)}) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl))", "apply(intro sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. theFT dl - theFT cl = theFT dl - theFT cl\n 2. \\<And>x.\n       x \\<in> theFT dl - theFT cl \\<Longrightarrow>\n       1 / real (length cl) * sum (wt (cl ! x) s) {..<brn (cl ! x)} =\n       1 / real (length cl)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl.\n     1 / real (length cl) * sum (wt (cl ! n) s) {..<brn (cl ! n)}) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) / (1 - WtFT cl)", "have\n    \"sum ?vP ?II_0 = (sum ?vS (theFT dl - theFT cl)) / (1 - ?vSF)\"\n    (is \"... = ?L / ?R\")"], ["proof (prove)\nusing this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) / (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) / (1 - WtFT cl)", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) / (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) / (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L = sum ?vS (theFTOne cl dl) - ?vSF\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) =\n    (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl", "unfolding eq_diff_eq WtFT_def theFTOne"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) +\n    (\\<Sum>n\\<in>theFT cl. 1 / real (length cl)) =\n    (\\<Sum>n\\<in>theFT dl - theFT cl \\<union> theFT cl.\n       1 / real (length cl))", "apply(rule sum.union_disjoint[THEN sym])"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFT dl - theFT cl)\n 2. finite (theFT cl)\n 3. (theFT dl - theFT cl) \\<inter> theFT cl = {}", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl - theFT cl. 1 / real (length cl)) =\n  (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n  (1 - WtFT cl)", "have vPII0: \"sum ?vP ?II_0 =\n    (sum ?vS (theFTOne cl dl) - ?vSF) / (1 - ?vSF)\""], ["proof (prove)\nusing this:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (BrnFT cl dl) =\n    ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n    (1 - WtFT cl)", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "(*  *)\n    (*  *)"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"sum ?wP ?JJ_0 =\n    sum (%n. sum ?wP {brnL dl n..<+brn (dl ! n)}) (theFTOne dl cl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT dl) t) (BrnFT dl cl) =\n    (\\<Sum>n\\<in>theFTOne dl cl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "unfolding BrnFT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT dl) t)\n     (\\<Union>n\\<in>theFTOne dl cl.\n         {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFTOne dl cl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "apply(rule sum.UNION_disjoint)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFTOne dl cl)\n 2. \\<forall>i\\<in>theFTOne dl cl.\n       finite {brnL dl i..<brnL dl i + brn (dl ! i)}\n 3. \\<forall>i\\<in>theFTOne dl cl.\n       \\<forall>j\\<in>theFTOne dl cl.\n          i \\<noteq> j \\<longrightarrow>\n          {brnL dl i..<brnL dl i + brn (dl ! i)} \\<inter>\n          {brnL dl j..<brnL dl j + brn (dl ! j)} =\n          {}", "unfolding theFTOne_def theFT_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite\n     ({n. n < length dl \\<and> finished (dl ! n)} \\<union>\n      {n. n < length cl \\<and> finished (cl ! n)})\n 2. \\<forall>i\\<in>{n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                   {n. n < length cl \\<and> finished (cl ! n)}.\n       finite {brnL dl i..<brnL dl i + brn (dl ! i)}\n 3. \\<forall>i\\<in>{n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                   {n. n < length cl \\<and> finished (cl ! n)}.\n       \\<forall>j\\<in>{n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                      {n. n < length cl \\<and> finished (cl ! n)}.\n          i \\<noteq> j \\<longrightarrow>\n          {brnL dl i..<brnL dl i + brn (dl ! i)} \\<inter>\n          {brnL dl j..<brnL dl j + brn (dl ! j)} =\n          {}", "apply (force, force, clarify)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> {brnL dl i..<brnL dl i + brn (dl ! i)} \\<inter>\n                         {brnL dl j..<brnL dl j + brn (dl ! j)} =\n                         {}", "apply(rule brnL_Int)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> i \\<noteq> j\n 2. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> i < length dl\n 3. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> j < length dl", "using l"], ["proof (prove)\nusing this:\n  length cl = length dl\n\ngoal (3 subgoals):\n 1. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> i \\<noteq> j\n 2. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> i < length dl\n 3. \\<And>i j.\n       \\<lbrakk>i \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                        {n. n < length cl \\<and> finished (cl ! n)};\n        j \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n                {n. n < length cl \\<and> finished (cl ! n)};\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> j < length dl", "by auto"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFTOne dl cl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFTOne dl cl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. sum ?wP {brnL dl n..<+ brn (dl ! n)})\n      ((theFT cl - theFT dl) \\<union> theFT dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFTOne dl cl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "unfolding theFTOne_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl \\<union> theFT cl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "by (metis Un_Diff_cancel2 Un_commute)"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne dl cl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFTOne dl cl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. sum ?wP {brnL dl n..<+brn (dl ! n)})\n      (theFT cl - theFT dl) +\n    sum\n      (%n. sum ?wP {brnL dl n..<+brn (dl ! n)})\n      (theFT dl)\" (is \"... = ?L + ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) +\n    (\\<Sum>n\\<in>theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "apply(rule sum.union_disjoint)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFT cl - theFT dl)\n 2. finite (theFT dl)\n 3. (theFT cl - theFT dl) \\<inter> theFT dl = {}", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) +\n  (\\<Sum>n\\<in>theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) +\n  (\\<Sum>n\\<in>theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?R = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    0", "apply(rule sum.neutral)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>theFT dl.\n       sum (wt (ParT dl) t) {brnL dl x..<brnL dl x + brn (dl ! x)} = 0", "using cldl nf"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>theFT dl.\n       sum (wt (ParT dl) t) {brnL dl x..<brnL dl x + brn (dl ! x)} = 0", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  0\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) +\n  0", "have \"sum ?wP ?JJ_0 = ?L\""], ["proof (prove)\nusing this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) +\n  0\n\ngoal (1 subgoal):\n 1. sum (wt (ParT dl) t) (BrnFT dl cl) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L =\n    sum\n      (%n. ?wS n / (1 - ?wSF) * sum (?w n) {..< brn (dl ! n)})\n      (theFT cl - theFT dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl.\n       sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 / real (length dl) / (1 - WtFT dl) *\n       sum (wt (dl ! n) t) {..<brn (dl ! n)})", "apply(intro sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. theFT cl - theFT dl = theFT cl - theFT dl\n 2. \\<And>x.\n       x \\<in> theFT cl - theFT dl \\<Longrightarrow>\n       sum (wt (ParT dl) t) {brnL dl x..<brnL dl x + brn (dl ! x)} =\n       1 / real (length dl) / (1 - WtFT dl) *\n       sum (wt (dl ! x) t) {..<brn (dl ! x)}", "using cldl nf"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n\ngoal (2 subgoals):\n 1. theFT cl - theFT dl = theFT cl - theFT dl\n 2. \\<And>x.\n       x \\<in> theFT cl - theFT dl \\<Longrightarrow>\n       sum (wt (ParT dl) t) {brnL dl x..<brnL dl x + brn (dl ! x)} =\n       1 / real (length dl) / (1 - WtFT dl) *\n       sum (wt (dl ! x) t) {..<brn (dl ! x)}", "using theFT_theNFT sum_wt_ParT_notWtFT_notFinished[of dl]"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n  ?n9 \\<in> theFT dl - theFT cl \\<Longrightarrow>\n  ?n9 < length cl \\<and> \\<not> finished (cl ! ?n9)\n  ?n9 \\<in> theFT cl - theFT dl \\<Longrightarrow>\n  ?n9 < length dl \\<and> \\<not> finished (dl ! ?n9)\n  \\<lbrakk>properL dl; WtFT dl \\<noteq> 1; ?n < length dl;\n   \\<not> finished (dl ! ?n)\\<rbrakk>\n  \\<Longrightarrow> sum (wt (ParT dl) ?s)\n                     {brnL dl ?n..<brnL dl ?n + brn (dl ! ?n)} =\n                    1 / real (length dl) / (1 - WtFT dl) *\n                    sum (wt (dl ! ?n) ?s) {..<brn (dl ! ?n)}\n\ngoal (2 subgoals):\n 1. theFT cl - theFT dl = theFT cl - theFT dl\n 2. \\<And>x.\n       x \\<in> theFT cl - theFT dl \\<Longrightarrow>\n       sum (wt (ParT dl) t) {brnL dl x..<brnL dl x + brn (dl ! x)} =\n       1 / real (length dl) / (1 - WtFT dl) *\n       sum (wt (dl ! x) t) {..<brn (dl ! x)}", "by metis+"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) / (1 - WtFT dl) *\n     sum (wt (dl ! n) t) {..<brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     sum (wt (ParT dl) t) {brnL dl n..<brnL dl n + brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) / (1 - WtFT dl) *\n     sum (wt (dl ! n) t) {..<brn (dl ! n)})\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    sum\n      (%n. ?wS n * sum (?w n) {..< brn (dl ! n)})\n      (theFT cl - theFT dl) / (1 - ?wSF)\" (is \"... = ?L / (1 - ?wSF)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 / real (length dl) / (1 - WtFT dl) *\n       sum (wt (dl ! n) t) {..<brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 / real (length dl) * sum (wt (dl ! n) t) {..<brn (dl ! n)}) /\n    (1 - WtFT dl)", "unfolding times_divide_eq_left sum_divide_distrib"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 * sum (wt (dl ! n) t) {..<brn (dl ! n)} / real (length dl) /\n       (1 - WtFT dl)) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 * sum (wt (dl ! n) t) {..<brn (dl ! n)} / real (length dl) /\n       (1 - WtFT dl))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) / (1 - WtFT dl) *\n     sum (wt (dl ! n) t) {..<brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) * sum (wt (dl ! n) t) {..<brn (dl ! n)}) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) / (1 - WtFT dl) *\n     sum (wt (dl ! n) t) {..<brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) * sum (wt (dl ! n) t) {..<brn (dl ! n)}) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L = sum ?wS (theFT cl - theFT dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl.\n       1 / real (length dl) * sum (wt (dl ! n) t) {..<brn (dl ! n)}) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl))", "apply(intro sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. theFT cl - theFT dl = theFT cl - theFT dl\n 2. \\<And>x.\n       x \\<in> theFT cl - theFT dl \\<Longrightarrow>\n       1 / real (length dl) * sum (wt (dl ! x) t) {..<brn (dl ! x)} =\n       1 / real (length dl)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl.\n     1 / real (length dl) * sum (wt (dl ! n) t) {..<brn (dl ! n)}) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) / (1 - WtFT dl)", "have\n    \"sum ?wP ?JJ_0 = (sum ?wS (theFT cl - theFT dl)) / (1 - ?wSF)\"\n    (is \"... = ?L / ?R\")"], ["proof (prove)\nusing this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) / (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. sum (wt (ParT dl) t) (BrnFT dl cl) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) / (1 - WtFT dl)", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) / (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) / (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"?L = sum ?wS (theFTOne dl cl) - ?wSF\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) =\n    (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl", "unfolding eq_diff_eq WtFT_def theFTOne"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) +\n    (\\<Sum>n\\<in>theFT dl. 1 / real (length dl)) =\n    (\\<Sum>n\\<in>theFT cl - theFT dl \\<union> theFT dl.\n       1 / real (length dl))", "apply(rule sum.union_disjoint[THEN sym])"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (theFT cl - theFT dl)\n 2. finite (theFT dl)\n 3. (theFT cl - theFT dl) \\<inter> theFT dl = {}", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>theFT cl - theFT dl. 1 / real (length dl)) =\n  (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n  (1 - WtFT dl)", "have wPJJ0: \"sum ?wP ?JJ_0 =\n    (sum ?wS (theFTOne dl cl) - ?wSF) / (1 - ?wSF)\""], ["proof (prove)\nusing this:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. sum (wt (ParT dl) t) (BrnFT dl cl) =\n    ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n    (1 - WtFT dl)", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "(*  *)"], ["proof (state)\nthis:\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"sum ?vP II / (1 - sum ?vP ?II_0) =\n    (?vS n) / (1 - ?vSF) * (sum (?v n) I) / (1 - sum ?vP ?II_0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl))", "unfolding II"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl))", "using n nf cldl I_sub"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n  properL cl\n  properL dl\n  I \\<subseteq> {..<brn (cl ! n)}\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) (local.shift cl n I) /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl))", "by simp"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n  (1 - sum (wt (ParT cl) s) (BrnFT cl dl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n  (1 - sum (wt (ParT cl) s) (BrnFT cl dl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    (?vS n) * (sum (?v n) I) / (1 - sum ?vS (theFTOne cl dl))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I /\n    (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)))", "using nf(1) vPII0"], ["proof (prove)\nusing this:\n  WtFT cl \\<noteq> 1\n  sum (wt (ParT cl) s) (BrnFT cl dl) =\n  ((\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)) - WtFT cl) /\n  (1 - WtFT cl)\n\ngoal (1 subgoal):\n 1. 1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n    (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    1 / real (length cl) * sum (wt (cl ! n) s) I /\n    (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)))", "by (rule triv_div_mult) (insert le1, auto)"], ["proof (state)\nthis:\n  1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n  (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  1 / real (length cl) * sum (wt (cl ! n) s) I /\n  (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  1 / real (length cl) / (1 - WtFT cl) * sum (wt (cl ! n) s) I /\n  (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  1 / real (length cl) * sum (wt (cl ! n) s) I /\n  (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl)))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    (?wS n) * (sum (?w n) (F n I)) / (1 - sum ?wS (theFTOne dl cl))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length cl) * sum (wt (cl ! n) s) I /\n    (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl))) =\n    1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)))", "using n vSwS[of n] sw[of n I] I"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  n < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. 1 / real (length cl) * sum (wt (cl ! n) s) I /\n    (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl))) =\n    1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)))", "unfolding sum_vS_wS"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  n < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n  I \\<in> P n\n\ngoal (1 subgoal):\n 1. 1 / real (length cl) * sum (wt (cl ! n) s) I /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))) =\n    1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)))", "by simp"], ["proof (state)\nthis:\n  1 / real (length cl) * sum (wt (cl ! n) s) I /\n  (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl))) =\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  1 / real (length cl) * sum (wt (cl ! n) s) I /\n  (1 - (\\<Sum>n\\<in>theFTOne cl dl. 1 / real (length cl))) =\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... =\n    (?wS n) / (1 - ?wSF) * (sum (?w n) (F n I)) / (1 - sum ?wP ?JJ_0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))) =\n    1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "using nf(2) wPJJ0"], ["proof (prove)\nusing this:\n  WtFT dl \\<noteq> 1\n  sum (wt (ParT dl) t) (BrnFT dl cl) =\n  ((\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl)) - WtFT dl) /\n  (1 - WtFT dl)\n\ngoal (1 subgoal):\n 1. 1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))) =\n    1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "by (rule triv_div_mult[THEN sym]) (insert le1, auto)"], ["proof (state)\nthis:\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))) =\n  1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "also"], ["proof (state)\nthis:\n  1 / real (length dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - (\\<Sum>n\\<in>theFTOne dl cl. 1 / real (length dl))) =\n  1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "have \"... = sum ?wP ?JJ / (1 - sum ?wP ?JJ_0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "unfolding JJ"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl)) =\n    sum (wt (ParT dl) t) (local.shift dl n (F n I)) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "using n nf cldl FnI_sub"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  WtFT cl \\<noteq> 1\n  WtFT dl \\<noteq> 1\n  properL cl\n  properL dl\n  F n I \\<subseteq> {..<brn (dl ! n)}\n\ngoal (1 subgoal):\n 1. 1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl)) =\n    sum (wt (ParT dl) t) (local.shift dl n (F n I)) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "by simp"], ["proof (state)\nthis:\n  1 / real (length dl) / (1 - WtFT dl) * sum (wt (dl ! n) t) (F n I) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl)) =\n  sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> sum (wt (ParT cl) s) II /\n                         (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n                         sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n                         (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "finally"], ["proof (chain)\npicking this:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "show ?thesis"], ["proof (prove)\nusing this:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "."], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n  sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n  (1 - sum (wt (ParT dl) t) (BrnFT dl cl))\n\ngoal:\nNo subgoals!", "qed"], ["", "(* *)"], ["", "definition thetaZOParT where\n\"thetaZOParT \\<equiv>\n {(ParT cl, ParT dl) |\n    cl dl.\n      properL cl \\<and> properL dl \\<and> SbisL cl dl}\""], ["", "lemma cont_eff_ParT_BrnFT_L:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand ii: \"ii \\<in> BrnFT cl dl\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nshows\n\"s \\<approx> eff (ParT cl) s ii \\<and>\n (cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "let ?p = \"%n. 1 / length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "from ii"], ["proof (chain)\npicking this:\n  ii \\<in> BrnFT cl dl", "show ?thesis"], ["proof (prove)\nusing this:\n  ii \\<in> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "proof(cases rule: BrnFT_elim)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "case (Local n i)"], ["proof (state)\nthis:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "hence n: \"n \\<in> theFTOne cl dl\"\n    and i: \"i < brn (cl ! n)\" and ii: \"ii = brnL cl n + i\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. n \\<in> theFTOne cl dl &&& i < brn (cl ! n) &&& ii = brnL cl n + i", "by auto"], ["proof (state)\nthis:\n  n \\<in> theFTOne cl dl\n  i < brn (cl ! n)\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "from n"], ["proof (chain)\npicking this:\n  n \\<in> theFTOne cl dl", "have \"n < length cl\" \"n < length dl\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "using l cldl"], ["proof (prove)\nusing this:\n  n \\<in> theFTOne cl dl\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "unfolding theFTOne_def theFT_def"], ["proof (prove)\nusing this:\n  n \\<in> {n. n < length cl \\<and> finished (cl ! n)} \\<union>\n          {n. n < length dl \\<and> finished (dl ! n)}\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "note n = this n"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "have discr: \"discr (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (cl ! n)", "proof(cases \"finished (cl!n)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (cl ! n) \\<Longrightarrow> discr (cl ! n)\n 2. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "case True"], ["proof (state)\nthis:\n  finished (cl ! n)\n\ngoal (2 subgoals):\n 1. finished (cl ! n) \\<Longrightarrow> discr (cl ! n)\n 2. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "thus ?thesis"], ["proof (prove)\nusing this:\n  finished (cl ! n)\n\ngoal (1 subgoal):\n 1. discr (cl ! n)", "using n cldl discr_finished"], ["proof (prove)\nusing this:\n  finished (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  \\<lbrakk>proper ?c; finished ?c\\<rbrakk> \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr (cl ! n)", "by auto"], ["proof (state)\nthis:\n  discr (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "case False"], ["proof (state)\nthis:\n  \\<not> finished (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "hence \"finished (dl!n)\""], ["proof (prove)\nusing this:\n  \\<not> finished (cl ! n)\n\ngoal (1 subgoal):\n 1. finished (dl ! n)", "using n"], ["proof (prove)\nusing this:\n  \\<not> finished (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. finished (dl ! n)", "unfolding theFTOne_def theFT_def"], ["proof (prove)\nusing this:\n  \\<not> finished (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> {n. n < length cl \\<and> finished (cl ! n)} \\<union>\n          {n. n < length dl \\<and> finished (dl ! n)}\n\ngoal (1 subgoal):\n 1. finished (dl ! n)", "by auto"], ["proof (state)\nthis:\n  finished (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "moreover"], ["proof (state)\nthis:\n  finished (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "have \"proper (cl!n)\" and \"proper (dl!n)\" and \"cl!n \\<approx>01 dl!n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proper (cl ! n) &&& proper (dl ! n) &&& cl ! n \\<approx>01 dl ! n", "using n cldl"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. proper (cl ! n) &&& proper (dl ! n) &&& cl ! n \\<approx>01 dl ! n", "by auto"], ["proof (state)\nthis:\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n\ngoal (1 subgoal):\n 1. \\<not> finished (cl ! n) \\<Longrightarrow> discr (cl ! n)", "ultimately"], ["proof (chain)\npicking this:\n  finished (dl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n", "show ?thesis"], ["proof (prove)\nusing this:\n  finished (dl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n\ngoal (1 subgoal):\n 1. discr (cl ! n)", "using ZObis_finished_discr_L"], ["proof (prove)\nusing this:\n  finished (dl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n  \\<lbrakk>?c \\<approx>01 ?d; proper ?d; finished ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr (cl ! n)", "by blast"], ["proof (state)\nthis:\n  discr (cl ! n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  discr (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "hence eff: \"?ss n \\<approx> eff (cl!n) (?ss n) i\"\n    and cont: \"proper (cont (cl!n) (?ss n) i) \\<and> discr (cont (cl!n) (?ss n) i)\""], ["proof (prove)\nusing this:\n  discr (cl ! n)\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i &&&\n    proper (local.cont (cl ! n) s i) \\<and> discr (local.cont (cl ! n) s i)", "using i cldl n"], ["proof (prove)\nusing this:\n  discr (cl ! n)\n  i < brn (cl ! n)\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i &&&\n    proper (local.cont (cl ! n) s i) \\<and> discr (local.cont (cl ! n) s i)", "by auto"], ["proof (state)\nthis:\n  s \\<approx> eff (cl ! n) s i\n  proper (local.cont (cl ! n) s i) \\<and> discr (local.cont (cl ! n) s i)\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne cl dl; i < brn (cl ! n);\n        ii = brnL cl n + i\\<rbrakk>\n       \\<Longrightarrow> s \\<approx> eff (ParT cl) s ii \\<and>\n                         (local.cont (ParT cl) s ii, ParT dl)\n                         \\<in> thetaZOParT", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. s \\<approx> eff (ParT cl) s ii\n 2. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "have \"s \\<approx> eff (cl!n) (?ss n) i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i", "using eff n indis_trans"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  \\<lbrakk>?s \\<approx> ?s'; ?s' \\<approx> ?s''\\<rbrakk>\n  \\<Longrightarrow> ?s \\<approx> ?s''\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (cl ! n) s i", "by blast"], ["proof (state)\nthis:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (2 subgoals):\n 1. s \\<approx> eff (ParT cl) s ii\n 2. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "thus ?eff"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii", "using i n cldl"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n  i < brn (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii", "unfolding ii"], ["proof (prove)\nusing this:\n  s \\<approx> eff (cl ! n) s i\n  i < brn (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s (brnL cl n + i)", "by simp"], ["proof (state)\nthis:\n  s \\<approx> eff (ParT cl) s ii\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "have \"cont (cl!n) (?ss n) i \\<approx>s cl!n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s cl ! n", "using discr cont cldl n"], ["proof (prove)\nusing this:\n  discr (cl ! n)\n  proper (local.cont (cl ! n) s i) \\<and> discr (local.cont (cl ! n) s i)\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s cl ! n", "by auto"], ["proof (state)\nthis:\n  local.cont (cl ! n) s i \\<approx>s cl ! n\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "moreover"], ["proof (state)\nthis:\n  local.cont (cl ! n) s i \\<approx>s cl ! n\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "have \"cl!n \\<approx>s dl!n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "using cldl n"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "by auto"], ["proof (state)\nthis:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "ultimately"], ["proof (chain)\npicking this:\n  local.cont (cl ! n) s i \\<approx>s cl ! n\n  cl ! n \\<approx>s dl ! n", "have \"cont (cl!n) (?ss n) i \\<approx>s dl!n\""], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s cl ! n\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s dl ! n", "using Sbis_trans"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s cl ! n\n  cl ! n \\<approx>s dl ! n\n  \\<lbrakk>?c \\<approx>s ?d; ?d \\<approx>s ?e\\<rbrakk>\n  \\<Longrightarrow> ?c \\<approx>s ?e\n\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s dl ! n", "by blast"], ["proof (state)\nthis:\n  local.cont (cl ! n) s i \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "thus ?cont"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "using i n cldl"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s dl ! n\n  i < brn (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "unfolding ii thetaZOParT_def"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s dl ! n\n  i < brn (cl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne cl dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s (brnL cl n + i), ParT dl)\n    \\<in> {(ParT cl, ParT dl) |cl dl.\n           properL cl \\<and> properL dl \\<and> SbisL cl dl}", "by auto"], ["proof (state)\nthis:\n  (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<approx> eff (ParT cl) s ii \\<and>\n  (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<approx> eff (ParT cl) s ii \\<and>\n  (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cont_eff_ParT_BrnFT_R:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand jj: \"jj \\<in> BrnFT dl cl\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx> eff (dl!n) t j \\<and> cont (cl!n) s i \\<approx>s cont (dl!n) t j\"\nshows\n\"t \\<approx> eff (ParT dl) t jj \\<and>\n (ParT cl, cont (ParT dl) t jj) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?N = \"length dl\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?q = \"%n. 1 /?N\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "from jj"], ["proof (chain)\npicking this:\n  jj \\<in> BrnFT dl cl", "show ?thesis"], ["proof (prove)\nusing this:\n  jj \\<in> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof(cases rule: BrnFT_elim)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "case (Local n j)"], ["proof (state)\nthis:\n  n \\<in> theFTOne dl cl\n  j < brn (dl ! n)\n  jj = brnL dl n + j\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "hence n: \"n \\<in> theFTOne dl cl\"\n    and j: \"j < brn (dl ! n)\" and jj: \"jj = brnL dl n + j\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne dl cl\n  j < brn (dl ! n)\n  jj = brnL dl n + j\n\ngoal (1 subgoal):\n 1. n \\<in> theFTOne dl cl &&& j < brn (dl ! n) &&& jj = brnL dl n + j", "by auto"], ["proof (state)\nthis:\n  n \\<in> theFTOne dl cl\n  j < brn (dl ! n)\n  jj = brnL dl n + j\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "from n"], ["proof (chain)\npicking this:\n  n \\<in> theFTOne dl cl", "have \"n < length cl\" \"n < length dl\""], ["proof (prove)\nusing this:\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "using l cldl"], ["proof (prove)\nusing this:\n  n \\<in> theFTOne dl cl\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "unfolding theFTOne_def theFT_def"], ["proof (prove)\nusing this:\n  n \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n          {n. n < length cl \\<and> finished (cl ! n)}\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. n < length cl &&& n < length dl", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "note n = this n"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "have discr: \"discr (dl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. discr (dl ! n)", "proof(cases \"finished (dl!n)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finished (dl ! n) \\<Longrightarrow> discr (dl ! n)\n 2. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "case True"], ["proof (state)\nthis:\n  finished (dl ! n)\n\ngoal (2 subgoals):\n 1. finished (dl ! n) \\<Longrightarrow> discr (dl ! n)\n 2. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "thus ?thesis"], ["proof (prove)\nusing this:\n  finished (dl ! n)\n\ngoal (1 subgoal):\n 1. discr (dl ! n)", "using n cldl discr_finished"], ["proof (prove)\nusing this:\n  finished (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n  \\<lbrakk>proper ?c; finished ?c\\<rbrakk> \\<Longrightarrow> discr ?c\n\ngoal (1 subgoal):\n 1. discr (dl ! n)", "by auto"], ["proof (state)\nthis:\n  discr (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "case False"], ["proof (state)\nthis:\n  \\<not> finished (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "hence \"finished (cl!n)\""], ["proof (prove)\nusing this:\n  \\<not> finished (dl ! n)\n\ngoal (1 subgoal):\n 1. finished (cl ! n)", "using n"], ["proof (prove)\nusing this:\n  \\<not> finished (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. finished (cl ! n)", "unfolding theFTOne_def theFT_def"], ["proof (prove)\nusing this:\n  \\<not> finished (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> {n. n < length dl \\<and> finished (dl ! n)} \\<union>\n          {n. n < length cl \\<and> finished (cl ! n)}\n\ngoal (1 subgoal):\n 1. finished (cl ! n)", "by auto"], ["proof (state)\nthis:\n  finished (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "moreover"], ["proof (state)\nthis:\n  finished (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "have \"proper (cl!n)\" and \"proper (dl!n)\" and \"cl!n \\<approx>01 dl!n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proper (cl ! n) &&& proper (dl ! n) &&& cl ! n \\<approx>01 dl ! n", "using n cldl"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. proper (cl ! n) &&& proper (dl ! n) &&& cl ! n \\<approx>01 dl ! n", "by auto"], ["proof (state)\nthis:\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n\ngoal (1 subgoal):\n 1. \\<not> finished (dl ! n) \\<Longrightarrow> discr (dl ! n)", "ultimately"], ["proof (chain)\npicking this:\n  finished (cl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n", "show ?thesis"], ["proof (prove)\nusing this:\n  finished (cl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n\ngoal (1 subgoal):\n 1. discr (dl ! n)", "using ZObis_finished_discr_R"], ["proof (prove)\nusing this:\n  finished (cl ! n)\n  proper (cl ! n)\n  proper (dl ! n)\n  cl ! n \\<approx>01 dl ! n\n  \\<lbrakk>proper ?c; finished ?c; ?c \\<approx>01 ?d\\<rbrakk>\n  \\<Longrightarrow> discr ?d\n\ngoal (1 subgoal):\n 1. discr (dl ! n)", "by blast"], ["proof (state)\nthis:\n  discr (dl ! n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  discr (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "hence eff: \"?tt n \\<approx> eff (dl!n) (?tt n) j\"\n    and cont: \"proper (cont (dl!n) (?tt n) j) \\<and> discr (cont (dl!n) (?tt n) j)\""], ["proof (prove)\nusing this:\n  discr (dl ! n)\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (dl ! n) t j &&&\n    proper (local.cont (dl ! n) t j) \\<and> discr (local.cont (dl ! n) t j)", "using j cldl n"], ["proof (prove)\nusing this:\n  discr (dl ! n)\n  j < brn (dl ! n)\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (dl ! n) t j &&&\n    proper (local.cont (dl ! n) t j) \\<and> discr (local.cont (dl ! n) t j)", "by auto"], ["proof (state)\nthis:\n  t \\<approx> eff (dl ! n) t j\n  proper (local.cont (dl ! n) t j) \\<and> discr (local.cont (dl ! n) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n i.\n       \\<lbrakk>n \\<in> theFTOne dl cl; i < brn (dl ! n);\n        jj = brnL dl n + i\\<rbrakk>\n       \\<Longrightarrow> t \\<approx> eff (ParT dl) t jj \\<and>\n                         (ParT cl, local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<approx> eff (ParT dl) t jj\n 2. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"t \\<approx> eff (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<approx> eff (dl ! n) t j", "using eff n indis_trans"], ["proof (prove)\nusing this:\n  t \\<approx> eff (dl ! n) t j\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  \\<lbrakk>?s \\<approx> ?s'; ?s' \\<approx> ?s''\\<rbrakk>\n  \\<Longrightarrow> ?s \\<approx> ?s''\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  t \\<approx> eff (dl ! n) t j\n\ngoal (2 subgoals):\n 1. t \\<approx> eff (ParT dl) t jj\n 2. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "thus ?eff"], ["proof (prove)\nusing this:\n  t \\<approx> eff (dl ! n) t j\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj", "using j n cldl"], ["proof (prove)\nusing this:\n  t \\<approx> eff (dl ! n) t j\n  j < brn (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj", "unfolding jj"], ["proof (prove)\nusing this:\n  t \\<approx> eff (dl ! n) t j\n  j < brn (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t (brnL dl n + j)", "by simp"], ["proof (state)\nthis:\n  t \\<approx> eff (ParT dl) t jj\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"cl!n \\<approx>s dl!n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "using cldl n"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "by auto"], ["proof (state)\nthis:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "moreover"], ["proof (state)\nthis:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"dl!n \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dl ! n \\<approx>s local.cont (dl ! n) t j", "using discr cont cldl n"], ["proof (prove)\nusing this:\n  discr (dl ! n)\n  proper (local.cont (dl ! n) t j) \\<and> discr (local.cont (dl ! n) t j)\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n\ngoal (1 subgoal):\n 1. dl ! n \\<approx>s local.cont (dl ! n) t j", "by auto"], ["proof (state)\nthis:\n  dl ! n \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "ultimately"], ["proof (chain)\npicking this:\n  cl ! n \\<approx>s dl ! n\n  dl ! n \\<approx>s local.cont (dl ! n) t j", "have \"cl!n \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n  dl ! n \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s local.cont (dl ! n) t j", "using Sbis_trans"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n  dl ! n \\<approx>s local.cont (dl ! n) t j\n  \\<lbrakk>?c \\<approx>s ?d; ?d \\<approx>s ?e\\<rbrakk>\n  \\<Longrightarrow> ?c \\<approx>s ?e\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s local.cont (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  cl ! n \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "thus ?cont"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "using j n cldl"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s local.cont (dl ! n) t j\n  j < brn (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "unfolding jj thetaZOParT_def"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s local.cont (dl ! n) t j\n  j < brn (dl ! n)\n  n < length cl\n  n < length dl\n  n \\<in> theFTOne dl cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (ParT cl, local.cont (ParT dl) t (brnL dl n + j))\n    \\<in> {(ParT cl, ParT dl) |cl dl.\n           properL cl \\<and> properL dl \\<and> SbisL cl dl}", "by simp"], ["proof (state)\nthis:\n  (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<approx> eff (ParT dl) t jj \\<and>\n  (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<approx> eff (ParT dl) t jj \\<and>\n  (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cont_eff_ParT_UNlift01:\nassumes l: \"length cl = length dl\"\nand cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\"\nand II: \"II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\"\nand ii: \"ii \\<in> II\" and jj: \"jj \\<in> UNlift01 cl dl P F II\"\nand P: \"\\<And> n. n < length cl \\<Longrightarrow> part {..< brn (cl!n)} (P n) \\<and> {} \\<notin> P n\"\nand FP: \"\\<And> n. n < length dl \\<Longrightarrow> part {..< brn (dl!n)} (F n ` (P n))\"\nand eff_cont:\n\"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n  eff (cl!n) s i \\<approx>\n  eff (dl!n) t j \\<and>\n  cont (cl!n) s i \\<approx>s\n  cont (dl!n) t j\"\nand st: \"s \\<approx> t\"\nshows\n\"eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n (cont (ParT cl) s ii, cont (ParT dl) t jj) \\<in> thetaZOParT\"\n(is \"?eff \\<and> ?cont\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?p = \"%n. 1 / ?N\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?q = \"%n. 1 / (length dl)\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st l"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have pq: \"\\<And> n. n < ?N \\<Longrightarrow> ?p n = ?q n\" and sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "using assms l"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  ii \\<in> II\n  jj \\<in> UNlift01 cl dl P F II\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n  \\<lbrakk>?n5 < length cl; ?I5 \\<in> P ?n5; ?i5 \\<in> ?I5;\n   ?j5 \\<in> F ?n5 ?I5\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n5) s ?i5 \\<approx>\n                    eff (dl ! ?n5) t ?j5 \\<and>\n                    local.cont (cl ! ?n5) s ?i5 \\<approx>s\n                    local.cont (dl ! ?n5) t ?j5\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        n < length cl \\<Longrightarrow>\n        1 / real (length cl) = 1 / real (length dl)) &&&\n    (\\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t)", "by auto"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow>\n  1 / real (length cl) = 1 / real (length dl)\n  ?n9 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have II: \"II \\<in> UNpart1 cl dl P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II \\<in> UNpart1 cl dl P", "using II l P UNpart1_UNpart01"], ["proof (prove)\nusing this:\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  length cl = length dl\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  \\<lbrakk>length ?cl = length ?dl;\n   \\<And>n.\n      n < length ?cl \\<Longrightarrow>\n      part {..<brn (?cl ! n)} (?P n) \\<and> {} \\<notin> ?P n\\<rbrakk>\n  \\<Longrightarrow> UNpart1 ?cl ?dl ?P =\n                    UNpart01 ?cl ?dl ?P - {BrnFT ?cl ?dl}\n\ngoal (1 subgoal):\n 1. II \\<in> UNpart1 cl dl P", "by blast"], ["proof (state)\nthis:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "thus ?thesis"], ["proof (prove)\nusing this:\n  II \\<in> UNpart1 cl dl P\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof(cases rule: UNpart1_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "case (Local n I)"], ["proof (state)\nthis:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "hence n: \"n < ?N\" \"n < length dl\" \"n \\<in> theNFTBoth cl dl\"\n    \"\\<not> finished (cl!n)\"  \"\\<not> finished (dl!n)\"\n    and I: \"I \\<in> P n\" and II: \"II = shift cl n I\""], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. ((n < length cl &&& n < length dl) &&&\n     n \\<in> theNFTBoth cl dl &&&\n     \\<not> finished (cl ! n) &&& \\<not> finished (dl ! n)) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "using l"], ["proof (prove)\nusing this:\n  n \\<in> theNFTBoth cl dl\n  I \\<in> P n\n  II = local.shift cl n I\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. ((n < length cl &&& n < length dl) &&&\n     n \\<in> theNFTBoth cl dl &&&\n     \\<not> finished (cl ! n) &&& \\<not> finished (dl ! n)) &&&\n    I \\<in> P n &&& II = local.shift cl n I", "by auto"], ["proof (state)\nthis:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "from ii II"], ["proof (chain)\npicking this:\n  ii \\<in> II\n  II = local.shift cl n I", "obtain i where i: \"i \\<in> I\" and ii: \"ii = brnL cl n + i\""], ["proof (prove)\nusing this:\n  ii \\<in> II\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i \\<in> I; ii = brnL cl n + i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding shift_def"], ["proof (prove)\nusing this:\n  ii \\<in> II\n  II = (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i \\<in> I; ii = brnL cl n + i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i \\<in> I\n  ii = brnL cl n + i\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "have \"i < brn (cl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "using i I n P"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "unfolding part_def"], ["proof (prove)\nusing this:\n  i \\<in> I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  ?n5 < length cl \\<Longrightarrow>\n  (\\<Union> (P ?n5) = {..<brn (cl ! ?n5)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> P ?n5 \\<and>\n       J2 \\<in> P ?n5 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  {} \\<notin> P ?n5\n\ngoal (1 subgoal):\n 1. i < brn (cl ! n)", "by blast"], ["proof (state)\nthis:\n  i < brn (cl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "note i = this i"], ["proof (state)\nthis:\n  i < brn (cl ! n)\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "have jj: \"jj \\<in> shift dl n (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "using jj P n I l"], ["proof (prove)\nusing this:\n  jj \\<in> UNlift01 cl dl P F II\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "unfolding II"], ["proof (prove)\nusing this:\n  jj \\<in> UNlift01 cl dl P F (local.shift cl n I)\n  ?n5 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n5)} (P ?n5) \\<and> {} \\<notin> P ?n5\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. jj \\<in> local.shift dl n (F n I)", "by simp"], ["proof (state)\nthis:\n  jj \\<in> local.shift dl n (F n I)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "from jj II"], ["proof (chain)\npicking this:\n  jj \\<in> local.shift dl n (F n I)\n  II = local.shift cl n I", "obtain j where j: \"j \\<in> F n I\" and jj: \"jj = brnL dl n + j\""], ["proof (prove)\nusing this:\n  jj \\<in> local.shift dl n (F n I)\n  II = local.shift cl n I\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> F n I; jj = brnL dl n + j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding shift_def"], ["proof (prove)\nusing this:\n  jj \\<in> (+) (brnL dl n) ` F n I\n  II = (+) (brnL cl n) ` I\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> F n I; jj = brnL dl n + j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  j \\<in> F n I\n  jj = brnL dl n + j\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "have \"j < brn (dl!n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "using j I n FP"], ["proof (prove)\nusing this:\n  j \\<in> F n I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  ?n5 < length dl \\<Longrightarrow> part {..<brn (dl ! ?n5)} (F ?n5 ` P ?n5)\n\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "unfolding part_def"], ["proof (prove)\nusing this:\n  j \\<in> F n I\n  I \\<in> P n\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  ?n5 < length dl \\<Longrightarrow>\n  \\<Union> (F ?n5 ` P ?n5) = {..<brn (dl ! ?n5)} \\<and>\n  (\\<forall>J1 J2.\n      J1 \\<in> F ?n5 ` P ?n5 \\<and>\n      J2 \\<in> F ?n5 ` P ?n5 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n      J1 \\<inter> J2 = {})\n\ngoal (1 subgoal):\n 1. j < brn (dl ! n)", "by blast"], ["proof (state)\nthis:\n  j < brn (dl ! n)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "note j = this j"], ["proof (state)\nthis:\n  j < brn (dl ! n)\n  j \\<in> F n I\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n \\<in> theNFTBoth cl dl; I \\<in> P n;\n        II = local.shift cl n I\\<rbrakk>\n       \\<Longrightarrow> eff (ParT cl) s ii \\<approx>\n                         eff (ParT dl) t jj \\<and>\n                         (local.cont (ParT cl) s ii,\n                          local.cont (ParT dl) t jj)\n                         \\<in> thetaZOParT", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj\n 2. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"eff (cl!n) (?ss n) i \\<approx> eff (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eff (cl ! n) s i \\<approx> eff (dl ! n) t j", "using n I i j eff_cont"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  \\<lbrakk>?n5 < length cl; ?I5 \\<in> P ?n5; ?i5 \\<in> ?I5;\n   ?j5 \\<in> F ?n5 ?I5\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n5) s ?i5 \\<approx>\n                    eff (dl ! ?n5) t ?j5 \\<and>\n                    local.cont (cl ! ?n5) s ?i5 \\<approx>s\n                    local.cont (dl ! ?n5) t ?j5\n\ngoal (1 subgoal):\n 1. eff (cl ! n) s i \\<approx> eff (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (2 subgoals):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj\n 2. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "thus ?eff"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj", "unfolding ii jj"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s (brnL cl n + i) \\<approx>\n    eff (ParT dl) t (brnL dl n + j)", "using st cldl n i j"], ["proof (prove)\nusing this:\n  eff (cl ! n) s i \\<approx> eff (dl ! n) t j\n  s \\<approx> t\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s (brnL cl n + i) \\<approx>\n    eff (ParT dl) t (brnL dl n + j)", "by simp"], ["proof (state)\nthis:\n  eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have 1: \"cont (cl!n) (?ss n) i \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "using n I i j eff_cont"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  I \\<in> P n\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  \\<lbrakk>?n5 < length cl; ?I5 \\<in> P ?n5; ?i5 \\<in> ?I5;\n   ?j5 \\<in> F ?n5 ?I5\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n5) s ?i5 \\<approx>\n                    eff (dl ! ?n5) t ?j5 \\<and>\n                    local.cont (cl ! ?n5) s ?i5 \\<approx>s\n                    local.cont (dl ! ?n5) t ?j5\n\ngoal (1 subgoal):\n 1. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "by blast"], ["proof (state)\nthis:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"(cont (ParT cl) s ii, cont (ParT dl) t jj) =\n            (ParT (cl[n := cont (cl ! n) (?ss n) i]),\n              ParT (dl[n := cont (dl ! n) (?tt n) j]))\"\n      (is \"?A = ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) =\n    (ParT (cl[n := local.cont (cl ! n) s i]),\n     ParT (dl[n := local.cont (dl ! n) t j]))", "unfolding ii jj"], ["proof (prove)\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s (brnL cl n + i),\n     local.cont (ParT dl) t (brnL dl n + j)) =\n    (ParT (cl[n := local.cont (cl ! n) s i]),\n     ParT (dl[n := local.cont (dl ! n) t j]))", "using n i j cldl"], ["proof (prove)\nusing this:\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  i < brn (cl ! n)\n  i \\<in> I\n  j < brn (dl ! n)\n  j \\<in> F n I\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s (brnL cl n + i),\n     local.cont (ParT dl) t (brnL dl n + j)) =\n    (ParT (cl[n := local.cont (cl ! n) s i]),\n     ParT (dl[n := local.cont (dl ! n) t j]))", "by simp"], ["proof (state)\nthis:\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) =\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "moreover"], ["proof (state)\nthis:\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) =\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "have \"?B \\<in> thetaZOParT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (ParT (cl[n := local.cont (cl ! n) s i]),\n     ParT (dl[n := local.cont (dl ! n) t j]))\n    \\<in> thetaZOParT", "unfolding thetaZOParT_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (ParT (cl[n := local.cont (cl ! n) s i]),\n     ParT (dl[n := local.cont (dl ! n) t j]))\n    \\<in> {(ParT cl, ParT dl) |cl dl.\n           properL cl \\<and> properL dl \\<and> SbisL cl dl}", "apply (simp, safe)"], ["proof (prove)\ngoal (3 subgoals):\n 1. properL (cl[n := local.cont (cl ! n) s i])\n 2. properL (dl[n := local.cont (dl ! n) t j])\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply(intro properL_update)"], ["proof (prove)\ngoal (4 subgoals):\n 1. properL cl\n 2. proper (local.cont (cl ! n) s i)\n 3. properL (dl[n := local.cont (dl ! n) t j])\n 4. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (4 subgoals):\n 1. properL cl\n 2. proper (local.cont (cl ! n) s i)\n 3. properL (dl[n := local.cont (dl ! n) t j])\n 4. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply force"], ["proof (prove)\ngoal (3 subgoals):\n 1. proper (local.cont (cl ! n) s i)\n 2. properL (dl[n := local.cont (dl ! n) t j])\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply(rule proper_cont)"], ["proof (prove)\ngoal (4 subgoals):\n 1. proper (cl ! n)\n 2. i < brn (cl ! n)\n 3. properL (dl[n := local.cont (dl ! n) t j])\n 4. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "using cldl i n"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  i < brn (cl ! n)\n  i \\<in> I\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n\ngoal (4 subgoals):\n 1. proper (cl ! n)\n 2. i < brn (cl ! n)\n 3. properL (dl[n := local.cont (dl ! n) t j])\n 4. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply (force,force)"], ["proof (prove)\ngoal (2 subgoals):\n 1. properL (dl[n := local.cont (dl ! n) t j])\n 2. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply(intro properL_update)"], ["proof (prove)\ngoal (3 subgoals):\n 1. properL dl\n 2. proper (local.cont (dl ! n) t j)\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (3 subgoals):\n 1. properL dl\n 2. proper (local.cont (dl ! n) t j)\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply force"], ["proof (prove)\ngoal (2 subgoals):\n 1. proper (local.cont (dl ! n) t j)\n 2. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply(rule proper_cont)"], ["proof (prove)\ngoal (3 subgoals):\n 1. proper (dl ! n)\n 2. j < brn (dl ! n)\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "using cldl j n"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  j < brn (dl ! n)\n  j \\<in> F n I\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n\ngoal (3 subgoals):\n 1. proper (dl ! n)\n 2. j < brn (dl ! n)\n 3. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply (force,force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. SbisL (cl[n := local.cont (cl ! n) s i])\n     (dl[n := local.cont (dl ! n) t j])", "apply(intro SbisL_update)"], ["proof (prove)\ngoal (2 subgoals):\n 1. SbisL cl dl\n 2. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "using 1 cldl n i"], ["proof (prove)\nusing this:\n  local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j\n  properL cl\n  properL dl\n  SbisL cl dl\n  n < length cl\n  n < length dl\n  n \\<in> theNFTBoth cl dl\n  \\<not> finished (cl ! n)\n  \\<not> finished (dl ! n)\n  i < brn (cl ! n)\n  i \\<in> I\n\ngoal (2 subgoals):\n 1. SbisL cl dl\n 2. local.cont (cl ! n) s i \\<approx>s local.cont (dl ! n) t j", "apply (force,force)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n  \\<in> thetaZOParT\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "ultimately"], ["proof (chain)\npicking this:\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) =\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n  \\<in> thetaZOParT", "show ?cont"], ["proof (prove)\nusing this:\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) =\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n  (ParT (cl[n := local.cont (cl ! n) s i]),\n   ParT (dl[n := local.cont (dl ! n) t j]))\n  \\<in> thetaZOParT\n\ngoal (1 subgoal):\n 1. (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "by auto"], ["proof (state)\nthis:\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n  (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaZOParT_ZOretr: \"thetaZOParT \\<subseteq> ZOretr (thetaZOParT)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOParT \\<subseteq> ZOretr thetaZOParT", "unfolding ZOretr_def matchC_LC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOParT\n    \\<subseteq> {(c, d).\n                 \\<forall>s t.\n                    s \\<approx> t \\<longrightarrow>\n                    (\\<exists>I0 P F. mC_ZOC thetaZOParT c d s t I0 P F)}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "fix c d s t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "assume c_d: \"(c, d) \\<in> thetaZOParT\" and st: \"s \\<approx> t\""], ["proof (state)\nthis:\n  (c, d) \\<in> thetaZOParT\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "then"], ["proof (chain)\npicking this:\n  (c, d) \\<in> thetaZOParT\n  s \\<approx> t", "obtain cl dl where\n  c: \"c = ParT cl\" and d: \"d = ParT dl\" and\n  cldl: \"properL cl\" \"properL dl\" \"SbisL cl dl\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> thetaZOParT\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl dl.\n        \\<lbrakk>c = ParT cl; d = ParT dl; properL cl; properL dl;\n         SbisL cl dl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding thetaZOParT_def"], ["proof (prove)\nusing this:\n  (c, d)\n  \\<in> {(ParT cl, ParT dl) |cl dl.\n         properL cl \\<and> properL dl \\<and> SbisL cl dl}\n  s \\<approx> t\n\ngoal (1 subgoal):\n 1. (\\<And>cl dl.\n        \\<lbrakk>c = ParT cl; d = ParT dl; properL cl; properL dl;\n         SbisL cl dl\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  c = ParT cl\n  d = ParT dl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "let ?N = \"length cl\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "let ?ss = \"%n. s\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "let ?tt = \"%n. t\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have N: \"?N = length dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length cl = length dl", "using cldl"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. length cl = length dl", "by simp"], ["proof (state)\nthis:\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have sstt: \"\\<And> n. n < ?N \\<Longrightarrow> ?ss n \\<approx> ?tt n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "using st N"], ["proof (prove)\nusing this:\n  s \\<approx> t\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> s \\<approx> t", "by auto"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "let ?phi = \"%n PFn. mC_C Sbis (cl ! n) (dl ! n) (?ss n) (?tt n) (fst PFn) (snd PFn)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "assume n: \"n < ?N\""], ["proof (state)\nthis:\n  n < length cl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "hence \"cl ! n \\<approx>s dl ! n\""], ["proof (prove)\nusing this:\n  n < length cl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "using cldl"], ["proof (prove)\nusing this:\n  n < length cl\n  properL cl\n  properL dl\n  SbisL cl dl\n\ngoal (1 subgoal):\n 1. cl ! n \\<approx>s dl ! n", "by auto"], ["proof (state)\nthis:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "hence \"\\<exists> PFn. ?phi n PFn\""], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n\ngoal (1 subgoal):\n 1. \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)", "using n Sbis_mC_C sstt"], ["proof (prove)\nusing this:\n  cl ! n \\<approx>s dl ! n\n  n < length cl\n  \\<lbrakk>?c \\<approx>s ?d; ?s \\<approx> ?t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P F. mC_C Sbis ?c ?d ?s ?t P F\n  ?n7 < length cl \\<Longrightarrow> s \\<approx> t\n\ngoal (1 subgoal):\n 1. \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>PFn. mC_C Sbis (cl ! n) (dl ! n) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "}"], ["proof (state)\nthis:\n  ?n9 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n9) (dl ! ?n9) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "then"], ["proof (chain)\npicking this:\n  ?n9 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n9) (dl ! ?n9) s t (fst PFn) (snd PFn)", "obtain PF where phi: \"\\<And>n. n < ?N \\<Longrightarrow> ?phi n (PF n)\""], ["proof (prove)\nusing this:\n  ?n9 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n9) (dl ! ?n9) s t (fst PFn) (snd PFn)\n\ngoal (1 subgoal):\n 1. (\\<And>PF.\n        (\\<And>n.\n            n < length cl \\<Longrightarrow>\n            mC_C Sbis (cl ! n) (dl ! n) s t (fst (PF n))\n             (snd (PF n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using bchoice[of \"{..< ?N}\" ?phi]"], ["proof (prove)\nusing this:\n  ?n9 < length cl \\<Longrightarrow>\n  \\<exists>PFn. mC_C Sbis (cl ! ?n9) (dl ! ?n9) s t (fst PFn) (snd PFn)\n  \\<forall>x\\<in>{..<length cl}.\n     \\<exists>y.\n        mC_C Sbis (cl ! x) (dl ! x) s t (fst y) (snd y) \\<Longrightarrow>\n  \\<exists>f.\n     \\<forall>x\\<in>{..<length cl}.\n        mC_C Sbis (cl ! x) (dl ! x) s t (fst (f x)) (snd (f x))\n\ngoal (1 subgoal):\n 1. (\\<And>PF.\n        (\\<And>n.\n            n < length cl \\<Longrightarrow>\n            mC_C Sbis (cl ! n) (dl ! n) s t (fst (PF n))\n             (snd (PF n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (fst (PF ?n7)) (snd (PF ?n7))\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "define P F where \"P = fst o PF\" and \"F = snd o PF\""], ["proof (state)\nthis:\n  P = fst \\<circ> PF\n  F = snd \\<circ> PF\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have m: \"\\<And>n. n < ?N \\<Longrightarrow> mC_C Sbis (cl ! n) (dl ! n) (?ss n) (?tt n) (P n) (F n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t (P n) (F n)", "using phi"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (fst (PF ?n7)) (snd (PF ?n7))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t (P n) (F n)", "unfolding P_def F_def"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (fst (PF ?n7)) (snd (PF ?n7))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       mC_C Sbis (cl ! n) (dl ! n) s t ((fst \\<circ> PF) n)\n        ((snd \\<circ> PF) n)", "by auto"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "(*  *)"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have brn_c: \"brn c = brnL cl ?N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brn c = brnL cl (length cl)", "unfolding c"], ["proof (prove)\ngoal (1 subgoal):\n 1. brn (ParT cl) = brnL cl (length cl)", "by simp"], ["proof (state)\nthis:\n  brn c = brnL cl (length cl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have brn_d: \"brn d = brnL dl (length dl)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. brn d = brnL dl (length dl)", "unfolding d"], ["proof (prove)\ngoal (1 subgoal):\n 1. brn (ParT dl) = brnL dl (length dl)", "by simp"], ["proof (state)\nthis:\n  brn d = brnL dl (length dl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have P: \"\\<And>n. n < ?N \\<Longrightarrow> part {..< brn (cl ! n)} (P n) \\<and> {} \\<notin> (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using m"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "unfolding m_defsAll part_def"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n7 \\<and>\n   {} \\<notin> F ?n7 ` P ?n7 \\<and>\n   (\\<Union> (P ?n7) = {..<brn (cl ! ?n7)} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P ?n7 \\<and>\n        J2 \\<in> P ?n7 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ?n7 ` P ?n7) = {..<brn (dl ! ?n7)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ?n7 ` P ?n7 \\<and>\n       J2 \\<in> F ?n7 ` P ?n7 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on (F ?n7) (P ?n7) \\<and>\n  (\\<forall>I\\<in>P ?n7.\n      sum (wt (cl ! ?n7) s) I = sum (wt (dl ! ?n7) t) (F ?n7 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n7 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n7 I \\<longrightarrow>\n      eff (cl ! ?n7) s i \\<approx> eff (dl ! ?n7) t j \\<and>\n      local.cont (cl ! ?n7) s i \\<approx>s local.cont (dl ! ?n7) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       (\\<Union> (P n) = {..<brn (cl ! n)} \\<and>\n        (\\<forall>J1 J2.\n            J1 \\<in> P n \\<and>\n            J2 \\<in> P n \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n            J1 \\<inter> J2 = {})) \\<and>\n       {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have FP: \"\\<And>n. n < length dl \\<Longrightarrow> part {..< brn (dl ! n)} (F n ` (P n)) \\<and> {} \\<notin> F n ` (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "using m N"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "unfolding m_defsAll part_def"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n7 \\<and>\n   {} \\<notin> F ?n7 ` P ?n7 \\<and>\n   (\\<Union> (P ?n7) = {..<brn (cl ! ?n7)} \\<and>\n    (\\<forall>J1 J2.\n        J1 \\<in> P ?n7 \\<and>\n        J2 \\<in> P ?n7 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n        J1 \\<inter> J2 = {})) \\<and>\n   \\<Union> (F ?n7 ` P ?n7) = {..<brn (dl ! ?n7)} \\<and>\n   (\\<forall>J1 J2.\n       J1 \\<in> F ?n7 ` P ?n7 \\<and>\n       J2 \\<in> F ?n7 ` P ?n7 \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n       J1 \\<inter> J2 = {})) \\<and>\n  inj_on (F ?n7) (P ?n7) \\<and>\n  (\\<forall>I\\<in>P ?n7.\n      sum (wt (cl ! ?n7) s) I = sum (wt (dl ! ?n7) t) (F ?n7 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n7 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n7 I \\<longrightarrow>\n      eff (cl ! ?n7) s i \\<approx> eff (dl ! ?n7) t j \\<and>\n      local.cont (cl ! ?n7) s i \\<approx>s local.cont (dl ! ?n7) t j)\n  length cl = length dl\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       (\\<Union> (F n ` P n) = {..<brn (dl ! n)} \\<and>\n        (\\<forall>J1 J2.\n            J1 \\<in> F n ` P n \\<and>\n            J2 \\<in> F n ` P n \\<and> J1 \\<noteq> J2 \\<longrightarrow>\n            J1 \\<inter> J2 = {})) \\<and>\n       {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have F: \"\\<And>n. n < ?N \\<Longrightarrow> inj_on (F n) (P n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "using m"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "unfolding m_defsAll"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  ({} \\<notin> P ?n7 \\<and>\n   {} \\<notin> F ?n7 ` P ?n7 \\<and>\n   part {..<brn (cl ! ?n7)} (P ?n7) \\<and>\n   part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7)) \\<and>\n  inj_on (F ?n7) (P ?n7) \\<and>\n  (\\<forall>I\\<in>P ?n7.\n      sum (wt (cl ! ?n7) s) I = sum (wt (dl ! ?n7) t) (F ?n7 I)) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n7 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n7 I \\<longrightarrow>\n      eff (cl ! ?n7) s i \\<approx> eff (dl ! ?n7) t j \\<and>\n      local.cont (cl ! ?n7) s i \\<approx>s local.cont (dl ! ?n7) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "by auto"], ["proof (state)\nthis:\n  ?n7 < length cl \\<Longrightarrow> inj_on (F ?n7) (P ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have sw: \"\\<And>n I. \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk> \\<Longrightarrow>\n     sum (wt (cl ! n) (?ss n)) I = sum (wt (dl ! n) (?tt n)) (F n I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "using m"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "unfolding mC_C_def mC_C_wt_def"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C_part (cl ! ?n7) (dl ! ?n7) (P ?n7) (F ?n7) \\<and>\n  inj_on (F ?n7) (P ?n7) \\<and>\n  (\\<forall>I\\<in>P ?n7.\n      sum (wt (cl ! ?n7) s) I = sum (wt (dl ! ?n7) t) (F ?n7 I)) \\<and>\n  mC_C_eff_cont Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>n I.\n       \\<lbrakk>n < length cl; I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n7) s) ?I7 =\n                    sum (wt (dl ! ?n7) t) (F ?n7 ?I7)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "have eff_cont: \"\\<And>n I i j. \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I; j \\<in> F n I\\<rbrakk> \\<Longrightarrow>\n     eff (cl!n) (?ss n) i \\<approx> eff (dl!n) (?tt n) j \\<and> cont (cl!n) (?ss n) i \\<approx>s cont (dl!n) (?tt n) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "using m"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C Sbis (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7)\n\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "unfolding mC_C_def mC_C_eff_cont_def"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  mC_C_part (cl ! ?n7) (dl ! ?n7) (P ?n7) (F ?n7) \\<and>\n  inj_on (F ?n7) (P ?n7) \\<and>\n  mC_C_wt (cl ! ?n7) (dl ! ?n7) s t (P ?n7) (F ?n7) \\<and>\n  (\\<forall>I i j.\n      I \\<in> P ?n7 \\<and>\n      i \\<in> I \\<and> j \\<in> F ?n7 I \\<longrightarrow>\n      eff (cl ! ?n7) s i \\<approx> eff (dl ! ?n7) t j \\<and>\n      local.cont (cl ! ?n7) s i \\<approx>s local.cont (dl ! ?n7) t j)\n\ngoal (1 subgoal):\n 1. \\<And>n I i j.\n       \\<lbrakk>n < length cl; I \\<in> P n; i \\<in> I;\n        j \\<in> F n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) t j", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7; ?i7 \\<in> ?I7;\n   ?j7 \\<in> F ?n7 ?I7\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n7) s ?i7 \\<approx>\n                    eff (dl ! ?n7) t ?j7 \\<and>\n                    local.cont (cl ! ?n7) s ?i7 \\<approx>s\n                    local.cont (dl ! ?n7) t ?j7\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "(*  *)"], ["proof (state)\nthis:\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7; ?i7 \\<in> ?I7;\n   ?j7 \\<in> F ?n7 ?I7\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n7) s ?i7 \\<approx>\n                    eff (dl ! ?n7) t ?j7 \\<and>\n                    local.cont (cl ! ?n7) s ?i7 \\<approx>s\n                    local.cont (dl ! ?n7) t ?j7\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "define II0 where \"II0 = BrnFT cl dl\""], ["proof (state)\nthis:\n  II0 = BrnFT cl dl\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "define Q G where \"Q = UNpart01 cl dl P\" and \"G = UNlift01 cl dl P F\""], ["proof (state)\nthis:\n  Q = UNpart01 cl dl P\n  G = UNlift01 cl dl P F\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "note defi = II0_def Q_def G_def brn_c brn_d"], ["proof (state)\nthis:\n  II0 = BrnFT cl dl\n  Q = UNpart01 cl dl P\n  G = UNlift01 cl dl P F\n  brn c = brnL cl (length cl)\n  brn d = brnL dl (length dl)\n\ngoal (1 subgoal):\n 1. \\<And>a b s t.\n       \\<lbrakk>(a, b) \\<in> thetaZOParT; s \\<approx> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>I0 P. Ex (mC_ZOC thetaZOParT a b s t I0 P)", "show \"\\<exists>II0 Q G. mC_ZOC (thetaZOParT) c d s t II0 Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>II0 Q G. mC_ZOC thetaZOParT c d s t II0 Q G", "apply(rule exI[of _ II0])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Q G. mC_ZOC thetaZOParT c d s t II0 Q G", "apply(rule exI[of _ Q])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>G. mC_ZOC thetaZOParT c d s t II0 Q G", "apply(rule exI[of _ G])"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC thetaZOParT c d s t II0 Q G", "unfolding mC_ZOC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_part c d s t II0 Q G \\<and>\n    inj_on G Q \\<and>\n    mC_ZOC_wt c d s t II0 Q G \\<and>\n    mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G \\<and>\n    mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "proof (intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. mC_ZOC_part c d s t II0 Q G\n 2. inj_on G Q\n 3. mC_ZOC_wt c d s t II0 Q G\n 4. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 5. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "show \"mC_ZOC_part c d s t II0 Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_part c d s t II0 Q G", "unfolding mC_ZOC_part_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> Q - {II0} \\<and>\n    {} \\<notin> G ` (Q - {II0}) \\<and>\n    II0 \\<in> Q \\<and> part {..<brn c} Q \\<and> part {..<brn d} (G ` Q)", "proof(intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. {} \\<notin> Q - {II0}\n 2. {} \\<notin> G ` (Q - {II0})\n 3. II0 \\<in> Q\n 4. part {..<brn c} Q\n 5. part {..<brn d} (G ` Q)", "show \"{} \\<notin> Q - {II0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> Q - {II0}", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNpart01 cl dl P - {BrnFT cl dl}", "apply(rule emp_UNpart01)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> {} \\<notin> P n", "using P"], ["proof (prove)\nusing this:\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n\ngoal (1 subgoal):\n 1. \\<And>n. n < length cl \\<Longrightarrow> {} \\<notin> P n", "by simp"], ["proof (state)\nthis:\n  {} \\<notin> Q - {II0}\n\ngoal (4 subgoals):\n 1. {} \\<notin> G ` (Q - {II0})\n 2. II0 \\<in> Q\n 3. part {..<brn c} Q\n 4. part {..<brn d} (G ` Q)", "show \"{} \\<notin> G ` (Q - {II0})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> G ` (Q - {II0})", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<notin> UNlift01 cl dl P F ` (UNpart01 cl dl P - {BrnFT cl dl})", "apply(rule emp_UNlift01_UNpart01)"], ["proof (prove)\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "using N P FP"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n\ngoal (3 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n. n < length dl \\<Longrightarrow> {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  {} \\<notin> G ` (Q - {II0})\n\ngoal (3 subgoals):\n 1. II0 \\<in> Q\n 2. part {..<brn c} Q\n 3. part {..<brn d} (G ` Q)", "show \"II0 \\<in> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. II0 \\<in> Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. BrnFT cl dl \\<in> UNpart01 cl dl P", "by simp"], ["proof (state)\nthis:\n  II0 \\<in> Q\n\ngoal (2 subgoals):\n 1. part {..<brn c} Q\n 2. part {..<brn d} (G ` Q)", "show \"part {..<brn c} Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn c} Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL cl (length cl)} (UNpart01 cl dl P)", "apply(rule part_UNpart01)"], ["proof (prove)\ngoal (3 subgoals):\n 1. properL cl\n 2. length cl = length dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "using cldl P"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n\ngoal (3 subgoals):\n 1. properL cl\n 2. length cl = length dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n", "by auto"], ["proof (state)\nthis:\n  part {..<brn c} Q\n\ngoal (1 subgoal):\n 1. part {..<brn d} (G ` Q)", "show \"part {..<brn d} (G ` Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brn d} (G ` Q)", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. part {..<brnL dl (length dl)} (UNlift01 cl dl P F ` UNpart01 cl dl P)", "apply(rule part_UNlift01_UNpart01)"], ["proof (prove)\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. properL dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 4. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "using N cldl P FP"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. properL dl\n 3. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 4. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n", "by auto"], ["proof (state)\nthis:\n  part {..<brn d} (G ` Q)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_part c d s t II0 Q G\n\ngoal (4 subgoals):\n 1. inj_on G Q\n 2. mC_ZOC_wt c d s t II0 Q G\n 3. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 4. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. inj_on G Q\n 2. mC_ZOC_wt c d s t II0 Q G\n 3. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 4. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "show \"inj_on G Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on G Q", "unfolding defi"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (UNlift01 cl dl P F) (UNpart01 cl dl P)", "apply(rule UNlift01_inj_on)"], ["proof (prove)\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "using N P FP F"], ["proof (prove)\nusing this:\n  length cl = length dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n  ?n7 < length cl \\<Longrightarrow> inj_on (F ?n7) (P ?n7)\n\ngoal (4 subgoals):\n 1. length cl = length dl\n 2. \\<And>n.\n       n < length cl \\<Longrightarrow>\n       part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 3. \\<And>n.\n       n < length dl \\<Longrightarrow>\n       part {..<brn (dl ! n)} (F n ` P n) \\<and> {} \\<notin> F n ` P n\n 4. \\<And>n. n < length cl \\<Longrightarrow> inj_on (F n) (P n)", "by auto"], ["proof (state)\nthis:\n  inj_on G Q\n\ngoal (3 subgoals):\n 1. mC_ZOC_wt c d s t II0 Q G\n 2. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 3. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. mC_ZOC_wt c d s t II0 Q G\n 2. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 3. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "show \"mC_ZOC_wt c d s t II0 Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_wt c d s t II0 Q G", "unfolding mC_ZOC_wt_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (wt c s) II0 < 1 \\<and> sum (wt d t) (G II0) < 1 \\<longrightarrow>\n    (\\<forall>I\\<in>Q - {II0}.\n        sum (wt c s) I / (1 - sum (wt c s) II0) =\n        sum (wt d t) (G I) / (1 - sum (wt d t) (G II0)))", "proof (intro impI ballI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> Q - {II0}; sum (wt c s) II0 < 1;\n        sum (wt d t) (G II0) < 1\\<rbrakk>\n       \\<Longrightarrow> sum (wt c s) I / (1 - sum (wt c s) II0) =\n                         sum (wt d t) (G I) / (1 - sum (wt d t) (G II0))", "fix II"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> Q - {II0}; sum (wt c s) II0 < 1;\n        sum (wt d t) (G II0) < 1\\<rbrakk>\n       \\<Longrightarrow> sum (wt c s) I / (1 - sum (wt c s) II0) =\n                         sum (wt d t) (G I) / (1 - sum (wt d t) (G II0))", "assume II: \"II \\<in> Q - {II0}\" and\n      le1: \"sum (wt c s) II0 < 1\" \"sum (wt d t) (G II0) < 1\""], ["proof (state)\nthis:\n  II \\<in> Q - {II0}\n  sum (wt c s) II0 < 1\n  sum (wt d t) (G II0) < 1\n\ngoal (1 subgoal):\n 1. \\<And>I.\n       \\<lbrakk>I \\<in> Q - {II0}; sum (wt c s) II0 < 1;\n        sum (wt d t) (G II0) < 1\\<rbrakk>\n       \\<Longrightarrow> sum (wt c s) I / (1 - sum (wt c s) II0) =\n                         sum (wt d t) (G I) / (1 - sum (wt d t) (G II0))", "thus\n      \"sum (wt c s) II / (1 - sum (wt c s) II0) =\n       sum (wt d t) (G II) / (1 - sum (wt d t) (G II0))\""], ["proof (prove)\nusing this:\n  II \\<in> Q - {II0}\n  sum (wt c s) II0 < 1\n  sum (wt d t) (G II0) < 1\n\ngoal (1 subgoal):\n 1. sum (wt c s) II / (1 - sum (wt c s) II0) =\n    sum (wt d t) (G II) / (1 - sum (wt d t) (G II0))", "unfolding c d defi UNlift01_BrnFT"], ["proof (prove)\nusing this:\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  sum (wt (ParT cl) s) (BrnFT cl dl) < 1\n  sum (wt (ParT dl) t) (BrnFT dl cl) < 1\n\ngoal (1 subgoal):\n 1. sum (wt (ParT cl) s) II / (1 - sum (wt (ParT cl) s) (BrnFT cl dl)) =\n    sum (wt (ParT dl) t) (UNlift01 cl dl P F II) /\n    (1 - sum (wt (ParT dl) t) (BrnFT dl cl))", "apply(intro ss_wt_ParT_UNlift01)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n 5. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 6. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)\n 7. \\<And>n I.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length cl;\n        I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n 8. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> s \\<approx> t\n 9. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> sum (wt (ParT cl) s) (BrnFT cl dl) < 1\n 10. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n      sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n      sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n     \\<Longrightarrow> sum (wt (ParT dl) t) (BrnFT dl cl) < 1", "using N cldl II P FP sw st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  II \\<in> Q - {II0}\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7\\<rbrakk>\n  \\<Longrightarrow> sum (wt (cl ! ?n7) s) ?I7 =\n                    sum (wt (dl ! ?n7) t) (F ?n7 ?I7)\n  s \\<approx> t\n\ngoal (10 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n 5. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (P n) \\<and> {} \\<notin> P n\n 6. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (F n ` P n)\n 7. \\<And>n I.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n        sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n        sum (wt (ParT dl) t) (BrnFT dl cl) < 1; n < length cl;\n        I \\<in> P n\\<rbrakk>\n       \\<Longrightarrow> sum (wt (cl ! n) s) I = sum (wt (dl ! n) t) (F n I)\n 8. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> s \\<approx> t\n 9. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n     sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n     sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n    \\<Longrightarrow> sum (wt (ParT cl) s) (BrnFT cl dl) < 1\n 10. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl};\n      sum (wt (ParT cl) s) (BrnFT cl dl) < 1;\n      sum (wt (ParT dl) t) (BrnFT dl cl) < 1\\<rbrakk>\n     \\<Longrightarrow> sum (wt (ParT dl) t) (BrnFT dl cl) < 1", "by auto"], ["proof (state)\nthis:\n  sum (wt c s) II / (1 - sum (wt c s) II0) =\n  sum (wt d t) (G II) / (1 - sum (wt d t) (G II0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_wt c d s t II0 Q G\n\ngoal (2 subgoals):\n 1. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 2. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n 2. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "show \"mC_ZOC_eff_cont0 (thetaZOParT) c d s t II0 G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G", "unfolding mC_ZOC_eff_cont0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i\\<in>II0.\n        s \\<approx> eff c s i \\<and>\n        (local.cont c s i, d) \\<in> thetaZOParT) \\<and>\n    (\\<forall>j\\<in>G II0.\n        t \\<approx> eff d t j \\<and>\n        (c, local.cont d t j) \\<in> thetaZOParT)", "proof(intro conjI[OF ballI ballI])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> II0 \\<Longrightarrow>\n       s \\<approx> eff c s i \\<and> (local.cont c s i, d) \\<in> thetaZOParT\n 2. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "fix ii"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> II0 \\<Longrightarrow>\n       s \\<approx> eff c s i \\<and> (local.cont c s i, d) \\<in> thetaZOParT\n 2. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "assume \"ii \\<in> II0\""], ["proof (state)\nthis:\n  ii \\<in> II0\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> II0 \\<Longrightarrow>\n       s \\<approx> eff c s i \\<and> (local.cont c s i, d) \\<in> thetaZOParT\n 2. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "thus \"s \\<approx> eff c s ii \\<and> (cont c s ii, d) \\<in> thetaZOParT\""], ["proof (prove)\nusing this:\n  ii \\<in> II0\n\ngoal (1 subgoal):\n 1. s \\<approx> eff c s ii \\<and> (local.cont c s ii, d) \\<in> thetaZOParT", "unfolding defi c d"], ["proof (prove)\nusing this:\n  ii \\<in> BrnFT cl dl\n\ngoal (1 subgoal):\n 1. s \\<approx> eff (ParT cl) s ii \\<and>\n    (local.cont (ParT cl) s ii, ParT dl) \\<in> thetaZOParT", "apply(intro cont_eff_ParT_BrnFT_L)"], ["proof (prove)\ngoal (6 subgoals):\n 1. ii \\<in> BrnFT cl dl \\<Longrightarrow> length cl = length dl\n 2. ii \\<in> BrnFT cl dl \\<Longrightarrow> properL cl\n 3. ii \\<in> BrnFT cl dl \\<Longrightarrow> properL dl\n 4. ii \\<in> BrnFT cl dl \\<Longrightarrow> SbisL cl dl\n 5. ii \\<in> BrnFT cl dl \\<Longrightarrow> ii \\<in> BrnFT cl dl\n 6. \\<And>n I i j.\n       \\<lbrakk>ii \\<in> BrnFT cl dl; n < length cl; I \\<in> ?P1 n;\n        i \\<in> I; j \\<in> ?F1 n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx>\n                         eff (dl ! n) ?t1 j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) ?t1 j", "using N cldl P FP eff_cont st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7; ?i7 \\<in> ?I7;\n   ?j7 \\<in> F ?n7 ?I7\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n7) s ?i7 \\<approx>\n                    eff (dl ! ?n7) t ?j7 \\<and>\n                    local.cont (cl ! ?n7) s ?i7 \\<approx>s\n                    local.cont (dl ! ?n7) t ?j7\n  s \\<approx> t\n\ngoal (6 subgoals):\n 1. ii \\<in> BrnFT cl dl \\<Longrightarrow> length cl = length dl\n 2. ii \\<in> BrnFT cl dl \\<Longrightarrow> properL cl\n 3. ii \\<in> BrnFT cl dl \\<Longrightarrow> properL dl\n 4. ii \\<in> BrnFT cl dl \\<Longrightarrow> SbisL cl dl\n 5. ii \\<in> BrnFT cl dl \\<Longrightarrow> ii \\<in> BrnFT cl dl\n 6. \\<And>n I i j.\n       \\<lbrakk>ii \\<in> BrnFT cl dl; n < length cl; I \\<in> ?P1 n;\n        i \\<in> I; j \\<in> ?F1 n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) s i \\<approx>\n                         eff (dl ! n) ?t1 j \\<and>\n                         local.cont (cl ! n) s i \\<approx>s\n                         local.cont (dl ! n) ?t1 j", "by (auto intro!: )"], ["proof (state)\nthis:\n  s \\<approx> eff c s ii \\<and> (local.cont c s ii, d) \\<in> thetaZOParT\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "fix jj"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "assume \"jj \\<in> G II0\""], ["proof (state)\nthis:\n  jj \\<in> G II0\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "hence \"jj \\<in> BrnFT dl cl\""], ["proof (prove)\nusing this:\n  jj \\<in> G II0\n\ngoal (1 subgoal):\n 1. jj \\<in> BrnFT dl cl", "unfolding defi UNlift01_BrnFT"], ["proof (prove)\nusing this:\n  jj \\<in> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. jj \\<in> BrnFT dl cl", "by simp"], ["proof (state)\nthis:\n  jj \\<in> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> G II0 \\<Longrightarrow>\n       t \\<approx> eff d t i \\<and> (c, local.cont d t i) \\<in> thetaZOParT", "thus \"t \\<approx> eff d t jj \\<and> (c, cont d t jj) \\<in> thetaZOParT\""], ["proof (prove)\nusing this:\n  jj \\<in> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff d t jj \\<and> (c, local.cont d t jj) \\<in> thetaZOParT", "unfolding defi c d"], ["proof (prove)\nusing this:\n  jj \\<in> BrnFT dl cl\n\ngoal (1 subgoal):\n 1. t \\<approx> eff (ParT dl) t jj \\<and>\n    (ParT cl, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "apply(intro cont_eff_ParT_BrnFT_R)"], ["proof (prove)\ngoal (6 subgoals):\n 1. jj \\<in> BrnFT dl cl \\<Longrightarrow> length cl = length dl\n 2. jj \\<in> BrnFT dl cl \\<Longrightarrow> properL cl\n 3. jj \\<in> BrnFT dl cl \\<Longrightarrow> properL dl\n 4. jj \\<in> BrnFT dl cl \\<Longrightarrow> SbisL cl dl\n 5. jj \\<in> BrnFT dl cl \\<Longrightarrow> jj \\<in> BrnFT dl cl\n 6. \\<And>n I i j.\n       \\<lbrakk>jj \\<in> BrnFT dl cl; n < length cl; I \\<in> ?P1 n;\n        i \\<in> I; j \\<in> ?F1 n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) ?s1 i \\<approx>\n                         eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) ?s1 i \\<approx>s\n                         local.cont (dl ! n) t j", "using N cldl P FP eff_cont st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7; ?i7 \\<in> ?I7;\n   ?j7 \\<in> F ?n7 ?I7\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n7) s ?i7 \\<approx>\n                    eff (dl ! ?n7) t ?j7 \\<and>\n                    local.cont (cl ! ?n7) s ?i7 \\<approx>s\n                    local.cont (dl ! ?n7) t ?j7\n  s \\<approx> t\n\ngoal (6 subgoals):\n 1. jj \\<in> BrnFT dl cl \\<Longrightarrow> length cl = length dl\n 2. jj \\<in> BrnFT dl cl \\<Longrightarrow> properL cl\n 3. jj \\<in> BrnFT dl cl \\<Longrightarrow> properL dl\n 4. jj \\<in> BrnFT dl cl \\<Longrightarrow> SbisL cl dl\n 5. jj \\<in> BrnFT dl cl \\<Longrightarrow> jj \\<in> BrnFT dl cl\n 6. \\<And>n I i j.\n       \\<lbrakk>jj \\<in> BrnFT dl cl; n < length cl; I \\<in> ?P1 n;\n        i \\<in> I; j \\<in> ?F1 n I\\<rbrakk>\n       \\<Longrightarrow> eff (cl ! n) ?s1 i \\<approx>\n                         eff (dl ! n) t j \\<and>\n                         local.cont (cl ! n) ?s1 i \\<approx>s\n                         local.cont (dl ! n) t j", "by auto"], ["proof (state)\nthis:\n  t \\<approx> eff d t jj \\<and> (c, local.cont d t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_eff_cont0 thetaZOParT c d s t II0 G\n\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "show \"mC_ZOC_eff_cont (thetaZOParT) c d s t II0 Q G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G", "unfolding mC_ZOC_eff_cont_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>I i j.\n       I \\<in> Q - {II0} \\<and>\n       i \\<in> I \\<and> j \\<in> G I \\<longrightarrow>\n       eff c s i \\<approx> eff d t j \\<and>\n       (local.cont c s i, local.cont d t j) \\<in> thetaZOParT", "proof (intro allI impI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q - {II0}; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOParT", "fix II ii jj"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q - {II0}; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOParT", "assume II: \"II \\<in> Q - {II0}\" and ii: \"ii \\<in> II\" and jj: \"jj \\<in> G II\""], ["proof (state)\nthis:\n  II \\<in> Q - {II0}\n  ii \\<in> II\n  jj \\<in> G II\n\ngoal (1 subgoal):\n 1. \\<And>I i j.\n       \\<lbrakk>I \\<in> Q - {II0}; i \\<in> I; j \\<in> G I\\<rbrakk>\n       \\<Longrightarrow> eff c s i \\<approx> eff d t j \\<and>\n                         (local.cont c s i, local.cont d t j)\n                         \\<in> thetaZOParT", "thus \"eff c s ii \\<approx> eff d t jj \\<and> (cont c s ii, cont d t jj) \\<in> thetaZOParT\""], ["proof (prove)\nusing this:\n  II \\<in> Q - {II0}\n  ii \\<in> II\n  jj \\<in> G II\n\ngoal (1 subgoal):\n 1. eff c s ii \\<approx> eff d t jj \\<and>\n    (local.cont c s ii, local.cont d t jj) \\<in> thetaZOParT", "unfolding defi c d"], ["proof (prove)\nusing this:\n  II \\<in> UNpart01 cl dl P - {BrnFT cl dl}\n  ii \\<in> II\n  jj \\<in> UNlift01 cl dl P F II\n\ngoal (1 subgoal):\n 1. eff (ParT cl) s ii \\<approx> eff (ParT dl) t jj \\<and>\n    (local.cont (ParT cl) s ii, local.cont (ParT dl) t jj) \\<in> thetaZOParT", "apply(intro cont_eff_ParT_UNlift01)"], ["proof (prove)\ngoal (11 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> SbisL cl dl\n 5. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ?II3 \\<in> UNpart01 cl dl ?P3 - {BrnFT cl dl}\n 6. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ii \\<in> ?II3\n 7. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> jj \\<in> UNlift01 cl dl ?P3 ?F3 ?II3\n 8. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n        jj \\<in> UNlift01 cl dl P F II; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (?P3 n) \\<and>\n                         {} \\<notin> ?P3 n\n 9. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n        jj \\<in> UNlift01 cl dl P F II; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (?F3 n ` ?P3 n)\n 10. \\<And>n I i j.\n        \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n         jj \\<in> UNlift01 cl dl P F II; n < length cl; I \\<in> ?P3 n;\n         i \\<in> I; j \\<in> ?F3 n I\\<rbrakk>\n        \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                          local.cont (cl ! n) s i \\<approx>s\n                          local.cont (dl ! n) t j\nA total of 11 subgoals...", "using N cldl P FP eff_cont st"], ["proof (prove)\nusing this:\n  length cl = length dl\n  properL cl\n  properL dl\n  SbisL cl dl\n  ?n7 < length cl \\<Longrightarrow>\n  part {..<brn (cl ! ?n7)} (P ?n7) \\<and> {} \\<notin> P ?n7\n  ?n7 < length dl \\<Longrightarrow>\n  part {..<brn (dl ! ?n7)} (F ?n7 ` P ?n7) \\<and> {} \\<notin> F ?n7 ` P ?n7\n  \\<lbrakk>?n7 < length cl; ?I7 \\<in> P ?n7; ?i7 \\<in> ?I7;\n   ?j7 \\<in> F ?n7 ?I7\\<rbrakk>\n  \\<Longrightarrow> eff (cl ! ?n7) s ?i7 \\<approx>\n                    eff (dl ! ?n7) t ?j7 \\<and>\n                    local.cont (cl ! ?n7) s ?i7 \\<approx>s\n                    local.cont (dl ! ?n7) t ?j7\n  s \\<approx> t\n\ngoal (11 subgoals):\n 1. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> length cl = length dl\n 2. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL cl\n 3. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> properL dl\n 4. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> SbisL cl dl\n 5. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ?II3 \\<in> UNpart01 cl dl ?P3 - {BrnFT cl dl}\n 6. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> ii \\<in> ?II3\n 7. \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n     jj \\<in> UNlift01 cl dl P F II\\<rbrakk>\n    \\<Longrightarrow> jj \\<in> UNlift01 cl dl ?P3 ?F3 ?II3\n 8. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n        jj \\<in> UNlift01 cl dl P F II; n < length cl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (cl ! n)} (?P3 n) \\<and>\n                         {} \\<notin> ?P3 n\n 9. \\<And>n.\n       \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n        jj \\<in> UNlift01 cl dl P F II; n < length dl\\<rbrakk>\n       \\<Longrightarrow> part {..<brn (dl ! n)} (?F3 n ` ?P3 n)\n 10. \\<And>n I i j.\n        \\<lbrakk>II \\<in> UNpart01 cl dl P - {BrnFT cl dl}; ii \\<in> II;\n         jj \\<in> UNlift01 cl dl P F II; n < length cl; I \\<in> ?P3 n;\n         i \\<in> I; j \\<in> ?F3 n I\\<rbrakk>\n        \\<Longrightarrow> eff (cl ! n) s i \\<approx> eff (dl ! n) t j \\<and>\n                          local.cont (cl ! n) s i \\<approx>s\n                          local.cont (dl ! n) t j\nA total of 11 subgoals...", "by auto"], ["proof (state)\nthis:\n  eff c s ii \\<approx> eff d t jj \\<and>\n  (local.cont c s ii, local.cont d t jj) \\<in> thetaZOParT\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mC_ZOC_eff_cont thetaZOParT c d s t II0 Q G\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>II0 Q G. mC_ZOC thetaZOParT c d s t II0 Q G\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thetaZOParT_ZObis: \"thetaZOParT \\<subseteq> ZObis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thetaZOParT \\<subseteq> ZObis", "using ZObis_raw_coind thetaZOParT_ZOretr"], ["proof (prove)\nusing this:\n  ?theta \\<subseteq> ZOretr ?theta \\<Longrightarrow>\n  ?theta \\<subseteq> ZObis\n  thetaZOParT \\<subseteq> ZOretr thetaZOParT\n\ngoal (1 subgoal):\n 1. thetaZOParT \\<subseteq> ZObis", "by auto"], ["", "theorem ParT_ZObis[simp]:\nassumes \"properL cl\" and \"properL dl\" and \"SbisL cl dl\"\nshows \"ParT cl \\<approx>01 ParT dl\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ParT cl \\<approx>01 ParT dl", "using assms thetaZOParT_ZObis"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  thetaZOParT \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. ParT cl \\<approx>01 ParT dl", "unfolding thetaZOParT_def"], ["proof (prove)\nusing this:\n  properL cl\n  properL dl\n  SbisL cl dl\n  {(ParT cl, ParT dl) |cl dl.\n   properL cl \\<and> properL dl \\<and> SbisL cl dl}\n  \\<subseteq> ZObis\n\ngoal (1 subgoal):\n 1. ParT cl \\<approx>01 ParT dl", "by blast"], ["", "end"], ["", "(* context PL_Indis *)\n(*******************************************)"], ["", "end"]]}