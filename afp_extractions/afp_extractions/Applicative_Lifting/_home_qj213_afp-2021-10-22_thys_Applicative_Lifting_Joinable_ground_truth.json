{"file_name": "/home/qj213/afp-2021-10-22/thys/Applicative_Lifting/Joinable.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Applicative_Lifting", "problem_names": ["lemma joinable_simp: \"(x, y) \\<in> joinable R \\<longleftrightarrow> (\\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R)\"", "lemma joinableI: \"(x, z) \\<in> R \\<Longrightarrow> (y, z) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R\"", "lemma joinableD: \"(x, y) \\<in> joinable R \\<Longrightarrow> \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R\"", "lemma joinableE:\n  assumes \"(x, y) \\<in> joinable R\"\n  obtains z where \"(x, z) \\<in> R\" and \"(y, z) \\<in> R\"", "lemma refl_on_joinable: \"refl_on {x. \\<exists>y. (x, y) \\<in> R} (joinable R)\"", "lemma refl_joinable_iff: \"(\\<forall>x. \\<exists>y. (x, y) \\<in> R) = refl (joinable R)\"", "lemma refl_joinable: \"refl R \\<Longrightarrow> refl (joinable R)\"", "lemma joinable_refl: \"refl R \\<Longrightarrow> (x, x) \\<in> joinable R\"", "lemma sym_joinable: \"sym (joinable R)\"", "lemma joinable_sym: \"(x, y) \\<in> joinable R \\<Longrightarrow> (y, x) \\<in> joinable R\"", "lemma joinable_mono: \"R \\<subseteq> S \\<Longrightarrow> joinable R \\<subseteq> joinable S\"", "lemma refl_le_joinable:\n  assumes \"refl R\"\n  shows \"R \\<subseteq> joinable R\"", "lemma joinable_subst:\n  assumes R_subst: \"\\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (P x, P y) \\<in> R\"\n  assumes joinable: \"(x, y) \\<in> joinable R\"\n  shows \"(P x, P y) \\<in> joinable R\"", "lemma confluentI:\n  \"(\\<And>x y y'. (x, y) \\<in> R \\<Longrightarrow> (x, y') \\<in> R \\<Longrightarrow> \\<exists>z. (y, z) \\<in> R \\<and> (y', z) \\<in> R) \\<Longrightarrow> confluent R\"", "lemma confluentD:\n  \"confluent R \\<Longrightarrow> (x, y) \\<in> R \\<Longrightarrow> (x,y') \\<in> R \\<Longrightarrow> (y, y') \\<in> joinable R\"", "lemma confluentE:\n  assumes \"confluent R\" and \"(x, y) \\<in> R\" and \"(x, y') \\<in> R\"\n  obtains z where \"(y, z) \\<in> R\" and \"(y', z) \\<in> R\"", "lemma trans_joinable:\n  assumes \"trans R\" and \"confluent R\"\n  shows \"trans (joinable R)\"", "lemma joinable_le_rtscl: \"joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*\"", "theorem joinable_eq_rtscl:\n  assumes \"confluent (R\\<^sup>*)\"\n  shows \"joinable (R\\<^sup>*) = (R \\<union> R\\<inverse>)\\<^sup>*\"", "lemma joinablep_joinable[pred_set_conv]:\n  \"joinablep (\\<lambda>x y. (x, y) \\<in> R) = (\\<lambda>x y. (x, y) \\<in> joinable R)\"", "lemma reflp_joinablep: \"reflp P \\<Longrightarrow> reflp (joinablep P)\"", "lemma joinablep_refl: \"reflp P \\<Longrightarrow> joinablep P x x\"", "lemma reflp_le_joinablep: \"reflp P \\<Longrightarrow> P \\<le> joinablep P\""], "translations": [["", "lemma joinable_simp: \"(x, y) \\<in> joinable R \\<longleftrightarrow> (\\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> joinable R) =\n    (\\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R)", "unfolding joinable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y)\n     \\<in> {(x, y). \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R}) =\n    (\\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R)", "by simp"], ["", "lemma joinableI: \"(x, z) \\<in> R \\<Longrightarrow> (y, z) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> joinable R", "unfolding joinable_simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R", "by blast"], ["", "lemma joinableD: \"(x, y) \\<in> joinable R \\<Longrightarrow> \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> joinable R \\<Longrightarrow>\n    \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R", "unfolding joinable_simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R \\<Longrightarrow>\n    \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R", "."], ["", "lemma joinableE:\n  assumes \"(x, y) \\<in> joinable R\"\n  obtains z where \"(x, z) \\<in> R\" and \"(y, z) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding joinable_simp"], ["proof (prove)\nusing this:\n  \\<exists>z. (x, z) \\<in> R \\<and> (y, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma refl_on_joinable: \"refl_on {x. \\<exists>y. (x, y) \\<in> R} (joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_on {x. \\<exists>y. (x, y) \\<in> R} (joinable R)", "by (auto intro!: refl_onI simp only: joinable_simp)"], ["", "lemma refl_joinable_iff: \"(\\<forall>x. \\<exists>y. (x, y) \\<in> R) = refl (joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. \\<exists>y. (x, y) \\<in> R) = refl (joinable R)", "by (auto intro!: refl_onI dest: refl_onD simp add: joinable_simp)"], ["", "lemma refl_joinable: \"refl R \\<Longrightarrow> refl (joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl R \\<Longrightarrow> refl (joinable R)", "using refl_joinable_iff"], ["proof (prove)\nusing this:\n  (\\<forall>x. \\<exists>y. (x, y) \\<in> ?R) = refl (joinable ?R)\n\ngoal (1 subgoal):\n 1. refl R \\<Longrightarrow> refl (joinable R)", "by (blast dest: refl_onD)"], ["", "lemma joinable_refl: \"refl R \\<Longrightarrow> (x, x) \\<in> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl R \\<Longrightarrow> (x, x) \\<in> joinable R", "using refl_joinable"], ["proof (prove)\nusing this:\n  refl ?R \\<Longrightarrow> refl (joinable ?R)\n\ngoal (1 subgoal):\n 1. refl R \\<Longrightarrow> (x, x) \\<in> joinable R", "by (blast dest: refl_onD)"], ["", "lemma sym_joinable: \"sym (joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sym (joinable R)", "by (auto intro!: symI simp only: joinable_simp)"], ["", "lemma joinable_sym: \"(x, y) \\<in> joinable R \\<Longrightarrow> (y, x) \\<in> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> joinable R \\<Longrightarrow> (y, x) \\<in> joinable R", "using sym_joinable"], ["proof (prove)\nusing this:\n  sym (joinable ?R)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> joinable R \\<Longrightarrow> (y, x) \\<in> joinable R", "by (rule symD)"], ["", "lemma joinable_mono: \"R \\<subseteq> S \\<Longrightarrow> joinable R \\<subseteq> joinable S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> S \\<Longrightarrow> joinable R \\<subseteq> joinable S", "by (rule subrelI) (auto simp only: joinable_simp)"], ["", "lemma refl_le_joinable:\n  assumes \"refl R\"\n  shows \"R \\<subseteq> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> joinable R", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R", "assume \"(x, y) \\<in> R\""], ["proof (state)\nthis:\n  (x, y) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R", "moreover"], ["proof (state)\nthis:\n  (x, y) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R", "from \\<open>refl R\\<close>"], ["proof (chain)\npicking this:\n  refl R", "have \"(y, y) \\<in> R\""], ["proof (prove)\nusing this:\n  refl R\n\ngoal (1 subgoal):\n 1. (y, y) \\<in> R", "by (blast dest: refl_onD)"], ["proof (state)\nthis:\n  (y, y) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (x, y) \\<in> joinable R", "ultimately"], ["proof (chain)\npicking this:\n  (x, y) \\<in> R\n  (y, y) \\<in> R", "show \"(x, y) \\<in> joinable R\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> R\n  (y, y) \\<in> R\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> joinable R", "by (rule joinableI)"], ["proof (state)\nthis:\n  (x, y) \\<in> joinable R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma joinable_subst:\n  assumes R_subst: \"\\<And>x y. (x, y) \\<in> R \\<Longrightarrow> (P x, P y) \\<in> R\"\n  assumes joinable: \"(x, y) \\<in> joinable R\"\n  shows \"(P x, P y) \\<in> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "from joinable"], ["proof (chain)\npicking this:\n  (x, y) \\<in> joinable R", "obtain z where xz: \"(x, z) \\<in> R\" and yz: \"(y, z) \\<in> R\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> R; (y, z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule joinableE)"], ["proof (state)\nthis:\n  (x, z) \\<in> R\n  (y, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "from R_subst xz"], ["proof (chain)\npicking this:\n  (?x, ?y) \\<in> R \\<Longrightarrow> (P ?x, P ?y) \\<in> R\n  (x, z) \\<in> R", "have \"(P x, P z) \\<in> R\""], ["proof (prove)\nusing this:\n  (?x, ?y) \\<in> R \\<Longrightarrow> (P ?x, P ?y) \\<in> R\n  (x, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P z) \\<in> R", "."], ["proof (state)\nthis:\n  (P x, P z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "moreover"], ["proof (state)\nthis:\n  (P x, P z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "from R_subst yz"], ["proof (chain)\npicking this:\n  (?x, ?y) \\<in> R \\<Longrightarrow> (P ?x, P ?y) \\<in> R\n  (y, z) \\<in> R", "have \"(P y, P z) \\<in> R\""], ["proof (prove)\nusing this:\n  (?x, ?y) \\<in> R \\<Longrightarrow> (P ?x, P ?y) \\<in> R\n  (y, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P y, P z) \\<in> R", "."], ["proof (state)\nthis:\n  (P y, P z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "ultimately"], ["proof (chain)\npicking this:\n  (P x, P z) \\<in> R\n  (P y, P z) \\<in> R", "show ?thesis"], ["proof (prove)\nusing this:\n  (P x, P z) \\<in> R\n  (P y, P z) \\<in> R\n\ngoal (1 subgoal):\n 1. (P x, P y) \\<in> joinable R", "by (rule joinableI)"], ["proof (state)\nthis:\n  (P x, P y) \\<in> joinable R\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Confluence\\<close>"], ["", "definition confluent :: \"'a rel \\<Rightarrow> bool\"\nwhere \"confluent R \\<longleftrightarrow> (\\<forall>x y y'. (x, y) \\<in> R \\<and> (x, y') \\<in> R \\<longrightarrow> (y, y') \\<in> joinable R)\""], ["", "lemma confluentI:\n  \"(\\<And>x y y'. (x, y) \\<in> R \\<Longrightarrow> (x, y') \\<in> R \\<Longrightarrow> \\<exists>z. (y, z) \\<in> R \\<and> (y', z) \\<in> R) \\<Longrightarrow> confluent R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y y'.\n        \\<lbrakk>(x, y) \\<in> R; (x, y') \\<in> R\\<rbrakk>\n        \\<Longrightarrow> \\<exists>z.\n                             (y, z) \\<in> R \\<and>\n                             (y', z) \\<in> R) \\<Longrightarrow>\n    confluent R", "unfolding confluent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y y'.\n        \\<lbrakk>(x, y) \\<in> R; (x, y') \\<in> R\\<rbrakk>\n        \\<Longrightarrow> \\<exists>z.\n                             (y, z) \\<in> R \\<and>\n                             (y', z) \\<in> R) \\<Longrightarrow>\n    \\<forall>x y y'.\n       (x, y) \\<in> R \\<and> (x, y') \\<in> R \\<longrightarrow>\n       (y, y') \\<in> joinable R", "by (blast intro: joinableI)"], ["", "lemma confluentD:\n  \"confluent R \\<Longrightarrow> (x, y) \\<in> R \\<Longrightarrow> (x,y') \\<in> R \\<Longrightarrow> (y, y') \\<in> joinable R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>confluent R; (x, y) \\<in> R; (x, y') \\<in> R\\<rbrakk>\n    \\<Longrightarrow> (y, y') \\<in> joinable R", "unfolding confluent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x y y'.\n                (x, y) \\<in> R \\<and> (x, y') \\<in> R \\<longrightarrow>\n                (y, y') \\<in> joinable R;\n     (x, y) \\<in> R; (x, y') \\<in> R\\<rbrakk>\n    \\<Longrightarrow> (y, y') \\<in> joinable R", "by blast"], ["", "lemma confluentE:\n  assumes \"confluent R\" and \"(x, y) \\<in> R\" and \"(x, y') \\<in> R\"\n  obtains z where \"(y, z) \\<in> R\" and \"(y', z) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(y, z) \\<in> R; (y', z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  confluent R\n  (x, y) \\<in> R\n  (x, y') \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(y, z) \\<in> R; (y', z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding confluent_def"], ["proof (prove)\nusing this:\n  \\<forall>x y y'.\n     (x, y) \\<in> R \\<and> (x, y') \\<in> R \\<longrightarrow>\n     (y, y') \\<in> joinable R\n  (x, y) \\<in> R\n  (x, y') \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(y, z) \\<in> R; (y', z) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (blast elim: joinableE)"], ["", "lemma trans_joinable:\n  assumes \"trans R\" and \"confluent R\"\n  shows \"trans (joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans (joinable R)", "proof (rule transI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "assume \"(x, y) \\<in> joinable R\""], ["proof (state)\nthis:\n  (x, y) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> joinable R", "obtain u where xu: \"(x, u) \\<in> R\" and yu: \"(y, u) \\<in> R\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(x, u) \\<in> R; (y, u) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule joinableE)"], ["proof (state)\nthis:\n  (x, u) \\<in> R\n  (y, u) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "assume \"(y, z) \\<in> joinable R\""], ["proof (state)\nthis:\n  (y, z) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> joinable R", "obtain v where yv: \"(y, v) \\<in> R\" and zv: \"(z, v) \\<in> R\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> joinable R\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>(y, v) \\<in> R; (z, v) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule joinableE)"], ["proof (state)\nthis:\n  (y, v) \\<in> R\n  (z, v) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "from yu yv \\<open>confluent R\\<close>"], ["proof (chain)\npicking this:\n  (y, u) \\<in> R\n  (y, v) \\<in> R\n  confluent R", "obtain w where uw: \"(u, w) \\<in> R\" and vw: \"(v, w) \\<in> R\""], ["proof (prove)\nusing this:\n  (y, u) \\<in> R\n  (y, v) \\<in> R\n  confluent R\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>(u, w) \\<in> R; (v, w) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (blast elim: confluentE)"], ["proof (state)\nthis:\n  (u, w) \\<in> R\n  (v, w) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "from xu uw \\<open>trans R\\<close>"], ["proof (chain)\npicking this:\n  (x, u) \\<in> R\n  (u, w) \\<in> R\n  trans R", "have \"(x, w) \\<in> R\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> R\n  (u, w) \\<in> R\n  trans R\n\ngoal (1 subgoal):\n 1. (x, w) \\<in> R", "by (blast elim: transE)"], ["proof (state)\nthis:\n  (x, w) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "moreover"], ["proof (state)\nthis:\n  (x, w) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "from zv vw \\<open>trans R\\<close>"], ["proof (chain)\npicking this:\n  (z, v) \\<in> R\n  (v, w) \\<in> R\n  trans R", "have \"(z, w) \\<in> R\""], ["proof (prove)\nusing this:\n  (z, v) \\<in> R\n  (v, w) \\<in> R\n  trans R\n\ngoal (1 subgoal):\n 1. (z, w) \\<in> R", "by (blast elim: transE)"], ["proof (state)\nthis:\n  (z, w) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> joinable R; (y, z) \\<in> joinable R\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable R", "ultimately"], ["proof (chain)\npicking this:\n  (x, w) \\<in> R\n  (z, w) \\<in> R", "show \"(x, z) \\<in> joinable R\""], ["proof (prove)\nusing this:\n  (x, w) \\<in> R\n  (z, w) \\<in> R\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> joinable R", "by (rule joinableI)"], ["proof (state)\nthis:\n  (x, z) \\<in> joinable R\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Relation to reflexive transitive symmetric closure\\<close>"], ["", "lemma joinable_le_rtscl: \"joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "assume \"(x, y) \\<in> joinable (R\\<^sup>*)\""], ["proof (state)\nthis:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> joinable (R\\<^sup>*)", "obtain z where xz: \"(x, z) \\<in> R\\<^sup>*\" and yz: \"(y,z) \\<in> R\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> R\\<^sup>*; (y, z) \\<in> R\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule joinableE)"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>*\n  (y, z) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "from xz"], ["proof (chain)\npicking this:\n  (x, z) \\<in> R\\<^sup>*", "have \"(x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "by (blast intro: in_rtrancl_UnI)"], ["proof (state)\nthis:\n  (x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "moreover"], ["proof (state)\nthis:\n  (x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "from yz"], ["proof (chain)\npicking this:\n  (y, z) \\<in> R\\<^sup>*", "have \"(z, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "by (blast intro: in_rtrancl_UnI rtrancl_converseI)"], ["proof (state)\nthis:\n  (z, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> joinable (R\\<^sup>*) \\<Longrightarrow>\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "ultimately"], ["proof (chain)\npicking this:\n  (x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n  (z, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "show \"(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n  (z, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*", "by (rule rtrancl_trans)"], ["proof (state)\nthis:\n  (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem joinable_eq_rtscl:\n  assumes \"confluent (R\\<^sup>*)\"\n  shows \"joinable (R\\<^sup>*) = (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. joinable (R\\<^sup>*) = (R \\<union> R\\<inverse>)\\<^sup>*", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*\n 2. (R \\<union> R\\<inverse>)\\<^sup>* \\<subseteq> joinable (R\\<^sup>*)", "show \"joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*", "using joinable_le_rtscl"], ["proof (prove)\nusing this:\n  joinable (?R\\<^sup>*) \\<subseteq> (?R \\<union> ?R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*", "."], ["proof (state)\nthis:\n  joinable (R\\<^sup>*) \\<subseteq> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (R \\<union> R\\<inverse>)\\<^sup>* \\<subseteq> joinable (R\\<^sup>*)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (R \\<union> R\\<inverse>)\\<^sup>* \\<subseteq> joinable (R\\<^sup>*)", "show \"joinable (R\\<^sup>*) \\<supseteq> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (R \\<union> R\\<inverse>)\\<^sup>* \\<subseteq> joinable (R\\<^sup>*)", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> joinable (R\\<^sup>*)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> joinable (R\\<^sup>*)", "assume \"(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> joinable (R\\<^sup>*)", "thus \"(x, y) \\<in> joinable (R\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> joinable (R\\<^sup>*)", "proof (induction set: rtrancl)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, x) \\<in> joinable (R\\<^sup>*)\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (x, x) \\<in> joinable (R\\<^sup>*)\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "show \"(x, x) \\<in> joinable (R\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> joinable (R\\<^sup>*)", "using joinable_refl refl_rtrancl"], ["proof (prove)\nusing this:\n  refl ?R \\<Longrightarrow> (?x, ?x) \\<in> joinable ?R\n  refl (?r\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> joinable (R\\<^sup>*)", "."], ["proof (state)\nthis:\n  (x, x) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "case (step y z)"], ["proof (state)\nthis:\n  (x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*\n  (y, z) \\<in> R \\<union> R\\<inverse>\n  (x, y) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "have \"R \\<subseteq> joinable (R\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> joinable (R\\<^sup>*)", "using refl_le_joinable refl_rtrancl"], ["proof (prove)\nusing this:\n  refl ?R \\<Longrightarrow> ?R \\<subseteq> joinable ?R\n  refl (?r\\<^sup>*)\n\ngoal (1 subgoal):\n 1. R \\<subseteq> joinable (R\\<^sup>*)", "by fast"], ["proof (state)\nthis:\n  R \\<subseteq> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "with \\<open>(y, z) \\<in> R \\<union> R\\<inverse>\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> R \\<union> R\\<inverse>\n  R \\<subseteq> joinable (R\\<^sup>*)", "have \"(y, z) \\<in> joinable (R\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> R \\<union> R\\<inverse>\n  R \\<subseteq> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> joinable (R\\<^sup>*)", "using joinable_sym"], ["proof (prove)\nusing this:\n  (y, z) \\<in> R \\<union> R\\<inverse>\n  R \\<subseteq> joinable (R\\<^sup>*)\n  (?x, ?y) \\<in> joinable ?R \\<Longrightarrow> (?y, ?x) \\<in> joinable ?R\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> joinable (R\\<^sup>*)", "by fast"], ["proof (state)\nthis:\n  (y, z) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (R \\<union> R\\<inverse>)\\<^sup>*;\n        (y, z) \\<in> R \\<union> R\\<inverse>;\n        (x, y) \\<in> joinable (R\\<^sup>*)\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> joinable (R\\<^sup>*)", "with \\<open>(x, y) \\<in> joinable (R\\<^sup>*)\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n  (y, z) \\<in> joinable (R\\<^sup>*)", "show \"(x, z) \\<in> joinable (R\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n  (y, z) \\<in> joinable (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> joinable (R\\<^sup>*)", "using trans_joinable trans_rtrancl \\<open>confluent (R\\<^sup>*)\\<close>"], ["proof (prove)\nusing this:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n  (y, z) \\<in> joinable (R\\<^sup>*)\n  \\<lbrakk>trans ?R; confluent ?R\\<rbrakk>\n  \\<Longrightarrow> trans (joinable ?R)\n  trans (?r\\<^sup>*)\n  confluent (R\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> joinable (R\\<^sup>*)", "by (blast dest: transD)"], ["proof (state)\nthis:\n  (x, z) \\<in> joinable (R\\<^sup>*)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> joinable (R\\<^sup>*)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (R \\<union> R\\<inverse>)\\<^sup>* \\<subseteq> joinable (R\\<^sup>*)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Predicate version\\<close>"], ["", "definition joinablep :: \"('a \\<Rightarrow> 'b \\<Rightarrow> bool) \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\nwhere \"joinablep P x y \\<longleftrightarrow> (\\<exists>z. P x z \\<and> P y z)\""], ["", "lemma joinablep_joinable[pred_set_conv]:\n  \"joinablep (\\<lambda>x y. (x, y) \\<in> R) = (\\<lambda>x y. (x, y) \\<in> joinable R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. joinablep (\\<lambda>x y. (x, y) \\<in> R) =\n    (\\<lambda>x y. (x, y) \\<in> joinable R)", "by (fastforce simp only: joinablep_def joinable_simp)"], ["", "lemma reflp_joinablep: \"reflp P \\<Longrightarrow> reflp (joinablep P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reflp P \\<Longrightarrow> reflp (joinablep P)", "by (blast intro: reflpI joinable_refl[to_pred] refl_onI[to_pred] dest: reflpD)"], ["", "lemma joinablep_refl: \"reflp P \\<Longrightarrow> joinablep P x x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reflp P \\<Longrightarrow> joinablep P x x", "using reflp_joinablep"], ["proof (prove)\nusing this:\n  reflp ?P \\<Longrightarrow> reflp (joinablep ?P)\n\ngoal (1 subgoal):\n 1. reflp P \\<Longrightarrow> joinablep P x x", "by (rule reflpD)"], ["", "lemma reflp_le_joinablep: \"reflp P \\<Longrightarrow> P \\<le> joinablep P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reflp P \\<Longrightarrow> P \\<le> joinablep P", "by (blast intro!: refl_le_joinable[to_pred] refl_onI[to_pred] dest: reflpD)"], ["", "end"]]}