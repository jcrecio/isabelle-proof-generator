{"file_name": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi/Weak_Simulation.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi", "problem_names": ["lemma weakSimI[consumes 1, case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   C   :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     rAct: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q';  bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q;\n                              bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; distinct(bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow>\n                                         \n                              \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau:  \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"", "lemma weakSimI2[case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   C   :: \"'d::fs_name\"\n\n  assumes rOutput: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q';  bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow>\n                                \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau:  \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"", "lemma weakSimIChainFresh[consumes 4, case_names cOutput cInput]:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   yvec :: \"name list\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     \"yvec \\<sharp>* \\<Psi>\"\n  and     \"yvec \\<sharp>* P\"\n  and     \"yvec \\<sharp>* Q\"\n  and     rAct: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q; \\<alpha> \\<noteq> \\<tau>;\n                             bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; yvec \\<sharp>* \\<alpha>; yvec \\<sharp>* Q'; yvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow>\n                             \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau: \"\\<And>Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; yvec \\<sharp>* Q'\\<rbrakk> \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"", "lemma weakSimIFresh[consumes 4, case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   x   :: name\n  and   C   :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> P\"\n  and     \"x \\<sharp> Q\"\n  and     \"\\<And>\\<alpha> Q' \\<Psi>'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q; \\<alpha> \\<noteq> \\<tau>;\n                       bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; x \\<sharp> \\<alpha>; x \\<sharp> Q'; x \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow>\n                       \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     \"\\<And>Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; x \\<sharp> Q'\\<rbrakk> \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"", "lemma weakSimE:\n  fixes F   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n\n  assumes \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n\n  shows \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow> \n                            \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and   \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"", "lemma weakSimClosedAux:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   p   :: \"name prm\"\n\n  assumes EqvtRel: \"eqvt Rel\"\n  and     PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n\n  shows \"(p \\<bullet> \\<Psi>) \\<rhd> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\"", "lemma weakSimClosed:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   p   :: \"name prm\"\n\n  assumes EqvtRel: \"eqvt Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q \\<Longrightarrow> (p \\<bullet> \\<Psi>) \\<rhd> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\"\n  and   \"P \\<leadsto><Rel> Q \\<Longrightarrow> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\"", "lemma weakSimReflexive:\n  fixes Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n\n  assumes \"{(\\<Psi>, P, P) | \\<Psi> P. True} \\<subseteq> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> P\"", "lemma weakSimTauChain:\n  fixes \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Q'  :: \"('a, 'b, 'c) psi\"\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\"\n  and     \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n  \n  obtains P' where \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and \"(\\<Psi>, P', Q') \\<in> Rel\"", "lemma weakSimE2:\n  fixes \\<Psi>  :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\" \n  and   Q   :: \"('a, 'b, 'c) psi\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n  and     QTrans: \"\\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q'\"\n  and     \"bn \\<alpha> \\<sharp>* \\<Psi>\"\n  and     \"bn \\<alpha> \\<sharp>* P\"\n  and     \"\\<alpha> \\<noteq> \\<tau>\"\n\n  obtains P'' P' where \"\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\" and \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\"", "lemma weakSimTransitive:\n  fixes \\<Psi>     :: 'b\n  and   P     :: \"('a, 'b, 'c) psi\"\n  and   Rel   :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q     :: \"('a, 'b, 'c) psi\"\n  and   Rel'  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   T     :: \"('a, 'b, 'c) psi\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     QSimR: \"\\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\"\n  and     Eqvt: \"eqvt Rel''\"\n  and     Set: \"{(\\<Psi>, P, R) | \\<Psi> P R. \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'} \\<subseteq> Rel''\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel''> R\"", "lemma weakSimStatEq:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>'  :: 'b\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel'\"\n  and     \"\\<Psi> \\<simeq> \\<Psi>'\"\n  and     C1: \"\\<And>\\<Psi>' R S \\<Psi>''. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', R, S) \\<in> Rel'\"\n\n  shows \"\\<Psi>' \\<rhd> P \\<leadsto><Rel'> Q\"", "lemma weakSimMonotonic: \n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   A :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   B :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"\\<Psi> \\<rhd> P \\<leadsto><A> Q\"\n  and     \"A \\<subseteq> B\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><B> Q\"", "lemma strongSimWeakSim:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     StatImp: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> insertAssertion(extractFrame S) \\<Psi>' \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame R) \\<Psi>'\"\n  and     Sim:     \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto>[Rel] S\"\n  and     Ext:     \"\\<And>\\<Psi>' R S \\<Psi>''. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', R, S) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"", "lemma strongAppend:\n  fixes \\<Psi>    :: 'b\n  and   P     :: \"('a, 'b, 'c) psi\"\n  and   Q     :: \"('a, 'b, 'c) psi\"\n  and   R     :: \"('a, 'b, 'c) psi\"\n  and   Rel   :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     QSimR: \"\\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\"\n  and     Eqvt'': \"eqvt Rel''\"\n  and     RimpQ: \"insertAssertion (extractFrame R) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\"\n  and     Set: \"{(\\<Psi>, P, R) | \\<Psi> P R. \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'} \\<subseteq> Rel''\"\n  and     C1: \"\\<And>\\<Psi> P Q \\<Psi>'. (\\<Psi>, P, Q) \\<in> Rel' \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel'\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel''> R\"", "lemma quietSim:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes \"quiet P\"\n  and     \"eqvt Rel\"\n  and     cQuiet: \"\\<And>P. quiet P \\<Longrightarrow> (\\<Psi>, \\<zero>, P) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<zero> \\<leadsto><Rel> P\""], "translations": [["", "lemma weakSimI[consumes 1, case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   C   :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     rAct: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q';  bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q;\n                              bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; distinct(bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow>\n                                         \n                              \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau:  \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "proof(auto simp add: weakSimulation_def)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "fix \\<Psi>' \\<alpha> Q'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "assume \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\" and \"bn \\<alpha> \\<sharp>* \\<Psi>\" and \"bn \\<alpha> \\<sharp>* P\" and \"\\<alpha> \\<noteq> \\<tau>\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus \"\\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "proof(nominal_induct \\<alpha> rule: action.strong_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a1 a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>a2\\<rparr> \\<prec> Q';\n        bn (a1\\<lparr>a2\\<rparr>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>a2\\<rparr>) \\<sharp>* P;\n        a1\\<lparr>a2\\<rparr> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>a2\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 3. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case(In M N)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* P\n  M\\<lparr>N\\<rparr> \\<noteq> \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>a1 a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>a2\\<rparr> \\<prec> Q';\n        bn (a1\\<lparr>a2\\<rparr>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>a2\\<rparr>) \\<sharp>* P;\n        a1\\<lparr>a2\\<rparr> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>a2\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 3. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* P\n  M\\<lparr>N\\<rparr> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by(rule_tac rAct) auto"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case(Out M xvec N)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>bn(M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<close> \\<open>bn(M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P", "have \"xvec \\<sharp>* \\<Psi>\" and \"xvec \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* \\<Psi> &&& xvec \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"distinct xvec\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. distinct xvec", "by(force dest: boundOutputDistinct)"], ["proof (state)\nthis:\n  distinct xvec\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "obtain p where \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\" and \"(p \\<bullet> xvec) \\<sharp>* M\" and \"(p \\<bullet> xvec) \\<sharp>* xvec\"\n               and\"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* Q'\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>'\"\n               and \"(p \\<bullet> xvec) \\<sharp>* C\" and \"(p \\<bullet> xvec) \\<sharp>* xvec\" and \"(p \\<bullet> xvec) \\<sharp>* N\"\n               and S: \"(set p) \\<subseteq> (set xvec) \\<times> (set(p \\<bullet> xvec))\" and \"distinctPerm p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>(p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* M; (p \\<bullet> xvec) \\<sharp>* xvec;\n         (p \\<bullet> xvec) \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* Q;\n         (p \\<bullet> xvec) \\<sharp>* Q';\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>';\n         (p \\<bullet> xvec) \\<sharp>* C; (p \\<bullet> xvec) \\<sharp>* xvec;\n         (p \\<bullet> xvec) \\<sharp>* N;\n         set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         distinctPerm p\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac xvec=xvec and c=\"(\\<Psi>, M, Q, N, P, Q', xvec, C, \\<Psi>')\" in name_list_avoiding)\n        (auto simp add: eqvts fresh_star_prod)"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* M\n  (p \\<bullet> xvec) \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q'\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>'\n  (p \\<bullet> xvec) \\<sharp>* C\n  (p \\<bullet> xvec) \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* N\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  distinct xvec", "have \"distinct(p \\<bullet> xvec)\""], ["proof (prove)\nusing this:\n  distinct xvec\n\ngoal (1 subgoal):\n 1. distinct (p \\<bullet> xvec)", "by simp"], ["proof (state)\nthis:\n  distinct (p \\<bullet> xvec)\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q'\\<close> S"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"\\<Psi> \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n            xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                   N)\\<rangle> \\<prec> p \\<bullet> Q'", "by(simp add: boundOutputChainAlpha'' residualInject)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> Q'", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> P''\" \n                         and P''Chain: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                         and P'RelQ': \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet>\n                                xvec)\\<rparr>\\<langle>(p \\<bullet>\n                 N)\\<rangle> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* M\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* C\\<close> \\<open>distinct(p \\<bullet> xvec)\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> Q'\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* M\n  (p \\<bullet> xvec) \\<sharp>* C\n  distinct (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet>\n                                xvec)\\<rparr>\\<langle>(p \\<bullet>\n                 N)\\<rangle> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac \\<Psi>'=\"p \\<bullet> \\<Psi>'\" in rAct) auto"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet>\n                 xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from PTrans S \\<open>distinctPerm p\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet>\n                 xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> P''\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* M\n  distinct xvec", "have \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(p \\<bullet>\n                 xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> P''\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                    P''", "by(rule_tac weakOutputAlpha) auto"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"(p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet>\n                          P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>'\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from P'RelQ' Eqvt S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n  eqvt Rel\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p", "have \"(p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>')), p \\<bullet> P', p \\<bullet> p \\<bullet> Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n  eqvt Rel\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n     p \\<bullet> p \\<bullet> Q')\n    \\<in> Rel", "apply(simp add: eqvt_def eqvts)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     \\<forall>x\\<in>Rel. \\<forall>p. p \\<bullet> x \\<in> Rel;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>',\n                       p \\<bullet> P', Q')\n                      \\<in> Rel", "apply(erule_tac x=\"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\" in ballE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     \\<forall>pa.\n        pa \\<bullet>\n        (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n        \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>',\n                       p \\<bullet> P', Q')\n                      \\<in> Rel\n 2. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<notin> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>',\n                       p \\<bullet> P', Q')\n                      \\<in> Rel", "apply(erule_tac x=\"p\" in allE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     p \\<bullet>\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>',\n                       p \\<bullet> P', Q')\n                      \\<in> Rel\n 2. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<notin> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>',\n                       p \\<bullet> P', Q')\n                      \\<in> Rel", "by(auto simp add: eqvts)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>a1 list a2.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> Q';\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle>) \\<sharp>* P;\n        a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<noteq>\n        \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>a1\\<lparr>\\<nu>*list\\<rparr>\\<langle>a2\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case Tau"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  bn (\\<tau>) \\<sharp>* \\<Psi>\n  bn (\\<tau>) \\<sharp>* P\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n     bn (\\<tau>) \\<sharp>* \\<Psi>; bn (\\<tau>) \\<sharp>* P;\n     \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P''.\n                         \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                         (\\<exists>P'.\n                             \\<Psi> \\<otimes>\n                             \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                             (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  bn (\\<tau>) \\<sharp>* \\<Psi>\n  bn (\\<tau>) \\<sharp>* P\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "fix Q'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "assume \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus \"\\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by(rule rTau)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimI2[case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   C   :: \"'d::fs_name\"\n\n  assumes rOutput: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q';  bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow>\n                                \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau:  \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> ?\\<alpha> \\<prec> ?Q';\n   bn ?\\<alpha> \\<sharp>* \\<Psi>; bn ?\\<alpha> \\<sharp>* P;\n   ?\\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P''.\n                       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>?\\<alpha> \\<prec> P'' \\<and>\n                       (\\<exists>P'.\n                           \\<Psi> \\<otimes>\n                           ?\\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                           (\\<Psi> \\<otimes> ?\\<Psi>', P', ?Q') \\<in> Rel)\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> ?Q' \\<Longrightarrow>\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', ?Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "by(simp add: weakSimulation_def)"], ["", "lemma weakSimIChainFresh[consumes 4, case_names cOutput cInput]:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   yvec :: \"name list\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     \"yvec \\<sharp>* \\<Psi>\"\n  and     \"yvec \\<sharp>* P\"\n  and     \"yvec \\<sharp>* Q\"\n  and     rAct: \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q; \\<alpha> \\<noteq> \\<tau>;\n                             bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; yvec \\<sharp>* \\<alpha>; yvec \\<sharp>* Q'; yvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow>\n                             \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     rTau: \"\\<And>Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; yvec \\<sharp>* Q'\\<rbrakk> \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "proof(induct rule: weakSimI[of _ _ _ _ \"(yvec, C)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (yvec, C); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* (yvec, C)\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (yvec, C); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "obtain p::\"name prm\" where \"(p \\<bullet> yvec) \\<sharp>* \\<Psi>\" and \"(p \\<bullet> yvec) \\<sharp>* P\" and  \"(p \\<bullet> yvec) \\<sharp>* Q\"\n                         and  \"(p \\<bullet> yvec) \\<sharp>* \\<alpha>\" and \"(p \\<bullet> yvec) \\<sharp>* \\<Psi>'\"\n                         and \"(p \\<bullet> yvec) \\<sharp>* Q'\" and S: \"(set p) \\<subseteq> set yvec \\<times> set(p \\<bullet> yvec)\"\n                         and \"distinctPerm p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>(p \\<bullet> yvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> yvec) \\<sharp>* P; (p \\<bullet> yvec) \\<sharp>* Q;\n         (p \\<bullet> yvec) \\<sharp>* \\<alpha>;\n         (p \\<bullet> yvec) \\<sharp>* \\<Psi>';\n         (p \\<bullet> yvec) \\<sharp>* Q';\n         set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec);\n         distinctPerm p\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac c=\"(\\<Psi>, P, Q, \\<alpha>, Q', \\<Psi>')\" and xvec=yvec in name_list_avoiding) auto"], ["proof (state)\nthis:\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* P\n  (p \\<bullet> yvec) \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* \\<alpha>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>'\n  (p \\<bullet> yvec) \\<sharp>* Q'\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (yvec, C); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (yvec, C)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (yvec, C)", "have \"bn \\<alpha> \\<sharp>* yvec\" and \"bn \\<alpha> \\<sharp>* C\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (yvec, C)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* yvec &&& bn \\<alpha> \\<sharp>* C", "by(simp add: freshChainSym)+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* yvec\n  bn \\<alpha> \\<sharp>* C\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (yvec, C); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "proof(cases rule: actionCases[where \\<alpha> = \\<alpha>])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case(cInput M N)"], ["proof (state)\nthis:\n  \\<alpha> = M\\<lparr>N\\<rparr>\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* \\<alpha>\\<close> \\<open>\\<alpha> = M\\<lparr>N\\<rparr>\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* \\<alpha>\n  \\<alpha> = M\\<lparr>N\\<rparr>", "have \"(p \\<bullet> yvec) \\<sharp>* M\" and  \"(p \\<bullet> yvec) \\<sharp>* N\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* \\<alpha>\n  \\<alpha> = M\\<lparr>N\\<rparr>\n\ngoal (1 subgoal):\n 1. (p \\<bullet> yvec) \\<sharp>* M &&& (p \\<bullet> yvec) \\<sharp>* N", "by simp+"], ["proof (state)\nthis:\n  (p \\<bullet> yvec) \\<sharp>* M\n  (p \\<bullet> yvec) \\<sharp>* N\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>\\<alpha> = M\\<lparr>N\\<rparr>\\<close> \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> \\<open>yvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* Q\\<close> S"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<alpha> = M\\<lparr>N\\<rparr>\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)", "have \"\\<Psi> \\<rhd> Q \\<longmapsto>(p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<alpha> = M\\<lparr>N\\<rparr>\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                   M)\\<lparr>(p \\<bullet>\n        N)\\<rparr> \\<prec> p \\<bullet> Q'", "by(drule_tac pi=p in semantics.eqvt) (simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* M", "have \"(p \\<bullet> (p \\<bullet> yvec)) \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)", "have \"yvec \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> M)", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> M)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> M)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* N", "have \"(p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* N\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> N)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> N)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> N)", "have \"yvec \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> N)", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> N)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> N)\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* Q'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* Q'", "have \"(p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> Q')", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> Q')\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> Q')", "have \"yvec \\<sharp>* (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> Q')", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> Q')\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> Q')\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>'", "have \"(p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')", "have \"yvec \\<sharp>* (p \\<bullet> \\<Psi>')\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> \\<Psi>')", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> p \\<bullet> Q'\n  yvec \\<sharp>* (p \\<bullet> M)\n  yvec \\<sharp>* (p \\<bullet> N)\n  yvec \\<sharp>* (p \\<bullet> Q')\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')", "obtain P' P'' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P''\" and P''Chain: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                               and P'RelQ': \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', (p \\<bullet> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> p \\<bullet> Q'\n  yvec \\<sharp>* (p \\<bullet> M)\n  yvec \\<sharp>* (p \\<bullet> N)\n  yvec \\<sharp>* (p \\<bullet> Q')\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                 M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto dest: rAct)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P''", "have \"(p \\<bullet> \\<Psi>) : (p \\<bullet> Q) \\<rhd> (p \\<bullet> P) \\<Longrightarrow>p \\<bullet> ((p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr>) \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P''\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> : p \\<bullet>\n             Q \\<rhd> p \\<bullet>\n                      P \\<Longrightarrow>p \\<bullet>\n   (p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> p \\<bullet> P''", "by(rule weakTransitionClosed)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> p \\<bullet> P''\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with S \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> \\<open>yvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* Q\\<close> \\<open>yvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* P\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  yvec \\<sharp>* P\n  (p \\<bullet> yvec) \\<sharp>* P\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> p \\<bullet> P''", "have \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  yvec \\<sharp>* P\n  (p \\<bullet> yvec) \\<sharp>* P\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet> M)\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> p \\<bullet> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                              P''", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                            P''\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                            P''\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have  \"(p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet>\n                          P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from P'RelQ' Eqvt"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n  eqvt Rel", "have \"(p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>')), p \\<bullet> P', p \\<bullet> p \\<bullet> Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q') \\<in> Rel\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n     p \\<bullet> p \\<bullet> Q')\n    \\<in> Rel", "apply(simp add: eqvt_def eqvts)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     \\<forall>x\\<in>Rel. \\<forall>p. p \\<bullet> x \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes>\n                       (p \\<bullet> p \\<bullet> \\<Psi>'),\n                       p \\<bullet> P', p \\<bullet> p \\<bullet> Q')\n                      \\<in> Rel", "apply(erule_tac x=\"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\" in ballE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     \\<forall>pa.\n        pa \\<bullet>\n        (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n        \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes>\n                       (p \\<bullet> p \\<bullet> \\<Psi>'),\n                       p \\<bullet> P', p \\<bullet> p \\<bullet> Q')\n                      \\<in> Rel\n 2. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<notin> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes>\n                       (p \\<bullet> p \\<bullet> \\<Psi>'),\n                       p \\<bullet> P', p \\<bullet> p \\<bullet> Q')\n                      \\<in> Rel", "apply(erule_tac x=\"p\" in allE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     p \\<bullet>\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes>\n                       (p \\<bullet> p \\<bullet> \\<Psi>'),\n                       p \\<bullet> P', p \\<bullet> p \\<bullet> Q')\n                      \\<in> Rel\n 2. \\<lbrakk>(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n             \\<in> Rel;\n     (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', p \\<bullet> Q')\n     \\<notin> Rel\\<rbrakk>\n    \\<Longrightarrow> ((p \\<bullet> \\<Psi>) \\<otimes>\n                       (p \\<bullet> p \\<bullet> \\<Psi>'),\n                       p \\<bullet> P', p \\<bullet> p \\<bullet> Q')\n                      \\<in> Rel", "by(auto simp add: eqvts)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), p \\<bullet> P',\n   p \\<bullet> p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>M N.\n       \\<alpha> = M\\<lparr>N\\<rparr> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 3. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                            P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                            P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "using \\<open>\\<alpha>=M\\<lparr>N\\<rparr>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>N\\<rparr> \\<prec> p \\<bullet>\n                            P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n  \\<alpha> = M\\<lparr>N\\<rparr>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case(cOutput M xvec N)"], ["proof (state)\nthis:\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close>  \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>\\<alpha>=M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\\<close> \\<open>bn \\<alpha> \\<sharp>* yvec\\<close>\n         \\<open>(p \\<bullet> yvec) \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* C\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  bn \\<alpha> \\<sharp>* yvec\n  (p \\<bullet> yvec) \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* C\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"xvec \\<sharp>* \\<Psi>\" and \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* M\" and \"yvec \\<sharp>* xvec\"\n     and \"(p \\<bullet> yvec) \\<sharp>* M\" and \"(p \\<bullet> yvec) \\<sharp>* xvec\" and \"xvec \\<sharp>* C\" and \"xvec \\<sharp>* M\" and \"(p \\<bullet> yvec) \\<sharp>* N\" \n     and \"distinct xvec\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  bn \\<alpha> \\<sharp>* yvec\n  (p \\<bullet> yvec) \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* C\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. ((xvec \\<sharp>* \\<Psi> &&& xvec \\<sharp>* P) &&&\n     xvec \\<sharp>* Q &&& xvec \\<sharp>* M &&& yvec \\<sharp>* xvec) &&&\n    ((p \\<bullet> yvec) \\<sharp>* M &&&\n     (p \\<bullet> yvec) \\<sharp>* xvec &&& xvec \\<sharp>* C) &&&\n    xvec \\<sharp>* M &&& (p \\<bullet> yvec) \\<sharp>* N &&& distinct xvec", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  yvec \\<sharp>* xvec\n  (p \\<bullet> yvec) \\<sharp>* M\n  (p \\<bullet> yvec) \\<sharp>* xvec\n  xvec \\<sharp>* C\n  xvec \\<sharp>* M\n  (p \\<bullet> yvec) \\<sharp>* N\n  distinct xvec\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> \\<open>yvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* Q\\<close> S \\<open>\\<alpha>=M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>", "have \"\\<Psi> \\<rhd> Q \\<longmapsto>(p \\<bullet> M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                   M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(rule_tac outputPermSubject) (assumption | simp add: fresh_star_def)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "note \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "note \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>xvec \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* M", "have \"(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> M)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>yvec \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* xvec\\<close> S"], ["proof (chain)\npicking this:\n  yvec \\<sharp>* xvec\n  (p \\<bullet> yvec) \\<sharp>* xvec\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> M)", "have \"xvec \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  yvec \\<sharp>* xvec\n  (p \\<bullet> yvec) \\<sharp>* xvec\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* (p \\<bullet> M)", "by simp"], ["proof (state)\nthis:\n  xvec \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "note \\<open>xvec \\<sharp>* C\\<close>"], ["proof (state)\nthis:\n  xvec \\<sharp>* C\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* C\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* M", "have \"(p \\<bullet> (p \\<bullet> yvec)) \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)", "have \"yvec \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> M)\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> M)", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "note \\<open>yvec \\<sharp>* xvec\\<close>"], ["proof (state)\nthis:\n  yvec \\<sharp>* xvec\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* xvec\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>yvec \\<sharp>* Q\\<close> \\<open>yvec \\<sharp>* xvec\\<close> \\<open>\\<alpha>=M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  yvec \\<sharp>* Q\n  yvec \\<sharp>* xvec\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  xvec \\<sharp>* M\n  distinct xvec", "have \"yvec \\<sharp>* N\" and \"yvec \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  yvec \\<sharp>* Q\n  yvec \\<sharp>* xvec\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* N &&& yvec \\<sharp>* Q'", "by(force dest: outputFreshChainDerivative)+"], ["proof (state)\nthis:\n  yvec \\<sharp>* N\n  yvec \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  yvec \\<sharp>* N\n  yvec \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>'", "have \"(p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\""], ["proof (prove)\nusing this:\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')", "have \"yvec \\<sharp>* (p \\<bullet> \\<Psi>')\""], ["proof (prove)\nusing this:\n  distinctPerm p\n  (p \\<bullet> p \\<bullet> yvec) \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* (p \\<bullet> \\<Psi>')", "by simp"], ["proof (state)\nthis:\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* (p \\<bullet> M)\n  xvec \\<sharp>* C\n  yvec \\<sharp>* (p \\<bullet> M)\n  yvec \\<sharp>* xvec\n  yvec \\<sharp>* N\n  yvec \\<sharp>* Q'\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet> M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\"\n                               and PChain: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                               and P'RelQ': \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> (p \\<bullet>\n                                 M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* (p \\<bullet> M)\n  xvec \\<sharp>* C\n  yvec \\<sharp>* (p \\<bullet> M)\n  yvec \\<sharp>* xvec\n  yvec \\<sharp>* N\n  yvec \\<sharp>* Q'\n  yvec \\<sharp>* (p \\<bullet> \\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                 M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac rAct) auto"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''", "have \"(p \\<bullet> \\<Psi>) : (p \\<bullet> Q) \\<rhd> (p \\<bullet> P) \\<Longrightarrow>(p \\<bullet> ((p \\<bullet> M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)) \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> : p \\<bullet>\n             Q \\<rhd> p \\<bullet>\n                      P \\<Longrightarrow>p \\<bullet>\n   (p \\<bullet>\n    M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet> P''", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet> P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with S \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> \\<open>yvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* P\\<close> \\<open>yvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* Q\\<close> \\<open>yvec \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* xvec\\<close> \n      \\<open>yvec \\<sharp>* N\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* N\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* P\n  (p \\<bullet> yvec) \\<sharp>* P\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  yvec \\<sharp>* xvec\n  (p \\<bullet> yvec) \\<sharp>* xvec\n  yvec \\<sharp>* N\n  (p \\<bullet> yvec) \\<sharp>* N\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet> P''", "have \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* P\n  (p \\<bullet> yvec) \\<sharp>* P\n  yvec \\<sharp>* Q\n  (p \\<bullet> yvec) \\<sharp>* Q\n  yvec \\<sharp>* xvec\n  (p \\<bullet> yvec) \\<sharp>* xvec\n  yvec \\<sharp>* N\n  (p \\<bullet> yvec) \\<sharp>* N\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n (p \\<bullet>\n  M)\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                    P''", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"(p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet>\n                          P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with S \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from P'RelQ' \\<open>eqvt Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\n  eqvt Rel", "have \"p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel", "by(simp add: eqvt_def) auto"], ["proof (state)\nthis:\n  p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "with \\<open>yvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* \\<Psi>\\<close>\\<open>yvec \\<sharp>* Q'\\<close> \\<open>(p \\<bullet> yvec) \\<sharp>* Q'\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q'\n  (p \\<bullet> yvec) \\<sharp>* Q'\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  yvec \\<sharp>* \\<Psi>\n  (p \\<bullet> yvec) \\<sharp>* \\<Psi>\n  yvec \\<sharp>* Q'\n  (p \\<bullet> yvec) \\<sharp>* Q'\n  set p \\<subseteq> set yvec \\<times> set (p \\<bullet> yvec)\n  distinctPerm p\n  p \\<bullet> (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>'), P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec N.\n       \\<alpha> =\n       M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n 2. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "using \\<open>\\<alpha>=M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> p \\<bullet>\n                  P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (\\<Psi> \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n  \\<alpha> = M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "case cTau"], ["proof (state)\nthis:\n  \\<alpha> = \\<tau>\n\ngoal (1 subgoal):\n 1. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "from \\<open>\\<alpha> = \\<tau>\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<alpha> = \\<tau>\n  \\<alpha> \\<noteq> \\<tau>", "have \"False\""], ["proof (prove)\nusing this:\n  \\<alpha> = \\<tau>\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<alpha> = \\<tau> \\<Longrightarrow>\n    \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>yvec \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  yvec \\<sharp>* Q", "have \"yvec \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  yvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. yvec \\<sharp>* Q'", "by(force dest: tauFreshChainDerivative)"], ["proof (state)\nthis:\n  yvec \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  yvec \\<sharp>* Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  yvec \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by(rule rTau)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimIFresh[consumes 4, case_names cAct cTau]:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   x   :: name\n  and   C   :: \"'d::fs_name\"\n\n  assumes Eqvt: \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> P\"\n  and     \"x \\<sharp> Q\"\n  and     \"\\<And>\\<alpha> Q' \\<Psi>'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* Q; \\<alpha> \\<noteq> \\<tau>;\n                       bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* C; x \\<sharp> \\<alpha>; x \\<sharp> Q'; x \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow>\n                       \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and     \"\\<And>Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; x \\<sharp> Q'\\<rbrakk> \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "using assms"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P\n  x \\<sharp> Q\n  \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> ?\\<alpha> \\<prec> ?Q';\n   bn ?\\<alpha> \\<sharp>* \\<Psi>; bn ?\\<alpha> \\<sharp>* P;\n   bn ?\\<alpha> \\<sharp>* Q; ?\\<alpha> \\<noteq> \\<tau>;\n   bn ?\\<alpha> \\<sharp>* subject ?\\<alpha>; bn ?\\<alpha> \\<sharp>* C;\n   x \\<sharp> ?\\<alpha>; x \\<sharp> ?Q'; x \\<sharp> ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P''.\n                       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>?\\<alpha> \\<prec> P'' \\<and>\n                       (\\<exists>P'.\n                           \\<Psi> \\<otimes>\n                           ?\\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                           (\\<Psi> \\<otimes> ?\\<Psi>', P', ?Q') \\<in> Rel)\n  \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> ?Q';\n   x \\<sharp> ?Q'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P'.\n                       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                       (\\<Psi>, P', ?Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "by(rule_tac yvec=\"[x]\" and C=C in weakSimIChainFresh) auto"], ["", "lemma weakSimE:\n  fixes F   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n\n  assumes \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n\n  shows \"\\<And>\\<Psi>' \\<alpha> Q'. \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'; bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P; \\<alpha> \\<noteq> \\<tau>\\<rbrakk> \\<Longrightarrow> \n                            \\<exists>P''. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and> (\\<exists>P'. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\"\n  and   \"\\<And>Q'. \\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q' \\<Longrightarrow> \\<exists>P'. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<alpha> Q'.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n         bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n         \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P''.\n                             \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                             (\\<exists>P'.\n                                 \\<Psi> \\<otimes>\n                                 \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                 (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                 \\<in> Rel)) &&&\n    (\\<And>Q'.\n        \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n        \\<exists>P'.\n           \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi>, P', Q') \\<in> Rel)", "using assms"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<alpha> Q'.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n         bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n         \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n        \\<Longrightarrow> \\<exists>P''.\n                             \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                             (\\<exists>P'.\n                                 \\<Psi> \\<otimes>\n                                 \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                 (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                 \\<in> Rel)) &&&\n    (\\<And>Q'.\n        \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n        \\<exists>P'.\n           \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi>, P', Q') \\<in> Rel)", "by(auto simp add: weakSimulation_def)"], ["", "lemma weakSimClosedAux:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   p   :: \"name prm\"\n\n  assumes EqvtRel: \"eqvt Rel\"\n  and     PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n\n  shows \"(p \\<bullet> \\<Psi>) \\<rhd> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q", "using EqvtRel"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q", "proof(induct rule: weakSimI[of _ _ _ _ \"(\\<Psi>, P, p)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>)\n  bn \\<alpha> \\<sharp>* (p \\<bullet> P)\n  bn \\<alpha> \\<sharp>* (p \\<bullet> Q)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* (\\<Psi>, P, p)\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from \\<open>p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "have \"(rev p \\<bullet> p \\<bullet> \\<Psi>) \\<rhd> (rev p \\<bullet> p \\<bullet> Q) \\<longmapsto>(rev p \\<bullet> (\\<alpha> \\<prec> Q'))\""], ["proof (prove)\nusing this:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. rev p \\<bullet>\n    p \\<bullet>\n    \\<Psi> \\<rhd> rev p \\<bullet>\n                  p \\<bullet>\n                  Q \\<longmapsto> rev p \\<bullet> \\<alpha> \\<prec> Q'", "by(blast dest: semantics.eqvt)"], ["proof (state)\nthis:\n  rev p \\<bullet>\n  p \\<bullet>\n  \\<Psi> \\<rhd> rev p \\<bullet>\n                p \\<bullet>\n                Q \\<longmapsto> rev p \\<bullet> \\<alpha> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"\\<Psi> \\<rhd> Q \\<longmapsto>(rev p \\<bullet> \\<alpha>) \\<prec> (rev p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  rev p \\<bullet>\n  p \\<bullet>\n  \\<Psi> \\<rhd> rev p \\<bullet>\n                p \\<bullet>\n                Q \\<longmapsto> rev p \\<bullet> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                  \\<alpha> \\<prec> rev p \\<bullet> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "with \\<open>bn \\<alpha> \\<sharp>* (\\<Psi>, P, p)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (\\<Psi>, P, p)\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'", "have \"bn \\<alpha>  \\<sharp>* \\<Psi>\" and \"bn \\<alpha>  \\<sharp>* P\" and \"bn \\<alpha>  \\<sharp>* p\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (\\<Psi>, P, p)\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi> &&&\n    bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* p", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* p\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* p\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<alpha> \\<noteq> \\<tau>", "have \"(rev p \\<bullet> \\<alpha>) \\<noteq> \\<tau>\""], ["proof (prove)\nusing this:\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. rev p \\<bullet> \\<alpha> \\<noteq> \\<tau>", "by(cases rule: actionCases[where \\<alpha>=\\<alpha>]) auto"], ["proof (state)\nthis:\n  rev p \\<bullet> \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* p\n  rev p \\<bullet> \\<alpha> \\<noteq> \\<tau>", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>(rev p \\<bullet> \\<alpha>) \\<prec> P''\"\n                          and P''Chain: \"\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* p\n  rev p \\<bullet> \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>rev p \\<bullet>\n                \\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (rev p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P',\n          rev p \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>\\<alpha> \\<noteq> \\<tau>\\<close> PSimQ"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> rev p \\<bullet>\n                                \\<alpha> \\<prec> rev p \\<bullet> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* p\n  rev p \\<bullet> \\<alpha> \\<noteq> \\<tau>\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>rev p \\<bullet>\n                \\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         (rev p \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P',\n          rev p \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac \\<Psi>'=\"rev p \\<bullet> \\<Psi>'\" in weakSimE(1)) (auto simp add: freshChainPermSimp bnEqvt[symmetric])"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>rev p \\<bullet> \\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (rev p \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>rev p \\<bullet> \\<alpha> \\<prec> P''", "have \"(p \\<bullet> \\<Psi>) : (p \\<bullet> Q) \\<rhd> (p \\<bullet> P) \\<Longrightarrow>(p \\<bullet> (rev p \\<bullet> \\<alpha>)) \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>rev p \\<bullet> \\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> : p \\<bullet>\n             Q \\<rhd> p \\<bullet>\n                      P \\<Longrightarrow>p \\<bullet>\n   rev p \\<bullet> \\<alpha> \\<prec> p \\<bullet> P''", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n rev p \\<bullet> \\<alpha> \\<prec> p \\<bullet> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"(p \\<bullet> \\<Psi>) : (p \\<bullet> Q) \\<rhd> (p \\<bullet> P) \\<Longrightarrow>\\<alpha> \\<prec> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>p \\<bullet>\n rev p \\<bullet> \\<alpha> \\<prec> p \\<bullet> P''\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> : p \\<bullet>\n             Q \\<rhd> p \\<bullet>\n                      P \\<Longrightarrow>\\<alpha> \\<prec> p \\<bullet> P''", "by(simp add: eqvts freshChainPermSimp)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>\\<alpha> \\<prec> p \\<bullet> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>\\<alpha> \\<prec> p \\<bullet> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (rev p \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have  \"(p \\<bullet> (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (rev p \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    (rev p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet>\n                          P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (rev p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"(p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  (rev p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi>) \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi>) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi>) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from P'RelQ' EqvtRel"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n  \\<in> Rel\n  eqvt Rel", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>')), P', rev p \\<bullet> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n  \\<in> Rel\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n    \\<in> Rel", "by(simp only: eqvt_def)"], ["proof (state)\nthis:\n  p \\<bullet>\n  (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  p \\<bullet>\n  (\\<Psi> \\<otimes> (rev p \\<bullet> \\<Psi>'), P', rev p \\<bullet> Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>p \\<bullet>\n                \\<Psi> \\<rhd> p \\<bullet>\n                              Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (p \\<bullet> \\<Psi>);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> P);\n        bn \\<alpha> \\<sharp>* (p \\<bullet> Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (\\<Psi>, P, p); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            p \\<bullet>\n                            \\<Psi> : p \\<bullet>\n                                     Q \\<rhd> p \\<bullet>\n        P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                (p \\<bullet> \\<Psi>) \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P',\n                                 Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>\\<alpha> \\<prec> p \\<bullet> P''\n  (p \\<bullet> \\<Psi>) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  p \\<bullet>\n  \\<Psi> : p \\<bullet>\n           Q \\<rhd> p \\<bullet>\n                    P \\<Longrightarrow>\\<alpha> \\<prec> p \\<bullet> P''\n  (p \\<bullet> \\<Psi>) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       p \\<bullet>\n       \\<Psi> : p \\<bullet>\n                Q \\<rhd> p \\<bullet>\n                         P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           (p \\<bullet> \\<Psi>) \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     p \\<bullet>\n     \\<Psi> : p \\<bullet>\n              Q \\<rhd> p \\<bullet>\n                       P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         (p \\<bullet> \\<Psi>) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         ((p \\<bullet> \\<Psi>) \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from \\<open>p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<tau> \\<prec> Q'", "have \"(rev p \\<bullet> p \\<bullet> \\<Psi>) \\<rhd> (rev p \\<bullet> p \\<bullet> Q) \\<longmapsto>(rev p \\<bullet> (\\<tau> \\<prec> Q'))\""], ["proof (prove)\nusing this:\n  p \\<bullet> \\<Psi> \\<rhd> p \\<bullet> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. rev p \\<bullet>\n    p \\<bullet>\n    \\<Psi> \\<rhd> rev p \\<bullet>\n                  p \\<bullet>\n                  Q \\<longmapsto> rev p \\<bullet> \\<tau> \\<prec> Q'", "by(blast dest: semantics.eqvt)"], ["proof (state)\nthis:\n  rev p \\<bullet>\n  p \\<bullet>\n  \\<Psi> \\<rhd> rev p \\<bullet>\n                p \\<bullet>\n                Q \\<longmapsto> rev p \\<bullet> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> (rev p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  rev p \\<bullet>\n  p \\<bullet>\n  \\<Psi> \\<rhd> rev p \\<bullet>\n                p \\<bullet>\n                Q \\<longmapsto> rev p \\<bullet> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> rev p \\<bullet> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> rev p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "with PSimQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> rev p \\<bullet> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> rev p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"(p \\<bullet> \\<Psi>) \\<rhd> (p \\<bullet> P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<rhd> p \\<bullet>\n                  P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'", "by(rule tauChainEqvt)"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<rhd> p \\<bullet>\n                P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<rhd> p \\<bullet>\n                P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "from P'RelQ' EqvtRel"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\n  eqvt Rel", "have \"(p \\<bullet> (\\<Psi>,  P', rev p \\<bullet> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. p \\<bullet> (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel", "by(simp only: eqvt_def)"], ["proof (state)\nthis:\n  p \\<bullet> (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "hence \"(p \\<bullet> \\<Psi>, p \\<bullet> P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  p \\<bullet> (\\<Psi>, P', rev p \\<bullet> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi>, p \\<bullet> P', Q') \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi>, p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          p \\<bullet>\n          \\<Psi> \\<rhd> p \\<bullet>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  p \\<bullet>\n  \\<Psi> \\<rhd> p \\<bullet>\n                P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (p \\<bullet> \\<Psi>, p \\<bullet> P', Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  p \\<bullet>\n  \\<Psi> \\<rhd> p \\<bullet>\n                P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P'\n  (p \\<bullet> \\<Psi>, p \\<bullet> P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       p \\<bullet>\n       \\<Psi> \\<rhd> p \\<bullet>\n                     P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     p \\<bullet>\n     \\<Psi> \\<rhd> p \\<bullet>\n                   P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (p \\<bullet> \\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimClosed:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   p   :: \"name prm\"\n\n  assumes EqvtRel: \"eqvt Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q \\<Longrightarrow> (p \\<bullet> \\<Psi>) \\<rhd> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\"\n  and   \"P \\<leadsto><Rel> Q \\<Longrightarrow> (p \\<bullet> P) \\<leadsto><Rel> (p \\<bullet> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<rhd> P \\<leadsto><Rel> Q \\<Longrightarrow>\n     p \\<bullet>\n     \\<Psi> \\<rhd> p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q) &&&\n    (P \\<leadsto><Rel> Q \\<Longrightarrow>\n     p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q)", "using EqvtRel"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<rhd> P \\<leadsto><Rel> Q \\<Longrightarrow>\n     p \\<bullet>\n     \\<Psi> \\<rhd> p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q) &&&\n    (P \\<leadsto><Rel> Q \\<Longrightarrow>\n     p \\<bullet> P \\<leadsto><Rel> p \\<bullet> Q)", "by(force dest: weakSimClosedAux simp add: permBottom)+"], ["", "lemma weakSimReflexive:\n  fixes Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n\n  assumes \"{(\\<Psi>, P, P) | \\<Psi> P. True} \\<subseteq> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> P", "using assms"], ["proof (prove)\nusing this:\n  {(\\<Psi>, P, P) |\\<Psi> P. True} \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> P", "by(auto simp add: weakSimulation_def weakTransition_def dest: rtrancl_into_rtrancl) force+"], ["", "lemma weakSimTauChain:\n  fixes \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Q'  :: \"('a, 'b, 'c) psi\"\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\"\n  and     \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n  \n  obtains P' where \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "assume A: \"\\<And>P'. \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'; (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk> \\<Longrightarrow> thesis\""], ["proof (state)\nthis:\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from \\<open>\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\\<close> \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> A"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "proof(induct arbitrary: P thesis rule: tauChainInduct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a P thesis.\n       \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', a) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "case(TauBase Q P)"], ["proof (state)\nthis:\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (2 subgoals):\n 1. \\<And>a P thesis.\n       \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', a) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (2 subgoals):\n 1. \\<And>a P thesis.\n       \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', a) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "have \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (2 subgoals):\n 1. \\<And>a P thesis.\n       \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', a) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "case(TauStep Q Q' Q'' P)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  \\<lbrakk>(\\<Psi>, ?P, Q) \\<in> Rel;\n   \\<And>P'.\n      \\<lbrakk>\\<Psi> \\<rhd> ?P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n       (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<Psi> \\<rhd> Q' \\<longmapsto> \\<tau> \\<prec> Q''\n  (\\<Psi>, P, Q) \\<in> Rel\n  \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi>, ?P', Q'') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule TauStep)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "from \\<open>(\\<Psi>, P', Q') \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel", "have \"\\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'", "by(rule Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'", "obtain P'' where P'Chain: \"\\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\" and \"(\\<Psi>, P'', Q'') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         (\\<Psi>, P'', Q'') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>\\<Psi> \\<rhd> Q' \\<longmapsto>\\<tau> \\<prec> Q''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P' \\<leadsto><Rel> Q'\n  \\<Psi> \\<rhd> Q' \\<longmapsto> \\<tau> \\<prec> Q''\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         (\\<Psi>, P'', Q'') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  (\\<Psi>, P'', Q'') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "from PChain P'Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<And>a b c P thesis.\n       \\<lbrakk>\\<Psi> \\<rhd> a \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> b;\n        \\<And>P thesis.\n           \\<lbrakk>(\\<Psi>, P, a) \\<in> Rel;\n            \\<And>P'.\n               \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n                (\\<Psi>, P', b) \\<in> Rel\\<rbrakk>\n               \\<Longrightarrow> thesis\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<Psi> \\<rhd> b \\<longmapsto> \\<tau> \\<prec> c;\n        (\\<Psi>, P, a) \\<in> Rel;\n        \\<And>P'.\n           \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n            (\\<Psi>, P', c) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> thesis\\<rbrakk>\n       \\<Longrightarrow> thesis", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. thesis", "using \\<open>(\\<Psi>, P'', Q'') \\<in> Rel\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  (\\<Psi>, P'', Q'') \\<in> Rel\n\ngoal (1 subgoal):\n 1. thesis", "by(rule TauStep)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimE2:\n  fixes \\<Psi>  :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\" \n  and   Q   :: \"('a, 'b, 'c) psi\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n  and     QTrans: \"\\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q'\"\n  and     \"bn \\<alpha> \\<sharp>* \\<Psi>\"\n  and     \"bn \\<alpha> \\<sharp>* P\"\n  and     \"\\<alpha> \\<noteq> \\<tau>\"\n\n  obtains P'' P' where \"\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\" and \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "assume A: \"\\<And>P'' P'. \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''; \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'; (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk> \\<Longrightarrow> thesis\""], ["proof (state)\nthis:\n  \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> ?P'';\n   \\<Psi> \\<otimes>\n   \\<Psi>' \\<rhd> ?P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi> \\<otimes> \\<Psi>', ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q'", "obtain Q'' \n    where QChain: \"\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q''\" \n      and ReqQ'': \"insertAssertion (extractFrame R) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q'') \\<Psi>\"\n      and Q''Trans: \"\\<Psi> \\<rhd> Q'' \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>Q''.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'';\n         insertAssertion (extractFrame R)\n          \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame Q'') \\<Psi>;\n         \\<Psi> \\<rhd> Q'' \\<longmapsto> \\<alpha> \\<prec> Q'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakTransitionE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q'')\n                                     \\<Psi>\n  \\<Psi> \\<rhd> Q'' \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from QChain PRelQ Sim"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q''\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S", "obtain P'' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\" and P''RelQ'': \"(\\<Psi>, P'', Q'') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q''\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         (\\<Psi>, P'', Q'') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakSimTauChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  (\\<Psi>, P'', Q'') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from PChain \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  bn \\<alpha> \\<sharp>* P", "have \"bn \\<alpha> \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P''", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from P''RelQ''"], ["proof (chain)\npicking this:\n  (\\<Psi>, P'', Q'') \\<in> Rel", "have \"\\<Psi> \\<rhd> P'' \\<leadsto><Rel> Q''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P'', Q'') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<leadsto><Rel> Q''", "by(rule Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<leadsto><Rel> Q''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with Q''Trans \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P''\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q'' \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P''\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> \\<rhd> P'' \\<leadsto><Rel> Q''", "obtain P''' P' where P''Trans: \"\\<Psi> : Q'' \\<rhd> P'' \\<Longrightarrow>\\<alpha> \\<prec> P'''\" and P'''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                   and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q'' \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P''\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> \\<rhd> P'' \\<leadsto><Rel> Q''\n\ngoal (1 subgoal):\n 1. (\\<And>P''' P'.\n        \\<lbrakk>\\<Psi> : Q'' \\<rhd> P'' \\<Longrightarrow>\\<alpha> \\<prec> P''';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q'' \\<rhd> P'' \\<Longrightarrow>\\<alpha> \\<prec> P'''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from P''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> : Q'' \\<rhd> P'' \\<Longrightarrow>\\<alpha> \\<prec> P'''", "obtain P'''' where P''Chain: \"\\<Psi> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\"\n                               and Q''eqP'''': \"insertAssertion (extractFrame Q'') \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''') \\<Psi>\"\n                               and P''''Trans: \"\\<Psi> \\<rhd> P'''' \\<longmapsto>\\<alpha> \\<prec> P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q'' \\<rhd> P'' \\<Longrightarrow>\\<alpha> \\<prec> P'''\n\ngoal (1 subgoal):\n 1. (\\<And>P''''.\n        \\<lbrakk>\\<Psi> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''';\n         insertAssertion (extractFrame Q'')\n          \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'''') \\<Psi>;\n         \\<Psi> \\<rhd> P'''' \\<longmapsto> \\<alpha> \\<prec> P'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakTransitionE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n  insertAssertion (extractFrame Q'')\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>\n  \\<Psi> \\<rhd> P'''' \\<longmapsto> \\<alpha> \\<prec> P'''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from PChain P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<Psi> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''", "have \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<Psi> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from ReqQ'' Q''eqP''''"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q'')\n                                     \\<Psi>\n  insertAssertion (extractFrame Q'')\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>", "have \"insertAssertion (extractFrame R) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''') \\<Psi>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q'')\n                                     \\<Psi>\n  insertAssertion (extractFrame Q'')\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame R)\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n \\<Psi>", "by(rule FrameStatImpTrans)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>", "have \"\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''", "using P''''Trans"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'''')\n                                     \\<Psi>\n  \\<Psi> \\<rhd> P'''' \\<longmapsto> \\<alpha> \\<prec> P'''\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''", "by(rule weakTransitionI)"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with P'''Chain P'RelQ' A"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> ?P'';\n   \\<Psi> \\<otimes>\n   \\<Psi>' \\<rhd> ?P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi> \\<otimes> \\<Psi>', ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> ?P'';\n   \\<Psi> \\<otimes>\n   \\<Psi>' \\<rhd> ?P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ?P';\n   (\\<Psi> \\<otimes> \\<Psi>', ?P', Q') \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimTransitive:\n  fixes \\<Psi>     :: 'b\n  and   P     :: \"('a, 'b, 'c) psi\"\n  and   Rel   :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q     :: \"('a, 'b, 'c) psi\"\n  and   Rel'  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   T     :: \"('a, 'b, 'c) psi\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     QSimR: \"\\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\"\n  and     Eqvt: \"eqvt Rel''\"\n  and     Set: \"{(\\<Psi>, P, R) | \\<Psi> P R. \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'} \\<subseteq> Rel''\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto><Rel> S\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel''> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel''> R", "using \\<open>eqvt Rel''\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel''> R", "proof(induct rule: weakSimI[of _ _ _ _ Q])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cAct \\<Psi>' \\<alpha> R')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* Q\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from QSimR \\<open>\\<Psi> \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  \\<alpha> \\<noteq> \\<tau>", "obtain Q'' Q' where QTrans: \"\\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\" and Q''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\"\n                  and Q'RelR': \"(\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>Q'' Q'.\n        \\<lbrakk>\\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q';\n         (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "with PRelQ Sim QTrans \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'", "obtain P''' P'' where PTrans: \"\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\" \n                and P'''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\" and P''RelQ'': \"(\\<Psi> \\<otimes> \\<Psi>', P'', Q'') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> : R \\<rhd> Q \\<Longrightarrow>\\<alpha> \\<prec> Q''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<And>P''' P''.\n        \\<lbrakk>\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         (\\<Psi> \\<otimes> \\<Psi>', P'', Q'') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac weakSimE2) auto"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  (\\<Psi> \\<otimes> \\<Psi>', P'', Q'') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "note PTrans"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from Q''Chain P''RelQ'' Sim"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi> \\<otimes> \\<Psi>', P'', Q'') \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S", "obtain P' where P''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> Q'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi> \\<otimes> \\<Psi>', P'', Q'') \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakSimTauChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from P'''Chain P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from P'RelQ' Q'RelR' Set"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''", "have \"(\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P''' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel'')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel'')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cTau R')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from QSimR \\<open>\\<Psi> \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "obtain Q' where QChain: \"\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\" and Q'RelR': \"(\\<Psi>, Q', R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<leadsto><Rel'> R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. (\\<And>Q'.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q';\n         (\\<Psi>, Q', R') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi>, Q', R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from QChain PRelQ Sim"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  (?\\<Psi>', ?R, ?S) \\<in> Rel \\<Longrightarrow>\n  ?\\<Psi>' \\<rhd> ?R \\<leadsto><Rel> ?S\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakSimTauChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "note PChain"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from P'RelQ' Q'RelR' Set"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  (\\<Psi>, Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''", "have \"(\\<Psi>, P', R') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  (\\<Psi>, Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  (\\<Psi>, P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', R') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimStatEq:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>'  :: 'b\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel'\"\n  and     \"\\<Psi> \\<simeq> \\<Psi>'\"\n  and     C1: \"\\<And>\\<Psi>' R S \\<Psi>''. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', R, S) \\<in> Rel'\"\n\n  shows \"\\<Psi>' \\<rhd> P \\<leadsto><Rel'> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi>' \\<rhd> P \\<leadsto><Rel'> Q", "using \\<open>eqvt Rel'\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. \\<Psi>' \\<rhd> P \\<leadsto><Rel'> Q", "proof(induct rule: weakSimI[of _ _ _ _ \\<Psi>])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "case(cAct \\<Psi>'' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>'\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from \\<open>\\<Psi>' \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by(metis statEqTransition AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "with PSimQ \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\" and P''Chain: \"\\<Psi> \\<otimes> \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" \n                  and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>'', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>'', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>'', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from PTrans \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"\\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''", "by(rule weakTransitionStatEq)"], ["proof (state)\nthis:\n  \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from P''Chain \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"\\<Psi>' \\<otimes> \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi>' \\<otimes>\n    \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(metis tauChainStatEq Composition)"], ["proof (state)\nthis:\n  \\<Psi>' \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi>' \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from P'RelQ' \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>'', P', Q') \\<in> Rel\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"(\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>'', P', Q') \\<in> Rel\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel'", "by(metis C1 Composition)"], ["proof (state)\nthis:\n  (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>'' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi>' \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi>' \\<otimes>\n                                \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi>' \\<otimes> \\<Psi>'', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi>' \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi>' \\<otimes>\n  \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi>' \\<otimes>\n           \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi>' : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi>' \\<otimes>\n         \\<Psi>'' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi>' \\<otimes> \\<Psi>'', P', Q') \\<in> Rel')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from \\<open>\\<Psi>' \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "by(metis statEqTransition AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "with PSimQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from PChain \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"\\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(rule tauChainStatEq)"], ["proof (state)\nthis:\n  \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "from \\<open>(\\<Psi>, P', Q') \\<in> Rel\\<close> \\<open>\\<Psi> \\<simeq> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<simeq> \\<Psi>'", "have \"(\\<Psi>', P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<simeq> \\<Psi>'\n\ngoal (1 subgoal):\n 1. (\\<Psi>', P', Q') \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>', P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi>' \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>', P', Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>', P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>', P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>', P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>', P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakSimMonotonic: \n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   A :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   B :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"\\<Psi> \\<rhd> P \\<leadsto><A> Q\"\n  and     \"A \\<subseteq> B\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><B> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><B> Q", "using assms"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><A> Q\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><B> Q", "by(simp (no_asm) add: weakSimulation_def) (blast dest: weakSimE)+"], ["", "lemma strongSimWeakSim:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     StatImp: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> insertAssertion(extractFrame S) \\<Psi>' \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame R) \\<Psi>'\"\n  and     Sim:     \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto>[Rel] S\"\n  and     Ext:     \"\\<And>\\<Psi>' R S \\<Psi>''. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', R, S) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "proof(induct rule: weakSimI2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"insertAssertion(extractFrame Q) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame P) \\<Psi>\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame Q)\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P)\n \\<Psi>", "by(rule StatImp)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame Q)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P) \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "with PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  insertAssertion (extractFrame Q)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P) \\<Psi>", "have \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  insertAssertion (extractFrame Q)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P) \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'", "by(rule transitionWeakTransition)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from P'RelQ'"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel", "have \"\\<forall>\\<Psi>'. \\<exists>P''. \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<and> (\\<Psi> \\<otimes> \\<Psi>', P'', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<forall>\\<Psi>'.\n       \\<exists>P''.\n          \\<Psi> \\<otimes>\n          \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<and>\n          (\\<Psi> \\<otimes> \\<Psi>', P'', Q') \\<in> Rel", "by(force intro: Ext)"], ["proof (state)\nthis:\n  \\<forall>\\<Psi>'.\n     \\<exists>P''.\n        \\<Psi> \\<otimes>\n        \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<and>\n        (\\<Psi> \\<otimes> \\<Psi>', P'', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'\n  \\<forall>\\<Psi>'.\n     \\<exists>P''.\n        \\<Psi> \\<otimes>\n        \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<and>\n        (\\<Psi> \\<otimes> \\<Psi>', P'', Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'\n  \\<forall>\\<Psi>'.\n     \\<exists>P''.\n        \\<Psi> \\<otimes>\n        \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<and>\n        (\\<Psi> \\<otimes> \\<Psi>', P'', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "with PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel", "have \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "using P'RelQ'"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strongAppend:\n  fixes \\<Psi>    :: 'b\n  and   P     :: \"('a, 'b, 'c) psi\"\n  and   Q     :: \"('a, 'b, 'c) psi\"\n  and   R     :: \"('a, 'b, 'c) psi\"\n  and   Rel   :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     QSimR: \"\\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\"\n  and     Eqvt'': \"eqvt Rel''\"\n  and     RimpQ: \"insertAssertion (extractFrame R) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\"\n  and     Set: \"{(\\<Psi>, P, R) | \\<Psi> P R. \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'} \\<subseteq> Rel''\"\n  and     C1: \"\\<And>\\<Psi> P Q \\<Psi>'. (\\<Psi>, P, Q) \\<in> Rel' \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel'\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto><Rel''> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel''> R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel''> R", "from Eqvt''"], ["proof (chain)\npicking this:\n  eqvt Rel''", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel''> R", "proof(induct rule: weakSimI[of _ _ _ _ Q])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cAct \\<Psi>' \\<alpha> R')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* Q\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\\<close> \\<open>\\<Psi> \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q", "obtain Q' where QTrans: \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\" and \"(\\<Psi>, Q', R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<And>Q'.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n         (\\<Psi>, Q', R') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (\\<Psi>, Q', R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>(\\<Psi>, Q', R') \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, Q', R') \\<in> Rel'", "have Q'RelR': \"(\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\\<close> QTrans \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\" and P''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                    and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from PTrans RimpQ"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>", "have \"\\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  insertAssertion (extractFrame R)\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''", "by(rule weakTransitionFrameImp)"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "note P''Chain"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from P'RelQ' Q'RelR' Set"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''", "have \"(\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* R; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* Q; distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel'')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', R') \\<in> Rel'')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cTau R')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\\<close> \\<open>\\<Psi> \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "obtain Q' where QTrans: \"\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\" and Q'RelR': \"(\\<Psi>, Q', R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<leadsto>[Rel'] R\n  \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. (\\<And>Q'.\n        \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q';\n         (\\<Psi>, Q', R') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  (\\<Psi>, Q', R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\\<close> QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "note PTrans"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from P'RelQ' Q'RelR' Set"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  (\\<Psi>, Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''", "have \"(\\<Psi>, P', R') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  (\\<Psi>, Q', R') \\<in> Rel'\n  {(\\<Psi>, P, R) |\\<Psi> P R.\n   \\<exists>Q. (\\<Psi>, P, Q) \\<in> Rel \\<and> (\\<Psi>, Q, R) \\<in> Rel'}\n  \\<subseteq> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  (\\<Psi>, P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', R') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', R') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel''> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma quietSim:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes \"quiet P\"\n  and     \"eqvt Rel\"\n  and     cQuiet: \"\\<And>P. quiet P \\<Longrightarrow> (\\<Psi>, \\<zero>, P) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<zero> \\<leadsto><Rel> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<zero> \\<leadsto><Rel> P", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<zero> \\<leadsto><Rel> P", "proof(induct rule: weakSimI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* \\<zero>;\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : P \\<rhd> \\<zero> \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<zero>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* \\<zero>;\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : P \\<rhd> \\<zero> \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<alpha> \\<noteq> \\<tau>", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "using \\<open>quiet P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<alpha> \\<noteq> \\<tau>\n  quiet P\n\ngoal (1 subgoal):\n 1. False", "by(cases rule: actionCases[where \\<alpha>=\\<alpha>]) (auto intro: quietOutput quietInput)"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* \\<zero>;\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); distinct (bn \\<alpha>);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : P \\<rhd> \\<zero> \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : P \\<rhd> \\<zero> \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'a.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P'a, P') \\<in> Rel)", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : P \\<rhd> \\<zero> \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'a.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P'a, P') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P'\\<close> \\<open>quiet P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  quiet P", "have \"quiet P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'\n  quiet P\n\ngoal (1 subgoal):\n 1. quiet P'", "by(erule_tac quiet.cases) (force simp add: residualInject)"], ["proof (state)\nthis:\n  quiet P'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "have \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>quiet P'\\<close>"], ["proof (chain)\npicking this:\n  quiet P'", "have \"(\\<Psi>, \\<zero>, P') \\<in> Rel\""], ["proof (prove)\nusing this:\n  quiet P'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<zero>, P') \\<in> Rel", "by(rule cQuiet)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<zero>, P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n  (\\<Psi>, \\<zero>, P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n  (\\<Psi>, \\<zero>, P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<zero> \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}