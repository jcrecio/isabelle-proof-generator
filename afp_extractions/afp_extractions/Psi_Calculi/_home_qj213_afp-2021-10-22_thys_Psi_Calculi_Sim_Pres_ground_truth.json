{"file_name": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi/Sim_Pres.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi", "problem_names": ["lemma inputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>Tvec. length xvec = length Tvec \\<Longrightarrow> (\\<Psi>, P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q\"", "lemma outputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto>[Rel] M\\<langle>N\\<rangle>.Q\"", "lemma casePres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> (\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto>[Rel] S\"\n  and          \"Rel \\<subseteq> Rel'\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto>[Rel'] Cases CsQ\"", "lemma resPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1:    \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q\"", "lemma resChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\"", "lemma parPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PRelQ: \"\\<And>A\\<^sub>R \\<Psi>\\<^sub>R. \\<lbrakk>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>; A\\<^sub>R \\<sharp>* \\<Psi>; A\\<^sub>R \\<sharp>* P; A\\<^sub>R \\<sharp>* Q\\<rbrakk> \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\" \n  and     Eqvt: \"eqvt Rel\"\n  and     Eqvt': \"eqvt Rel'\"\n\n  and     StatImp: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> insertAssertion (extractFrame T) \\<Psi>' \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame S) \\<Psi>'\"\n  and     Sim:     \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>[Rel] T\"\n  and     Ext: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n\n\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R\"", "lemma bangPres:\n  fixes \\<Psi>   :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"eqvt Rel'\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>[Rel] T\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' S T. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel'; (\\<Psi>', U, O) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel'\"\n  and     C1: \"\\<And>\\<Psi> S T U. \\<lbrakk>(\\<Psi>, S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>, U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel'\"\n  and     Der: \"\\<And>\\<Psi>' S \\<alpha> S' T. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; (\\<Psi>', S, T) \\<in> Rel; bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* S; bn \\<alpha> \\<sharp>* T; guarded T; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow>\n                                      \\<exists>T' U O.  \\<Psi>' \\<rhd> !T \\<longmapsto>\\<alpha> \\<prec> T' \\<and> (\\<Psi>', S', U \\<parallel> !S) \\<in> Rel \\<and> (\\<Psi>', T', O \\<parallel> !T) \\<in> Rel \\<and>\n                                                (\\<Psi>', U, O) \\<in> Rel \\<and> ((supp U)::name set) \\<subseteq> supp S' \\<and> \n                                                 ((supp O)::name set) \\<subseteq> supp T'\"\n\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>[Rel'] R \\<parallel> !Q\""], "translations": [["", "lemma inputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>Tvec. length xvec = length Tvec \\<Longrightarrow> (\\<Psi>, P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q", "proof(auto simp add: simulation_def residual.inject psi.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* inputChain xvec N P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "fix \\<alpha> Q'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* inputChain xvec N P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "assume \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* inputChain xvec N P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "thus \"\\<exists>P'. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto>\\<alpha> \\<prec> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by(induct rule: inputCases) (auto intro: Input PRelQ)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma outputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto>[Rel] M\\<langle>N\\<rangle>.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto>[Rel] M\\<langle>N\\<rangle>.Q", "proof(auto simp add: simulation_def residual.inject psi.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* N; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "fix \\<alpha> Q'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* N; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "assume \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* M;\n        bn \\<alpha> \\<sharp>* N; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "thus \"\\<exists>P'. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto>\\<alpha> \\<prec> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by(induct rule: outputCases) (auto intro: Output PRelQ)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma casePres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> (\\<Psi>, P, Q) \\<in> Rel\"\n  and     Sim: \"\\<And>\\<Psi>' R S. (\\<Psi>', R, S) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> R \\<leadsto>[Rel] S\"\n  and          \"Rel \\<subseteq> Rel'\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto>[Rel'] Cases CsQ\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<leadsto>[Rel'] Cases CsQ", "proof(auto simp add: simulation_def residual.inject psi.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* CsP\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "fix \\<alpha> Q'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* CsP\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "assume \"\\<Psi> \\<rhd> Cases CsQ \\<longmapsto>\\<alpha> \\<prec> Q'\" and \"bn \\<alpha> \\<sharp>* CsP\" and \"bn \\<alpha> \\<sharp>* \\<Psi>\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* CsP\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* CsP\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "thus \"\\<exists>P'. \\<Psi> \\<rhd> Cases CsP \\<longmapsto>\\<alpha> \\<prec> P' \\<and> (\\<Psi>, P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* CsP\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cCase \\<phi> Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (\\<phi>, Q) mem CsQ\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded Q\n  bn \\<alpha> \\<sharp>* CsP\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>(\\<phi>, Q) mem CsQ\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, Q) mem CsQ", "obtain P where \"(\\<phi>, P) mem CsP\" and \"guarded P\" and \"(\\<Psi>, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<phi>, Q) mem CsQ\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>(\\<phi>, P) mem CsP; guarded P;\n         (\\<Psi>, P, Q) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis PRelQ)"], ["proof (state)\nthis:\n  (\\<phi>, P) mem CsP\n  guarded P\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* CsP\\<close> \\<open>(\\<phi>, P) mem CsP\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* CsP\n  (\\<phi>, P) mem CsP", "have \"bn \\<alpha> \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* CsP\n  (\\<phi>, P) mem CsP\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P", "by(auto dest: memFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "note \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  bn \\<alpha> \\<sharp>* P\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  bn \\<alpha> \\<sharp>* P\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from PTrans \\<open>(\\<phi>, P) mem CsP\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P", "have \"\\<Psi> \\<rhd> Cases CsP \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P'", "by(rule Case)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from P'RelQ' \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'", "have \"(\\<Psi>, P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P;\n        bn \\<alpha> \\<sharp>* CsP; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1:    \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "note \\<open>eqvt Rel'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\" and \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P &&&\n    x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)+"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q", "proof(induct rule: simIFresh[where C=\"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cSim \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* Q", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> Q'\\<close>  \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \n         \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "case(cOpen M xvec1 xvec2 y N Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> Q'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* Q\n  y \\<sharp> Q\n  xvec2 \\<sharp>* Q\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from \\<open>bn (M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>", "have \"xvec1 \\<sharp>* \\<Psi>\" and \"y \\<sharp> \\<Psi>\" and \"xvec2 \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. xvec1 \\<sharp>* \\<Psi> &&& y \\<sharp> \\<Psi> &&& xvec2 \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from \\<open>bn (M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P", "have \"xvec1 \\<sharp>* P\" and \"y \\<sharp> P\" and \"xvec2 \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. xvec1 \\<sharp>* P &&& y \\<sharp> P &&& xvec2 \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  xvec1 \\<sharp>* P\n  y \\<sharp> P\n  xvec2 \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from \\<open>x \\<sharp> (M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> y\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. (x \\<sharp> xvec1 &&& x \\<noteq> y) &&&\n    x \\<sharp> xvec2 &&& x \\<sharp> M", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> y\n  x \\<sharp> xvec2\n  x \\<sharp> M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> Q')\\<close> \n           \\<open>xvec1 \\<sharp>* \\<Psi>\\<close> \\<open>xvec2 \\<sharp>* \\<Psi>\\<close> \\<open>xvec1 \\<sharp>* P\\<close> \\<open>xvec2 \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  xvec2 \\<sharp>* P", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'\" and P'RelQ': \"(\\<Psi>, P', ([(x, y)] \\<bullet> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  xvec2 \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                         xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n           N)\\<rangle> \\<prec> P';\n         (\\<Psi>, P', [(x, y)] \\<bullet> Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'\n  (\\<Psi>, P', [(x, y)] \\<bullet> Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from \\<open>y \\<in> supp N\\<close> \\<open>x \\<noteq> y\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> supp N\n  x \\<noteq> y", "have \"x \\<in> supp([(x, y)] \\<bullet> N)\""], ["proof (prove)\nusing this:\n  y \\<in> supp N\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<in> supp ([(x, y)] \\<bullet> N)", "by(drule_tac pt_set_bij2[OF pt_name_inst, OF at_name_inst, where pi=\"[(x, y)]\"]) (simp add: eqvts calc_atm)"], ["proof (state)\nthis:\n  x \\<in> supp ([(x, y)] \\<bullet> N)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "with PTrans \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  x \\<in> supp ([(x, y)] \\<bullet> N)", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@x#xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  x \\<in> supp ([(x, y)] \\<bullet> N)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  x #\n                                  xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                    N)\\<rangle> \\<prec> P'", "by(rule_tac Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                x #\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "hence \"([(x, y)] \\<bullet> \\<Psi>) \\<rhd> ([(x, y)] \\<bullet> \\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto>([(x, y)] \\<bullet> (M\\<lparr>\\<nu>*(xvec1@x#xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                x #\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> [(x, y)] \\<bullet>\n                  M\\<lparr>\\<nu>*(xvec1 @\n                                  x #\n                                  xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                    N)\\<rangle> \\<prec> P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> [(x, y)] \\<bullet>\n                M\\<lparr>\\<nu>*(xvec1 @\n                                x #\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> P\\<close> \\<open>x \\<sharp> M\\<close> \\<open>y \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>y \\<sharp> xvec2\\<close> \\<open>x \\<noteq> y\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  y \\<sharp> P\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  y \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec2\n  x \\<noteq> y\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> [(x, y)] \\<bullet>\n                M\\<lparr>\\<nu>*(xvec1 @\n                                x #\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  y \\<sharp> P\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  y \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec2\n  x \\<noteq> y\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> [(x, y)] \\<bullet>\n                M\\<lparr>\\<nu>*(xvec1 @\n                                x #\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n  y)] \\<bullet>\nP'", "by(simp add: eqvts calc_atm alphaRes)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\ny)] \\<bullet>\n                                    P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\ny)] \\<bullet>\n                                    P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from P'RelQ' \\<open>Rel \\<subseteq> Rel'\\<close> \\<open>eqvt Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', [(x, y)] \\<bullet> Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  eqvt Rel'", "have \"([(y, x)] \\<bullet> \\<Psi>, [(y, x)] \\<bullet> P', [(y, x)] \\<bullet> [(x, y)] \\<bullet> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', [(x, y)] \\<bullet> Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> \\<Psi>, [(y, x)] \\<bullet> P',\n     [(y, x)] \\<bullet> [(x, y)] \\<bullet> Q')\n    \\<in> Rel'", "by(force simp add: eqvt_def)"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> \\<Psi>, [(y, x)] \\<bullet> P',\n   [(y, x)] \\<bullet> [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  ([(y, x)] \\<bullet> \\<Psi>, [(y, x)] \\<bullet> P',\n   [(y, x)] \\<bullet> [(x, y)] \\<bullet> Q')\n  \\<in> Rel'", "have \"(\\<Psi>, [(x, y)] \\<bullet> P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  ([(y, x)] \\<bullet> \\<Psi>, [(y, x)] \\<bullet> P',\n   [(y, x)] \\<bullet> [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, [(x, y)] \\<bullet> P', Q') \\<in> Rel'", "by(simp add: name_swap)"], ["proof (state)\nthis:\n  (\\<Psi>, [(x, y)] \\<bullet> P', Q') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel'\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\ny)] \\<bullet>\n                                    P'\n  (\\<Psi>, [(x, y)] \\<bullet> P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\ny)] \\<bullet>\n                                    P'\n  (\\<Psi>, [(x, y)] \\<bullet> P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                     y #\n                                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                   y #\n                                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P", "obtain P' where PTrans: \"\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from PTrans \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "from P'RelQ' \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel'] \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q", "proof(induct xvec)"], ["proof (state)\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "case Nil"], ["proof (state)\nthis:\n  [] \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from PSimQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*[]\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*[]\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "case(Cons x xvec)"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from \\<open>(x#xvec) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (x # xvec) \\<sharp>* \\<Psi>", "have \"x \\<sharp> \\<Psi>\" and \"xvec \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> &&& xvec \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q", "by(rule Cons)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "have \"Rel \\<subseteq> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Rel \\<subseteq> Rel", "by simp"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)", "using C1"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n  \\<lbrakk>(?\\<Psi>', ?R, ?S) \\<in> Rel; ?y \\<sharp> ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>', \\<lparr>\\<nu>?y\\<rparr>?R,\n                     \\<lparr>\\<nu>?y\\<rparr>?S)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)", "by(rule resPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                                 xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                               xvec)\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>*(x #\n xvec)\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PRelQ: \"\\<And>A\\<^sub>R \\<Psi>\\<^sub>R. \\<lbrakk>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>; A\\<^sub>R \\<sharp>* \\<Psi>; A\\<^sub>R \\<sharp>* P; A\\<^sub>R \\<sharp>* Q\\<rbrakk> \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\" \n  and     Eqvt: \"eqvt Rel\"\n  and     Eqvt': \"eqvt Rel'\"\n\n  and     StatImp: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> insertAssertion (extractFrame T) \\<Psi>' \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame S) \\<Psi>'\"\n  and     Sim:     \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>[Rel] T\"\n  and     Ext: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n\n\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "using Eqvt'"], ["proof (prove)\nusing this:\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cSim \\<alpha> QR)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> R)\\<close> \\<open>bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&&\n    bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> QR\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', QR) \\<in> Rel'", "proof(induct rule: parCases[where C = \"(P, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar1 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q", "by(blast intro: Sim PRelQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "obtain P' where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\"\n                           and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans QTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(blast dest: freeFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans \\<open>bn \\<alpha> \\<sharp>* R\\<close> FrR  \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R", "by(rule_tac Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'", "have \"(\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>,\n                              R)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<alpha>\" and \"A\\<^sub>P \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>P \\<sharp>* \\<alpha> &&& A\\<^sub>P \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrP FrQ \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\" and \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P &&&\n    bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q", "by(force dest: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>R \\<Psi>\\<^sub>R where FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\" and \"A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, \\<alpha>, R)\" and \"distinct A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R \\<Psi>\\<^sub>R.\n        \\<lbrakk>extractFrame R =\n                 \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>;\n         A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P,\n                              \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, \\<alpha>, R);\n         distinct A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R)\n  distinct A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "then"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R)\n  distinct A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>R \\<sharp>* \\<alpha>\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R)\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* P) &&&\n     A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* A\\<^sub>Q) &&&\n    (A\\<^sub>R \\<sharp>* A\\<^sub>P &&&\n     A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&&\n    A\\<^sub>R \\<sharp>* \\<alpha> &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  FrR \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym FrameStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"(insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F (insertAssertion (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R))\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame Q)\n     (\\<Psi> \\<otimes>\n      \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)", "by(blast intro: PRelQ StatImp)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "with FrP FrQ \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>R) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>R) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P) \\<otimes>\n         \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym frameIntAssociativity[THEN FrameStatEqSym])"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>\n            \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> FrR \\<open>distinct A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "by(force intro: transferFrame)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close>  \\<open>A\\<^sub>P \\<sharp>* R\\<close>  \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> FrP"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> (P \\<parallel> R')\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'", "by(force intro: Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>R' \\<Psi>\\<^sub>R' where \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac freshFrame[where C=\"(\\<Psi>, P, Q)\"]) auto"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha>  \\<sharp>* P\\<close> \\<open>bn \\<alpha>  \\<sharp>* Q\\<close> \\<open>bn \\<alpha>  \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "obtain p \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set(bn \\<alpha>) \\<times> set(bn(p \\<bullet> \\<alpha>))\" and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                           and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* R\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* P\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* Q\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* R\"\n                           and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. (\\<And>p \\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>set p\n                 \\<subseteq> set (bn \\<alpha>) \\<times>\n                             set (bn (p \\<bullet> \\<alpha>));\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* R;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* P;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* Q;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* R; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q, R)\" and C'=\"(\\<Psi>, P, Q, R)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* R\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* R\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* P\\<close> S"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* Q", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* Q\\<close> S"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* Q\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* Q\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"(p \\<bullet> extractFrame R) = p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. p \\<bullet> extractFrame R =\n    p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* R\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* R\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"extractFrame R = \\<langle>(p \\<bullet> A\\<^sub>R), (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* R\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* R\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame R =\n    \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P, Q) \\<in> Rel", "by(rule_tac PRelQ)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P,\n     Q)\n    \\<in> Rel", "by(rule Ext)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P, Q)\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P, Q)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P, Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P, Q) \\<in> Rel", "by(blast intro: C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P, Q) \\<in> Rel", "have \"(\\<Psi>, P \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  extractFrame R' = \\<langle>A\\<^sub>R'__, \\<Psi>\\<^sub>R'__\\<rangle>\n  A\\<^sub>R'__ \\<sharp>* \\<Psi>\n  A\\<^sub>R'__ \\<sharp>* P\n  A\\<^sub>R'__ \\<sharp>* Q\n  (\\<Psi>, P \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  extractFrame R' = \\<langle>A\\<^sub>R'__, \\<Psi>\\<^sub>R'__\\<rangle>\n  A\\<^sub>R'__ \\<sharp>* \\<Psi>\n  A\\<^sub>R'__ \\<sharp>* P\n  A\\<^sub>R'__ \\<sharp>* Q\n  (\\<Psi>, P \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm1 \\<Psi>\\<^sub>R M N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K xvec R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N, K, R, P, xvec)\" and \"distinct A\\<^sub>P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                              M, N, K, R, P, xvec);\n         distinct A\\<^sub>P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N,\n                       K, R, P, xvec)\n  distinct A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* M\" and \"A\\<^sub>P \\<sharp>* R\"\n      and \"A\\<^sub>P \\<sharp>* N\" and \"A\\<^sub>P \\<sharp>* K\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P \\<sharp>* P\" and \"A\\<^sub>P \\<sharp>* xvec\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N,\n                       K, R, P, xvec)\n  distinct A\\<^sub>P\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n     A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&&\n     A\\<^sub>P \\<sharp>* M &&& A\\<^sub>P \\<sharp>* R) &&&\n    (A\\<^sub>P \\<sharp>* N &&& A\\<^sub>P \\<sharp>* K) &&&\n    A\\<^sub>P \\<sharp>* A\\<^sub>R &&&\n    A\\<^sub>P \\<sharp>* P &&& A\\<^sub>P \\<sharp>* xvec", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* xvec\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\" and RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\"\n      and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow>K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrP FrR \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"xvec \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R &&&\n     A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&& xvec \\<sharp>* \\<Psi>\\<^sub>P", "by(fastforce dest!: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>\n                  \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close>\n                  \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>distinct xvec\\<close> \\<open>xvec \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  distinct xvec\n  xvec \\<sharp>* M", "obtain p \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                         and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\"\n                         and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\" and \"(p \\<bullet> xvec) \\<sharp>* K\" and \"(p \\<bullet> xvec) \\<sharp>* R\"\n                         and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\" and \"(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>P\"\n                         and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* N\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  distinct xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* Q;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q;\n         (p \\<bullet> xvec) \\<sharp>* K; (p \\<bullet> xvec) \\<sharp>* R;\n         (p \\<bullet> xvec) \\<sharp>* P;\n         (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P;\n         (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>P;\n         A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>P, A\\<^sub>Q, \\<Psi>\\<^sub>P)\" and C'=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>P, A\\<^sub>Q, \\<Psi>\\<^sub>P)\" in expandFrame) \n      (assumption | simp)+"], ["proof (state)\nthis:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* Q", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* R", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* R", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* K", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* K", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>P \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* (p \\<bullet> M)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (p \\<bullet> M)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from QTrans S \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(rule_tac inputPermFrameSubject) (assumption | auto simp add: fresh_star_def)+"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'", "have QTrans: \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n       M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"(p \\<bullet> extractFrame R) = p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. p \\<bullet> extractFrame R =\n    p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have FrR: \"extractFrame R = \\<langle>(p \\<bullet> A\\<^sub>R), (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame R =\n    \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note RTrans FrR"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "have \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto>[Rel] Q", "by(metis Sim PRelQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto>(p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 (p \\<bullet>\n                  \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n                    M)\\<lparr>N\\<rparr> \\<prec> P';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans QTrans \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N", "have \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* Q'", "by(blast dest: inputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note PTrans"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from MeqK"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R)) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. (p \\<bullet>\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                   M) \\<leftrightarrow> (p \\<bullet> K)", "by(rule chanEqClosed)"], ["proof (state)\nthis:\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)", "have MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "have \"\\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                         (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                        \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P) \\<otimes>\n         (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "from FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "have \"(insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))) \\<hookrightarrow>\\<^sub>F (insertAssertion (extractFrame P) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)))\""], ["proof (prove)\nusing this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame Q)\n     (\\<Psi> \\<otimes>\n      (p \\<bullet>\n       \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n             (extractFrame P)\n             (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))", "by(metis PRelQ StatImp)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "with FrP FrQ \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> S"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                         (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                         (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n            (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n           \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P) \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "by(rule_tac FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note FrP FrQ \\<open>distinct A\\<^sub>P\\<close>"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>distinct A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  distinct A\\<^sub>R", "have \"distinct(p \\<bullet> A\\<^sub>R)\""], ["proof (prove)\nusing this:\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. distinct (p \\<bullet> A\\<^sub>R)", "by simp"], ["proof (state)\nthis:\n  distinct (p \\<bullet> A\\<^sub>R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  distinct (p \\<bullet> A\\<^sub>R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\\<close>  \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* R\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* K\\<close>\n                \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* (p \\<bullet> M)\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close>"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R", "obtain K' where \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto>K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\" and \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\" and \"(p \\<bullet> A\\<^sub>R) \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>P \\<otimes>\n         (p \\<bullet>\n          \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K';\n         (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac comm1Aux)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with PTrans FrP"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'", "using FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* R\\<close>\n    \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* (p \\<bullet> M)\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* K'\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* (p \\<bullet> M)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* A\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ'"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P', Q') \\<in> Rel", "have  \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n     Q')\n    \\<in> Rel", "by(rule Ext)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm2 \\<Psi>\\<^sub>R M xvec N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N, K, R, P, xvec)\" and \"distinct A\\<^sub>P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                              M, N, K, R, P, xvec);\n         distinct A\\<^sub>P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N,\n                       K, R, P, xvec)\n  distinct A\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* M\" and \"A\\<^sub>P \\<sharp>* R\"\n      and \"A\\<^sub>P \\<sharp>* N\" \"A\\<^sub>P \\<sharp>* K\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P \\<sharp>* P\"  and \"A\\<^sub>P \\<sharp>* xvec\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, M, N,\n                       K, R, P, xvec)\n  distinct A\\<^sub>P\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n     A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&& A\\<^sub>P \\<sharp>* M) &&&\n    (A\\<^sub>P \\<sharp>* R &&&\n     A\\<^sub>P \\<sharp>* N &&& A\\<^sub>P \\<sharp>* K) &&&\n    A\\<^sub>P \\<sharp>* A\\<^sub>R &&&\n    A\\<^sub>P \\<sharp>* P &&& A\\<^sub>P \\<sharp>* xvec", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrP FrR \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"xvec \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* xvec\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R &&&\n     A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&& xvec \\<sharp>* \\<Psi>\\<^sub>P", "by(fastforce dest!: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrR \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q", "by(metis PRelQ Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>[Rel] Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans QTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(blast dest: outputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note PTrans \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P) \\<otimes>\n         \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"(insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F (insertAssertion (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R))\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame Q)\n     (\\<Psi> \\<otimes>\n      \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)", "by(metis PRelQ StatImp)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "with FrP FrQ \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>R) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>R) \\<otimes>\n                  \\<Psi>\\<^sub>P\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P) \\<otimes>\n       \\<Psi>\\<^sub>R\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R) \\<otimes>\n                \\<Psi>\\<^sub>P\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "by(rule_tac FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note FrP FrQ \\<open>distinct A\\<^sub>P\\<close> \\<open>distinct A\\<^sub>R\\<close>"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* A\\<^sub>P &&& A\\<^sub>R \\<sharp>* A\\<^sub>Q", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close>  \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>\n                  \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close>"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M", "obtain K' where \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> R'\" and \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\" and \"A\\<^sub>R \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P, (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>P \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K';\n         A\\<^sub>R \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac comm2Aux) assumption+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with PTrans FrP"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>\n      \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> and \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* K'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'", "by(force intro: Comm2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* K'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* K'", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where  ReqR': \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" \n                         and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n         A\\<^sub>R' \\<sharp>* Q'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P', Q')\" and C'=\"\\<Psi>\" in expandFrame) auto"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ'"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel", "by(rule Ext)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with ReqR'"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', QR) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "no_notation relcomp (infixr \"O\" 75)"], ["", "lemma bangPres:\n  fixes \\<Psi>   :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"eqvt Rel'\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>[Rel] T\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' S T. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel'; (\\<Psi>', U, O) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel'\"\n  and     C1: \"\\<And>\\<Psi> S T U. \\<lbrakk>(\\<Psi>, S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>, U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel'\"\n  and     Der: \"\\<And>\\<Psi>' S \\<alpha> S' T. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; (\\<Psi>', S, T) \\<in> Rel; bn \\<alpha> \\<sharp>* \\<Psi>'; bn \\<alpha> \\<sharp>* S; bn \\<alpha> \\<sharp>* T; guarded T; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow>\n                                      \\<exists>T' U O.  \\<Psi>' \\<rhd> !T \\<longmapsto>\\<alpha> \\<prec> T' \\<and> (\\<Psi>', S', U \\<parallel> !S) \\<in> Rel \\<and> (\\<Psi>', T', O \\<parallel> !T) \\<in> Rel \\<and>\n                                                (\\<Psi>', U, O) \\<in> Rel \\<and> ((supp U)::name set) \\<subseteq> supp S' \\<and> \n                                                 ((supp O)::name set) \\<subseteq> supp T'\"\n\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>[Rel'] R \\<parallel> !Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>[Rel'] R \\<parallel> !Q", "using \\<open>eqvt Rel'\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>[Rel'] R \\<parallel> !Q", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cSim \\<alpha> RQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\\<close> \\<open>bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* (!Q)\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\n\ngoal (1 subgoal):\n 1. (bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* !Q) &&&\n    bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto>\\<alpha> \\<prec> RQ'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* !Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', RQ') \\<in> Rel'", "proof(induct rule: parCases[where C=P])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar1 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<alpha> \\<prec> (R' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar2 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>\\<alpha> \\<prec> Q'\" and FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q' &&&\n    extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R", "by(force dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>\\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>guarded P\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  guarded P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R", "obtain P' S T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>\\<alpha> \\<prec> P'\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\"\n                    and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\"\n                    and suppT: \"((supp T)::name set) \\<subseteq> supp P'\" and suppS: \"((supp S)::name set) \\<subseteq> supp Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  guarded P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<And>P' T S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel;\n         supp T \\<subseteq> supp P'; supp S \\<subseteq> supp Q'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac cSym) (auto dest: Der cExt)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<alpha> \\<prec> (R \\<parallel> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "{"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* (!Q)\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> PTrans QTrans \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(force dest: freeFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\\<close> FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> suppT"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* P\n  supp T \\<subseteq> supp P'", "have \"(\\<Psi>, R \\<parallel> P', R \\<parallel> (T \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* P\n  supp T \\<subseteq> supp P'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> P', R \\<parallel> (T \\<parallel> !P)) \\<in> Rel", "by(rule_tac FrameParPres) (auto simp add: fresh_star_def fresh_def psi.supp)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> (T \\<parallel> !P)) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R \\<parallel> P', (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> (T \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> P', R \\<parallel> T \\<parallel> !P) \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\\<close> \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel", "by(blast intro: ParPres Trans)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R \\<sharp>* (!Q)\\<close> suppT suppS"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* !Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel", "have \"(\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* !Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel", "by(rule_tac FrameParPres) (auto simp add: fresh_star_def fresh_def psi.supp)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R \\<parallel> Q', (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel", "have \"(\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'", "by(blast intro: cSym Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "}"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R \\<parallel> P'\n  (\\<Psi>, R \\<parallel> P', R \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm1 \\<Psi>\\<^sub>Q M N R' A\\<^sub>R \\<Psi>\\<^sub>R K xvec Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* P\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\" and FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R' &&&\n    extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec", "have \"xvec \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* \\<Psi>\\<^sub>R", "by(force dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>\\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close> \\<open>guarded P\\<close> \\<open>xvec \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* !Q\n  guarded P\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<Psi>\\<^sub>R", "obtain P' S T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\"\n                    and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\"\n                    and suppT: \"((supp T)::name set) \\<subseteq> supp P'\" and suppS: \"((supp S)::name set) \\<subseteq> supp Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  (\\<Psi>, P, Q) \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* !Q\n  guarded P\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<And>P' T S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel;\n         supp T \\<subseteq> supp P'; supp S \\<subseteq> supp Q'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac cSym) (fastforce dest: Der intro: cExt)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\nP'", "using PTrans \\<open>\\<Psi>\\<^sub>Q = SBottom'\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi>\\<^sub>Q = \\<one>\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\nP'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* (!Q)\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> PTrans QTrans \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(force dest: outputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* (!Q)\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\"\n                         and \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* Q'\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n         A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, P', Q, Q')\" and C'=\\<Psi> in expandFrame) auto"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "{"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', T \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P',\n     T \\<parallel> !P)\n    \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P',\n   T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P',\n   T \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', T \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P',\n   T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', T \\<parallel> !P) \\<in> Rel", "by(metis Associativity StatEq compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', T \\<parallel> !P) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> suppT"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P\n  supp T \\<subseteq> supp P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', T \\<parallel> !P) \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> P', R' \\<parallel> (T \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P\n  supp T \\<subseteq> supp P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> P', R' \\<parallel> (T \\<parallel> !P)) \\<in> Rel", "by(rule_tac FrameParPres) (auto simp add: fresh_star_def fresh_def psi.supp)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> P', R' \\<parallel> (T \\<parallel> !P)) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R' \\<parallel> P', (R' \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> P', R' \\<parallel> (T \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> P', R' \\<parallel> T \\<parallel> !P) \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> P', R' \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (\\<Psi>, R' \\<parallel> P', R' \\<parallel> T \\<parallel> !P) \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> P'), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (\\<Psi>, R' \\<parallel> P', R' \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P)\n    \\<in> Rel", "by(metis ResPres psiFreshVec ScopeExt Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T)) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T)) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n    \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\\<close> \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', S \\<parallel> !Q) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel", "by(blast intro: ParPres Trans)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q',\n     T \\<parallel> !Q)\n    \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q',\n   T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q',\n   T \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', T \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q',\n   T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', T \\<parallel> !Q) \\<in> Rel", "by(metis Associativity StatEq compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> suppT suppS"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', T \\<parallel> !Q) \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp Q'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', T \\<parallel> !Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (T \\<parallel> !Q)) \\<in> Rel", "by(rule_tac FrameParPres) (auto simp add: fresh_star_def fresh_def psi.supp)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> T) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (T \\<parallel> !Q)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> T \\<parallel> !Q) \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> T \\<parallel> !Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> T \\<parallel> !Q) \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q'), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T)) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> T \\<parallel> !Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n    \\<in> Rel", "by(metis ResPres psiFreshVec ScopeExt Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> P'), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(blast intro: cSym Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "}"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    P'\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    P'\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N R' A\\<^sub>R \\<Psi>\\<^sub>R K Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* P\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\" and FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R' &&&\n    extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "obtain p \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\"\n                                and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\"\n                                and \"A\\<^sub>R' \\<sharp>* N\" and \"A\\<^sub>R' \\<sharp>* R'\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\"\n                                and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"xvec \\<sharp>* A\\<^sub>R'\" and \"(p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\"\n                                and \"distinctPerm p\" and \"(p \\<bullet> xvec) \\<sharp>* R'\" and \"(p \\<bullet> xvec) \\<sharp>* N\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* R'; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; (p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* Q;\n         xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n         distinctPerm p; (p \\<bullet> xvec) \\<sharp>* R';\n         (p \\<bullet> xvec) \\<sharp>* N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* (!Q)\\<close>\n            \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* R'; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; (p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* Q;\n         xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n         distinctPerm p; (p \\<bullet> xvec) \\<sharp>* R';\n         (p \\<bullet> xvec) \\<sharp>* N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q)\" and C'=\"(\\<Psi>, P, Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* R'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* Q\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  distinctPerm p\n  (p \\<bullet> xvec) \\<sharp>* R'\n  (p \\<bullet> xvec) \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans S \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                    xvec)\\<rparr>\\<langle>(p \\<bullet>\n     N)\\<rangle> \\<prec> p \\<bullet> R'", "apply(simp add: residualInject)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Psi> \\<otimes>\n             \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> ROut M\n              (\\<lparr>\\<nu>*xvec\\<rparr>N \\<prec>' R');\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     (p \\<bullet> xvec) \\<sharp>* N;\n     (p \\<bullet> xvec) \\<sharp>* R'\\<rbrakk>\n    \\<Longrightarrow> \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> ROut M\n                       (\\<lparr>\\<nu>*p \\<bullet>\nxvec\\<rparr>(p \\<bullet> N) \\<prec>' (p \\<bullet> R'))", "by(subst boundOutputChainAlpha''[symmetric]) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans S \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> p \\<bullet> Q'", "using \\<open>distinctPerm p\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  distinctPerm p\n  xvec \\<sharp>* !Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> p \\<bullet> Q'", "by(rule_tac inputAlpha) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'", "obtain P' S T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\"\n                    and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\"\n                    and suppT: \"((supp T)::name set) \\<subseteq> supp P'\" and suppS: \"((supp S)::name set) \\<subseteq> supp(p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P' T S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n                            N)\\<rparr> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', S \\<parallel> !Q)\n         \\<in> Rel;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel;\n         supp T \\<subseteq> supp P';\n         supp S \\<subseteq> supp (p \\<bullet> Q')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac cSym) (auto dest: Der cExt)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', S \\<parallel> !Q)\n  \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp (p \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'", "using PTrans FrR \\<open>\\<Psi>\\<^sub>Q = SBottom'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi>\\<^sub>Q = \\<one>\n  (p \\<bullet> xvec) \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* N\\<close> S \\<open>xvec \\<sharp>* A\\<^sub>R'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\\<close> PTrans QTrans \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  distinctPerm p", "have \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* Q'", "apply -"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n     A\\<^sub>R' \\<sharp>* N;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n                N)\\<rparr> \\<prec> P';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* P'\n 2. \\<lbrakk>A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n     A\\<^sub>R' \\<sharp>* N;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n                N)\\<rparr> \\<prec> P';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* Q'", "apply(drule_tac inputFreshChainDerivative, auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n     A\\<^sub>R' \\<sharp>* N;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n 2. \\<lbrakk>A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n     A\\<^sub>R' \\<sharp>* N;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n                N)\\<rparr> \\<prec> P';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* Q'", "apply(subst pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst, symmetric, of _ _ p], simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n     A\\<^sub>R' \\<sharp>* N;\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n                N)\\<rparr> \\<prec> P';\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* Q'", "by(force dest: inputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> PTrans \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  distinctPerm p", "have \"(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P'\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')", "apply(drule_tac inputFreshChainDerivative, simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>xvec \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* N;\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> xvec \\<sharp>* (p \\<bullet> N)\n 2. \\<lbrakk>xvec \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* N;\n     distinctPerm p; xvec \\<sharp>* P'\\<rbrakk>\n    \\<Longrightarrow> (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')", "apply(subst pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst, symmetric, of _ _ p], simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>xvec \\<sharp>* P; (p \\<bullet> xvec) \\<sharp>* N;\n     distinctPerm p; xvec \\<sharp>* P'\\<rbrakk>\n    \\<Longrightarrow> (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')", "by(subst pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst, symmetric, of _ _ p], simp)"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "{"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R), (p \\<bullet> P'), p \\<bullet> (T \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> P',\n     p \\<bullet> T \\<parallel> !P)\n    \\<in> Rel", "by(rule Closed)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> P',\n   p \\<bullet> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> P',\n   p \\<bullet> T \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> P',\n   p \\<bullet> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), p \\<bullet> P',\n     (p \\<bullet> T) \\<parallel> !P)\n    \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), p \\<bullet> P',\n   (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), p \\<bullet> P',\n   (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n     p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P)\n    \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', (p \\<bullet> P'), (p \\<bullet> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> P', (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n     (p \\<bullet> T) \\<parallel> !P)\n    \\<in> Rel", "by(metis Associativity StatEq compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n   (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* A\\<^sub>R'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\\<close> S \\<open>distinctPerm p\\<close> suppT"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  supp T \\<subseteq> supp P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n   (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> (p \\<bullet> P'), R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  supp T \\<subseteq> supp P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n   (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n     R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\n    \\<in> Rel", "apply(rule_tac FrameParPres)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; xvec \\<sharp>* A\\<^sub>R';\n     (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> (\\<Psi> \\<otimes> ?\\<Psi>\\<^sub>U10, p \\<bullet> P',\n                       (p \\<bullet> T) \\<parallel> !P)\n                      \\<in> Rel\n 2. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; xvec \\<sharp>* A\\<^sub>R';\n     (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> extractFrame R' =\n                      \\<langle>?A\\<^sub>U10, ?\\<Psi>\\<^sub>U10\\<rangle>\n 3. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; xvec \\<sharp>* A\\<^sub>R';\n     (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U10 \\<sharp>* \\<Psi>\n 4. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; xvec \\<sharp>* A\\<^sub>R';\n     (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U10 \\<sharp>* (p \\<bullet> P')\n 5. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; xvec \\<sharp>* A\\<^sub>R';\n     (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U10 \\<sharp>* ((p \\<bullet> T) \\<parallel>\n        !P)", "apply(assumption | simp add: freshChainSimps)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* xvec;\n     A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p; supp T \\<subseteq> supp P';\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> P',\n      (p \\<bullet> T) \\<parallel> !P)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* T", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n   R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R' \\<parallel> (p \\<bullet> P'), (R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n   R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n     R' \\<parallel> (p \\<bullet> T) \\<parallel> !P)\n    \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n   R' \\<parallel> (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n   R' \\<parallel> (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> P')), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> P'),\n   R' \\<parallel> (p \\<bullet> T) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> P'),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !P)\n    \\<in> Rel", "by(metis ResPres psiFreshVec ScopeExt Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> P'),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> P'), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> P'),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !P)\n    \\<in> Rel", "using \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> P'),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (p \\<bullet> xvec) \\<sharp>* R'\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !P)\n    \\<in> Rel", "apply(erule_tac rev_mp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(p \\<bullet> xvec) \\<sharp>* R';\n     (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P');\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p\\<rbrakk>\n    \\<Longrightarrow> (\\<Psi>,\n                       \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n           (p \\<bullet> P'),\n                       (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n            (p \\<bullet> T)) \\<parallel>\n                       !P)\n                      \\<in> Rel \\<longrightarrow>\n                      (\\<Psi>,\n                       \\<lparr>\\<nu>*p \\<bullet>\n                                     xvec\\<rparr>(p \\<bullet>\n            R') \\<parallel>\n           P',\n                       (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n            (p \\<bullet> T)) \\<parallel>\n                       !P)\n                      \\<in> Rel", "by(subst resChainAlpha[of p]) auto"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T))) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T))) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !Q)\n    \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel\\<close> \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', S \\<parallel> !Q)\n  \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, (p \\<bullet> Q'), T \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', S \\<parallel> !Q)\n  \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', T \\<parallel> !Q)\n    \\<in> Rel", "by(blast intro: ParPres Trans)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R), p \\<bullet> p \\<bullet> Q', p \\<bullet> (T \\<parallel> !Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> Q', T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R,\n     p \\<bullet> p \\<bullet> Q', p \\<bullet> T \\<parallel> !Q)\n    \\<in> Rel", "by(rule Closed)"], ["proof (state)\nthis:\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with S \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> T \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), Q', (p \\<bullet> T) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  distinctPerm p\n  (p \\<bullet> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> T \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), Q',\n     (p \\<bullet> T) \\<parallel> !Q)\n    \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), Q',\n   (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', Q', (p \\<bullet> T) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R), Q',\n   (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', Q',\n     (p \\<bullet> T) \\<parallel> !Q)\n    \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', Q',\n   (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', Q',\n   (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', Q',\n   (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n    \\<in> Rel", "by(metis Associativity StatEq compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> suppT suppS \\<open>xvec \\<sharp>* A\\<^sub>R'\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp (p \\<bullet> Q')\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> ((p \\<bullet> T) \\<parallel> !Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* Q\n  supp T \\<subseteq> supp P'\n  supp S \\<subseteq> supp (p \\<bullet> Q')\n  xvec \\<sharp>* A\\<^sub>R'\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> ((p \\<bullet> T) \\<parallel> !Q))\n    \\<in> Rel", "apply(rule_tac FrameParPres)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> (\\<Psi> \\<otimes> ?\\<Psi>\\<^sub>U12, Q',\n                       (p \\<bullet> T) \\<parallel> !Q)\n                      \\<in> Rel\n 2. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> extractFrame R' =\n                      \\<langle>?A\\<^sub>U12, ?\\<Psi>\\<^sub>U12\\<rangle>\n 3. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U12 \\<sharp>* \\<Psi>\n 4. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U12 \\<sharp>* Q'\n 5. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     xvec \\<sharp>* A\\<^sub>R'; (p \\<bullet> xvec) \\<sharp>* A\\<^sub>R';\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>U12 \\<sharp>* ((p \\<bullet> T) \\<parallel>\n        !Q)", "apply(assumption | simp)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* (p \\<bullet> T)", "apply(simp add: freshChainSimps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>extractFrame R' =\n             \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n     A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P';\n     A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* Q;\n     supp T \\<subseteq> supp P'; supp S \\<subseteq> supp (p \\<bullet> Q');\n     A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec);\n     set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n     distinctPerm p;\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', Q', (p \\<bullet> T) \\<parallel> !Q)\n     \\<in> Rel\\<rbrakk>\n    \\<Longrightarrow> A\\<^sub>R' \\<sharp>* T", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> T) \\<parallel> !Q))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> (p \\<bullet> T)) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> T) \\<parallel> !Q))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> (p \\<bullet> T) \\<parallel> !Q)\n    \\<in> Rel", "by(blast intro: Assoc Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* (!Q)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q'), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T))) \\<parallel> !Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* !Q\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> T) \\<parallel> !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n     !Q)\n    \\<in> Rel", "by(metis ResPres psiFreshVec ScopeExt Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> P'), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q',\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T)) \\<parallel>\n   !Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(blast intro: cSym Compose)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "}"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* P; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel> P'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*p \\<bullet> xvec\\<rparr>(p \\<bullet> R') \\<parallel> P',\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', RQ') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "notation relcomp (infixr \"O\" 75)"], ["", "end"], ["", "end"]]}