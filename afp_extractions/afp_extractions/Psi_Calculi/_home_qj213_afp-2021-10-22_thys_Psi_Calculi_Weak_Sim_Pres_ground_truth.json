{"file_name": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi/Weak_Sim_Pres.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi", "problem_names": ["lemma weakInputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>Tvec \\<Psi>'. length xvec = length Tvec \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto><Rel> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q\"", "lemma weakOutputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<Psi>'. (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto><Rel> M\\<langle>N\\<rangle>.Q\"", "lemma resTauCases[consumes 3, case_names cRes]:\n  fixes \\<Psi>    :: 'b\n  and   x    :: name\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   P'   :: \"('a, 'b, 'c) psi\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<tau> \\<prec> P'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> P'\"\n  and     rScope:  \"\\<And>P'. \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P'\\<rbrakk> \\<Longrightarrow> Prop (\\<lparr>\\<nu>x\\<rparr>P')\"\n\n  shows \"Prop P'\"", "lemma weakResPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1: \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q\"", "lemma weakResChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S yvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; yvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*yvec\\<rparr>R, \\<lparr>\\<nu>*yvec\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\"", "lemma parTauCases[consumes 1, case_names cPar1 cPar2 cComm1 cComm2]:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   R :: \"('a, 'b, 'c) psi\"\n  and   C :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> R\"\n  and     rPar1: \"\\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q. \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P';  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n                       A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* C\\<rbrakk> \\<Longrightarrow> Prop (P' \\<parallel> Q)\"\n  and     rPar2: \"\\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P. \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n                       A\\<^sub>P \\<sharp>* \\<Psi>; A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* C\\<rbrakk> \\<Longrightarrow> Prop (P \\<parallel> Q')\"\n  and     rComm1: \"\\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q' A\\<^sub>Q.\n           \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'; extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K; distinct xvec;\n            A\\<^sub>P \\<sharp>* \\<Psi>;  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;  A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* M;  A\\<^sub>P \\<sharp>* N;  A\\<^sub>P \\<sharp>* P';  A\\<^sub>P \\<sharp>* Q;  A\\<^sub>P \\<sharp>* xvec;  A\\<^sub>P \\<sharp>* Q'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;  A\\<^sub>P \\<sharp>* C; \n            A\\<^sub>Q \\<sharp>* \\<Psi>;  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* P;  A\\<^sub>Q \\<sharp>* K;  A\\<^sub>Q \\<sharp>* N;  A\\<^sub>Q \\<sharp>* P';  A\\<^sub>Q \\<sharp>* Q;  A\\<^sub>Q \\<sharp>* xvec;  A\\<^sub>Q \\<sharp>* Q'; A\\<^sub>Q \\<sharp>* C; \n            xvec \\<sharp>* \\<Psi>;  xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P;  xvec \\<sharp>* M;  xvec \\<sharp>* K; xvec \\<sharp>* Q;  xvec \\<sharp>* \\<Psi>\\<^sub>Q;  xvec \\<sharp>* C\\<rbrakk> \\<Longrightarrow>\n            Prop (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\"\n  and     rComm2: \"\\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q' A\\<^sub>Q.\n           \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'; extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K; distinct xvec;\n            A\\<^sub>P \\<sharp>* \\<Psi>;  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;  A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* M;  A\\<^sub>P \\<sharp>* N;  A\\<^sub>P \\<sharp>* P';  A\\<^sub>P \\<sharp>* Q;  A\\<^sub>P \\<sharp>* xvec;  A\\<^sub>P \\<sharp>* Q'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;  A\\<^sub>P \\<sharp>* C; \n            A\\<^sub>Q \\<sharp>* \\<Psi>;  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* P;  A\\<^sub>Q \\<sharp>* K;  A\\<^sub>Q \\<sharp>* N;  A\\<^sub>Q \\<sharp>* P';  A\\<^sub>Q \\<sharp>* Q;  A\\<^sub>Q \\<sharp>* xvec;  A\\<^sub>Q \\<sharp>* Q'; A\\<^sub>Q \\<sharp>* C; \n            xvec \\<sharp>* \\<Psi>;  xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P;  xvec \\<sharp>* M;  xvec \\<sharp>* K;  xvec \\<sharp>* Q;  xvec \\<sharp>* \\<Psi>\\<^sub>Q;  xvec \\<sharp>* C\\<rbrakk> \\<Longrightarrow>\n            Prop (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\"\n\n  shows \"Prop R\"", "lemma weakParPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PRelQ: \"\\<And>A\\<^sub>R \\<Psi>\\<^sub>R. \\<lbrakk>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>; A\\<^sub>R \\<sharp>* \\<Psi>; A\\<^sub>R \\<sharp>* P; A\\<^sub>R \\<sharp>* Q\\<rbrakk> \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\" \n  and     Eqvt:  \"eqvt Rel\"\n  and     Eqvt': \"eqvt Rel'\"\n\n  and     Sim:    \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     Sym:    \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     Ext:    \"\\<And>\\<Psi>' S T \\<Psi>'. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     StatImp: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<lessapprox><Rel> T\"\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R\"", "lemma weakSimBangPres:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"eqvt Rel''\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     Rel'Rel: \"Rel' \\<subseteq> Rel\"\n\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel''\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ResPres': \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Closed': \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel'\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     StatEq': \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel'\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Trans': \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; (\\<Psi>', T, U) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel'\"\n\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cExt': \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel'\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     cSym': \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel'\"\n\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     ParPres2: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> S, T \\<parallel> T) \\<in> Rel\"\n  and     ParPres': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel'\"\n\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     Assoc': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel'\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     ScopeExt': \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel'\"\n\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel''; (\\<Psi>', U, O) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel''\"\n\n  and     rBangActE: \"\\<And>\\<Psi>' S \\<alpha> S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; guarded S; bn \\<alpha> \\<sharp>* S; \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<longmapsto>\\<alpha> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauE: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<tau> \\<prec> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<parallel> S \\<longmapsto>\\<tau> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauI: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> S \\<parallel> S \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> !S \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<and> (\\<Psi>', T, S' \\<parallel> !S) \\<in> Rel'\"\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto><Rel''> R \\<parallel> !Q\""], "translations": [["", "lemma weakInputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>Tvec \\<Psi>'. length xvec = length Tvec \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto><Rel> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<leadsto><Rel> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q", "proof(induct rule: weakSimI2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "proof(induct rule: inputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "case(cInput K Tvec)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n  distinct xvec\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close> \\<open>set xvec \\<subseteq> supp N\\<close> \\<open>length xvec = length Tvec\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n  distinct xvec", "have \"\\<Psi> : (M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q) \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>(N[xvec::=Tvec])\\<rparr> \\<prec> (P[xvec::=Tvec])\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n  distinct xvec\n\ngoal (1 subgoal):\n 1. \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]", "by(rule_tac weakInput) auto"], ["proof (state)\nthis:\n  \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau>  P[xvec::=Tvec]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P[xvec::=Tvec]", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "from \\<open>length xvec = length Tvec\\<close>"], ["proof (chain)\npicking this:\n  length xvec = length Tvec", "have \"(\\<Psi> \\<otimes> \\<Psi>',  P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  length xvec = length Tvec\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel", "by(rule PRelQ)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q[xvec::=Tvec])\n                                \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P[xvec::=Tvec]\n  (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P[xvec::=Tvec] \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P[xvec::=Tvec]\n  (\\<Psi> \\<otimes> \\<Psi>', P[xvec::=Tvec], Q[xvec::=Tvec]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q[xvec::=Tvec]) \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q[xvec::=Tvec]) \\<in> Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q'", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakOutputPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<Psi>'. (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto><Rel> M\\<langle>N\\<rangle>.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<leadsto><Rel> M\\<langle>N\\<rangle>.Q", "proof(induct rule: weakSimI2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P;\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "proof(induct rule: outputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "case(cOutput K)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> : (M\\<langle>N\\<rangle>.Q) \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P", "by(rule weakOutput) auto"], ["proof (state)\nthis:\n  \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau>  P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "have \"(\\<Psi> \\<otimes> \\<Psi>',  P, Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel", "by(rule PRelQ)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P''.\n          \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n          (\\<exists>P'.\n              \\<Psi> \\<otimes>\n              \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n              (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P\n  \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P\n  \\<Psi> \\<otimes> \\<Psi>' \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>K\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q) \\<in> Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : M\\<langle>N\\<rangle>.Q \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from  \\<open>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q'", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resTauCases[consumes 3, case_names cRes]:\n  fixes \\<Psi>    :: 'b\n  and   x    :: name\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   P'   :: \"('a, 'b, 'c) psi\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<tau> \\<prec> P'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> P'\"\n  and     rScope:  \"\\<And>P'. \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P'\\<rbrakk> \\<Longrightarrow> Prop (\\<lparr>\\<nu>x\\<rparr>P')\"\n\n  shows \"Prop P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Prop P'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Prop P'", "note Trans \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<tau> \\<prec> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<tau> \\<prec> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. Prop P'", "have \"x \\<sharp> (\\<tau>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<tau>", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> \\<tau>\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<tau>\n\ngoal (1 subgoal):\n 1. Prop P'", "note \\<open>x \\<sharp> P'\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. Prop P'", "have \"bn(\\<tau>) \\<sharp>* \\<Psi>\" and \"bn(\\<tau>) \\<sharp>* P\" and \"bn(\\<tau>) \\<sharp>* subject(\\<tau>)\" and \"bn(\\<tau>) = []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (bn (\\<tau>) \\<sharp>* \\<Psi> &&& bn (\\<tau>) \\<sharp>* P) &&&\n    bn (\\<tau>) \\<sharp>* subject (\\<tau>) &&& bn (\\<tau>) = []", "by simp+"], ["proof (state)\nthis:\n  bn (\\<tau>) \\<sharp>* \\<Psi>\n  bn (\\<tau>) \\<sharp>* P\n  bn (\\<tau>) \\<sharp>* subject (\\<tau>)\n  bn (\\<tau>) = []\n\ngoal (1 subgoal):\n 1. Prop P'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<tau> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<tau>\n  x \\<sharp> P'\n  bn (\\<tau>) \\<sharp>* \\<Psi>\n  bn (\\<tau>) \\<sharp>* P\n  bn (\\<tau>) \\<sharp>* subject (\\<tau>)\n  bn (\\<tau>) = []", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<tau> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<tau>\n  x \\<sharp> P'\n  bn (\\<tau>) \\<sharp>* \\<Psi>\n  bn (\\<tau>) \\<sharp>* P\n  bn (\\<tau>) \\<sharp>* subject (\\<tau>)\n  bn (\\<tau>) = []\n\ngoal (1 subgoal):\n 1. Prop P'", "by(induct rule: resCases) (auto intro: rScope)"], ["proof (state)\nthis:\n  Prop P'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakResPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1: \"\\<And>\\<Psi>' R S y. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; y \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>R, \\<lparr>\\<nu>y\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "note \\<open>eqvt Rel'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\" and \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P &&&\n    x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)+"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q", "proof(induct rule: weakSimIFresh[of _ _ _ _ _ \"()\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<alpha> Q' \\<Psi>'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>; x \\<sharp> Q';\n        x \\<sharp> \\<Psi>'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cAct \\<alpha> Q' \\<Psi>')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  \\<alpha> \\<noteq> \\<tau>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n  x \\<sharp> \\<Psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<alpha> Q' \\<Psi>'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>; x \\<sharp> Q';\n        x \\<sharp> \\<Psi>'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* Q", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<alpha> Q' \\<Psi>'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>; x \\<sharp> Q';\n        x \\<sharp> \\<Psi>'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel')", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "case(cOpen M xvec1 xvec2 y N Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> Q'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* Q\n  y \\<sharp> Q\n  xvec2 \\<sharp>* Q\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from \\<open>bn(M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P", "have \"xvec1 \\<sharp>* P\" and \"xvec2 \\<sharp>* P\" and \"y \\<sharp> P\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. xvec1 \\<sharp>* P &&& xvec2 \\<sharp>* P &&& y \\<sharp> P", "by simp+"], ["proof (state)\nthis:\n  xvec1 \\<sharp>* P\n  xvec2 \\<sharp>* P\n  y \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from \\<open>x \\<sharp> (M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> y\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. (x \\<sharp> xvec1 &&& x \\<noteq> y) &&&\n    x \\<sharp> xvec2 &&& x \\<sharp> M", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> y\n  x \\<sharp> xvec2\n  x \\<sharp> M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> Q')\\<close> \\<open>xvec1 \\<sharp>* \\<Psi>\\<close> \\<open>xvec2 \\<sharp>* \\<Psi>\\<close> \\<open>xvec1 \\<sharp>* P\\<close> \\<open>xvec2 \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  xvec2 \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> P''\"\n                      and P''Chain: \"\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', ([(x, y)] \\<bullet> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  xvec2 \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                  N)\\<rangle> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         ([(x, y)] \\<bullet>\n          \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P',\n          [(x, y)] \\<bullet> Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> P''", "have \"([(x, y)] \\<bullet> \\<Psi>) : ([(x, y)] \\<bullet> Q) \\<rhd> ([(x, y)] \\<bullet> P) \\<Longrightarrow>([(x, y)] \\<bullet> (M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle>)) \\<prec> ([(x, y)] \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> : [(x, y)] \\<bullet>\n             Q \\<rhd> [(x, y)] \\<bullet>\n                      P \\<Longrightarrow>[(x, y)] \\<bullet>\n   M\\<lparr>\\<nu>*(xvec1 @\n                   xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n     N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P''", "by(rule eqvts)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>[(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> M\\<close> \\<open>y \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  y \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>[(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P''", "have \"\\<Psi> : ([(x, y)] \\<bullet> Q) \\<rhd> ([(x, y)] \\<bullet> P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> ([(x, y)] \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  y \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>[(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> : [(x, y)] \\<bullet>\n             Q \\<rhd> [(x, y)] \\<bullet>\n                      P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                         y)] \\<bullet>\n                       P''", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                       y)] \\<bullet>\n                     P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "hence \"\\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> ([(x, y)] \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                       y)] \\<bullet>\n                     P''\n\ngoal (1 subgoal):\n 1. \\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n                                    Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x,\n                                 y)] \\<bullet>\n                               P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                             y #\n                             xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                                   y)] \\<bullet>\n                                 P''", "using \\<open>y \\<in> supp N\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> : [(x, y)] \\<bullet>\n           Q \\<rhd> [(x, y)] \\<bullet>\n                    P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                       y)] \\<bullet>\n                     P''\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n                                    Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x,\n                                 y)] \\<bullet>\n                               P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                             y #\n                             xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                                   y)] \\<bullet>\n                                 P''", "by(rule weakOpen)"], ["proof (state)\nthis:\n  \\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n                                  Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x,\n                               y)] \\<bullet>\n                             P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                           y #\n                           xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                                 y)] \\<bullet>\n                               P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "with \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> P\n  y \\<sharp> Q\n  \\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n                                  Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x,\n                               y)] \\<bullet>\n                             P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                           y #\n                           xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                                 y)] \\<bullet>\n                               P''", "have \"\\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> ([(x, y)] \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  y \\<sharp> P\n  y \\<sharp> Q\n  \\<Psi> : \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n                                  Q) \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x,\n                               y)] \\<bullet>\n                             P) \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                           y #\n                           xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                                 y)] \\<bullet>\n                               P''\n\ngoal (1 subgoal):\n 1. \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                         y #\n                         xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                               y)] \\<bullet>\n                             P''", "by(simp add: alphaRes)"], ["proof (state)\nthis:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                             y)] \\<bullet>\n                           P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                             y)] \\<bullet>\n                           P''\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from P''Chain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"([(x, y)] \\<bullet> (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'))) \\<rhd> ([(x, y)] \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ([(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<otimes>\n    ([(x, y)] \\<bullet>\n     \\<Psi>') \\<rhd> [(x, y)] \\<bullet>\n                     P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                            y)] \\<bullet>\n                          P'", "by(rule eqvts)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> [(x, y)] \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                          y)] \\<bullet>\n                        P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> [(x, y)] \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                          y)] \\<bullet>\n                        P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> ([(x, y)] \\<bullet> P'') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> ([(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  ([(x, y)] \\<bullet>\n   \\<Psi>') \\<rhd> [(x, y)] \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                          y)] \\<bullet>\n                        P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> [(x, y)] \\<bullet>\n                   P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                          y)] \\<bullet>\n                        P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> [(x, y)] \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                        y)] \\<bullet>\n                      P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> [(x, y)] \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                        y)] \\<bullet>\n                      P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from P'RelQ' \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel\n  Rel \\<subseteq> Rel'", "have \"(\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', ([(x, y)] \\<bullet> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P',\n     [(x, y)] \\<bullet> Q')\n    \\<in> Rel'", "by auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "with \\<open>eqvt Rel'\\<close>"], ["proof (chain)\npicking this:\n  eqvt Rel'\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'", "have \"([(x, y)] \\<bullet> (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', ([(x, y)] \\<bullet> Q'))) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  eqvt Rel'\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P',\n     [(x, y)] \\<bullet> Q')\n    \\<in> Rel'", "by(rule eqvtI)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  [(x, y)] \\<bullet>\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'", "have \" (\\<Psi> \\<otimes> \\<Psi>', [(x, y)] \\<bullet> P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  [(x, y)] \\<bullet>\n  (\\<Psi> \\<otimes> ([(x, y)] \\<bullet> \\<Psi>'), P', [(x, y)] \\<bullet> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', [(x, y)] \\<bullet> P', Q') \\<in> Rel'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', [(x, y)] \\<bullet> P', Q') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* Q; y \\<sharp> Q;\n        yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec @\n           y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a, P')\n                                \\<in> Rel')\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                             y)] \\<bullet>\n                           P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> [(x, y)] \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                        y)] \\<bullet>\n                      P'\n  (\\<Psi> \\<otimes> \\<Psi>', [(x, y)] \\<bullet> P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> [(x,\n                             y)] \\<bullet>\n                           P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> [(x, y)] \\<bullet>\n                 P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> [(x,\n                        y)] \\<bullet>\n                      P'\n  (\\<Psi> \\<otimes> \\<Psi>', [(x, y)] \\<bullet> P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                            y #\n                            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>M\\<lparr>\\<nu>*(xvec1 @\n                          y #\n                          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel')\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\"\n                      and P''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from PTrans \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>", "have \"\\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''", "by(rule_tac weakScope)"], ["proof (state)\nthis:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from P''Chain  \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule_tac tauChainResPres) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "from P'RelQ' \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>'", "have \"(\\<Psi> \\<otimes> \\<Psi>', \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', \\<lparr>\\<nu>x\\<rparr>P',\n     \\<lparr>\\<nu>x\\<rparr>Q')\n    \\<in> Rel'", "apply(rule_tac C1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel;\n     x \\<sharp> \\<Psi>; x \\<sharp> \\<Psi>'\\<rbrakk>\n    \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n 2. \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel;\n     x \\<sharp> \\<Psi>; x \\<sharp> \\<Psi>'\\<rbrakk>\n    \\<Longrightarrow> x \\<sharp> \\<Psi> \\<otimes> \\<Psi>'", "by(auto simp add: fresh_left calc_atm)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', \\<lparr>\\<nu>x\\<rparr>P',\n   \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* P; x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>x\\<rparr>P')\n                                \\<in> Rel')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi> \\<otimes> \\<Psi>', \\<lparr>\\<nu>x\\<rparr>P',\n   \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> \\<lparr>\\<nu>x\\<rparr>P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi> \\<otimes> \\<Psi>', \\<lparr>\\<nu>x\\<rparr>P',\n   \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', \\<lparr>\\<nu>x\\<rparr>Q')\n           \\<in> Rel')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', \\<lparr>\\<nu>x\\<rparr>Q')\n         \\<in> Rel')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : \\<lparr>\\<nu>x\\<rparr>Q \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n  x \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q';\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "proof(induct rule: resTauCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from PChain \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule tauChainResPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from P'RelQ' \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto><Rel'> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakResChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S yvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; yvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*yvec\\<rparr>R, \\<lparr>\\<nu>*yvec\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q", "proof(induct xvec)"], ["proof (state)\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "case Nil"], ["proof (state)\nthis:\n  [] \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from PSimQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*[]\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*[]\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "case(Cons x xvec)"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from \\<open>(x#xvec) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (x # xvec) \\<sharp>* \\<Psi>", "have \"x \\<sharp> \\<Psi>\" and \"xvec \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> &&& xvec \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "from \\<open>xvec \\<sharp>* \\<Psi> \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "have \"Rel \\<subseteq> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Rel \\<subseteq> Rel", "by simp"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "have \"\\<And>\\<Psi> P Q x. \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk> \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>*[x]\\<rparr>P, \\<lparr>\\<nu>*[x]\\<rparr>Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi> P Q x.\n       \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>*[x]\\<rparr>P,\n                          \\<lparr>\\<nu>*[x]\\<rparr>Q)\n                         \\<in> Rel", "by(rule_tac yvec=\"[x]\" in C1) auto"], ["proof (state)\nthis:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>*[?x]\\<rparr>?P,\n                     \\<lparr>\\<nu>*[?x]\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "hence \"\\<And>\\<Psi> P Q x. \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk> \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>*[?x]\\<rparr>?P,\n                     \\<lparr>\\<nu>*[?x]\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi> P Q x.\n       \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P,\n                          \\<lparr>\\<nu>x\\<rparr>Q)\n                         \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto><Rel> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto><Rel> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)", "by(rule weakResPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto><Rel> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(a #\n                        xvec)\\<rparr>Q", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto><Rel> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                                 xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                               xvec)\\<rparr>P \\<leadsto><Rel> \\<lparr>\\<nu>*(x #\n xvec)\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parTauCases[consumes 1, case_names cPar1 cPar2 cComm1 cComm2]:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   R :: \"('a, 'b, 'c) psi\"\n  and   C :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> R\"\n  and     rPar1: \"\\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q. \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<tau> \\<prec> P';  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n                       A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* C\\<rbrakk> \\<Longrightarrow> Prop (P' \\<parallel> Q)\"\n  and     rPar2: \"\\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P. \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n                       A\\<^sub>P \\<sharp>* \\<Psi>; A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* C\\<rbrakk> \\<Longrightarrow> Prop (P \\<parallel> Q')\"\n  and     rComm1: \"\\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q' A\\<^sub>Q.\n           \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'; extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K; distinct xvec;\n            A\\<^sub>P \\<sharp>* \\<Psi>;  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;  A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* M;  A\\<^sub>P \\<sharp>* N;  A\\<^sub>P \\<sharp>* P';  A\\<^sub>P \\<sharp>* Q;  A\\<^sub>P \\<sharp>* xvec;  A\\<^sub>P \\<sharp>* Q'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;  A\\<^sub>P \\<sharp>* C; \n            A\\<^sub>Q \\<sharp>* \\<Psi>;  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* P;  A\\<^sub>Q \\<sharp>* K;  A\\<^sub>Q \\<sharp>* N;  A\\<^sub>Q \\<sharp>* P';  A\\<^sub>Q \\<sharp>* Q;  A\\<^sub>Q \\<sharp>* xvec;  A\\<^sub>Q \\<sharp>* Q'; A\\<^sub>Q \\<sharp>* C; \n            xvec \\<sharp>* \\<Psi>;  xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P;  xvec \\<sharp>* M;  xvec \\<sharp>* K; xvec \\<sharp>* Q;  xvec \\<sharp>* \\<Psi>\\<^sub>Q;  xvec \\<sharp>* C\\<rbrakk> \\<Longrightarrow>\n            Prop (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\"\n  and     rComm2: \"\\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q' A\\<^sub>Q.\n           \\<lbrakk>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'; extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>; distinct A\\<^sub>P;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'; extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>; distinct A\\<^sub>Q;\n            \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K; distinct xvec;\n            A\\<^sub>P \\<sharp>* \\<Psi>;  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;  A\\<^sub>P \\<sharp>* P;  A\\<^sub>P \\<sharp>* M;  A\\<^sub>P \\<sharp>* N;  A\\<^sub>P \\<sharp>* P';  A\\<^sub>P \\<sharp>* Q;  A\\<^sub>P \\<sharp>* xvec;  A\\<^sub>P \\<sharp>* Q'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;  A\\<^sub>P \\<sharp>* C; \n            A\\<^sub>Q \\<sharp>* \\<Psi>;  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* P;  A\\<^sub>Q \\<sharp>* K;  A\\<^sub>Q \\<sharp>* N;  A\\<^sub>Q \\<sharp>* P';  A\\<^sub>Q \\<sharp>* Q;  A\\<^sub>Q \\<sharp>* xvec;  A\\<^sub>Q \\<sharp>* Q'; A\\<^sub>Q \\<sharp>* C; \n            xvec \\<sharp>* \\<Psi>;  xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P;  xvec \\<sharp>* M;  xvec \\<sharp>* K;  xvec \\<sharp>* Q;  xvec \\<sharp>* \\<Psi>\\<^sub>Q;  xvec \\<sharp>* C\\<rbrakk> \\<Longrightarrow>\n            Prop (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\"\n\n  shows \"Prop R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Prop R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Prop R", "from Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> R", "obtain \\<alpha> where \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> R\" and \"bn \\<alpha> \\<sharp>* \\<Psi>\" and \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* subject \\<alpha>\" and \"\\<alpha> = \\<tau>\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> R\n\ngoal (1 subgoal):\n 1. (\\<And>\\<alpha>.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                               Q \\<longmapsto> \\<alpha> \\<prec> R;\n         bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n         bn \\<alpha> \\<sharp>* Q; bn \\<alpha> \\<sharp>* subject \\<alpha>;\n         \\<alpha> = \\<tau>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> R\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> = \\<tau>\n\ngoal (1 subgoal):\n 1. Prop R", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> R\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> = \\<tau>\n\ngoal (1 subgoal):\n 1. Prop R", "using rPar1 rPar2 rComm1 rComm2"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> R\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> = \\<tau>\n  \\<lbrakk>\\<Psi> \\<otimes>\n           ?\\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<tau> \\<prec> ?P';\n   extractFrame Q = \\<langle>?A\\<^sub>Q, ?\\<Psi>\\<^sub>Q\\<rangle>;\n   distinct ?A\\<^sub>Q; ?A\\<^sub>Q \\<sharp>* \\<Psi>; ?A\\<^sub>Q \\<sharp>* P;\n   ?A\\<^sub>Q \\<sharp>* Q; ?A\\<^sub>Q \\<sharp>* C\\<rbrakk>\n  \\<Longrightarrow> Prop (?P' \\<parallel> Q)\n  \\<lbrakk>\\<Psi> \\<otimes>\n           ?\\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> ?Q';\n   extractFrame P = \\<langle>?A\\<^sub>P, ?\\<Psi>\\<^sub>P\\<rangle>;\n   distinct ?A\\<^sub>P; ?A\\<^sub>P \\<sharp>* \\<Psi>; ?A\\<^sub>P \\<sharp>* P;\n   ?A\\<^sub>P \\<sharp>* Q; ?A\\<^sub>P \\<sharp>* C\\<rbrakk>\n  \\<Longrightarrow> Prop (P \\<parallel> ?Q')\n  \\<lbrakk>\\<Psi> \\<otimes>\n           ?\\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> ?M\\<lparr>?N\\<rparr> \\<prec> ?P';\n   extractFrame P = \\<langle>?A\\<^sub>P, ?\\<Psi>\\<^sub>P\\<rangle>;\n   distinct ?A\\<^sub>P;\n   \\<Psi> \\<otimes>\n   ?\\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> ?K\\<lparr>\\<nu>*?xvec\\<rparr>\\<langle>?N\\<rangle> \\<prec> ?Q';\n   extractFrame Q = \\<langle>?A\\<^sub>Q, ?\\<Psi>\\<^sub>Q\\<rangle>;\n   distinct ?A\\<^sub>Q;\n   \\<Psi> \\<otimes>\n   ?\\<Psi>\\<^sub>P \\<otimes>\n   ?\\<Psi>\\<^sub>Q \\<turnstile> ?M \\<leftrightarrow> ?K;\n   distinct ?xvec; ?A\\<^sub>P \\<sharp>* \\<Psi>;\n   ?A\\<^sub>P \\<sharp>* ?\\<Psi>\\<^sub>Q; ?A\\<^sub>P \\<sharp>* P;\n   ?A\\<^sub>P \\<sharp>* ?M; ?A\\<^sub>P \\<sharp>* ?N;\n   ?A\\<^sub>P \\<sharp>* ?P'; ?A\\<^sub>P \\<sharp>* Q;\n   ?A\\<^sub>P \\<sharp>* ?xvec; ?A\\<^sub>P \\<sharp>* ?Q';\n   ?A\\<^sub>P \\<sharp>* ?A\\<^sub>Q; ?A\\<^sub>P \\<sharp>* C;\n   ?A\\<^sub>Q \\<sharp>* \\<Psi>; ?A\\<^sub>Q \\<sharp>* ?\\<Psi>\\<^sub>P;\n   ?A\\<^sub>Q \\<sharp>* P; ?A\\<^sub>Q \\<sharp>* ?K; ?A\\<^sub>Q \\<sharp>* ?N;\n   ?A\\<^sub>Q \\<sharp>* ?P'; ?A\\<^sub>Q \\<sharp>* Q;\n   ?A\\<^sub>Q \\<sharp>* ?xvec; ?A\\<^sub>Q \\<sharp>* ?Q';\n   ?A\\<^sub>Q \\<sharp>* C; ?xvec \\<sharp>* \\<Psi>;\n   ?xvec \\<sharp>* ?\\<Psi>\\<^sub>P; ?xvec \\<sharp>* P; ?xvec \\<sharp>* ?M;\n   ?xvec \\<sharp>* ?K; ?xvec \\<sharp>* Q; ?xvec \\<sharp>* ?\\<Psi>\\<^sub>Q;\n   ?xvec \\<sharp>* C\\<rbrakk>\n  \\<Longrightarrow> Prop (\\<lparr>\\<nu>*?xvec\\<rparr>?P' \\<parallel> ?Q')\n  \\<lbrakk>\\<Psi> \\<otimes>\n           ?\\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> ?M\\<lparr>\\<nu>*?xvec\\<rparr>\\<langle>?N\\<rangle> \\<prec> ?P';\n   extractFrame P = \\<langle>?A\\<^sub>P, ?\\<Psi>\\<^sub>P\\<rangle>;\n   distinct ?A\\<^sub>P;\n   \\<Psi> \\<otimes>\n   ?\\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> ?K\\<lparr>?N\\<rparr> \\<prec> ?Q';\n   extractFrame Q = \\<langle>?A\\<^sub>Q, ?\\<Psi>\\<^sub>Q\\<rangle>;\n   distinct ?A\\<^sub>Q;\n   \\<Psi> \\<otimes>\n   ?\\<Psi>\\<^sub>P \\<otimes>\n   ?\\<Psi>\\<^sub>Q \\<turnstile> ?M \\<leftrightarrow> ?K;\n   distinct ?xvec; ?A\\<^sub>P \\<sharp>* \\<Psi>;\n   ?A\\<^sub>P \\<sharp>* ?\\<Psi>\\<^sub>Q; ?A\\<^sub>P \\<sharp>* P;\n   ?A\\<^sub>P \\<sharp>* ?M; ?A\\<^sub>P \\<sharp>* ?N;\n   ?A\\<^sub>P \\<sharp>* ?P'; ?A\\<^sub>P \\<sharp>* Q;\n   ?A\\<^sub>P \\<sharp>* ?xvec; ?A\\<^sub>P \\<sharp>* ?Q';\n   ?A\\<^sub>P \\<sharp>* ?A\\<^sub>Q; ?A\\<^sub>P \\<sharp>* C;\n   ?A\\<^sub>Q \\<sharp>* \\<Psi>; ?A\\<^sub>Q \\<sharp>* ?\\<Psi>\\<^sub>P;\n   ?A\\<^sub>Q \\<sharp>* P; ?A\\<^sub>Q \\<sharp>* ?K; ?A\\<^sub>Q \\<sharp>* ?N;\n   ?A\\<^sub>Q \\<sharp>* ?P'; ?A\\<^sub>Q \\<sharp>* Q;\n   ?A\\<^sub>Q \\<sharp>* ?xvec; ?A\\<^sub>Q \\<sharp>* ?Q';\n   ?A\\<^sub>Q \\<sharp>* C; ?xvec \\<sharp>* \\<Psi>;\n   ?xvec \\<sharp>* ?\\<Psi>\\<^sub>P; ?xvec \\<sharp>* P; ?xvec \\<sharp>* ?M;\n   ?xvec \\<sharp>* ?K; ?xvec \\<sharp>* Q; ?xvec \\<sharp>* ?\\<Psi>\\<^sub>Q;\n   ?xvec \\<sharp>* C\\<rbrakk>\n  \\<Longrightarrow> Prop (\\<lparr>\\<nu>*?xvec\\<rparr>?P' \\<parallel> ?Q')\n\ngoal (1 subgoal):\n 1. Prop R", "by(induct rule: parCases[where C=C]) (auto simp add: residualInject)"], ["proof (state)\nthis:\n  Prop R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakParPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PRelQ: \"\\<And>A\\<^sub>R \\<Psi>\\<^sub>R. \\<lbrakk>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>; A\\<^sub>R \\<sharp>* \\<Psi>; A\\<^sub>R \\<sharp>* P; A\\<^sub>R \\<sharp>* Q\\<rbrakk> \\<Longrightarrow> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\" \n  and     Eqvt:  \"eqvt Rel\"\n  and     Eqvt': \"eqvt Rel'\"\n\n  and     Sim:    \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     Sym:    \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     Ext:    \"\\<And>\\<Psi>' S T \\<Psi>'. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     StatImp: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<lessapprox><Rel> T\"\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R", "from Eqvt'"], ["proof (chain)\npicking this:\n  eqvt Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R", "proof(induct rule: weakSimI[where C=\"()\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "case(cAct \\<Psi>' \\<alpha> QR)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> R)\\<close> \\<open>bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&&\n    bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> QR\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close>  \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> \\<noteq> \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<parallel>\n                R \\<rhd> P \\<parallel>\n                         R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', QR) \\<in> Rel')", "proof(induct rule: parCases[where C=\"(P, R, \\<Psi>')\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "case(cPar1 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* (P, R, \\<Psi>')\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>R \\<sharp>* (P, R, \\<Psi>')\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R, \\<Psi>')", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* \\<Psi>'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R, \\<Psi>')\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* \\<Psi>'", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "by(blast intro: PRelQ Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "obtain P'' P' where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\"\n                           and P''Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using QTrans \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac \\<Psi>'=\\<Psi>' in weakSimE(1)) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from PTrans QTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"A\\<^sub>R \\<sharp>* P''\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P'' &&& A\\<^sub>R \\<sharp>* Q'", "by(fastforce dest: weakFreshChainDerivative freeFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q'", "have \"A\\<^sub>R \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P'", "by(force dest: tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from PTrans FrR \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q", "have \"\\<Psi> : Q \\<parallel> R \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<alpha> \\<prec> (P'' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<parallel>\n             R \\<rhd> P \\<parallel>\n                      R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> R", "by(rule_tac weakPar1)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"(\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(metis tauChainStatEq Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with FrR"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P'' \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close>"], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P'' \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<parallel>\n                 R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<parallel>\n                 R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from P'RelQ'"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel", "by(metis C3 compositionSym Associativity Commutativity)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"(\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R)\n    \\<in> Rel'", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close>"], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R)\n    \\<in> Rel'", "by(rule_tac C1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> R)\n                                \\<in> Rel')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> R\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<parallel>\n                 R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> R\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<parallel>\n                 R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi> \\<otimes> \\<Psi>', P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<parallel>\n                R \\<rhd> P \\<parallel>\n                         R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q' \\<parallel> R) \\<in> Rel')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<parallel>\n              R \\<rhd> P \\<parallel>\n                       R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q' \\<parallel> R) \\<in> Rel')\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>')\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>')\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>')", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>')\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&&\n    A\\<^sub>Q \\<sharp>* R &&& A\\<^sub>Q \\<sharp>* \\<Psi>'", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* \\<Psi>'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>,\n                              R)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<alpha>\" and \"A\\<^sub>P \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, \\<alpha>, R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>P \\<sharp>* \\<alpha> &&& A\\<^sub>P \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>Q \\<sharp>* P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from FrP FrQ \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\" and \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P &&&\n    bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q", "by(force dest: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "obtain A\\<^sub>R \\<Psi>\\<^sub>R where FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\" and \"A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, \\<alpha>, R, \\<Psi>')\" \n                      and \"distinct A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R \\<Psi>\\<^sub>R.\n        \\<lbrakk>extractFrame R =\n                 \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>;\n         A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P,\n                              \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, \\<alpha>, R,\n                              \\<Psi>');\n         distinct A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R, \\<Psi>')\n  distinct A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "then"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R, \\<Psi>')\n  distinct A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\"\n            and \"A\\<^sub>R \\<sharp>* \\<alpha>\" and \"A\\<^sub>R \\<sharp>* R\" and \"A\\<^sub>R \\<sharp>* \\<Psi>'\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, \\<alpha>, R, \\<Psi>')\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* P) &&&\n     A\\<^sub>R \\<sharp>* Q &&&\n     A\\<^sub>R \\<sharp>* A\\<^sub>Q &&& A\\<^sub>R \\<sharp>* A\\<^sub>P) &&&\n    (A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q &&&\n     A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P) &&&\n    A\\<^sub>R \\<sharp>* \\<alpha> &&&\n    A\\<^sub>R \\<sharp>* R &&& A\\<^sub>R \\<sharp>* \\<Psi>'", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  FrR \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>'\\<close>\n                 \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "obtain p \\<Psi>'' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set(bn \\<alpha>) \\<times> set(bn(p \\<bullet> \\<alpha>))\" and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\"\n                              and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                              and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* P\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* Q\"\n                              and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>'\" and \"distinctPerm p\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. (\\<And>p \\<Psi>'' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>set p\n                 \\<subseteq> set (bn \\<alpha>) \\<times>\n                             set (bn (p \\<bullet> \\<alpha>));\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* P;\n         bn (p \\<bullet> \\<alpha>) \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         A\\<^sub>R' \\<sharp>* P; A\\<^sub>R' \\<sharp>* Q;\n         A\\<^sub>R' \\<sharp>* \\<Psi>'; distinctPerm p\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>', P, Q)\" and C'=\"(\\<Psi>, P, Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>'\n  distinctPerm p\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule PRelQ)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q, P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q, P) \\<in> Rel", "by(rule Sym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q, P) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<lessapprox><Rel> P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, Q, P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<lessapprox><Rel> P", "by(rule StatImp)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<lessapprox><Rel> P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<lessapprox><Rel> P", "obtain P' P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                           and QimpP': \"insertAssertion(extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                          and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> ((p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>')) \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                          and P'RelQ: \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> ((p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>')), Q, P'') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<lessapprox><Rel> P\n\ngoal (1 subgoal):\n 1. (\\<And>P' P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n                (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         (p \\<bullet> \\<Psi>'') \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n          (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n          Q, P'')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakStatImpE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   Q, P'')\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "obtain A\\<^sub>P' \\<Psi>\\<^sub>P' where FrP': \"extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\"\n                        and \"A\\<^sub>P' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P' \\<sharp>* R\" and \"A\\<^sub>P' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P' \\<sharp>* \\<alpha>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P' \\<Psi>\\<^sub>P'.\n        \\<lbrakk>extractFrame P' =\n                 \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n         A\\<^sub>P' \\<sharp>* \\<Psi>; A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>Q; A\\<^sub>P' \\<sharp>* R;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>R;\n         A\\<^sub>P' \\<sharp>* \\<alpha>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, \\<Psi>\\<^sub>Q, A\\<^sub>Q, R, A\\<^sub>R, \\<alpha>)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<alpha>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  bn \\<alpha> \\<sharp>* P", "have \"A\\<^sub>Q \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* P'\" and \"bn \\<alpha> \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P' &&&\n    A\\<^sub>R \\<sharp>* P' &&& bn \\<alpha> \\<sharp>* P'", "by(force intro: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* P'\n  bn \\<alpha> \\<sharp>* P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>Q\\<close> FrP'"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P' &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'", "by(force dest: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "have \"insertAssertion (extractFrame(Q \\<parallel> R)) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame(P' \\<parallel> R)) \\<Psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "have \"\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis Associativity Composition Commutativity AssertionStatEqTrans AssertionStatEqSym frameNilStatEq frameResChainPres)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "from QimpP' FrQ FrP' \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "have \"\\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n            \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>", "by(metis Associativity Composition Commutativity AssertionStatEqTrans AssertionStatEqSym frameNilStatEq frameResChainPres)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "hence \"\\<langle>(A\\<^sub>R@A\\<^sub>Q), \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>(A\\<^sub>R@A\\<^sub>P'), \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', \\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>(A\\<^sub>R @\n              A\\<^sub>Q), \\<Psi> \\<otimes>\n                          \\<Psi>\\<^sub>Q \\<otimes>\n                          \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>(A\\<^sub>R @\n          A\\<^sub>P'), \\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>", "by(force intro: frameImpResChainPres simp add: frameChainAppend)"], ["proof (state)\nthis:\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>(A\\<^sub>R @\n        A\\<^sub>P'), \\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "with FrQ FrR FrP' \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \n                          \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>(A\\<^sub>R @\n        A\\<^sub>P'), \\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>(A\\<^sub>R @\n        A\\<^sub>P'), \\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Q \\<parallel> R))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (P' \\<parallel> R)) \\<Psi>", "by(simp add: frameChainAppend) (metis frameImpChainComm FrameStatImpTrans)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Q \\<parallel> R))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame (P' \\<parallel> R))\n                                     \\<Psi>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Q \\<parallel> R))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame (P' \\<parallel> R))\n                                     \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Q \\<parallel> R))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame (P' \\<parallel> R))\n                                     \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym FrameStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "with FrP' FrQ QimpP' \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n             \\<Psi>\\<^sub>P') \\<otimes>\n            \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym frameIntAssociativity[THEN FrameStatEqSym])"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "using \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>\n                \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "by(force intro: transferFrame)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"\\<Psi> \\<rhd> P' \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R'", "using FrP' \\<open>bn \\<alpha> \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  bn \\<alpha> \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* \\<alpha>\n  A\\<^sub>P' \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R'", "by(rule_tac Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "ultimately"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  insertAssertion (extractFrame (Q \\<parallel> R))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame (P' \\<parallel> R))\n                                     \\<Psi>\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R'", "have \"\\<Psi> : (Q \\<parallel> R) \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<alpha> \\<prec> (P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  insertAssertion (extractFrame (Q \\<parallel> R))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame (P' \\<parallel> R))\n                                     \\<Psi>\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> : Q \\<parallel>\n             R \\<rhd> P \\<parallel>\n                      R \\<Longrightarrow>\\<alpha> \\<prec> P' \\<parallel> R'", "by(rule_tac weakTransitionI)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from PChain P'Chain \\<open>bn \\<alpha> \\<sharp>* P'\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  bn \\<alpha> \\<sharp>* P'\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P", "have \"bn \\<alpha> \\<sharp>* P''\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* P'\" and \"bn(p \\<bullet> \\<alpha>) \\<sharp>* P''\" and \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  bn \\<alpha> \\<sharp>* P'\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (bn \\<alpha> \\<sharp>* P'' &&&\n     bn (p \\<bullet> \\<alpha>) \\<sharp>* P') &&&\n    bn (p \\<bullet> \\<alpha>) \\<sharp>* P'' &&&\n    A\\<^sub>R' \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* P''", "by(metis tauChainFreshChain)+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P''\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P'\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> P'')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    (p \\<bullet> \\<Psi>'') \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet>\n                         P''", "by(rule eqvts)"], ["proof (state)\nthis:\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P'\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* P'\\<close> \\<open>bn \\<alpha> \\<sharp>* P''\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* P''\\<close>\n            S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P'\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P'\n  bn \\<alpha> \\<sharp>* P''\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P''\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P''", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>'' \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P'\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P'\n  bn \\<alpha> \\<sharp>* P''\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P''\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>'') \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>'' \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>'' \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"(\\<Psi> \\<otimes> \\<Psi>') \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>'' \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n    (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>'' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(rule tauChainStatEq) (metis Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>'' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>'' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>'' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(metis tauChainStatEq compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "hence \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                       R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* \\<Psi>'\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                       R'", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                     R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                     R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from P'RelQ"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   Q, P'')\n  \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'), P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   Q, P'')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n     (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n     P'', Q)\n    \\<in> Rel", "by(rule Sym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with \\<open>eqvt Rel\\<close>"], ["proof (chain)\npicking this:\n  eqvt Rel\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'), P'', Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  eqvt Rel\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n     (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n     P'', Q)\n    \\<in> Rel", "by(rule eqvtI)"], ["proof (state)\nthis:\n  p \\<bullet>\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P''\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* P''\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn(p \\<bullet> \\<alpha>) \\<sharp>* Q\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P''\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P''\n  bn \\<alpha> \\<sharp>* Q\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  distinctPerm p\n  p \\<bullet>\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel", "have \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>'' \\<otimes> \\<Psi>', P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P''\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* P''\n  bn \\<alpha> \\<sharp>* Q\n  bn (p \\<bullet> \\<alpha>) \\<sharp>* Q\n  set p\n  \\<subseteq> set (bn \\<alpha>) \\<times> set (bn (p \\<bullet> \\<alpha>))\n  distinctPerm p\n  p \\<bullet>\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n   (p \\<bullet> \\<Psi>'') \\<otimes> (p \\<bullet> \\<Psi>'),\n   P'', Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n     \\<Psi>'' \\<otimes> \\<Psi>',\n     P'', Q)\n    \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>'' \\<otimes> \\<Psi>',\n   P'', Q)\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>'' \\<otimes> \\<Psi>',\n   P'', Q)\n  \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>'' \\<simeq> \\<Psi>\\<^sub>R'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>'' \\<otimes> \\<Psi>',\n   P'', Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "by(rule_tac C3, auto) (metis Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>  \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* \\<Psi>'\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* \\<Psi>'\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P'' \\<parallel> R', Q \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P'' \\<parallel> R', Q \\<parallel> R')\n  \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 Q \\<parallel> Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                     R'\n  (\\<Psi> \\<otimes> \\<Psi>', P'' \\<parallel> R', Q \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<parallel>\n           R \\<rhd> P \\<parallel>\n                    R \\<Longrightarrow>\\<alpha> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                     R'\n  (\\<Psi> \\<otimes> \\<Psi>', P'' \\<parallel> R', Q \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<parallel>\n                R \\<rhd> P \\<parallel>\n                         R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q \\<parallel> R') \\<in> Rel')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<parallel>\n              R \\<rhd> P \\<parallel>\n                       R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q \\<parallel> R') \\<in> Rel')\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "case cComm1"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<rhd> Q \\<longmapsto> M_\\<lparr>N_\\<rparr> \\<prec> P'_\n  extractFrame Q = \\<langle>A\\<^sub>P_, \\<Psi>\\<^sub>P_\\<rangle>\n  distinct A\\<^sub>P_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<rhd> R \\<longmapsto> K_\\<lparr>\\<nu>*xvec_\\<rparr>\\<langle>N_\\<rangle> \\<prec> Q'_\n  extractFrame R = \\<langle>A\\<^sub>Q_, \\<Psi>\\<^sub>Q_\\<rangle>\n  distinct A\\<^sub>Q_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<turnstile> M_ \\<leftrightarrow> K_\n  distinct xvec_\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* Q\n  A\\<^sub>P_ \\<sharp>* M_\n  A\\<^sub>P_ \\<sharp>* N_\n  A\\<^sub>P_ \\<sharp>* P'_\n  A\\<^sub>P_ \\<sharp>* R\n  A\\<^sub>P_ \\<sharp>* xvec_\n  A\\<^sub>P_ \\<sharp>* Q'_\n  A\\<^sub>P_ \\<sharp>* A\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* (P, R, \\<Psi>')\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\\<^sub>P_\n  A\\<^sub>Q_ \\<sharp>* Q\n  A\\<^sub>Q_ \\<sharp>* K_\n  A\\<^sub>Q_ \\<sharp>* N_\n  A\\<^sub>Q_ \\<sharp>* P'_\n  A\\<^sub>Q_ \\<sharp>* R\n  A\\<^sub>Q_ \\<sharp>* xvec_\n  A\\<^sub>Q_ \\<sharp>* Q'_\n  A\\<^sub>Q_ \\<sharp>* (P, R, \\<Psi>')\n  xvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>P_\n  xvec_ \\<sharp>* Q\n  xvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* K_\n  xvec_ \\<sharp>* R\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  xvec_ \\<sharp>* (P, R, \\<Psi>')\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>\\<tau> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<tau> \\<noteq> \\<tau>", "have False"], ["proof (prove)\nusing this:\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<parallel>\n                R \\<rhd> P \\<parallel>\n                         R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n       (\\<exists>P'a.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P'a,\n            \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n           \\<in> Rel')", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<parallel>\n              R \\<rhd> P \\<parallel>\n                       R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n     (\\<exists>P'a.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P'a,\n          \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n         \\<in> Rel')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "case cComm2"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<rhd> Q \\<longmapsto> M_\\<lparr>\\<nu>*xvec_\\<rparr>\\<langle>N_\\<rangle> \\<prec> P'_\n  extractFrame Q = \\<langle>A\\<^sub>P_, \\<Psi>\\<^sub>P_\\<rangle>\n  distinct A\\<^sub>P_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<rhd> R \\<longmapsto> K_\\<lparr>N_\\<rparr> \\<prec> Q'_\n  extractFrame R = \\<langle>A\\<^sub>Q_, \\<Psi>\\<^sub>Q_\\<rangle>\n  distinct A\\<^sub>Q_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<turnstile> M_ \\<leftrightarrow> K_\n  distinct xvec_\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* Q\n  A\\<^sub>P_ \\<sharp>* M_\n  A\\<^sub>P_ \\<sharp>* N_\n  A\\<^sub>P_ \\<sharp>* P'_\n  A\\<^sub>P_ \\<sharp>* R\n  A\\<^sub>P_ \\<sharp>* xvec_\n  A\\<^sub>P_ \\<sharp>* Q'_\n  A\\<^sub>P_ \\<sharp>* A\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* (P, R, \\<Psi>')\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\\<^sub>P_\n  A\\<^sub>Q_ \\<sharp>* Q\n  A\\<^sub>Q_ \\<sharp>* K_\n  A\\<^sub>Q_ \\<sharp>* N_\n  A\\<^sub>Q_ \\<sharp>* P'_\n  A\\<^sub>Q_ \\<sharp>* R\n  A\\<^sub>Q_ \\<sharp>* xvec_\n  A\\<^sub>Q_ \\<sharp>* Q'_\n  A\\<^sub>Q_ \\<sharp>* (P, R, \\<Psi>')\n  xvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>P_\n  xvec_ \\<sharp>* Q\n  xvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* K_\n  xvec_ \\<sharp>* R\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  xvec_ \\<sharp>* (P, R, \\<Psi>')\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "from \\<open>\\<tau> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<tau> \\<noteq> \\<tau>", "have False"], ["proof (prove)\nusing this:\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R, \\<Psi>');\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R, \\<Psi>'); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R, \\<Psi>'); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Q \\<parallel>\n                                     R \\<rhd> P \\<parallel>\n        R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel')", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Q \\<parallel>\n                R \\<rhd> P \\<parallel>\n                         R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n       (\\<exists>P'a.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P'a,\n            \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n           \\<in> Rel')", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<parallel>\n              R \\<rhd> P \\<parallel>\n                       R \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n     (\\<exists>P'a.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P'a,\n          \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n         \\<in> Rel')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Q \\<parallel>\n              R \\<rhd> P \\<parallel>\n                       R \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', QR) \\<in> Rel')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "case(cTau QR)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto>\\<tau> \\<prec> QR\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', QR) \\<in> Rel'", "proof(induct rule: parTauCases[where C=\"(P, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar1 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrR: \" extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "by(blast intro: PRelQ Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain QTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(force dest: freeFreshChainDerivative tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (P' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'", "have \"(\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&& A\\<^sub>P \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>R \\<Psi>\\<^sub>R where FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\" and \"A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, R)\" and \"distinct A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R \\<Psi>\\<^sub>R.\n        \\<lbrakk>extractFrame R =\n                 \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>;\n         A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P,\n                              \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, R);\n         distinct A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "then"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\"\n            and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* P) &&&\n     A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* A\\<^sub>Q) &&&\n    (A\\<^sub>R \\<sharp>* A\\<^sub>P &&&\n     A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  FrR \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                           and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q, R)\" in expandTauFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "obtain P' P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                      and QimpP': \"insertAssertion(extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                      and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                      and P'RelQ: \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q, P'') \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<And>P' P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n                (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q, P'')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis StatImp PRelQ Sym weakStatImpE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q, P'') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P' \\<Psi>\\<^sub>P' where FrP': \"extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\"\n                        and \"A\\<^sub>P' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P' \\<sharp>* R\" and \"A\\<^sub>P' \\<sharp>* A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P' \\<Psi>\\<^sub>P'.\n        \\<lbrakk>extractFrame P' =\n                 \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n         A\\<^sub>P' \\<sharp>* \\<Psi>; A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>Q; A\\<^sub>P' \\<sharp>* R;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, \\<Psi>\\<^sub>Q, A\\<^sub>Q, R, A\\<^sub>R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain P'Chain \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P", "have \"A\\<^sub>Q \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* P') &&&\n    A\\<^sub>R' \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* P''", "by(force intro: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>Q\\<close> FrP'"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P' &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'", "by(force dest: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym FrameStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "with FrP' FrQ QimpP' \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n             \\<Psi>\\<^sub>P') \\<otimes>\n            \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym frameIntAssociativity[THEN FrameStatEqSym])"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "using \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \n                \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "by(force intro: transferTauFrame)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P' \\<parallel> R \\<longmapsto>\\<tau> \\<prec> (P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'", "using FrP' \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(rule tauChainStatEq) (metis Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(metis tauChainStatEq compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                      R'", "by(rule_tac tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                     R'", "by(fastforce dest: rtrancl_into_rtrancl)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q, P'') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', Q, P'') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "by(blast intro: C3 Associativity compositionSym Sym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "have \"(\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm1 \\<Psi>\\<^sub>R M N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K xvec R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\" and RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\"\n        and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow>K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>\n                      \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close>\n                       \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* N\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* N", "obtain p \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                             and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\"\n                             and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\" and \"(p \\<bullet> xvec) \\<sharp>* K\" and \"(p \\<bullet> xvec) \\<sharp>* R\"\n                             and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* N\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* N\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* N\n\ngoal (1 subgoal):\n 1. (\\<And>p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* Q;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q;\n         (p \\<bullet> xvec) \\<sharp>* K; (p \\<bullet> xvec) \\<sharp>* R;\n         (p \\<bullet> xvec) \\<sharp>* P;\n         (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>Q)\" and C'=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* Q", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* R", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* R", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* K", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* K", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (p \\<bullet> M)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from QTrans S \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(rule_tac inputPermFrameSubject) (assumption | auto simp add: fresh_star_def)+"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'", "have QTrans: \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n       M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"(p \\<bullet> extractFrame R) = p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. p \\<bullet> extractFrame R =\n    p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have FrR: \"extractFrame R = \\<langle>(p \\<bullet> A\\<^sub>R), (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame R =\n    \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from MeqK"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R)) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. (p \\<bullet>\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                   M) \\<leftrightarrow> (p \\<bullet> K)", "by(rule chanEqClosed)"], ["proof (state)\nthis:\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)", "have MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "have \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\nusing this:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q", "by(force intro: Sim PRelQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q", "obtain P' P'' where PTrans: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> P''\"\n                                  and P''Chain: \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                                  and P'RelQ': \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 (p \\<bullet>\n                  \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                           M)\\<lparr>N\\<rparr> \\<prec> P'';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n          P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans QTrans \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N", "have \"A\\<^sub>R' \\<sharp>* P''\" and \"A\\<^sub>R' \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'' &&& A\\<^sub>R' \\<sharp>* Q'", "by(auto dest: weakInputFreshChainDerivative inputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans FrQ RTrans FrR MeqK \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\\<close> \\<open>A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\\<close>\n           \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* R\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>distinct A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  xvec \\<sharp>* P\n  distinct A\\<^sub>R", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  xvec \\<sharp>* P\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n R'", "apply(rule_tac weakComm1)"], ["proof (prove)\ngoal (17 subgoals):\n 1. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> \\<Psi> \\<otimes>\n                      ?\\<Psi>\\<^sub>Q18 : ?R18 \\<rhd> P \\<Longrightarrow>?M18\\<lparr>?N18\\<rparr> \\<prec> P''\n 2. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> extractFrame ?R18 =\n                      \\<langle>?A\\<^sub>R18, ?\\<Psi>\\<^sub>R18\\<rangle>\n 3. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> \\<Psi> \\<otimes>\n                      ?\\<Psi>\\<^sub>R18 \\<rhd> R \\<longmapsto> ?K18\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>?N18\\<rangle> \\<prec> R'\n 4. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> extractFrame R =\n                      \\<langle>?A\\<^sub>Q18, ?\\<Psi>\\<^sub>Q18\\<rangle>\n 5. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> \\<Psi> \\<otimes>\n                      ?\\<Psi>\\<^sub>R18 \\<otimes>\n                      ?\\<Psi>\\<^sub>Q18 \\<turnstile> ?M18 \\<leftrightarrow> ?K18\n 6. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>R18 \\<sharp>* \\<Psi>\n 7. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>R18 \\<sharp>* P\n 8. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>R18 \\<sharp>* R\n 9. \\<lbrakk>\\<Psi> \\<otimes>\n             (p \\<bullet>\n              \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                       M)\\<lparr>N\\<rparr> \\<prec> P'';\n     extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n     extractFrame R =\n     \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     (p \\<bullet>\n      \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n     A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n     A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n     A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n     (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n     distinct A\\<^sub>R\\<rbrakk>\n    \\<Longrightarrow> ?A\\<^sub>R18 \\<sharp>* ?R18\n 10. \\<lbrakk>\\<Psi> \\<otimes>\n              (p \\<bullet>\n               \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                        M)\\<lparr>N\\<rparr> \\<prec> P'';\n      extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n      \\<Psi> \\<otimes>\n      \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n      extractFrame R =\n      \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>;\n      \\<Psi> \\<otimes>\n      \\<Psi>\\<^sub>Q \\<otimes>\n      (p \\<bullet>\n       \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K;\n      A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* P;\n      A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n      A\\<^sub>Q \\<sharp>* (p \\<bullet> M);\n      A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R);\n      (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>;\n      (p \\<bullet> A\\<^sub>R) \\<sharp>* P;\n      (p \\<bullet> A\\<^sub>R) \\<sharp>* Q;\n      (p \\<bullet> A\\<^sub>R) \\<sharp>* R;\n      (p \\<bullet> A\\<^sub>R) \\<sharp>* K; xvec \\<sharp>* P;\n      distinct A\\<^sub>R\\<rbrakk>\n     \\<Longrightarrow> ?A\\<^sub>R18 \\<sharp>* ?M18\nA total of 17 subgoals...", "by(assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P''Chain \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "by(metis Associativity AssertionStatEqTrans AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(rule tauChainStatEq)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P'' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n         R'", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm2 \\<Psi>\\<^sub>R M xvec N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\" and RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\"\n        and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow>K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where  ReqR': \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" \n                           and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q'\" and \"A\\<^sub>R' \\<sharp>* N\" and \"A\\<^sub>R' \\<sharp>* xvec\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* xvec\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q', N, xvec)\" and C'=\"(\\<Psi>, P, Q', N, xvec)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "by(force intro: Sim PRelQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "obtain P'' P' where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\"\n                      and P''Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                      and P'RelQ': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''", "obtain P''' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\"\n                                and QimpP''': \"insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                                and P'''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. (\\<And>P'''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n                (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakTransitionE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P'''", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P''' \\<Psi>\\<^sub>P''' where FrP''': \"extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\" and \"A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\" and \"distinct A\\<^sub>P'''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P''' \\<Psi>\\<^sub>P'''.\n        \\<lbrakk>extractFrame P''' =\n                 \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>;\n         A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q,\n                                 A\\<^sub>R, \\<Psi>\\<^sub>R, M, N, K, R,\n                                 P''', xvec);\n         distinct A\\<^sub>P'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                          \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P''' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* M\" and \"A\\<^sub>P''' \\<sharp>* R\"\n        and \"A\\<^sub>P''' \\<sharp>* N\" and \"A\\<^sub>P''' \\<sharp>* K\" and \"A\\<^sub>P''' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P''' \\<sharp>* P'''\" and \"A\\<^sub>P''' \\<sharp>* xvec\" and \"A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                          \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>P''' \\<sharp>* \\<Psi> &&&\n      A\\<^sub>P''' \\<sharp>* A\\<^sub>Q) &&&\n     A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q &&&\n     A\\<^sub>P''' \\<sharp>* M &&& A\\<^sub>P''' \\<sharp>* R) &&&\n    (A\\<^sub>P''' \\<sharp>* N &&&\n     A\\<^sub>P''' \\<sharp>* K &&& A\\<^sub>P''' \\<sharp>* A\\<^sub>R) &&&\n    A\\<^sub>P''' \\<sharp>* P''' &&&\n    A\\<^sub>P''' \\<sharp>* xvec &&& A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* N\n  A\\<^sub>P''' \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* xvec\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QimpP''' FrP''' FrQ \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                           \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P''') \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>", "have QImpP''': \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P''') \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel>\n                     R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR P'''Trans MeqK QImpP''' FrP''' FrQ \\<open>distinct A\\<^sub>P'''\\<close> \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close>\n        \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close>\n        \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  \\<open>A\\<^sub>Q \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M", "obtain K' where \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> R'\" and \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\" and \"A\\<^sub>R \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>P''' \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K';\n         A\\<^sub>R \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac comm2Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P'''Trans FrP'''"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'", "have \"\\<Psi> \\<rhd> P''' \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>\n          \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* K'\\<close> \\<open>A\\<^sub>P''' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>R \\<sharp>* K'\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "by(rule_tac Comm2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'''Trans \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R' \\<sharp>* P", "have \"A\\<^sub>R' \\<sharp>* P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'''", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P'''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R' \\<sharp>* P'''", "have \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R' \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P''", "using \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R' \\<sharp>* P'''\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P''", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "by(metis Associativity AssertionStatEqTrans AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(rule tauChainStatEq)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P'' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n         R'", "by(drule_tac tauActTauChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', QR) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> R \\<leadsto><Rel'> Q \\<parallel> R\n\ngoal:\nNo subgoals!", "qed"], ["", "no_notation relcomp (infixr \"O\" 75)"], ["", "lemma weakSimBangPres:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"eqvt Rel''\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     Rel'Rel: \"Rel' \\<subseteq> Rel\"\n\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel''\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ResPres': \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Closed': \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel'\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     StatEq': \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel'\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Trans': \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; (\\<Psi>', T, U) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel'\"\n\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cExt': \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel'\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     cSym': \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel'\"\n\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     ParPres2: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> S, T \\<parallel> T) \\<in> Rel\"\n  and     ParPres': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel'\"\n\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     Assoc': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel'\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     ScopeExt': \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel'\"\n\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel''; (\\<Psi>', U, O) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel''\"\n\n  and     rBangActE: \"\\<And>\\<Psi>' S \\<alpha> S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; guarded S; bn \\<alpha> \\<sharp>* S; \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<longmapsto>\\<alpha> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauE: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<tau> \\<prec> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<parallel> S \\<longmapsto>\\<tau> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauI: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> S \\<parallel> S \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> !S \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<and> (\\<Psi>', T, S' \\<parallel> !S) \\<in> Rel'\"\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto><Rel''> R \\<parallel> !Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto><Rel''> R \\<parallel> !Q", "using \\<open>eqvt Rel''\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto><Rel''> R \\<parallel> !Q", "proof(induct rule: weakSimI[where C=\"()\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cAct \\<Psi>' \\<alpha> RQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n  distinct (bn \\<alpha>)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\\<close> \\<open>bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* (!Q)\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !P)\n  bn \\<alpha> \\<sharp>* (R \\<parallel> !Q)\n\ngoal (1 subgoal):\n 1. (bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* !Q) &&&\n    bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> R \\<parallel>\n                              !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !P);\n        bn \\<alpha> \\<sharp>* (R \\<parallel> !Q);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; bn \\<alpha> \\<sharp>* ();\n        distinct (bn \\<alpha>); \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel'')\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto>\\<alpha> \\<prec> RQ'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* !Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> \\<noteq> \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<alpha> \\<prec> RQ'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* !Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<parallel>\n                !Q \\<rhd> R \\<parallel>\n                          !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', RQ') \\<in> Rel'')", "proof(induct rule: parCases[where C=\"(\\<Psi>', P, Q, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "case(cPar1 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close> \\<open>\\<Psi>\\<^sub>Q = SBottom'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<alpha> \\<prec> (R' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"\\<Psi> : R \\<parallel> !Q \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<parallel>\n             !Q \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel>\n                      !P", "by(rule_tac transitionWeakTransition) auto"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "have \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> R' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> R' \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                       !P", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"(\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q)\n    \\<in> Rel''", "using \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 P' \\<parallel> !Q)\n                                \\<in> Rel'')\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q)\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi> \\<otimes> \\<Psi>', R' \\<parallel> !P, R' \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<parallel>\n                !Q \\<rhd> R \\<parallel>\n                          !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', R' \\<parallel> !Q) \\<in> Rel'')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<parallel>\n              !Q \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', R' \\<parallel> !Q) \\<in> Rel'')\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "case(cPar2 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* (\\<Psi>', P, Q, R)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>A\\<^sub>R \\<sharp>* (\\<Psi>', P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (\\<Psi>', P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* \\<Psi>'\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (\\<Psi>', P, Q, R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* Q) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>' &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "with \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "obtain A\\<^sub>Q \\<Psi>\\<^sub>Q where FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q \\<sharp>* A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q \\<Psi>\\<^sub>Q.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n         A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from FrQ \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>guarded Q\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  guarded Q\n  bn \\<alpha> \\<sharp>* Q\n  \\<alpha> \\<noteq> \\<tau>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>", "obtain T where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> T\" and \"(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  guarded Q\n  bn \\<alpha> \\<sharp>* Q\n  \\<alpha> \\<noteq> \\<tau>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T;\n         (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: rBangActE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "with QTrans \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "obtain P'' S where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\" \n                   and P''Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\"\n                   and SRelT: \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>R\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<And>P'' S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''", "by(metis weakTransitionStatEq Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<parallel> !P \\<rhd> P \\<parallel> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R : Q \\<parallel>\n                     !P \\<rhd> P \\<parallel>\n                               !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                              !P", "using \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R : Q \\<parallel>\n                     !P \\<rhd> P \\<parallel>\n                               !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                              !P", "by(force intro: weakPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> P \\<parallel>\n                             !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<parallel> !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> P \\<parallel>\n                             !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R : Q \\<parallel>\n                     !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                              !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> P \\<parallel>\n                             !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R : Q \\<parallel>\n                     !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                              !P", "by(rule weakBang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"\\<Psi> : R \\<parallel> (Q \\<parallel> !P) \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<parallel>\n             (Q \\<parallel>\n              !P) \\<rhd> R \\<parallel>\n                         !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                        (P'' \\<parallel> !P)", "using FrR \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>\\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<parallel>\n                   !P \\<rhd> !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<parallel>\n                            !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<parallel>\n             (Q \\<parallel>\n              !P) \\<rhd> R \\<parallel>\n                         !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                        (P'' \\<parallel> !P)", "by(rule_tac weakPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           (Q \\<parallel>\n            !P) \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                      (P'' \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           (Q \\<parallel>\n            !P) \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                      (P'' \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "have \"insertAssertion (extractFrame(R \\<parallel> !Q)) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame(R \\<parallel> (Q \\<parallel> !P))) \\<Psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "have \"insertAssertion (extractFrame(R \\<parallel> !P)) \\<Psi> = \\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n    \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n    \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "from \\<open>\\<Psi>\\<^sub>Q \\<simeq> \\<one>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>", "have \"\\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "by(rule_tac frameResChainPres, auto) (metis Identity compositionSym AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                     \\<Psi>\\<^sub>R \\<otimes>\n                                     \\<Psi>\\<^sub>Q \\<otimes>\n                                     \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                     \\<Psi>\\<^sub>R \\<otimes>\n                                     \\<Psi>\\<^sub>Q \\<otimes>\n                                     \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "have \"\\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>(\\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                \\<Psi>\\<^sub>R \\<otimes>\n                                \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "using \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> freshCompChain"], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes>\n                        \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                \\<Psi>\\<^sub>R \\<otimes>\n                                \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "by(subst frameResFreshChain[where xvec=A\\<^sub>Q, THEN FrameStatEqSym]) auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                              \\<Psi>\\<^sub>R \\<otimes>\n                              \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                              \\<Psi>\\<^sub>R \\<otimes>\n                              \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "have \"\\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>(\\<langle>A\\<^sub>R, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>) \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>(\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<otimes>\n                 \\<Psi>\\<^sub>Q \\<otimes>\n                 \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                         \\<Psi>\\<^sub>R \\<otimes>\n                         \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "by(rule frameResChainComm)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n               \\<Psi>\\<^sub>R \\<otimes>\n               \\<Psi>\\<^sub>Q \\<otimes>\n               \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R \\<otimes>\n                       \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "moreover"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n               \\<Psi>\\<^sub>R \\<otimes>\n               \\<Psi>\\<^sub>Q \\<otimes>\n               \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R \\<otimes>\n                       \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "have \"insertAssertion (extractFrame(R \\<parallel> (Q \\<parallel> !P))) \\<Psi> = \\<langle>(A\\<^sub>R@A\\<^sub>Q), \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> (Q \\<parallel> !P)))\n     \\<Psi> =\n    \\<langle>(A\\<^sub>R @\n              A\\<^sub>Q), \\<Psi> \\<otimes>\n                          \\<Psi>\\<^sub>R \\<otimes>\n                          \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "using FrR FrQ \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>  \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close>  freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> (Q \\<parallel> !P)))\n     \\<Psi> =\n    \\<langle>(A\\<^sub>R @\n              A\\<^sub>Q), \\<Psi> \\<otimes>\n                          \\<Psi>\\<^sub>R \\<otimes>\n                          \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi> =\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "ultimately"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                     \\<Psi>\\<^sub>R \\<otimes>\n                                     \\<Psi>\\<^sub>Q \\<otimes>\n                                     \\<one>\\<rangle>\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                              \\<Psi>\\<^sub>R \\<otimes>\n                              \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n  \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n               \\<Psi>\\<^sub>R \\<otimes>\n               \\<Psi>\\<^sub>Q \\<otimes>\n               \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R \\<otimes>\n                       \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n  insertAssertion (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi> =\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>", "have \"insertAssertion (extractFrame(R \\<parallel> !P)) \\<Psi> \\<simeq>\\<^sub>F insertAssertion (extractFrame(R \\<parallel> (Q \\<parallel> !P))) \\<Psi>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame (R \\<parallel> !P)) \\<Psi> =\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes> \\<one>\\<rangle>\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                                     \\<Psi>\\<^sub>R \\<otimes>\n                                     \\<Psi>\\<^sub>Q \\<otimes>\n                                     \\<one>\\<rangle>\n  \\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R \\<otimes>\n                      \\<Psi>\\<^sub>Q \\<otimes>\n                      \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n                              \\<Psi>\\<^sub>R \\<otimes>\n                              \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n  \\<lparr>\\<nu>*A\\<^sub>Q\\<rparr>\\<langle>A\\<^sub>R, \\<Psi> \\<otimes>\n               \\<Psi>\\<^sub>R \\<otimes>\n               \\<Psi>\\<^sub>Q \\<otimes>\n               \\<one>\\<rangle> \\<simeq>\\<^sub>F \\<lparr>\\<nu>*A\\<^sub>R\\<rparr>\\<langle>A\\<^sub>Q, \\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R \\<otimes>\n                       \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n  insertAssertion (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi> =\n  \\<langle>(A\\<^sub>R @\n            A\\<^sub>Q), \\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>R \\<otimes>\n                        \\<Psi>\\<^sub>Q \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !P))\n     \\<Psi> \\<simeq>\\<^sub>F insertAssertion\n                              (extractFrame\n                                (R \\<parallel> (Q \\<parallel> !P)))\n                              \\<Psi>", "by(auto simp add: frameChainAppend) (blast dest: FrameStatEqTrans)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> !P))\n   \\<Psi> \\<simeq>\\<^sub>F insertAssertion\n                            (extractFrame\n                              (R \\<parallel> (Q \\<parallel> !P)))\n                            \\<Psi>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame (R \\<parallel> !P))\n   \\<Psi> \\<simeq>\\<^sub>F insertAssertion\n                            (extractFrame\n                              (R \\<parallel> (Q \\<parallel> !P)))\n                            \\<Psi>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (R \\<parallel> !Q))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n (extractFrame (R \\<parallel> (Q \\<parallel> !P))) \\<Psi>", "by(simp add: FrameStatEq_def)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> !Q))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame\n (R \\<parallel> (Q \\<parallel> !P)))\n                                     \\<Psi>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (R \\<parallel> !Q))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame\n (R \\<parallel> (Q \\<parallel> !P)))\n                                     \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<parallel>\n           (Q \\<parallel>\n            !P) \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                      (P'' \\<parallel> !P)\n  insertAssertion (extractFrame (R \\<parallel> !Q))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame\n (R \\<parallel> (Q \\<parallel> !P)))\n                                     \\<Psi>", "have \"\\<Psi> : R \\<parallel> !Q \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<parallel>\n           (Q \\<parallel>\n            !P) \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                      (P'' \\<parallel> !P)\n  insertAssertion (extractFrame (R \\<parallel> !Q))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame\n (R \\<parallel> (Q \\<parallel> !P)))\n                                     \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> : R \\<parallel>\n             !Q \\<rhd> R \\<parallel>\n                       !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                      (P'' \\<parallel> !P)", "by(rule weakTransitionFrameImp)"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                    (P'' \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                    (P'' \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from PTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(force dest: weakFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P''", "have \"A\\<^sub>R \\<sharp>* S\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* S", "by(force dest: tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* S\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> T\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"A\\<^sub>R \\<sharp>* T\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* T", "by(force dest: freeFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* T\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S", "have \"((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S", "by(rule tauChainStatEq) (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym Identity)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"(\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S \\<parallel> !P\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S \\<parallel>\n                              !P", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S \\<parallel>\n                            !P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "hence \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> R \\<parallel> (P'' \\<parallel> !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> (S \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S \\<parallel>\n                            !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> R \\<parallel>\n                   (P'' \\<parallel>\n                    !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                         (S \\<parallel> !P)", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>') \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S \\<parallel>\n                            !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>' \\<rhd> R \\<parallel>\n                   (P'' \\<parallel>\n                    !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                         (S \\<parallel> !P)", "by(rule_tac tauChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R \\<parallel>\n                 (P'' \\<parallel>\n                  !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                       (S \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R \\<parallel>\n                 (P'' \\<parallel>\n                  !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                       (S \\<parallel> !P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "have \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P), R \\<parallel> Q') \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T) \\<in> Rel", "have \"((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel", "by(rule StatEq) (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "with FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>  \\<open>A\\<^sub>R \\<sharp>* \\<Psi>'\\<close> \\<open>A\\<^sub>R \\<sharp>* S\\<close> \\<open>A\\<^sub>R \\<sharp>* T\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S, R \\<parallel> T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>'\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T\n  ((\\<Psi> \\<otimes> \\<Psi>') \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S, R \\<parallel> T) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T, R \\<parallel> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T, R \\<parallel> S) \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> S) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n     R \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', (R \\<parallel> S) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S \\<parallel> !P,\n     R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P), (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> S \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(metis Trans Assoc)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n     R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "using \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n     R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'", "have \"(\\<one> \\<otimes> \\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q)\n    \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n     R \\<parallel> (T \\<parallel> !Q))\n    \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n   R \\<parallel> (T \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q', (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n   R \\<parallel> (T \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n     R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>', (R \\<parallel> T) \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> Q',\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !Q,\n     R \\<parallel> Q')\n    \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !Q,\n   R \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !Q,\n   R \\<parallel> Q')\n  \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !P,\n   R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> T \\<parallel> !Q,\n   R \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> Q')\n    \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> Q')\n  \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P',\n                                 R \\<parallel> Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                    (P'' \\<parallel> !P)\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R \\<parallel>\n                 (P'' \\<parallel>\n                  !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                       (S \\<parallel> !P)\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> Q')\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> : R \\<parallel>\n           !Q \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<alpha> \\<prec> R \\<parallel>\n                    (P'' \\<parallel> !P)\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> R \\<parallel>\n                 (P'' \\<parallel>\n                  !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel>\n                       (S \\<parallel> !P)\n  (\\<Psi> \\<otimes> \\<Psi>', R \\<parallel> (S \\<parallel> !P),\n   R \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<parallel>\n                !Q \\<rhd> R \\<parallel>\n                          !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', R \\<parallel> Q') \\<in> Rel'')", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<parallel>\n              !Q \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', R \\<parallel> Q') \\<in> Rel'')\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "case cComm1"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<rhd> R \\<longmapsto> M_\\<lparr>N_\\<rparr> \\<prec> P'_\n  extractFrame R = \\<langle>A\\<^sub>P_, \\<Psi>\\<^sub>P_\\<rangle>\n  distinct A\\<^sub>P_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<rhd> !Q \\<longmapsto> K_\\<lparr>\\<nu>*xvec_\\<rparr>\\<langle>N_\\<rangle> \\<prec> Q'_\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q_, \\<Psi>\\<^sub>Q_\\<rangle>\n  distinct A\\<^sub>Q_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<turnstile> M_ \\<leftrightarrow> K_\n  distinct xvec_\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* R\n  A\\<^sub>P_ \\<sharp>* M_\n  A\\<^sub>P_ \\<sharp>* N_\n  A\\<^sub>P_ \\<sharp>* P'_\n  A\\<^sub>P_ \\<sharp>* !Q\n  A\\<^sub>P_ \\<sharp>* xvec_\n  A\\<^sub>P_ \\<sharp>* Q'_\n  A\\<^sub>P_ \\<sharp>* A\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* (\\<Psi>', P, Q, R)\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\\<^sub>P_\n  A\\<^sub>Q_ \\<sharp>* R\n  A\\<^sub>Q_ \\<sharp>* K_\n  A\\<^sub>Q_ \\<sharp>* N_\n  A\\<^sub>Q_ \\<sharp>* P'_\n  A\\<^sub>Q_ \\<sharp>* !Q\n  A\\<^sub>Q_ \\<sharp>* xvec_\n  A\\<^sub>Q_ \\<sharp>* Q'_\n  A\\<^sub>Q_ \\<sharp>* (\\<Psi>', P, Q, R)\n  xvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>P_\n  xvec_ \\<sharp>* R\n  xvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* K_\n  xvec_ \\<sharp>* !Q\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  xvec_ \\<sharp>* (\\<Psi>', P, Q, R)\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>\\<tau> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<tau> \\<noteq> \\<tau>", "have False"], ["proof (prove)\nusing this:\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<parallel>\n                !Q \\<rhd> R \\<parallel>\n                          !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n       (\\<exists>P'a.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P'a,\n            \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n           \\<in> Rel'')", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<parallel>\n              !Q \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n     (\\<exists>P'a.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P'a,\n          \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n         \\<in> Rel'')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "case cComm2"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<rhd> R \\<longmapsto> M_\\<lparr>\\<nu>*xvec_\\<rparr>\\<langle>N_\\<rangle> \\<prec> P'_\n  extractFrame R = \\<langle>A\\<^sub>P_, \\<Psi>\\<^sub>P_\\<rangle>\n  distinct A\\<^sub>P_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<rhd> !Q \\<longmapsto> K_\\<lparr>N_\\<rparr> \\<prec> Q'_\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q_, \\<Psi>\\<^sub>Q_\\<rangle>\n  distinct A\\<^sub>Q_\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P_ \\<otimes>\n  \\<Psi>\\<^sub>Q_ \\<turnstile> M_ \\<leftrightarrow> K_\n  distinct xvec_\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\n  A\\<^sub>P_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* R\n  A\\<^sub>P_ \\<sharp>* M_\n  A\\<^sub>P_ \\<sharp>* N_\n  A\\<^sub>P_ \\<sharp>* P'_\n  A\\<^sub>P_ \\<sharp>* !Q\n  A\\<^sub>P_ \\<sharp>* xvec_\n  A\\<^sub>P_ \\<sharp>* Q'_\n  A\\<^sub>P_ \\<sharp>* A\\<^sub>Q_\n  A\\<^sub>P_ \\<sharp>* (\\<Psi>', P, Q, R)\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\n  A\\<^sub>Q_ \\<sharp>* \\<Psi>\\<^sub>P_\n  A\\<^sub>Q_ \\<sharp>* R\n  A\\<^sub>Q_ \\<sharp>* K_\n  A\\<^sub>Q_ \\<sharp>* N_\n  A\\<^sub>Q_ \\<sharp>* P'_\n  A\\<^sub>Q_ \\<sharp>* !Q\n  A\\<^sub>Q_ \\<sharp>* xvec_\n  A\\<^sub>Q_ \\<sharp>* Q'_\n  A\\<^sub>Q_ \\<sharp>* (\\<Psi>', P, Q, R)\n  xvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>P_\n  xvec_ \\<sharp>* R\n  xvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* K_\n  xvec_ \\<sharp>* !Q\n  xvec_ \\<sharp>* \\<Psi>\\<^sub>Q_\n  xvec_ \\<sharp>* (\\<Psi>', P, Q, R)\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "from \\<open>\\<tau> \\<noteq> \\<tau>\\<close>"], ["proof (chain)\npicking this:\n  \\<tau> \\<noteq> \\<tau>", "have False"], ["proof (prove)\nusing this:\n  \\<tau> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>', P, Q, R); A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>', P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>', P, Q, R); \\<tau> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : R \\<parallel>\n                                     !Q \\<rhd> R \\<parallel>\n         !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n                            (\\<exists>P'a.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P'a,\n                                 \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     Q')\n                                \\<in> Rel'')", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : R \\<parallel>\n                !Q \\<rhd> R \\<parallel>\n                          !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n       (\\<exists>P'a.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P'a,\n            \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n           \\<in> Rel'')", "by simp"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<parallel>\n              !Q \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<tau> \\<prec> P'' \\<and>\n     (\\<exists>P'a.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P'a,\n          \\<lparr>\\<nu>*xvec_\\<rparr>P'_ \\<parallel> Q'_)\n         \\<in> Rel'')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : R \\<parallel>\n              !Q \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', RQ') \\<in> Rel'')\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cTau RQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto>\\<tau> \\<prec> RQ'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', RQ') \\<in> Rel''", "proof(induct rule: parTauCases[where C=\"(P, Q, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cPar1 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close> \\<open>\\<Psi>\\<^sub>Q = SBottom'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> (R' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      !P", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cPar2 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q \\<Psi>\\<^sub>Q where FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q \\<sharp>* A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q \\<Psi>\\<^sub>Q.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n         A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  guarded Q", "obtain T where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> T\" and \"(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel>\n Q \\<longmapsto> \\<tau> \\<prec> T;\n         (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: rBangTauE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P \\<parallel> P, Q \\<parallel> Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P \\<parallel> P, Q \\<parallel> Q)\n    \\<in> Rel", "by(rule ParPres2)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P \\<parallel> P, Q \\<parallel> Q)\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P \\<parallel> P, Q \\<parallel> Q)\n  \\<in> Rel", "obtain S where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\" and SRelT: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P \\<parallel> P, Q \\<parallel> Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  guarded P", "obtain U where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  guarded P\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P)\n         \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: rBangTauI)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* U\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* U", "by(force dest: tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\\<close> FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> U\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U", "by(rule_tac tauChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* S", "by(force dest: tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* S\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q", "have \"A\\<^sub>R \\<sharp>* T\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* T", "by(force dest: tauFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* T\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\\<close> Rel'Rel"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n  Rel' \\<subseteq> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n  Rel' \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel", "by auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* U\\<close> \\<open>A\\<^sub>R \\<sharp>* S\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* U\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<close> FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* S\\<close> \\<open>A\\<^sub>R \\<sharp>* T\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T", "have \"(\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> S) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> S) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> (S \\<parallel> !P), (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(metis Trans Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi>, R \\<parallel> U, (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel", "by(rule Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "using \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'", "have \"(\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> Q', (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R \\<parallel> U\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cComm1 \\<Psi>\\<^sub>Q M N R' A\\<^sub>R \\<Psi>\\<^sub>R K xvec Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>xvec \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, Q, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrQ: \"extractFrame(!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* M", "obtain A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>' where FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, xvec, P, Q)\" and C'=\"(\\<Psi>, xvec, P, Q)\" in expandFrame) auto"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>guarded Q\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  guarded Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* K", "obtain S where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\" and \"(\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  guarded Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S;\n         (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: rBangActE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'", "obtain P' T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\" and \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P'\" and  \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* P'", "by(force dest: weakOutputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'", "have \"A\\<^sub>R' \\<sharp>* T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* T", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* T\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>R' \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* S", "by(force dest: outputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* S\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q' \\<Psi>\\<^sub>Q' where FrQ': \"extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* M\" and \"A\\<^sub>Q' \\<sharp>* R\" and \"A\\<^sub>Q' \\<sharp>* K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q' \\<Psi>\\<^sub>Q'.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>;\n         A\\<^sub>Q' \\<sharp>* \\<Psi>; A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q' \\<sharp>* A\\<^sub>R; A\\<^sub>Q' \\<sharp>* M;\n         A\\<^sub>Q' \\<sharp>* R; A\\<^sub>Q' \\<sharp>* K\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R, K, M, R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ' \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q' = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q' \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q' = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "obtain P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                             and NilImpP'': \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                             and P''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrQ' \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac weakTransitionE) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "proof(induct rule: tauChainCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "case TauBase"], ["proof (state)\nthis:\n  P = P''\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "from P''Trans \\<open>P = P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  P = P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  P = P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(force intro: Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(rule Bang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "by(force intro: Comm1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "by(rule tauActTauChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "case TauStep"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "obtain A\\<^sub>P'' \\<Psi>\\<^sub>P'' where FrP'': \"extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P'' \\<sharp>* K\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P'' \\<sharp>* R\" and \"A\\<^sub>P'' \\<sharp>* P''\" and \"A\\<^sub>P'' \\<sharp>* P\"\n                          and \"A\\<^sub>P'' \\<sharp>* A\\<^sub>R\" and \"distinct A\\<^sub>P''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P'' \\<Psi>\\<^sub>P''.\n        \\<lbrakk>extractFrame P'' =\n                 \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>; A\\<^sub>P'' \\<sharp>* K;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R; A\\<^sub>P'' \\<sharp>* R;\n         A\\<^sub>P'' \\<sharp>* P''; A\\<^sub>P'' \\<sharp>* P;\n         A\\<^sub>P'' \\<sharp>* A\\<^sub>R; distinct A\\<^sub>P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, K, A\\<^sub>R, \\<Psi>\\<^sub>R, R, P'', P)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* K\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  distinct A\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(drule_tac tauChainFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "with FrP'' \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "by(rule tauStepChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule_tac tauStepChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule tauStepChainBang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "hence  \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "by(rule_tac tauStepChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> (P'' \\<parallel> !P) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "by simp (metis statEqTransition AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P'' \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence P''PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrP''"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>", "have FrP''P: \"extractFrame(P'' \\<parallel> !P) = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame (P'' \\<parallel> !P) =\n    \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by simp (metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>)) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n            \\<Psi>\\<^sub>R) \\<otimes>\n           \\<Psi>\\<^sub>Q'\\<rangle>", "by(rule_tac frameResChainPres, simp)\n              (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "from NilImpP'' FrQ FrP'' \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P''\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                          \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n               \\<Psi>\\<^sub>R\\<rangle>", "by(rule frameResChainPres, simp) \n              (metis Identity AssertionStatEqSym Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "obtain M' where RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> R'\" and \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\" and \"A\\<^sub>R \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrR FrQ' \\<open>distinct A\\<^sub>R\\<close> \\<open>distinct A\\<^sub>P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>  \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q' \\<sharp>* K\\<close> \\<open>A\\<^sub>Q' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close>\n                     \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close>  \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  distinct A\\<^sub>R\n  distinct A\\<^sub>P''\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* K\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac A\\<^sub>Q=\"A\\<^sub>Q'\" and Q=\"Q\" in comm2Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>R \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "note RTrans FrR P''PTrans FrP''P"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "by(metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M'\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M'\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* K\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (P' \\<parallel> !P)", "by(drule_tac tauActTauChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "have \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes> \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n    \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "by(rule tauChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                       !P", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<rhd> P' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                       !P", "by(rule tauChainStatEq) (metis Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel> !P\\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                               !P", "using \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                               !P", "by(rule_tac tauChainStatEq) (auto intro: compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R' \\<parallel> (P' \\<parallel> !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> (T \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  (P' \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        (T \\<parallel> !P)", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  (P' \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        (T \\<parallel> !P)", "by(rule_tac tauChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P)) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      (P' \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      (P' \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (P' \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          (T \\<parallel> !P)", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P)), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel", "by(rule StatEq) (metis Associativity)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "using \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "by(rule_tac StatEq) (auto dest: compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* S\\<close> \\<open>A\\<^sub>R' \\<sharp>* T\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> T) \\<parallel> !P, (R' \\<parallel> S) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> T \\<parallel> !P,\n     R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> T) \\<parallel> !P), \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> S) \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ResPres)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "by(force intro: Trans ScopeExt)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P)), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "by(force intro: Trans ResPres Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'", "have \"(\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q))\n    \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> S) \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> S) \\<parallel> !Q), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule ResPres')"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !Q, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(force intro: Trans' ScopeExt'[THEN cSym'])"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (T \\<parallel> !P)\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        (T \\<parallel> !P)\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N R' A\\<^sub>R \\<Psi>\\<^sub>R K Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>xvec \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, Q, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrQ: \"extractFrame(!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R \\<sharp>* M", "obtain p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>' where FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\" and \"distinctPerm p\" and \"(p \\<bullet> xvec) \\<sharp>* N\" and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* R'\" and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* N\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R' p \\<Psi>'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         distinctPerm p; (p \\<bullet> xvec) \\<sharp>* N;\n         (p \\<bullet> xvec) \\<sharp>* Q; (p \\<bullet> xvec) \\<sharp>* R';\n         (p \\<bullet> xvec) \\<sharp>* P;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* xvec;\n         A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q)\"  and C'=\"(\\<Psi>, P, Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* R'\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close> S \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'", "have  RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                    xvec)\\<rparr>\\<langle>(p \\<bullet>\n     N)\\<rangle> \\<prec> p \\<bullet> R'", "by(simp add: boundOutputChainAlpha'' residualInject)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\\<close> S \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close>  \\<open>xvec \\<sharp>* Q\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* Q\n  xvec \\<sharp>* Q\n  distinctPerm p", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* Q\n  xvec \\<sharp>* Q\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> p \\<bullet> Q'", "by(rule_tac inputAlpha) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'", "obtain S where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> S\" and \"(\\<one>, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n                           N)\\<rparr> \\<prec> S;\n         (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n                           N)\\<rparr> \\<prec> S;\n         (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: rBangActE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'", "obtain P' T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\" \n                             and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\" \n                             and \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                                  N)\\<rparr> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n          T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R' \\<sharp>* N\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with PTrans \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(force dest: weakInputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R' \\<sharp>* P'", "have \"A\\<^sub>R' \\<sharp>* T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* T", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "have \"A\\<^sub>R' \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* S", "by(force dest: inputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q' \\<Psi>\\<^sub>Q' where FrQ': \"extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* M\" and \"A\\<^sub>Q' \\<sharp>* R\" and \"A\\<^sub>Q' \\<sharp>* K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q' \\<Psi>\\<^sub>Q'.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>;\n         A\\<^sub>Q' \\<sharp>* \\<Psi>; A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q' \\<sharp>* A\\<^sub>R; A\\<^sub>Q' \\<sharp>* M;\n         A\\<^sub>Q' \\<sharp>* R; A\\<^sub>Q' \\<sharp>* K\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R, K, M, R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ' \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q' = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q' \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q' = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'", "obtain P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                             and NilImpP'': \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                             and P''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n                     N)\\<rparr> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrQ' \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n                     N)\\<rparr> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac weakTransitionE) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close> PChain"], ["proof (chain)\npicking this:\n  (p \\<bullet> xvec) \\<sharp>* P\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"(p \\<bullet> xvec) \\<sharp>* P''\" and \"xvec \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  (p \\<bullet> xvec) \\<sharp>* P\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* P'' &&& xvec \\<sharp>* P''", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* P''\n  xvec \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> xvec) \\<sharp>* N\n  distinctPerm p", "have \"xvec \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  (p \\<bullet> xvec) \\<sharp>* N\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* (p \\<bullet> N)", "by(subst pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst, where pi=p, symmetric]) simp"], ["proof (state)\nthis:\n  xvec \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P''Trans \\<open>xvec \\<sharp>* P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  xvec \\<sharp>* P''\n  xvec \\<sharp>* (p \\<bullet> N)", "have \"xvec \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  xvec \\<sharp>* P''\n  xvec \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P'", "by(force dest: inputFreshChainDerivative)"], ["proof (state)\nthis:\n  xvec \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "proof(induct rule: tauChainCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "case TauBase"], ["proof (state)\nthis:\n  P = P''\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "from RTrans FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n            xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                   N)\\<rangle> \\<prec> p \\<bullet> R'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "from P''Trans \\<open>P = P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  P = P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr>\\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  P = P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(force intro: Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(rule Bang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M\n  (p \\<bullet> xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "by(force intro: Comm2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "by(rule tauActTauChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                  xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "case TauStep"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "obtain A\\<^sub>P'' \\<Psi>\\<^sub>P'' where FrP'': \"extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P'' \\<sharp>* K\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P'' \\<sharp>* R\" and \"A\\<^sub>P'' \\<sharp>* P''\" and \"A\\<^sub>P'' \\<sharp>* P\"\n                          and \"A\\<^sub>P'' \\<sharp>* A\\<^sub>R\" and \"distinct A\\<^sub>P''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P'' \\<Psi>\\<^sub>P''.\n        \\<lbrakk>extractFrame P'' =\n                 \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>; A\\<^sub>P'' \\<sharp>* K;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R; A\\<^sub>P'' \\<sharp>* R;\n         A\\<^sub>P'' \\<sharp>* P''; A\\<^sub>P'' \\<sharp>* P;\n         A\\<^sub>P'' \\<sharp>* A\\<^sub>R; distinct A\\<^sub>P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, K, A\\<^sub>R, \\<Psi>\\<^sub>R, R, P'', P)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* K\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  distinct A\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(drule_tac tauChainFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "with FrP'' \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "by(rule tauStepChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule_tac tauStepChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule tauStepChainBang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "hence  \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "by(rule_tac tauStepChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> (P'' \\<parallel> !P) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> RTrans"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                     xvec)\\<rparr>\\<langle>(p \\<bullet>\n      N)\\<rangle> \\<prec> p \\<bullet> R'", "by simp (metis statEqTransition AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P'' \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n        N)\\<rparr> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence P''PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrP''"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>", "have FrP''P: \"extractFrame(P'' \\<parallel> !P) = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame (P'' \\<parallel> !P) =\n    \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by simp (metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>)) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n            \\<Psi>\\<^sub>R) \\<otimes>\n           \\<Psi>\\<^sub>Q'\\<rangle>", "by(rule_tac frameResChainPres, simp)\n              (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "from NilImpP'' FrQ FrP'' \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P''\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                          \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n               \\<Psi>\\<^sub>R\\<rangle>", "by(rule frameResChainPres, simp) \n              (metis Identity AssertionStatEqSym Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "obtain M' where RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M'\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\" and \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\" and \"A\\<^sub>R \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n                          xvec)\\<rparr>\\<langle>(p \\<bullet>\n           N)\\<rangle> \\<prec> p \\<bullet> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrR FrQ' \\<open>distinct A\\<^sub>R\\<close> \\<open>distinct A\\<^sub>P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>  \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q' \\<sharp>* K\\<close> \\<open>A\\<^sub>Q' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close>\n                     \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close>  \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  distinct A\\<^sub>R\n  distinct A\\<^sub>P''\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n                          xvec)\\<rparr>\\<langle>(p \\<bullet>\n           N)\\<rangle> \\<prec> p \\<bullet> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac A\\<^sub>Q=\"A\\<^sub>Q'\" and Q=\"Q\" in comm1Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>R \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "note RTrans FrR P''PTrans FrP''P"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "by(metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M'\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P''\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M'\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* P''\n  (p \\<bullet> xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                    xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n          (P' \\<parallel> !P)", "by(drule_tac tauActTauChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                  xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                  xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                  xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n        (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          ((p \\<bullet> P') \\<parallel> !P)", "using \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                                  xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n        (P' \\<parallel> !P)\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n  (p \\<bullet> xvec) \\<sharp>* R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          ((p \\<bullet> P') \\<parallel> !P)", "by(subst resChainAlpha[where p=p]) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> P') \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> P') \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(rule tauChainEqvt)"], ["proof (state)\nthis:\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>') \\<otimes> \\<one> \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n     \\<Psi>') \\<otimes>\n    \\<one> \\<rhd> p \\<bullet>\n                  P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(rule tauChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> p \\<bullet>\n                P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> p \\<bullet>\n                P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                        T) \\<parallel>\n                       !P", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                        T) \\<parallel>\n                       !P", "by(rule tauChainStatEq) (metis Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                                T) \\<parallel>\n                               !P", "using \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq>  \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                                T) \\<parallel>\n                               !P", "by(rule_tac tauChainStatEq) (auto intro: compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  ((p \\<bullet> P') \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        ((p \\<bullet> T) \\<parallel> !P)", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  ((p \\<bullet> P') \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        ((p \\<bullet> T) \\<parallel> !P)", "by(rule_tac tauChainPar2) (auto simp add: freshChainSimps)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P)) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      ((p \\<bullet> P') \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      ((p \\<bullet> P') \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> P') \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> P') \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n          ((p \\<bullet> T) \\<parallel> !P)", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>')), (p \\<bullet> T), (p \\<bullet> S)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet>\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule Closed)"], ["proof (state)\nthis:\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>distinctPerm p\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel", "have \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule StatEq) (metis Associativity)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "using \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule_tac StatEq) (auto dest: compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>A\\<^sub>R' \\<sharp>* S\\<close> \\<open>A\\<^sub>R' \\<sharp>* T\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\" and \"A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* (p \\<bullet> S) &&&\n    A\\<^sub>R' \\<sharp>* (p \\<bullet> T)", "by(simp add: freshChainSimps)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)", "have \"(\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n    \\<in> Rel", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n    \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P, (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n     R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P), \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> S)) \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !P)\n    \\<in> Rel", "by(rule ResPres)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "by(force intro: Trans ScopeExt)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "by(force intro: Trans ResPres Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<one>, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'", "have \"(p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q', p \\<bullet> (S \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n     p \\<bullet> S \\<parallel> !Q)\n    \\<in> Rel'", "by(rule Closed')"], ["proof (state)\nthis:\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'", "have \"(\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n    \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n    \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n     R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule ResPres')"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !Q, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(force intro: Trans' ScopeExt'[THEN cSym'])"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> T) \\<parallel> !P)\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n        ((p \\<bullet> T) \\<parallel> !P)\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', RQ') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["", "notation relcomp (infixr \"O\" 75)"], ["", "end"], ["", "end"]]}