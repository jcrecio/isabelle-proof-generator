{"file_name": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi/Sim_Struct_Cong.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi", "problem_names": ["lemma partitionListLeft:\n  assumes \"xs@ys=xs'@y#ys'\"\n  and     \"y mem xs\"\n  and     \"distinct(xs@ys)\"\n\n  obtains zs where \"xs = xs'@y#zs\" and \"ys'=zs@ys\"", "lemma partitionListRight: \n  assumes \"xs@ys=xs'@y#ys'\"\n  and     \"y mem ys\"\n  and     \"distinct(xs@ys)\"\n\n  obtains zs where \"xs' = xs@zs\" and \"ys=zs@y#ys'\"", "lemma resComm:\n  fixes \\<Psi>   :: 'b\n  and   x   :: name\n  and   y   :: name\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   P   :: \"('a, 'b, 'c) psi\"\n  \n  assumes \"x \\<sharp> \\<Psi>\"\n  and     \"y \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     R1: \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n  and     R2: \"\\<And>\\<Psi>' a b Q. \\<lbrakk>a \\<sharp> \\<Psi>'; b \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>a\\<rparr>(\\<lparr>\\<nu>b\\<rparr>Q), \\<lparr>\\<nu>b\\<rparr>(\\<lparr>\\<nu>a\\<rparr>Q)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\"", "lemma parAssocLeft:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   R   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. (\\<Psi>, (S \\<parallel> T) \\<parallel> U, S \\<parallel> (T \\<parallel> U)) \\<in> Rel\"\n  and     C2: \"\\<And>xvec \\<Psi>' S T U. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* S\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>((S \\<parallel> T) \\<parallel> U), S \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>(T \\<parallel> U))) \\<in> Rel\"\n  and     C3: \"\\<And>xvec \\<Psi>' S T U. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* U\\<rbrakk> \\<Longrightarrow> (\\<Psi>', (\\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T)) \\<parallel> U, \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> (T \\<parallel> U))) \\<in> Rel\"\n  and     C4: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<leadsto>[Rel] P \\<parallel> (Q \\<parallel> R)\"", "lemma parNilLeft:\n  fixes \\<Psi> :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"  \n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q \\<parallel> \\<zero>, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> (P \\<parallel> \\<zero>) \\<leadsto>[Rel] P\"", "lemma parNilRight:\n  fixes \\<Psi> :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"  \n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, (Q \\<parallel> \\<zero>)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] (P \\<parallel> \\<zero>)\"", "lemma resNilLeft:\n  fixes x   :: name\n  and   \\<Psi>   :: 'b\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>\\<zero> \\<leadsto>[Rel] \\<zero>\"", "lemma resNilRight:\n  fixes x   :: name\n  and   \\<Psi>   :: 'b\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  shows \"\\<Psi> \\<rhd> \\<zero> \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>\\<zero>\"", "lemma inputPushResLeft:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> xvec\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\"", "lemma inputPushResRight:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> xvec\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\"", "lemma outputPushResLeft:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\"", "lemma outputPushResRight:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\"", "lemma casePushResLeft:\n  fixes \\<Psi>  :: 'b\n  and   x  :: name\n  and   Cs :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> map fst Cs\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\"", "lemma casePushResRight:\n  fixes \\<Psi>  :: 'b\n  and   x  :: name\n  and   Cs :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> map fst Cs\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\"", "lemma resInputCases[consumes 5, case_names cRes]:\n  fixes \\<Psi>    :: 'b\n  and   x    :: name\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P'   :: \"('a, 'b, 'c) psi\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     \"x \\<sharp> P'\"\n  and     rScope:  \"\\<And>P'. \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\\<rbrakk> \\<Longrightarrow> Prop (\\<lparr>\\<nu>x\\<rparr>P')\"\n\n  shows \"Prop P'\"", "lemma scopeExtLeft:\n  fixes x   :: name\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"x \\<sharp> P\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R. (\\<Psi>', R, R) \\<in> Rel\"\n  and     C2: \"\\<And>y \\<Psi>' R S zvec. \\<lbrakk>y \\<sharp> \\<Psi>'; y \\<sharp> R; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> S)), \\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> \\<lparr>\\<nu>y\\<rparr>S)) \\<in> Rel\"\n  and     C3: \"\\<And>\\<Psi>' zvec R y. \\<lbrakk>y \\<sharp> \\<Psi>'; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>R), \\<lparr>\\<nu>*zvec\\<rparr>(\\<lparr>\\<nu>y\\<rparr>R)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\"", "lemma scopeExtRight:\n  fixes x   :: name\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"x \\<sharp> P\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R. (\\<Psi>, R, R) \\<in> Rel\"\n  and     C2: \"\\<And>y \\<Psi>' R S zvec. \\<lbrakk>y \\<sharp> \\<Psi>'; y \\<sharp> R; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> \\<lparr>\\<nu>y\\<rparr>S), \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> S))) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\"", "lemma simParComm:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R S. (\\<Psi>', R \\<parallel> S, S \\<parallel> R) \\<in> Rel\"\n  and     C2: \"\\<And>\\<Psi>' R S xvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>R, \\<lparr>\\<nu>*xvec\\<rparr>S) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> Q \\<leadsto>[Rel] Q \\<parallel> P\"", "lemma bangExtLeft:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes \"guarded P\"\n  and     \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> !P \\<leadsto>[Rel] P \\<parallel> !P\"", "lemma bangExtRight:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes C1: \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> !P \\<leadsto>[Rel] !P\""], "translations": [["", "lemma partitionListLeft:\n  assumes \"xs@ys=xs'@y#ys'\"\n  and     \"y mem xs\"\n  and     \"distinct(xs@ys)\"\n\n  obtains zs where \"xs = xs'@y#zs\" and \"ys'=zs@ys\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>zs.\n        \\<lbrakk>xs = xs' @ y # zs; ys' = zs @ ys\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  xs @ ys = xs' @ y # ys'\n  y mem xs\n  distinct (xs @ ys)\n\ngoal (1 subgoal):\n 1. (\\<And>zs.\n        \\<lbrakk>xs = xs' @ y # zs; ys' = zs @ ys\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto simp add: append_eq_append_conv2 append_eq_Cons_conv)"], ["", "lemma partitionListRight: \n  assumes \"xs@ys=xs'@y#ys'\"\n  and     \"y mem ys\"\n  and     \"distinct(xs@ys)\"\n\n  obtains zs where \"xs' = xs@zs\" and \"ys=zs@y#ys'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>zs.\n        \\<lbrakk>xs' = xs @ zs; ys = zs @ y # ys'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  xs @ ys = xs' @ y # ys'\n  y mem ys\n  distinct (xs @ ys)\n\ngoal (1 subgoal):\n 1. (\\<And>zs.\n        \\<lbrakk>xs' = xs @ zs; ys = zs @ y # ys'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force simp add: append_eq_append_conv2 append_eq_Cons_conv)"], ["", "context env begin"], ["", "lemma resComm:\n  fixes \\<Psi>   :: 'b\n  and   x   :: name\n  and   y   :: name\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   P   :: \"('a, 'b, 'c) psi\"\n  \n  assumes \"x \\<sharp> \\<Psi>\"\n  and     \"y \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     R1: \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n  and     R2: \"\\<And>\\<Psi>' a b Q. \\<lbrakk>a \\<sharp> \\<Psi>'; b \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>a\\<rparr>(\\<lparr>\\<nu>b\\<rparr>Q), \\<lparr>\\<nu>b\\<rparr>(\\<lparr>\\<nu>a\\<rparr>Q)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "proof(case_tac \"x=y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "assume \"x = y\""], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "using R1"], ["proof (prove)\nusing this:\n  x = y\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "by(force intro: reflexive)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "assume \"x \\<noteq> y\""], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "note \\<open>eqvt Rel\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>", "have \"[x, y] \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. [x, y] \\<sharp>* \\<Psi>", "by(simp add: fresh_star_def)"], ["proof (state)\nthis:\n  [x, y] \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "moreover"], ["proof (state)\nthis:\n  [x, y] \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "have \"[x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  [x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "moreover"], ["proof (state)\nthis:\n  [x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "have \"[x, y] \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [x, y] \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  [x, y] \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  [x, y] \\<sharp>* \\<Psi>\n  [x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n  [x, y] \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  [x, y] \\<sharp>* \\<Psi>\n  [x, y] \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n  [x, y] \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)", "proof(induct rule: simIChainFresh[where C=\"(x, y)\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* (x, y)\n  [x, y] \\<sharp>* \\<alpha>\n  [x, y] \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (x, y)\\<close> \\<open>bn \\<alpha> \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P))\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (x, y)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)", "have \"x \\<sharp> bn \\<alpha>\" and \"y \\<sharp> bn \\<alpha>\" and \"bn \\<alpha> \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (x, y)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P)\n\ngoal (1 subgoal):\n 1. x \\<sharp> bn \\<alpha> &&&\n    y \\<sharp> bn \\<alpha> &&& bn \\<alpha> \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> bn \\<alpha>\n  y \\<sharp> bn \\<alpha>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>[x, y] \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  [x, y] \\<sharp>* \\<alpha>", "have \"x \\<sharp> \\<alpha>\" and \"y \\<sharp> \\<alpha>\""], ["proof (prove)\nusing this:\n  [x, y] \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<alpha> &&& y \\<sharp> \\<alpha>", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> \\<alpha>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>[x, y] \\<sharp>* P'\\<close>"], ["proof (chain)\npicking this:\n  [x, y] \\<sharp>* P'", "have \"x \\<sharp> P'\" and \"y \\<sharp> P'\""], ["proof (prove)\nusing this:\n  [x, y] \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. x \\<sharp> P' &&& y \\<sharp> P'", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P'\n  y \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (x, y); [x, y] \\<sharp>* \\<alpha>;\n        [x, y] \\<sharp>* Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close> \\<open>y \\<sharp> P'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>\n  y \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>\n  y \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>\n  y \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: resCases')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M yvec1 yvec2 y' N P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y \\<sharp> N\n  y \\<sharp> P'\n  y \\<noteq> y'\n  y' \\<sharp> yvec1\n  y' \\<sharp> yvec2\n  y' \\<sharp> M\n  distinct yvec1\n  distinct yvec2\n  yvec1 \\<sharp>* \\<Psi>\n  y' \\<sharp> \\<Psi>\n  yvec2 \\<sharp>* \\<Psi>\n  yvec1 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  yvec2 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  yvec1 \\<sharp>* M\n  y' \\<sharp> M\n  yvec2 \\<sharp>* M\n  yvec1 \\<sharp>* yvec2\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> P'\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      y' #\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      y' # yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      y' #\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M\\<lparr>\\<nu>*(yvec1 @\n         y' # yvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>yvec1 \\<sharp>* yvec2\\<close> \\<open>distinct yvec1\\<close> \\<open>distinct yvec2\\<close>"], ["proof (chain)\npicking this:\n  yvec1 \\<sharp>* yvec2\n  distinct yvec1\n  distinct yvec2", "have \"distinct(yvec1@yvec2)\""], ["proof (prove)\nusing this:\n  yvec1 \\<sharp>* yvec2\n  distinct yvec1\n  distinct yvec2\n\ngoal (1 subgoal):\n 1. distinct (yvec1 @ yvec2)", "by auto"], ["proof (state)\nthis:\n  distinct (yvec1 @ yvec2)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> M\" and \"x \\<sharp> yvec1\" and \"x \\<noteq> y'\" and \"x \\<sharp> yvec2\" and \"x \\<sharp> N\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. (x \\<sharp> M &&& x \\<sharp> yvec1) &&&\n    x \\<noteq> y' &&& x \\<sharp> yvec2 &&& x \\<sharp> N", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> M\n  x \\<sharp> yvec1\n  x \\<noteq> y'\n  x \\<sharp> yvec2\n  x \\<sharp> N\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>y \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"y \\<sharp> M\" and \"y \\<sharp> yvec1\" and \"y \\<sharp> yvec2\""], ["proof (prove)\nusing this:\n  y \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ y' # yvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. y \\<sharp> M &&& y \\<sharp> yvec1 &&& y \\<sharp> yvec2", "by simp+"], ["proof (state)\nthis:\n  y \\<sharp> M\n  y \\<sharp> yvec1\n  y \\<sharp> yvec2\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> ([(y, y')] \\<bullet> \\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<close> \\<open>x \\<noteq> y\\<close> \\<open>x \\<noteq> y'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<noteq> y\n  x \\<noteq> y'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet> P) \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<noteq> y\n  x \\<noteq> y'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet>\n   P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                    yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "note \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> N\\<close> \\<open>x \\<sharp> yvec1\\<close> \\<open>x \\<sharp> yvec2\\<close> \\<open>x \\<sharp> M\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> N\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2\n  x \\<sharp> M", "have \"x \\<sharp> M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle>\""], ["proof (prove)\nusing this:\n  x \\<sharp> N\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2\n  x \\<sharp> M\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "note \\<open>x \\<sharp> P'\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>yvec1 \\<sharp>* \\<Psi>\\<close> \\<open>yvec2 \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  yvec1 \\<sharp>* \\<Psi>\n  yvec2 \\<sharp>* \\<Psi>", "have \"bn(M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  yvec1 \\<sharp>* \\<Psi>\n  yvec2 \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. bn (M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>yvec1 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>yvec2 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>y \\<sharp> yvec1\\<close> \\<open>y' \\<sharp> yvec1\\<close> \\<open>y \\<sharp> yvec2\\<close> \\<open>y' \\<sharp> yvec2\\<close> \\<open>x \\<sharp> yvec1\\<close> \\<open>x \\<sharp> yvec2\\<close>"], ["proof (chain)\npicking this:\n  yvec1 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  yvec2 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  y \\<sharp> yvec1\n  y' \\<sharp> yvec1\n  y \\<sharp> yvec2\n  y' \\<sharp> yvec2\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2", "have \"bn(M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y, y')] \\<bullet> P)\""], ["proof (prove)\nusing this:\n  yvec1 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  yvec2 \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P\n  y \\<sharp> yvec1\n  y' \\<sharp> yvec1\n  y \\<sharp> yvec2\n  y' \\<sharp> yvec2\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2\n\ngoal (1 subgoal):\n 1. bn (M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y,\n                                  y')] \\<bullet>\n                                P)", "by simp"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y,\n                                y')] \\<bullet>\n                              P)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y,\n                                y')] \\<bullet>\n                              P)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>yvec1 \\<sharp>* M\\<close> \\<open>yvec2 \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  yvec1 \\<sharp>* M\n  yvec2 \\<sharp>* M", "have \"bn(M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject(M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>)\""], ["proof (prove)\nusing this:\n  yvec1 \\<sharp>* M\n  yvec2 \\<sharp>* M\n\ngoal (1 subgoal):\n 1. bn (M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                (M\\<lparr>\\<nu>*(yvec1 @\n           yvec2)\\<rparr>\\<langle>N\\<rangle>)", "by simp"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M\\<lparr>\\<nu>*(yvec1 @\n         yvec2)\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M\\<lparr>\\<nu>*(yvec1 @\n         yvec2)\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "have \"bn(M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) = yvec1@yvec2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n    yvec1 @ yvec2", "by simp"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  yvec1 @ yvec2\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  yvec1 @ yvec2\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "have \"subject(M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) = Some M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n    Some M", "by simp"], ["proof (state)\nthis:\n  subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "have \"object(M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) = Some N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n    Some N", "by simp"], ["proof (state)\nthis:\n  object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some N\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, ya)] \\<bullet>\n                              \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; y \\<sharp> N; y \\<sharp> P'; y \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P;\n        ya \\<sharp> \\<lparr>\\<nu>x\\<rparr>P;\n        yvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>P; xvec \\<sharp>* M;\n        ya \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        x \\<sharp> P';\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            ya #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                                   (M\\<lparr>\\<nu>*(xvec @\n              ya # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> P'\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y,\n                                y')] \\<bullet>\n                              P)\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M\\<lparr>\\<nu>*(yvec1 @\n         yvec2)\\<rparr>\\<langle>N\\<rangle>)\n  bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  yvec1 @ yvec2\n  subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some M\n  object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some N", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>([(y, y')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> P'\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* ([(y,\n                                y')] \\<bullet>\n                              P)\n  bn (M\\<lparr>\\<nu>*(yvec1 @\n                      yvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M\\<lparr>\\<nu>*(yvec1 @\n         yvec2)\\<rparr>\\<langle>N\\<rangle>)\n  bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  yvec1 @ yvec2\n  subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some M\n  object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some N\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "proof(induct rule: resCases')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M' xvec1 xvec2 x' N' P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                [(y, y')] \\<bullet>\n                P \\<longmapsto> M'\\<lparr>\\<nu>*(xvec1 @\n           xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  x' \\<in> supp N'\n  x \\<sharp> N'\n  x \\<sharp> P'\n  x \\<noteq> x'\n  x' \\<sharp> xvec1\n  x' \\<sharp> xvec2\n  x' \\<sharp> M'\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  x' \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* ([(y, y')] \\<bullet> P)\n  x' \\<sharp> [(y, y')] \\<bullet> P\n  xvec2 \\<sharp>* ([(y, y')] \\<bullet> P)\n  xvec1 \\<sharp>* M'\n  x' \\<sharp> M'\n  xvec2 \\<sharp>* M'\n  xvec1 \\<sharp>* xvec2\n  bn (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  yvec1 @ yvec2\n  subject\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M\n  object\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) = yvec1 @ yvec2\\<close>"], ["proof (chain)\npicking this:\n  bn (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  yvec1 @ yvec2", "have \"yvec1@yvec2 = xvec1@x'#xvec2\""], ["proof (prove)\nusing this:\n  bn (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  yvec1 @ yvec2\n\ngoal (1 subgoal):\n 1. yvec1 @ yvec2 = xvec1 @ x' # xvec2", "by simp"], ["proof (state)\nthis:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>subject(M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) = Some M\\<close>"], ["proof (chain)\npicking this:\n  subject\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M", "have \"M = M'\""], ["proof (prove)\nusing this:\n  subject\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M\n\ngoal (1 subgoal):\n 1. M = M'", "by simp"], ["proof (state)\nthis:\n  M = M'\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>object(M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) = Some N\\<close>"], ["proof (chain)\npicking this:\n  object\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N", "have \"N = N'\""], ["proof (prove)\nusing this:\n  object\n   (M'\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N\n\ngoal (1 subgoal):\n 1. N = N'", "by simp"], ["proof (state)\nthis:\n  N = N'\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> yvec1\\<close> \\<open>x \\<sharp> yvec2\\<close> \\<open>y' \\<sharp> yvec1\\<close> \\<open>y' \\<sharp> yvec2\\<close> \\<open>y \\<sharp> yvec1\\<close> \\<open>y \\<sharp> yvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2\n  y' \\<sharp> yvec1\n  y' \\<sharp> yvec2\n  y \\<sharp> yvec1\n  y \\<sharp> yvec2", "have \"x \\<sharp> (yvec1@yvec2)\" and \"y \\<sharp> (yvec1@yvec2)\" and \"y' \\<sharp> (yvec1@yvec2)\""], ["proof (prove)\nusing this:\n  x \\<sharp> yvec1\n  x \\<sharp> yvec2\n  y' \\<sharp> yvec1\n  y' \\<sharp> yvec2\n  y \\<sharp> yvec1\n  y \\<sharp> yvec2\n\ngoal (1 subgoal):\n 1. x \\<sharp> (yvec1 @ yvec2) &&&\n    y \\<sharp> (yvec1 @ yvec2) &&& y' \\<sharp> (yvec1 @ yvec2)", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> (yvec1 @ yvec2)\n  y \\<sharp> (yvec1 @ yvec2)\n  y' \\<sharp> (yvec1 @ yvec2)\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>yvec1@yvec2 = xvec1@x'#xvec2\\<close>"], ["proof (chain)\npicking this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  x \\<sharp> (yvec1 @ yvec2)\n  y \\<sharp> (yvec1 @ yvec2)\n  y' \\<sharp> (yvec1 @ yvec2)", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> x'\" and \"x \\<sharp> xvec2\" and \"y \\<sharp> xvec1\" and \"y \\<noteq> x'\" and \"y \\<sharp> xvec2\"\n          and \"y' \\<sharp> xvec1\" and \"x' \\<noteq> y'\" and \"y' \\<sharp> xvec2\""], ["proof (prove)\nusing this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  x \\<sharp> (yvec1 @ yvec2)\n  y \\<sharp> (yvec1 @ yvec2)\n  y' \\<sharp> (yvec1 @ yvec2)\n\ngoal (1 subgoal):\n 1. ((x \\<sharp> xvec1 &&& x \\<noteq> x') &&&\n     x \\<sharp> xvec2 &&& y \\<sharp> xvec1) &&&\n    (y \\<noteq> x' &&& y \\<sharp> xvec2) &&&\n    y' \\<sharp> xvec1 &&& x' \\<noteq> y' &&& y' \\<sharp> xvec2", "by auto"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> x'\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<noteq> x'\n  y \\<sharp> xvec2\n  y' \\<sharp> xvec1\n  x' \\<noteq> y'\n  y' \\<sharp> xvec2\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec ya Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              [(y, y')] \\<bullet>\n                              P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n                         yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P';\n        ya \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* ([(y, y')] \\<bullet> P);\n        ya \\<sharp> [(y, y')] \\<bullet> P;\n        yvec \\<sharp>* ([(y, y')] \\<bullet> P); xvec \\<sharp>* Ma;\n        ya \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M;\n        object\n         (Ma\\<lparr>\\<nu>*(xvec @ ya # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "proof(case_tac \"x' mem yvec1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "assume \"x' mem yvec1\""], ["proof (state)\nthis:\n  x' mem yvec1\n\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with \\<open>yvec1@yvec2 = xvec1@x'#xvec2\\<close> \\<open>distinct (yvec1@yvec2)\\<close>"], ["proof (chain)\npicking this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  distinct (yvec1 @ yvec2)\n  x' mem yvec1", "obtain xvec2' where Eq1: \"yvec1=xvec1@x'#xvec2'\"\n                          and Eq: \"xvec2=xvec2'@yvec2\""], ["proof (prove)\nusing this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  distinct (yvec1 @ yvec2)\n  x' mem yvec1\n\ngoal (1 subgoal):\n 1. (\\<And>xvec2'.\n        \\<lbrakk>yvec1 = xvec1 @ x' # xvec2';\n         xvec2 = xvec2' @ yvec2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac partitionListLeft)"], ["proof (state)\nthis:\n  yvec1 = xvec1 @ x' # xvec2'\n  xvec2 = xvec2' @ yvec2\n\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> ([(x, x')] \\<bullet> [(y, y')] \\<bullet> P) \\<longmapsto>M'\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\\<close> \\<open>y' \\<in> supp N\\<close> \\<open>y' \\<sharp> \\<Psi>\\<close> \\<open>y' \\<sharp> M\\<close> \\<open>y' \\<sharp> xvec1\\<close> \\<open>y' \\<sharp> xvec2\\<close> Eq \\<open>M=M'\\<close> \\<open>N = N'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                [(y, y')] \\<bullet>\n                P \\<longmapsto> M'\\<lparr>\\<nu>*(xvec1 @\n           xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> xvec1\n  y' \\<sharp> xvec2\n  xvec2 = xvec2' @ yvec2\n  M = M'\n  N = N'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet> [(y, y')] \\<bullet> P) \\<longmapsto>M'\\<lparr>\\<nu>*((xvec1@xvec2')@y'#yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                [(y, y')] \\<bullet>\n                P \\<longmapsto> M'\\<lparr>\\<nu>*(xvec1 @\n           xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> xvec1\n  y' \\<sharp> xvec2\n  xvec2 = xvec2' @ yvec2\n  M = M'\n  N = N'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n    [(y, y')] \\<bullet>\n    P) \\<longmapsto> M'\\<lparr>\\<nu>*((xvec1 @ xvec2') @\ny' # yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'", "by(rule_tac Open) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*((xvec1 @ xvec2') @\n                                    y' #\n                                    yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*((xvec1 @ xvec2') @\n                                    y' #\n                                    yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet> [(y, y')] \\<bullet> P)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@x'#xvec2'@y'#yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*((xvec1 @ xvec2') @\n                                    y' #\n                                    yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                              x')] \\<bullet>\n                            [(y, y')] \\<bullet>\n                            P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        x' #\n                        xvec2' @\n                        y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>x' \\<in> supp N'\\<close> \\<open>x' \\<sharp> \\<Psi>\\<close> \\<open>x' \\<sharp> M'\\<close> \\<open>x' \\<sharp> xvec1\\<close> \\<open>x' \\<sharp> xvec2\\<close> \\<open>x' \\<noteq> y'\\<close> Eq \\<open>M=M'\\<close> \\<open>N=N'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*((xvec1 @ xvec2') @\n                                    y' #\n                                    yvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  x' \\<in> supp N'\n  x' \\<sharp> \\<Psi>\n  x' \\<sharp> M'\n  x' \\<sharp> xvec1\n  x' \\<sharp> xvec2\n  x' \\<noteq> y'\n  xvec2 = xvec2' @ yvec2\n  M = M'\n  N = N'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                              x')] \\<bullet>\n                            [(y, y')] \\<bullet>\n                            P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        x' #\n                        xvec2' @\n                        y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule_tac Open) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                      x' #\n                      xvec2' @\n                      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with \\<open>x' \\<noteq> y'\\<close> \\<open>x \\<noteq> y'\\<close> \\<open>x' \\<sharp> [(y, y')] \\<bullet> P\\<close>"], ["proof (chain)\npicking this:\n  x' \\<noteq> y'\n  x \\<noteq> y'\n  x' \\<sharp> [(y, y')] \\<bullet> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                      x' #\n                      xvec2' @\n                      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet> P)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@x'#xvec2'@y'#yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  x' \\<noteq> y'\n  x \\<noteq> y'\n  x' \\<sharp> [(y, y')] \\<bullet> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                      x' #\n                      xvec2' @\n                      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                             y')] \\<bullet>\n                           P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       x' #\n                       xvec2' @\n                       y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(subst alphaRes[where y=x']) (simp add: calc_atm eqvts abs_fresh)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2' @\n                     y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. x' mem yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel\n 2. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with Eq1 \\<open>y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>x \\<noteq> y'\\<close> R1"], ["proof (chain)\npicking this:\n  yvec1 = xvec1 @ x' # xvec2'\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2' @\n                     y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  yvec1 = xvec1 @ x' # xvec2'\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2' @\n                     y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "by(fastforce simp add: alphaRes abs_fresh)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                     y' #\n                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "assume \"\\<not>x' mem yvec1\""], ["proof (state)\nthis:\n  x' \\<notin> set yvec1\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "hence \"x' \\<sharp> yvec1\""], ["proof (prove)\nusing this:\n  x' \\<notin> set yvec1\n\ngoal (1 subgoal):\n 1. x' \\<sharp> yvec1", "by(simp add: fresh_def)"], ["proof (state)\nthis:\n  x' \\<sharp> yvec1\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "from \\<open>\\<not>x' mem yvec1\\<close> \\<open>yvec1@yvec2 = xvec1@x'#xvec2\\<close>"], ["proof (chain)\npicking this:\n  x' \\<notin> set yvec1\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2", "have \"x' mem yvec2\""], ["proof (prove)\nusing this:\n  x' \\<notin> set yvec1\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n\ngoal (1 subgoal):\n 1. x' mem yvec2", "by(fastforce simp add: append_eq_append_conv2 append_eq_Cons_conv\n                                  fresh_list_append fresh_list_cons)"], ["proof (state)\nthis:\n  x' mem yvec2\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with \\<open>yvec1@yvec2 = xvec1@x'#xvec2\\<close> \\<open>distinct (yvec1@yvec2)\\<close>"], ["proof (chain)\npicking this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  distinct (yvec1 @ yvec2)\n  x' mem yvec2", "obtain xvec2' where Eq: \"xvec1=yvec1@xvec2'\"\n                          and Eq1: \"yvec2=xvec2'@x'#xvec2\""], ["proof (prove)\nusing this:\n  yvec1 @ yvec2 = xvec1 @ x' # xvec2\n  distinct (yvec1 @ yvec2)\n  x' mem yvec2\n\ngoal (1 subgoal):\n 1. (\\<And>xvec2'.\n        \\<lbrakk>xvec1 = yvec1 @ xvec2';\n         yvec2 = xvec2' @ x' # xvec2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac partitionListRight)"], ["proof (state)\nthis:\n  xvec1 = yvec1 @ xvec2'\n  yvec2 = xvec2' @ x' # xvec2\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> ([(x, x')] \\<bullet> [(y, y')] \\<bullet> P) \\<longmapsto>M'\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\\<close> \\<open>y' \\<in> supp N\\<close> \\<open>y' \\<sharp> \\<Psi>\\<close> \\<open>y' \\<sharp> M\\<close> \\<open>y' \\<sharp> xvec1\\<close> \\<open>y' \\<sharp> xvec2\\<close> Eq \\<open>M=M'\\<close> \\<open>N = N'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                [(y, y')] \\<bullet>\n                P \\<longmapsto> M'\\<lparr>\\<nu>*(xvec1 @\n           xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> xvec1\n  y' \\<sharp> xvec2\n  xvec1 = yvec1 @ xvec2'\n  M = M'\n  N = N'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet> [(y, y')] \\<bullet> P) \\<longmapsto>M'\\<lparr>\\<nu>*(yvec1@y'#xvec2'@xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                [(y, y')] \\<bullet>\n                P \\<longmapsto> M'\\<lparr>\\<nu>*(xvec1 @\n           xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> xvec1\n  y' \\<sharp> xvec2\n  xvec1 = yvec1 @ xvec2'\n  M = M'\n  N = N'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n    [(y, y')] \\<bullet>\n    P) \\<longmapsto> M'\\<lparr>\\<nu>*(yvec1 @\ny' # xvec2' @ xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'", "by(rule_tac Open) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*(yvec1 @\n                                    y' #\n                                    xvec2' @\n                                    xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*(yvec1 @\n                                    y' #\n                                    xvec2' @\n                                    xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet> [(y, y')] \\<bullet> P)) \\<longmapsto>M\\<lparr>\\<nu>*((yvec1@y'#xvec2')@x'#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*(yvec1 @\n                                    y' #\n                                    xvec2' @\n                                    xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                              x')] \\<bullet>\n                            [(y, y')] \\<bullet>\n                            P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                         y' # xvec2') @\n                        x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>x' \\<in> supp N'\\<close> \\<open>x' \\<sharp> \\<Psi>\\<close> \\<open>x' \\<sharp> M'\\<close> \\<open>x' \\<sharp> xvec1\\<close> \\<open>x' \\<sharp> xvec2\\<close> \\<open>x' \\<noteq> y'\\<close> Eq \\<open>M=M'\\<close> \\<open>N=N'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(x, x')] \\<bullet>\n  [(y, y')] \\<bullet>\n  P) \\<longmapsto> M'\\<lparr>\\<nu>*(yvec1 @\n                                    y' #\n                                    xvec2' @\n                                    xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P'\n  x' \\<in> supp N'\n  x' \\<sharp> \\<Psi>\n  x' \\<sharp> M'\n  x' \\<sharp> xvec1\n  x' \\<sharp> xvec2\n  x' \\<noteq> y'\n  xvec1 = yvec1 @ xvec2'\n  M = M'\n  N = N'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                              x')] \\<bullet>\n                            [(y, y')] \\<bullet>\n                            P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                         y' # xvec2') @\n                        x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule_tac Open) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                       y' # xvec2') @\n                      x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with \\<open>x' \\<noteq> y'\\<close> \\<open>x \\<noteq> y'\\<close> \\<open>x' \\<sharp> [(y, y')] \\<bullet> P\\<close>"], ["proof (chain)\npicking this:\n  x' \\<noteq> y'\n  x \\<noteq> y'\n  x' \\<sharp> [(y, y')] \\<bullet> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                       y' # xvec2') @\n                      x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet> P)) \\<longmapsto>M\\<lparr>\\<nu>*((yvec1@y'#xvec2')@x'#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  x' \\<noteq> y'\n  x \\<noteq> y'\n  x' \\<sharp> [(y, y')] \\<bullet> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(x,\n                            x')] \\<bullet>\n                          [(y, y')] \\<bullet>\n                          P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                       y' # xvec2') @\n                      x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                             y')] \\<bullet>\n                           P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                        y' # xvec2') @\n                       x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(subst alphaRes[where y=x']) (simp add: calc_atm eqvts abs_fresh)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                      y' # xvec2') @\n                     x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. x' \\<notin> set yvec1 \\<Longrightarrow>\n    \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "with Eq1 \\<open>y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>x \\<noteq> y'\\<close> R1"], ["proof (chain)\npicking this:\n  yvec2 = xvec2' @ x' # xvec2\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                      y' # xvec2') @\n                     x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  yvec2 = xvec2' @ x' # xvec2\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y'\\<rparr>([(y,\n                           y')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*((yvec1 @\n                      y' # xvec2') @\n                     x' # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "by(fastforce simp add: alphaRes abs_fresh)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                     y' #\n                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                     y' #\n                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n          yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  yvec1 @ yvec2\n  subject (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some M\n  object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n  Some N\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> ([(y, y')] \\<bullet> P) \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<close> \\<open>y' \\<in> supp N\\<close> \\<open>y' \\<sharp> \\<Psi>\\<close> \\<open>y' \\<sharp> M\\<close> \\<open>y' \\<sharp> yvec1\\<close> \\<open>y' \\<sharp> yvec2\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n          yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> yvec1\n  y' \\<sharp> yvec2", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet> P) \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@y'#yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n          yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y' \\<in> supp N\n  y' \\<sharp> \\<Psi>\n  y' \\<sharp> M\n  y' \\<sharp> yvec1\n  y' \\<sharp> yvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet>\n    P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                     y' #\n                                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet>\n  P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                   y' #\n                                   yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\\<close> \\<open>x \\<noteq> y'\\<close>"], ["proof (chain)\npicking this:\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet>\n  P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                   y' #\n                                   yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@y'#yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  y' \\<sharp> \\<lparr>\\<nu>x\\<rparr>P\n  x \\<noteq> y'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y'\\<rparr>([(y, y')] \\<bullet>\n  P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                   y' #\n                                   yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                  y' #\n                                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(simp add: alphaRes abs_fresh)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                y' #\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto>M\\<lparr>\\<nu>*(yvec1@y'#yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                y' #\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                    y' #\n                    yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> yvec1\\<close> \\<open>x \\<noteq> y'\\<close> \\<open>x \\<sharp> yvec2\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                                y' #\n                                yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  x \\<sharp> yvec1\n  x \\<noteq> y'\n  x \\<sharp> yvec2\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                    y' #\n                    yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                  y' #\n                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                  y' #\n                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by(rule R1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(y, y')] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                        yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        bn (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        yvec1 @ yvec2;\n        subject\n         (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some M;\n        object (M\\<lparr>\\<nu>*(yvec1 @ yvec2)\\<rparr>\\<langle>N\\<rangle>) =\n        Some N\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n      y' # yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                  y' #\n                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                  y' #\n                  yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                       y' #\n                       yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                     y' #\n                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(yvec1 @\n                     y' #\n                     yvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n  x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P'\\<close> \\<open>x \\<noteq> y\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P'\n  x \\<noteq> y", "have \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P'\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<sharp> P'", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; x \\<sharp> \\<lparr>\\<nu>y\\<rparr>P';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel", "proof(induct rule: resCases')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "case(cOpen M xvec1 xvec2 x' N P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x' \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> P'\n  x \\<noteq> x'\n  x' \\<sharp> xvec1\n  x' \\<sharp> xvec2\n  x' \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  x' \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  x' \\<sharp> P\n  xvec2 \\<sharp>* P\n  xvec1 \\<sharp>* M\n  x' \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "from \\<open>y \\<sharp> M\\<lparr>\\<nu>*(xvec1@x'#xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"y \\<noteq> x'\" and \"y \\<sharp> M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle>\""], ["proof (prove)\nusing this:\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ x' # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. y \\<noteq> x' &&&\n    y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ xvec2)\\<rparr>\\<langle>N\\<rangle>", "by simp+"], ["proof (state)\nthis:\n  y \\<noteq> x'\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> ([(x, x')] \\<bullet> P) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet> P) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, x')] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet>\n   P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet> P)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@x'#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x,\n                             x')] \\<bullet>\n                           P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       x' #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "using \\<open>x' \\<in> supp N\\<close> \\<open>x' \\<sharp> \\<Psi>\\<close> \\<open>x' \\<sharp> M\\<close> \\<open>x' \\<sharp> xvec1\\<close> \\<open>x' \\<sharp> xvec2\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, x')] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n  x' \\<in> supp N\n  x' \\<sharp> \\<Psi>\n  x' \\<sharp> M\n  x' \\<sharp> xvec1\n  x' \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x,\n                             x')] \\<bullet>\n                           P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       x' #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "by(rule Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x,\n                           x')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "with \\<open>y \\<noteq> x'\\<close> \\<open>x \\<noteq> y\\<close> \\<open>x' \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  y \\<noteq> x'\n  x \\<noteq> y\n  x' \\<sharp> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x,\n                           x')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@x'#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\""], ["proof (prove)\nusing this:\n  y \\<noteq> x'\n  x \\<noteq> y\n  x' \\<sharp> P\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x'\\<rparr>(\\<lparr>\\<nu>y\\<rparr>([(x,\n                           x')] \\<bullet>\n                         P)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    x' #\n                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "by(subst alphaRes[where y=x']) (simp add: abs_fresh eqvts calc_atm)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  x' #\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  x' #\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>y\\<rparr>P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>y\\<rparr>P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel", "by(rule R1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>y\\<rparr>P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec ya N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> [(x, ya)] \\<bullet>\n                              P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        ya \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> ya;\n        ya \\<sharp> xvec; ya \\<sharp> yvec; ya \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; ya \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; ya \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; ya \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        y \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   ya #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      ya # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>y\\<rparr>P')\n                            \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  x' #\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>y\\<rparr>P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  x' #\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>y\\<rparr>P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       x' #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     x' #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P'), \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P'),\n     \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n    \\<in> Rel", "by(rule R2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P'),\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        y \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P'),\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P')\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P'),\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>y\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>y\\<rparr>P) \\<leadsto>[Rel] \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parAssocLeft:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   R   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. (\\<Psi>, (S \\<parallel> T) \\<parallel> U, S \\<parallel> (T \\<parallel> U)) \\<in> Rel\"\n  and     C2: \"\\<And>xvec \\<Psi>' S T U. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* S\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>((S \\<parallel> T) \\<parallel> U), S \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>(T \\<parallel> U))) \\<in> Rel\"\n  and     C3: \"\\<And>xvec \\<Psi>' S T U. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* U\\<rbrakk> \\<Longrightarrow> (\\<Psi>', (\\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T)) \\<parallel> U, \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> (T \\<parallel> U))) \\<in> Rel\"\n  and     C4: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<leadsto>[Rel] P \\<parallel> (Q \\<parallel> R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<leadsto>[Rel] P \\<parallel> (Q \\<parallel> R)", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<leadsto>[Rel] P \\<parallel> (Q \\<parallel> R)", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              (Q \\<parallel>\n                               R) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> (Q \\<parallel> R));\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> PQR)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                (Q \\<parallel> R) \\<longmapsto> \\<alpha> \\<prec> PQR\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R)\n  bn \\<alpha> \\<sharp>* (P \\<parallel> (Q \\<parallel> R))\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              (Q \\<parallel>\n                               R) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> (Q \\<parallel> R));\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* R\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&&\n    bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              (Q \\<parallel>\n                               R) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> (Q \\<parallel> R));\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "hence \"bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (Q \\<parallel> R)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              (Q \\<parallel>\n                               R) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q \\<parallel> R);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> (Q \\<parallel> R));\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> P \\<parallel> (Q \\<parallel> R) \\<longmapsto>\\<alpha> \\<prec> PQR\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                (Q \\<parallel> R) \\<longmapsto> \\<alpha> \\<prec> PQR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                (Q \\<parallel> R) \\<longmapsto> \\<alpha> \\<prec> PQR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQR) \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                (Q \\<parallel> R) \\<longmapsto> \\<alpha> \\<prec> PQR\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> R)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQR) \\<in> Rel", "proof(induct rule: parCases[where C = \"(\\<Psi>, P, Q, R, \\<alpha>)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar1 P' A\\<^sub>Q\\<^sub>R \\<Psi>\\<^sub>Q\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P'\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)", "have \"A\\<^sub>Q\\<^sub>R \\<sharp>* Q\" and  \"A\\<^sub>Q\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R \\<sharp>* Q &&& A\\<^sub>Q\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>extractFrame(Q \\<parallel> R) = \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\\<close> \\<open>distinct A\\<^sub>Q\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R", "obtain A\\<^sub>Q \\<Psi>\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>R where \"A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\" and \"\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\" and FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\" and  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\"\n                           and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>Q \\<Psi>\\<^sub>R.\n        \\<lbrakk>A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R;\n         \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R;\n         extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n         extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>;\n         A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac mergeFrameE) (auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<alpha>", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>Q \\<sharp>* \\<alpha>\" and \"A\\<^sub>R \\<sharp>* \\<alpha>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>Q \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* \\<Psi>) &&&\n     A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>R \\<sharp>* P) &&&\n    (A\\<^sub>Q \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* Q) &&&\n    A\\<^sub>Q \\<sharp>* \\<alpha> &&& A\\<^sub>R \\<sharp>* \\<alpha>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q", "using FrQ \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> ((P' \\<parallel> Q) \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n             Q \\<parallel>\n             R", "using FrR \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n             Q \\<parallel>\n             R", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n           Q \\<parallel>\n           R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n           Q \\<parallel>\n           R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, (P' \\<parallel> Q) \\<parallel> R, P' \\<parallel> (Q \\<parallel> R)) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> Q \\<parallel> R,\n     P' \\<parallel> (Q \\<parallel> R))\n    \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> Q \\<parallel> R, P' \\<parallel> (Q \\<parallel> R))\n  \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n           Q \\<parallel>\n           R\n  (\\<Psi>, P' \\<parallel> Q \\<parallel> R, P' \\<parallel> (Q \\<parallel> R))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n           Q \\<parallel>\n           R\n  (\\<Psi>, P' \\<parallel> Q \\<parallel> R, P' \\<parallel> (Q \\<parallel> R))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R)) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P' \\<parallel> (Q \\<parallel> R)) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar2 QR A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* QR\n  A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)", "have \"A\\<^sub>P \\<sharp>* Q\" and \"A\\<^sub>P \\<sharp>* R\" and \"A\\<^sub>P \\<sharp>* \\<alpha>\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* Q &&&\n    A\\<^sub>P \\<sharp>* R &&& A\\<^sub>P \\<sharp>* \\<alpha>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P", "have \"bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\nR \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> QR\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> QR) \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> QR\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* R\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> QR) \\<in> Rel", "proof(induct rule: parCasesSubject[where C = \"(A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar1 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* A\\<^sub>P &&& A\\<^sub>R \\<sharp>* P) &&&\n    A\\<^sub>R \\<sharp>* Q &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>R \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>P", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'", "using FrP \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'", "by(rule_tac Par2) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> ((P \\<parallel> Q') \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n             Q' \\<parallel>\n             R", "using \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close> \\<open>bn \\<alpha> \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  bn \\<alpha> \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n             Q' \\<parallel>\n             R", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n           Q' \\<parallel>\n           R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n           Q' \\<parallel>\n           R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have \"(\\<Psi>, (P \\<parallel> Q') \\<parallel> R, P \\<parallel> (Q' \\<parallel> R)) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> Q' \\<parallel> R,\n     P \\<parallel> (Q' \\<parallel> R))\n    \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> Q' \\<parallel> R, P \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* \\<alpha>;\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                             \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> (P' \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n           Q' \\<parallel>\n           R\n  (\\<Psi>, P \\<parallel> Q' \\<parallel> R, P \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n           Q' \\<parallel>\n           R\n  (\\<Psi>, P \\<parallel> Q' \\<parallel> R, P \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> (Q' \\<parallel> R)) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> (Q' \\<parallel> R)) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>Q \\<sharp>* A\\<^sub>P\" and \"A\\<^sub>Q \\<sharp>* R\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q \\<sharp>* A\\<^sub>P &&& A\\<^sub>Q \\<sharp>* R) &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>Q \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close> FrQ \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<rhd> R \\<longmapsto>\\<alpha> \\<prec> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'", "by(blast intro: statEqTransition Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from FrP FrQ \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close>  \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "have \"extractFrame(P \\<parallel> Q) = \\<langle>(A\\<^sub>P@A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. extractFrame (P \\<parallel> Q) =\n    \\<langle>(A\\<^sub>P @\n              A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q", "have \"bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (P \\<parallel> Q)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"(A\\<^sub>P@A\\<^sub>Q) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R", "have \"(A\\<^sub>P@A\\<^sub>Q) \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* R", "by simp"], ["proof (state)\nthis:\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>", "have \"(A\\<^sub>P@A\\<^sub>Q) \\<sharp>* \\<alpha>\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<alpha>", "by simp"], ["proof (state)\nthis:\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<alpha>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* R\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<alpha>", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<alpha> \\<prec> ((P \\<parallel> Q) \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> R'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* R\n  (A\\<^sub>P @ A\\<^sub>Q) \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n             Q \\<parallel>\n             R'", "by(rule Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q \\<parallel>\n           R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q \\<parallel>\n           R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have \"(\\<Psi>, (P \\<parallel> Q) \\<parallel> R', P \\<parallel> (Q \\<parallel> R')) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> Q \\<parallel> R',\n     P \\<parallel> (Q \\<parallel> R'))\n    \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> Q \\<parallel> R', P \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P' \\<Psi>\\<^sub>P'.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* R; A\\<^sub>P' \\<sharp>* \\<alpha>;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R,\n                              \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> (Q \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q \\<parallel>\n           R'\n  (\\<Psi>, P \\<parallel> Q \\<parallel> R', P \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q \\<parallel>\n           R'\n  (\\<Psi>, P \\<parallel> Q \\<parallel> R', P \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> (Q \\<parallel> R')) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> (Q \\<parallel> R')) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>R M N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K xvec R' A\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* Q\" and \"A\\<^sub>Q \\<sharp>* R\" and \"A\\<^sub>Q \\<sharp>* A\\<^sub>P\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\"  and \"A\\<^sub>Q \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q \\<sharp>* P &&&\n     A\\<^sub>Q \\<sharp>* Q &&& A\\<^sub>Q \\<sharp>* R) &&&\n    A\\<^sub>Q \\<sharp>* A\\<^sub>P &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>Q \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>P\"  and \"A\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* Q) &&&\n    A\\<^sub>R \\<sharp>* R &&&\n    A\\<^sub>R \\<sharp>* A\\<^sub>P &&& A\\<^sub>R \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* (A\\<^sub>P,  \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"xvec \\<sharp>* A\\<^sub>P\" and \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (xvec \\<sharp>* A\\<^sub>P &&& xvec \\<sharp>* P) &&&\n    xvec \\<sharp>* Q &&& xvec \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* A\\<^sub>P\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  A\\<^sub>P \\<sharp>* R\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>P \\<sharp>* N\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  A\\<^sub>P \\<sharp>* R\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* N", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* N\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                               Q'", "using FrP \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* N\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                               Q'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                             Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                             Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from FrP FrQ \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "have \"extractFrame(P \\<parallel> Q) = \\<langle>(A\\<^sub>P@A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. extractFrame (P \\<parallel> Q) =\n    \\<langle>(A\\<^sub>P @\n              A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from  \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'", "by(metis statEqTransition Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "note \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close>"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                             Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>((P \\<parallel> Q') \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                             Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                     Q' \\<parallel>\n                                     R'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>\n              \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P \\<parallel>\n                             Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                     Q' \\<parallel>\n                                     R'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((P \\<parallel> Q') \\<parallel> R'), P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n     P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P',\n        P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P',\n      P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n     \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>R M xvec N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K R' A\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* (A\\<^sub>P,  \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* Q\" and \"A\\<^sub>Q \\<sharp>* R\" and \"A\\<^sub>Q \\<sharp>* A\\<^sub>P\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q \\<sharp>* P &&&\n     A\\<^sub>Q \\<sharp>* Q &&& A\\<^sub>Q \\<sharp>* R) &&&\n    A\\<^sub>Q \\<sharp>* A\\<^sub>P &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi> &&& A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>R \\<sharp>* (A\\<^sub>P,  \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>P\"and \"A\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* Q) &&&\n    A\\<^sub>R \\<sharp>* R &&&\n    A\\<^sub>R \\<sharp>* A\\<^sub>P &&& A\\<^sub>R \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* (A\\<^sub>P,  \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)", "have \"xvec \\<sharp>* A\\<^sub>P\" and \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\n\ngoal (1 subgoal):\n 1. (xvec \\<sharp>* A\\<^sub>P &&& xvec \\<sharp>* P) &&&\n    xvec \\<sharp>* Q &&& xvec \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* A\\<^sub>P\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>P \\<sharp>* Q\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* M\n  distinct xvec", "have \"A\\<^sub>P \\<sharp>* N\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>P \\<sharp>* Q\n  xvec \\<sharp>* A\\<^sub>P\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* N", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                     Q'", "using FrP \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* N\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* A\\<^sub>P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  xvec \\<sharp>* P\n  xvec \\<sharp>* A\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                     Q'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                   Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                   Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from FrP FrQ \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "have \"extractFrame(P \\<parallel> Q) = \\<langle>(A\\<^sub>P@A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. extractFrame (P \\<parallel> Q) =\n    \\<langle>(A\\<^sub>P @\n              A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>", "by simp+"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from  \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'", "by(metis statEqTransition Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "note \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close>"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                   Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>((P \\<parallel> Q') \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                   Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                     Q' \\<parallel>\n                                     R'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>\n              \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                   Q'\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                     Q' \\<parallel>\n                                     R'", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((P \\<parallel> Q') \\<parallel> R'), P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n     P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P' \\<Psi>\\<^sub>P' K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n        distinct A\\<^sub>P';\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n        \\<Psi>\\<^sub>P' \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* K; distinct xvec;\n        A\\<^sub>P' \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P' \\<sharp>* Q;\n        A\\<^sub>P' \\<sharp>* M; A\\<^sub>P' \\<sharp>* N;\n        A\\<^sub>P' \\<sharp>* P'; A\\<^sub>P' \\<sharp>* R;\n        A\\<^sub>P' \\<sharp>* xvec; A\\<^sub>P' \\<sharp>* Q';\n        A\\<^sub>P' \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P' \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>);\n        xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        xvec \\<sharp>* \\<Psi>\\<^sub>P'; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (A\\<^sub>P, \\<Psi>\\<^sub>P, P, Q, R, \\<Psi>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel>\n                             (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel>\n                                   Q' \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P \\<parallel> Q' \\<parallel> R',\n   P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P',\n        P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P',\n      P \\<parallel> (\\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> QR) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>Q\\<^sub>R M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec QR' A\\<^sub>Q\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<^sub>R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* QR'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P'\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>Q\\<^sub>R \\<sharp>* QR'\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* (Q \\<parallel> R)\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<^sub>R\n  xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)", "have \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)", "have \"A\\<^sub>Q\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>Q\\<^sub>R \\<sharp>* R\" and \"A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R \\<sharp>* Q &&&\n    A\\<^sub>Q\\<^sub>R \\<sharp>* R &&& A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)", "have \"A\\<^sub>P \\<sharp>* Q\" and \"A\\<^sub>P \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* Q &&& A\\<^sub>P \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle> &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P", "have \"xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>xvec \\<sharp>* Q\\<close>\\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* K\\<close>\n         \\<open>extractFrame(Q \\<parallel> R) = \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\\<close> \\<open>distinct A\\<^sub>Q\\<^sub>R\\<close>"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* K\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* K\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P", "have \"A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* K\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* K\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel", "using \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* K\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> QR'\n  xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n  xvec \\<sharp>* K\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel", "proof(induct rule: parCasesOutputFrame)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar1 Q' A\\<^sub>Q \\<Psi>\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\n  distinct A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have Aeq: \"A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\" and \\<Psi>eq: \"\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R &&&\n    \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "by fact+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from PTrans \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note FrP"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> Aeq \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* A\\<^sub>Q &&& A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(auto dest:  extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* K\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       Q'", "by(rule_tac Comm1) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')) \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\nQ') \\<parallel>\n           R", "using \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\nQ') \\<parallel>\n           R", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')) \\<parallel> R, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> (Q' \\<parallel> R))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n    \\<in> Rel", "by(rule C3)"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n     \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\n  distinct A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have Aeq: \"A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\" and \\<Psi>eq: \"\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R &&&\n    \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "by fact+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P) &&&\n    A\\<^sub>P \\<sharp>* A\\<^sub>R &&&\n    A\\<^sub>P \\<sharp>* A\\<^sub>Q &&& A\\<^sub>R \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> Aeq FrP"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close> \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> Aeq \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and  \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have RTrans: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\" and FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R' &&&\n    extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "obtain K' where KeqK': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\" and \"A\\<^sub>P \\<sharp>* K'\" and \"A\\<^sub>Q \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K';\n         A\\<^sub>P \\<sharp>* K'; A\\<^sub>Q \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>distinct A\\<^sub>R\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  distinct A\\<^sub>R\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K';\n         A\\<^sub>P \\<sharp>* K'; A\\<^sub>Q \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"A\\<^sub>P@A\\<^sub>Q\" in obtainPrefix) (assumption | force)+"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  A\\<^sub>P \\<sharp>* K'\n  A\\<^sub>Q \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from PTrans \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK KeqK' \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have MeqK': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'", "by(metis statEqEnt Associativity Commutativity Composition chanEqTrans)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'", "using FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* K'\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* K'\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'", "by(rule_tac inputRenameSubject) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* N\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* N\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* N", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel> Q\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                                Q", "using \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* K'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* K'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                                Q", "by(rule_tac Par1) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                              Q\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                              Q\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from FrP \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "have \"extractFrame(P \\<parallel> Q) = \\<langle>(A\\<^sub>P@A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. extractFrame (P \\<parallel> Q) =\n    \\<langle>(A\\<^sub>P @\n              A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>", "by simp+"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from RTrans"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'", "by(metis Associativity statEqTransition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK' KeqK'"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                              Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>((P' \\<parallel> Q) \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                              Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q \\<parallel>\n                                     R'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* K'\\<close> \\<open>A\\<^sub>Q \\<sharp>* K'\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close>\n              \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> P' \\<parallel>\n                              Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P \\<sharp>* K'\n  A\\<^sub>Q \\<sharp>* K'\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q \\<parallel>\n                                     R'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((P' \\<parallel> Q) \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> (Q \\<parallel> R'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n    \\<in> Rel", "by(metis C1 C4)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>Q\\<^sub>R M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K QR' A\\<^sub>Q\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<^sub>R\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* QR'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P'\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (Q \\<parallel> R)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>Q\\<^sub>R \\<sharp>* QR'\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* (Q \\<parallel> R)\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<^sub>R\n  xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)", "have \"A\\<^sub>Q\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>Q\\<^sub>R \\<sharp>* R\" and \"A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R \\<sharp>* Q &&&\n    A\\<^sub>Q\\<^sub>R \\<sharp>* R &&& A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\\<close> \\<open>xvec \\<sharp>* (Q \\<parallel> R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n  xvec \\<sharp>* (Q \\<parallel> R)", "have \"A\\<^sub>P \\<sharp>* Q\" and \"A\\<^sub>P \\<sharp>* R\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* (Q \\<parallel> R)\n  xvec \\<sharp>* (Q \\<parallel> R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* Q &&& A\\<^sub>P \\<sharp>* R) &&&\n    xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle> &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> QR'\\<close> \\<open>extractFrame(Q \\<parallel> R) = \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\\<close> \\<open>distinct A\\<^sub>Q\\<^sub>R\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P", "have \"A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                              R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (Q \\<parallel> R) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* (Q \\<parallel> R);\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>);\n        xvec \\<sharp>* \\<Psi>; xvec \\<sharp>* \\<Psi>\\<^sub>P;\n        xvec \\<sharp>* P; xvec \\<sharp>* M; xvec \\<sharp>* K;\n        xvec \\<sharp>* (Q \\<parallel> R); xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (\\<Psi>, P, Q, R, \\<alpha>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel", "using \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* K\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<parallel>\n                        R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> QR'\n  extractFrame (Q \\<parallel> R) =\n  \\<langle>A\\<^sub>Q\\<^sub>R, \\<Psi>\\<^sub>Q\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q\\<^sub>R \\<sharp>* Q\n  A\\<^sub>Q\\<^sub>R \\<sharp>* R\n  A\\<^sub>Q\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel", "proof(induct rule: parCasesInputFrame)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar1 Q' A\\<^sub>Q \\<Psi>\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\n  distinct A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have Aeq: \"A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\" and \\<Psi>eq: \"\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R &&&\n    \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "by fact+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from PTrans \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note FrP"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> Aeq \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* A\\<^sub>Q &&& A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close>  \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi> &&& A\\<^sub>Q \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* K\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n       Q'", "by(rule_tac Comm2) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')) \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\nQ') \\<parallel>\n           R", "using \\<open>extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n     Q'\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\nQ') \\<parallel>\n           R", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')) \\<parallel> R, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> (Q' \\<parallel> R))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n    \\<in> Rel", "by(rule C3)"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>P'a A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'a;\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (P'a \\<parallel> R))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    Q') \\<parallel>\n         R\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<parallel> R,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q' \\<parallel> R))\n     \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>Q\n  distinct A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>R \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have Aeq: \"A\\<^sub>Q\\<^sub>R = A\\<^sub>Q@A\\<^sub>R\" and \\<Psi>eq: \"\\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R &&&\n    \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "by fact+"], ["proof (state)\nthis:\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. (A\\<^sub>R \\<sharp>* \\<Psi> &&&\n     A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&&\n     A\\<^sub>P \\<sharp>* A\\<^sub>R) &&&\n    (A\\<^sub>P \\<sharp>* A\\<^sub>Q &&& A\\<^sub>R \\<sharp>* P) &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi> &&& A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "have RTrans: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\" and FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R' &&&\n    extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "obtain K' where KeqK': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\" and \"A\\<^sub>P \\<sharp>* K'\" and \"A\\<^sub>Q \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K';\n         A\\<^sub>P \\<sharp>* K'; A\\<^sub>Q \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>distinct A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                  \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K';\n         A\\<^sub>P \\<sharp>* K'; A\\<^sub>Q \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"A\\<^sub>P@A\\<^sub>Q\" in obtainPrefix) (assumption | force)+"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  A\\<^sub>P \\<sharp>* K'\n  A\\<^sub>Q \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from PTrans \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(metis statEqTransition Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK KeqK' \\<Psi>eq"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R", "have MeqK': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n  \\<Psi>\\<^sub>Q\\<^sub>R = \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'", "by(metis statEqEnt Associativity Commutativity Composition chanEqTrans)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\\<close> FrR \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<^sub>R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(auto dest: extractFrameFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* K'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule_tac outputRenameSubject) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>Q\\<^sub>R \\<sharp>* xvec\\<close> Aeq"], ["proof (chain)\npicking this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* N\" and \"A\\<^sub>Q \\<sharp>* xvec\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q\\<^sub>R \\<sharp>* N\n  A\\<^sub>Q\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>Q\\<^sub>R = A\\<^sub>Q @ A\\<^sub>R\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&&\n    A\\<^sub>Q \\<sharp>* N &&& A\\<^sub>Q \\<sharp>* xvec", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* xvec", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> Q \\<longmapsto>K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      Q", "using \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* K'\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* xvec\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* K'\n  xvec \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      Q", "by(rule_tac Par1) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    Q\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    Q\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from FrP \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "have \"extractFrame(P \\<parallel> Q) = \\<langle>(A\\<^sub>P@A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. extractFrame (P \\<parallel> Q) =\n    \\<langle>(A\\<^sub>P @\n              A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>", "by simp+"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from RTrans"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'", "by(metis Associativity statEqTransition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from MeqK' KeqK'"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K", "by(metis statEqEnt Associativity Commutativity Composition chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> (P \\<parallel> Q) \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>((P' \\<parallel> Q) \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q \\<parallel>\n                                     R'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \\<open>A\\<^sub>P \\<sharp>* K'\\<close> \\<open>A\\<^sub>Q \\<sharp>* K'\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close>\n              \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        Q \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    Q\n  extractFrame (P \\<parallel> Q) =\n  \\<langle>(A\\<^sub>P @\n            A\\<^sub>Q), \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K' \\<leftrightarrow> K\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P \\<sharp>* K'\n  A\\<^sub>Q \\<sharp>* K'\n  A\\<^sub>P \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q \\<parallel>\n                                     R'", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((P' \\<parallel> Q) \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> (Q \\<parallel> R'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n    \\<in> Rel", "by(metis C1 C4)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n                \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P'\\<rangle>;\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>P; distinct A\\<^sub>Q;\n        A\\<^sub>P \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* K;\n        A\\<^sub>Q \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q;\n        A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'; A\\<^sub>P \\<sharp>* A\\<^sub>Q;\n        A\\<^sub>Q\\<^sub>R = A\\<^sub>P @ A\\<^sub>Q;\n        \\<Psi>\\<^sub>Q\\<^sub>R =\n        \\<Psi>\\<^sub>P' \\<otimes> \\<Psi>\\<^sub>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 (Q \\<parallel> Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q \\<parallel>\n                                   R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> (Q \\<parallel> R'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> QR') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<parallel>\n                   R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', PQR) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parNilLeft:\n  fixes \\<Psi> :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"  \n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q \\<parallel> \\<zero>, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> (P \\<parallel> \\<zero>) \\<leadsto>[Rel] P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<leadsto>[Rel] P", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<leadsto>[Rel] P", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>)\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "have \"\\<Psi> \\<otimes> SBottom' \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<one> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "by(metis statEqTransition Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<one> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "hence \"\\<Psi> \\<rhd> (P \\<parallel> \\<zero>) \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> \\<zero>)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<one> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                   \\<zero>", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                 \\<zero>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                 \\<zero>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> \\<zero>, P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> \\<zero>, P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> \\<zero>, P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* P; bn \\<alpha> \\<sharp>* \\<Psi>;\n        distinct (bn \\<alpha>); bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                 \\<zero>\n  (\\<Psi>, P' \\<parallel> \\<zero>, P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                 \\<zero>\n  (\\<Psi>, P' \\<parallel> \\<zero>, P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parNilRight:\n  fixes \\<Psi> :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"  \n\n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, (Q \\<parallel> \\<zero>)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<leadsto>[Rel] (P \\<parallel> \\<zero>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto>[Rel] P \\<parallel> \\<zero>", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto>[Rel] P \\<parallel> \\<zero>", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "have \"bn \\<alpha> \\<sharp>* \\<zero>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<zero>", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<zero>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* P;\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<zero>);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<zero>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<zero>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<zero>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: parCases[where C=\"()\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar1 P' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame (\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<zero>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* ()\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>extractFrame(\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q = \\<one>", "by auto"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi>\\<^sub>Q = \\<one>", "have \"\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "by(metis statEqTransition Identity)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> \\<zero>) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P' \\<parallel> \\<zero>) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar2 Q' A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<zero>\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* ()\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q'", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* \\<zero>\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* ()\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<zero>\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* ()\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<zero>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* ()\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame (\\<zero>) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* \\<zero>\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* ()\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<zero>\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* ()\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<zero>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<zero> \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<zero>) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<zero>;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<zero>;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<zero>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resNilLeft:\n  fixes x   :: name\n  and   \\<Psi>   :: 'b\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>\\<zero> \\<leadsto>[Rel] \\<zero>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>\\<zero> \\<leadsto>[Rel] \\<zero>", "by(auto simp add: simulation_def)"], ["", "lemma resNilRight:\n  fixes x   :: name\n  and   \\<Psi>   :: 'b\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  shows \"\\<Psi> \\<rhd> \\<zero> \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>\\<zero>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<zero> \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>\\<zero>", "apply(auto simp add: simulation_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>\\<zero> \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<zero> \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "by(cases rule: semantics.cases) (auto simp add: psi.inject alpha')"], ["", "lemma inputPushResLeft:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> xvec\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "from \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\n  x \\<sharp> N", "have \"x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "by(auto simp add: inputChainFresh abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "proof(induct rule: simIFresh[of _ _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: inputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "case(cInput K Tvec)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n  distinct xvec\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "from \\<open>x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>", "have \"x \\<sharp> K\" and \"x \\<sharp> N[xvec::=Tvec]\""], ["proof (prove)\nusing this:\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\n\ngoal (1 subgoal):\n 1. x \\<sharp> K &&& x \\<sharp> N[xvec::=Tvec]", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> K\n  x \\<sharp> N[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close> \\<open>distinct xvec\\<close> \\<open>set xvec \\<subseteq> supp N\\<close> \\<open>length xvec = length Tvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec", "have \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto>K\\<lparr>(N[xvec::=Tvec])\\<rparr> \\<prec> P[xvec::=Tvec]\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]", "by(rule Input)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto>K\\<lparr>(N[xvec::=Tvec])\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> K\\<close> \\<open>x \\<sharp> N[xvec::=Tvec]\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P[xvec::=Tvec]\n  x \\<sharp> \\<Psi>\n  x \\<sharp> K\n  x \\<sharp> N[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "from \\<open>length xvec = length Tvec\\<close> \\<open>distinct xvec\\<close> \\<open>set xvec \\<subseteq> supp N\\<close> \\<open>x \\<sharp> N[xvec::=Tvec]\\<close>"], ["proof (chain)\npicking this:\n  length xvec = length Tvec\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  x \\<sharp> N[xvec::=Tvec]", "have \"x \\<sharp> Tvec\""], ["proof (prove)\nusing this:\n  length xvec = length Tvec\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  x \\<sharp> N[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. x \\<sharp> Tvec", "by(rule substTerm.subst3)"], ["proof (state)\nthis:\n  x \\<sharp> Tvec\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "with \\<open>x \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> xvec\n  x \\<sharp> Tvec", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]), (\\<lparr>\\<nu>x\\<rparr>P)[xvec::=Tvec]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> xvec\n  x \\<sharp> Tvec\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]),\n     \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n    \\<in> Rel", "by(force intro: C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]),\n   \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]),\n   \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]),\n   \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec])\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<leadsto>[Rel] M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma inputPushResRight:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   xvec :: \"name list\"\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> xvec\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "from \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\n  x \\<sharp> N", "have \"x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P", "by(auto simp add: inputChainFresh abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "proof(induct rule: simIFresh[of _ _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P))\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  x \\<sharp> \\<alpha>", "have  \"bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "proof(induct rule: inputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "case(cInput K Tvec)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n  distinct xvec\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "from \\<open>x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>", "have \"x \\<sharp> K\" and \"x \\<sharp> N[xvec::=Tvec]\""], ["proof (prove)\nusing this:\n  x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\n\ngoal (1 subgoal):\n 1. x \\<sharp> K &&& x \\<sharp> N[xvec::=Tvec]", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> K\n  x \\<sharp> N[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close> \\<open>distinct xvec\\<close> \\<open>set xvec \\<subseteq> supp N\\<close> \\<open>length xvec = length Tvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec", "have \"\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto>K\\<lparr>(N[xvec::=Tvec])\\<rparr> \\<prec> (\\<lparr>\\<nu>x\\<rparr>P)[xvec::=Tvec]\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  length xvec = length Tvec\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]", "by(rule Input)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "from \\<open>length xvec = length Tvec\\<close> \\<open>distinct xvec\\<close> \\<open>set xvec \\<subseteq> supp N\\<close> \\<open>x \\<sharp> N[xvec::=Tvec]\\<close>"], ["proof (chain)\npicking this:\n  length xvec = length Tvec\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  x \\<sharp> N[xvec::=Tvec]", "have \"x \\<sharp> Tvec\""], ["proof (prove)\nusing this:\n  length xvec = length Tvec\n  distinct xvec\n  set xvec \\<subseteq> supp N\n  x \\<sharp> N[xvec::=Tvec]\n\ngoal (1 subgoal):\n 1. x \\<sharp> Tvec", "by(rule substTerm.subst3)"], ["proof (state)\nthis:\n  x \\<sharp> Tvec\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "with \\<open>x \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> xvec\n  x \\<sharp> Tvec", "have \"(\\<Psi>, (\\<lparr>\\<nu>x\\<rparr>P)[xvec::=Tvec], \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> xvec\n  x \\<sharp> Tvec\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec],\n     \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n    \\<in> Rel", "by(force intro: C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec],\n   \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K Tvec.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        set xvec \\<subseteq> supp N; length xvec = length Tvec;\n        distinct xvec; x \\<sharp> K\\<lparr>N[xvec::=Tvec]\\<rparr>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec],\n   \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec]\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P[xvec::=Tvec],\n   \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec]))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>N[xvec::=Tvec]\\<rparr> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>(P[xvec::=Tvec])) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "case cOpen"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> M_\\<lparr>\\<nu>*(xvec_ @\n       yvec_)\\<rparr>\\<langle>([(x, y_)] \\<bullet>\n                               N_)\\<rangle> \\<prec> [(x, y_)] \\<bullet> P'_\n  y_ \\<in> supp N_\n  x \\<sharp> N_\n  x \\<sharp> P'_\n  x \\<noteq> y_\n  y_ \\<sharp> xvec_\n  y_ \\<sharp> yvec_\n  y_ \\<sharp> M_\n  distinct xvec_\n  distinct yvec_\n  xvec_ \\<sharp>* \\<Psi>\n  y_ \\<sharp> \\<Psi>\n  yvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  y_ \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P\n  yvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  xvec_ \\<sharp>* M_\n  y_ \\<sharp> M_\n  yvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* yvec_\n\ngoal (1 subgoal):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> M_\\<lparr>\\<nu>*(xvec_ @\n       yvec_)\\<rparr>\\<langle>([(x, y_)] \\<bullet>\n                               N_)\\<rangle> \\<prec> [(x, y_)] \\<bullet> P'_\n  y_ \\<in> supp N_\n  x \\<sharp> N_\n  x \\<sharp> P'_\n  x \\<noteq> y_\n  y_ \\<sharp> xvec_\n  y_ \\<sharp> yvec_\n  y_ \\<sharp> M_\n  distinct xvec_\n  distinct yvec_\n  xvec_ \\<sharp>* \\<Psi>\n  y_ \\<sharp> \\<Psi>\n  yvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  y_ \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P\n  yvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  xvec_ \\<sharp>* M_\n  y_ \\<sharp> M_\n  yvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* yvec_", "have False"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> M_\\<lparr>\\<nu>*(xvec_ @\n       yvec_)\\<rparr>\\<langle>([(x, y_)] \\<bullet>\n                               N_)\\<rangle> \\<prec> [(x, y_)] \\<bullet> P'_\n  y_ \\<in> supp N_\n  x \\<sharp> N_\n  x \\<sharp> P'_\n  x \\<noteq> y_\n  y_ \\<sharp> xvec_\n  y_ \\<sharp> yvec_\n  y_ \\<sharp> M_\n  distinct xvec_\n  distinct yvec_\n  xvec_ \\<sharp>* \\<Psi>\n  y_ \\<sharp> \\<Psi>\n  yvec_ \\<sharp>* \\<Psi>\n  xvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  y_ \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P\n  yvec_ \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n  xvec_ \\<sharp>* M_\n  y_ \\<sharp> M_\n  yvec_ \\<sharp>* M_\n  xvec_ \\<sharp>* yvec_\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>Ma xveca yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                     yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> Ma; distinct xveca;\n        distinct yvec; xveca \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>;\n        xveca \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        y \\<sharp> M\\<lparr>\\<lambda>*xvec N\\<rparr>.P;\n        yvec \\<sharp>* (M\\<lparr>\\<lambda>*xvec N\\<rparr>.P);\n        xveca \\<sharp>* Ma; y \\<sharp> Ma; yvec \\<sharp>* Ma;\n        xveca \\<sharp>* yvec\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xveca @\n                 y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M_\\<lparr>\\<nu>*(xvec_ @\n                                  y_ #\n                                  yvec_)\\<rparr>\\<langle>N_\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'_) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M_\\<lparr>\\<nu>*(xvec_ @\n                                y_ #\n                                yvec_)\\<rparr>\\<langle>N_\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P'_) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<lparr>\\<lambda>*xvec N\\<rparr>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<lparr>\\<lambda>*xvec N\\<rparr>.P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma outputPushResLeft:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "from \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\n  x \\<sharp> N", "have \"x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "by(auto simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "proof(induct rule: simIFresh[of _ _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: outputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "case(cOutput K)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n  x \\<sharp> K\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto>K\\<langle>N\\<rangle> \\<prec> P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P", "by(rule Output)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto>K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> K\\<langle>N\\<rangle>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P\n  x \\<sharp> \\<Psi>\n  x \\<sharp> K\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<Psi> \\<turnstile> M \\<leftrightarrow> K;\n        x \\<sharp> K\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<leadsto>[Rel] M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma outputPushResRight:\n  fixes \\<Psi>   :: 'b\n  and   x    :: name\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P    :: \"('a, 'b, 'c) psi\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "from \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\n  x \\<sharp> N", "have \"x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P", "by(auto simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)", "proof(induct rule: simIFresh[of _ _ _ _ _ \"(M, N)\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* (M, N)\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P))\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha> \\<sharp>* (M\\<langle>N\\<rangle>.P)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P;\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* (M, N)\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P) \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* M\\<langle>N\\<rangle>.P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* (M, N)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen K xvec1 xvec2 y N' P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                               xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 N')\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  y \\<in> supp N'\n  x \\<sharp> N'\n  x \\<sharp> P'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> K\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* M\\<langle>N\\<rangle>.P\n  y \\<sharp> M\\<langle>N\\<rangle>.P\n  xvec2 \\<sharp>* M\\<langle>N\\<rangle>.P\n  xvec1 \\<sharp>* K\n  y \\<sharp> K\n  xvec2 \\<sharp>* K\n  xvec1 \\<sharp>* xvec2\n  bn (K\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* (M, N)\n  x \\<sharp> K\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(K\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* (M, N)\\<close>"], ["proof (chain)\npicking this:\n  bn (K\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* (M, N)", "have \"y \\<sharp> N\""], ["proof (prove)\nusing this:\n  bn (K\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* (M, N)\n\ngoal (1 subgoal):\n 1. y \\<sharp> N", "by simp+"], ["proof (state)\nthis:\n  y \\<sharp> N\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto>K\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N')\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                               xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 N')\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "have \"N = ([(x, y)] \\<bullet> N')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                               xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 N')\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. N = [(x, y)] \\<bullet> N'", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                   N')\\<rangle> \\<prec> [(x, y)] \\<bullet>\n  P' \\<Longrightarrow>\n    N = [(x, y)] \\<bullet> N'", "by(ind_cases \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto>K\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N')\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\")\n          (auto simp add: residualInject psi.inject)"], ["proof (state)\nthis:\n  N = [(x, y)] \\<bullet> N'\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>x \\<sharp> N\\<close> \\<open>y \\<sharp> N\\<close> \\<open>x \\<noteq> y\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> N\n  y \\<sharp> N\n  x \\<noteq> y\n  N = [(x, y)] \\<bullet> N'", "have \"N = N'\""], ["proof (prove)\nusing this:\n  x \\<sharp> N\n  y \\<sharp> N\n  x \\<noteq> y\n  N = [(x, y)] \\<bullet> N'\n\ngoal (1 subgoal):\n 1. N = N'", "by(subst pt_bij[OF pt_name_inst, OF at_name_inst, symmetric, where pi=\"[(x, y)]\"])\n          (simp add: fresh_left calc_atm)"], ["proof (state)\nthis:\n  N = N'\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>y \\<in> supp N'\\<close> \\<open>y \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> supp N'\n  y \\<sharp> N\n  N = N'", "have False"], ["proof (prove)\nusing this:\n  y \\<in> supp N'\n  y \\<sharp> N\n  N = N'\n\ngoal (1 subgoal):\n 1. False", "by(simp add: fresh_def)"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>Ma xvec yvec y Na P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                               Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> Ma; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* M\\<langle>N\\<rangle>.P;\n        y \\<sharp> M\\<langle>N\\<rangle>.P;\n        yvec \\<sharp>* M\\<langle>N\\<rangle>.P; xvec \\<sharp>* Ma;\n        y \\<sharp> Ma; yvec \\<sharp>* Ma; xvec \\<sharp>* yvec;\n        bn (Ma\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* (M,\n                                     N);\n        x \\<sharp> Ma\\<lparr>\\<nu>*(xvec @\n                                    y #\n                                    yvec)\\<rparr>\\<langle>Na\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> Ma\\<lparr>\\<nu>*(xvec @\n    y # yvec)\\<rparr>\\<langle>Na\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<lparr>\\<nu>*(xvec1 @\n                  y # xvec2)\\<rparr>\\<langle>N'\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P'\n  bn \\<alpha> \\<sharp>* (M, N)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P';\n        bn \\<alpha> \\<sharp>* (M, N); x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto>\\<alpha> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "proof(induct rule: outputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n          (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "case(cOutput K)"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n          (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "from \\<open>\\<Psi> \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> M\\<langle>N\\<rangle>.(\\<lparr>\\<nu>x\\<rparr>P) \\<longmapsto>K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P", "by(rule Output)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n          (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n          (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<Psi> \\<turnstile> M \\<leftrightarrow> K \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n          (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>P\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> K\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> M\\<langle>N\\<rangle>.\\<lparr>\\<nu>x\\<rparr>P \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(M\\<langle>N\\<rangle>.P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma casePushResLeft:\n  fixes \\<Psi>  :: 'b\n  and   x  :: name\n  and   Cs :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> map fst Cs\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "from \\<open>x \\<sharp> map fst Cs\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> map fst Cs", "have \"x \\<sharp> Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\""], ["proof (prove)\nusing this:\n  x \\<sharp> map fst Cs\n\ngoal (1 subgoal):\n 1. x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                             (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                      Cs", "by(induct Cs) (auto simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                    (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                    Cs", "proof(induct rule: simIFresh[of _ _ _ _ _ Cs])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n      (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                     Cs \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P'')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> P''\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  bn \\<alpha> \\<sharp>* (Cases map (\\<lambda>(\\<phi>, P).\n (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                Cs)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* Cs\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n      (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                     Cs \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs) \\<longmapsto>\\<alpha> \\<prec> P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> P''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'') \\<in> Rel", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "case(cCase \\<phi> P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<longmapsto> \\<alpha> \\<prec> P''\n  (\\<phi>,\n   P') mem map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "from \\<open>(\\<phi>, P') mem (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>,\n   P') mem map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs", "obtain P where \"(\\<phi>, P) mem Cs\" and \"P' = \\<lparr>\\<nu>x\\<rparr>P\""], ["proof (prove)\nusing this:\n  (\\<phi>,\n   P') mem map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>(\\<phi>, P) mem Cs; P' = \\<lparr>\\<nu>x\\<rparr>P\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(induct Cs) auto"], ["proof (state)\nthis:\n  (\\<phi>, P) mem Cs\n  P' = \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "from \\<open>guarded P'\\<close> \\<open>P' = \\<lparr>\\<nu>x\\<rparr>P\\<close>"], ["proof (chain)\npicking this:\n  guarded P'\n  P' = \\<lparr>\\<nu>x\\<rparr>P", "have \"guarded P\""], ["proof (prove)\nusing this:\n  guarded P'\n  P' = \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. guarded P", "by simp"], ["proof (state)\nthis:\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P' \\<longmapsto>\\<alpha> \\<prec> P''\\<close> \\<open>P' = \\<lparr>\\<nu>x\\<rparr>P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P' \\<longmapsto> \\<alpha> \\<prec> P''\n  P' = \\<lparr>\\<nu>x\\<rparr>P", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P' \\<longmapsto> \\<alpha> \\<prec> P''\n  P' = \\<lparr>\\<nu>x\\<rparr>P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "note \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P''\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* Cs\\<close> \\<open>(\\<phi>, P) mem Cs\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* Cs\n  (\\<phi>, P) mem Cs", "have \"bn \\<alpha> \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* Cs\n  (\\<phi>, P) mem Cs\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P", "by(auto dest: memFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'';\n        (\\<phi>,\n         P) mem map (\\<lambda>(\\<phi>, P).\n                        (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                 Cs;\n        \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P'') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* Cs\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'') \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M xvec1 xvec2 y N P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> P'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* P\n  y \\<sharp> P\n  xvec2 \\<sharp>* P\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> xvec1 &&& x \\<sharp> xvec2 &&& x \\<sharp> M", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  x \\<sharp> M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs", "have \"y \\<sharp> Cs\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. y \\<sharp> Cs", "by simp"], ["proof (state)\nthis:\n  y \\<sharp> Cs\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\\<close> \\<open>(\\<phi>, P) mem Cs\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P", "have \"\\<Psi> \\<rhd> Cases Cs \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                   xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n     N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "by(rule Case)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"([(x, y)] \\<bullet> \\<Psi>) \\<rhd> ([(x, y)] \\<bullet> (Cases Cs))  \\<longmapsto>([(x, y)] \\<bullet> (M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  Cases Cs \\<longmapsto> [(x, y)] \\<bullet>\n   M\\<lparr>\\<nu>*(xvec1 @\n                   xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n     N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> [(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> [(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "have \"\\<Psi> \\<rhd> ([(x, y)] \\<bullet> (Cases Cs))  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> [(x, y)] \\<bullet>\n M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> (Cases Cs))  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n   Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n     y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>y \\<in> supp N\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n   Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n     y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n     y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>y \\<sharp> Cs\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<sharp> Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n     y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(simp add: alphaRes)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "have \"(\\<Psi>, P', P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P', P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* P; y \\<sharp> P;\n        yvec \\<sharp>* P; xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                             y #\n                             yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n        y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>(\\<phi>, P) mem Cs\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P", "have \"\\<Psi> \\<rhd> Cases Cs \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'", "by(rule Case)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P'') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P'') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<leadsto>[Rel] Cases map\n                                  (\\<lambda>(\\<phi>, P).\n(\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                  Cs\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma casePushResRight:\n  fixes \\<Psi>  :: 'b\n  and   x  :: name\n  and   Cs :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n\n  assumes \"eqvt Rel\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> map fst Cs\"\n  and     C1: \"\\<And>Q. (\\<Psi>, Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs) \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "from \\<open>x \\<sharp> map fst Cs\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> map fst Cs", "have \"x \\<sharp> Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\""], ["proof (prove)\nusing this:\n  x \\<sharp> map fst Cs\n\ngoal (1 subgoal):\n 1. x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                             (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                      Cs", "by(induct Cs) (auto simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Cases map (\\<lambda>(\\<phi>, P).\n                           (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                    Cs\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)", "proof(induct rule: simIFresh[of _ _ _ _ _ Cs])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> P'')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  bn \\<alpha> \\<sharp>* (Cases map (\\<lambda>(\\<phi>, P).\n (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                Cs)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* Cs\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto>\\<alpha> \\<prec> P''\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P''\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha> \\<sharp>* (Cases Cs)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (Cases Cs)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (Cases map\n(\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(Cases Cs);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* Cs; x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (Cases Cs)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (Cases Cs)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* Cs\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(Cases Cs) \\<longmapsto> \\<alpha> \\<prec> P''\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> P''\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (Cases Cs)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P'') \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                               yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (Cases Cs);\n        y \\<sharp> Cases Cs; yvec \\<sharp>* (Cases Cs); xvec \\<sharp>* M;\n        y \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M xvec1 xvec2 y N P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> P'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* (Cases Cs)\n  y \\<sharp> Cases Cs\n  xvec2 \\<sharp>* (Cases Cs)\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                               yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (Cases Cs);\n        y \\<sharp> Cases Cs; yvec \\<sharp>* (Cases Cs); xvec \\<sharp>* M;\n        y \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> xvec1 &&& x \\<sharp> xvec2 &&& x \\<sharp> M", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  x \\<sharp> M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                               yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (Cases Cs);\n        y \\<sharp> Cases Cs; yvec \\<sharp>* (Cases Cs); xvec \\<sharp>* M;\n        y \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs", "have \"y \\<sharp> Cs\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. y \\<sharp> Cs", "by simp"], ["proof (state)\nthis:\n  y \\<sharp> Cs\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                               yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (Cases Cs);\n        y \\<sharp> Cases Cs; yvec \\<sharp>* (Cases Cs); xvec \\<sharp>* M;\n        y \\<sharp> M; yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n      y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases Cs \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                 xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n   N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                   case a of\n                                   (\\<phi>, P) \\<Rightarrow>\n                                     (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "case(cCase \\<phi> P)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "have \"([(x, y)] \\<bullet> \\<Psi>) \\<rhd> ([(x, y)] \\<bullet> P)  \\<longmapsto>([(x, y)] \\<bullet> (M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> P')))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  P \\<longmapsto> [(x, y)] \\<bullet>\n                                  M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                    N)\\<rangle> \\<prec> [(x, y)] \\<bullet>\n                  P'", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'", "have \"\\<Psi> \\<rhd> ([(x, y)] \\<bullet> P)  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> P)  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n   P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>y \\<in> supp N\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n   P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P  \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "using \\<open>y \\<sharp> Cs\\<close> \\<open>(\\<phi>, P) mem Cs\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n P) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  y \\<sharp> Cs\n  (\\<phi>, P) mem Cs\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(subst alphaRes, auto dest: memFresh)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "from \\<open>(\\<phi>, P) mem Cs\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, P) mem Cs", "have \"(\\<phi>, \\<lparr>\\<nu>x\\<rparr>P) mem (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\""], ["proof (prove)\nusing this:\n  (\\<phi>, P) mem Cs\n\ngoal (1 subgoal):\n 1. (\\<phi>,\n     \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n    (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                   Cs", "by(induct Cs) auto"], ["proof (state)\nthis:\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "note \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "from \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  guarded P", "have \"guarded(\\<lparr>\\<nu>x\\<rparr>P)\""], ["proof (prove)\nusing this:\n  guarded P\n\ngoal (1 subgoal):\n 1. guarded (\\<lparr>\\<nu>x\\<rparr>P)", "by simp"], ["proof (state)\nthis:\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)", "have \"\\<Psi> \\<rhd> (Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule Case)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "have \"(\\<Psi>, P', P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P', P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                        xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n          N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                   case a of\n                                   (\\<phi>, P) \\<Rightarrow>\n                                     (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                       y #\n                       xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                 case a of\n                                 (\\<phi>, P) \\<Rightarrow>\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                          Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     y #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                 case a of\n                                 (\\<phi>, P) \\<Rightarrow>\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                          Cs \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                     y #\n                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes P')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* Cs\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* Cs\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases Cs \\<longmapsto>\\<alpha> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases Cs \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                   case a of\n                                   (\\<phi>, P) \\<Rightarrow>\n                                     (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cCase \\<phi> P)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<phi>, P) mem Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>(\\<phi>, P) mem Cs\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, P) mem Cs", "have \"(\\<phi>, \\<lparr>\\<nu>x\\<rparr>P) mem (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)\""], ["proof (prove)\nusing this:\n  (\\<phi>, P) mem Cs\n\ngoal (1 subgoal):\n 1. (\\<phi>,\n     \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n    (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                   Cs", "by(induct Cs) auto"], ["proof (state)\nthis:\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  guarded P", "have \"guarded(\\<lparr>\\<nu>x\\<rparr>P)\""], ["proof (prove)\nusing this:\n  guarded P\n\ngoal (1 subgoal):\n 1. guarded (\\<lparr>\\<nu>x\\<rparr>P)", "by simp"], ["proof (state)\nthis:\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)", "have \"\\<Psi> \\<rhd> (Cases (map (\\<lambda>(\\<phi>, P). (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P)) Cs)) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<phi>,\n   \\<lparr>\\<nu>x\\<rparr>P) mem map (\\<lambda>(\\<phi>, P).\n  (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                                 Cs\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded (\\<lparr>\\<nu>x\\<rparr>P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                         Cs \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule Case)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        (\\<phi>, P) mem Cs; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> Cases map\n           (\\<lambda>a.\n               case a of\n               (\\<phi>, P) \\<Rightarrow> (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n           Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                   case a of\n                                   (\\<phi>, P) \\<Rightarrow>\n                                     (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                            Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                 case a of\n                                 (\\<phi>, P) \\<Rightarrow>\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                          Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> Cases map (\\<lambda>a.\n                                 case a of\n                                 (\\<phi>, P) \\<Rightarrow>\n                                   (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                          Cs \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                                 (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                          Cs \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P'') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases map (\\<lambda>(\\<phi>, P).\n                              (\\<phi>, \\<lparr>\\<nu>x\\<rparr>P))\n                       Cs \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(Cases Cs)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resInputCases[consumes 5, case_names cRes]:\n  fixes \\<Psi>    :: 'b\n  and   x    :: name\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   M    :: 'a\n  and   N    :: 'a\n  and   P'   :: \"('a, 'b, 'c) psi\"\n  and   C    :: \"'d::fs_name\"\n\n  assumes Trans: \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"x \\<sharp> M\"\n  and     \"x \\<sharp> N\"\n  and     \"x \\<sharp> P'\"\n  and     rScope:  \"\\<And>P'. \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\\<rbrakk> \\<Longrightarrow> Prop (\\<lparr>\\<nu>x\\<rparr>P')\"\n\n  shows \"Prop P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Prop P'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Prop P'", "note Trans \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. Prop P'", "from \\<open>x \\<sharp> M\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\n  x \\<sharp> N", "have \"x \\<sharp> (M\\<lparr>N\\<rparr>)\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> M\\<lparr>N\\<rparr>", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>N\\<rparr>\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M\\<lparr>N\\<rparr>\n\ngoal (1 subgoal):\n 1. Prop P'", "note \\<open>x \\<sharp> P'\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. Prop P'", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. Prop P'", "have \"bn(M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\" and \"bn(M\\<lparr>N\\<rparr>) \\<sharp>* P\" and \"bn(M\\<lparr>N\\<rparr>) \\<sharp>* subject(M\\<lparr>N\\<rparr>)\" and \"bn(M\\<lparr>N\\<rparr>) = []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi> &&&\n     bn (M\\<lparr>N\\<rparr>) \\<sharp>* P) &&&\n    bn (M\\<lparr>N\\<rparr>) \\<sharp>* subject (M\\<lparr>N\\<rparr>) &&&\n    bn (M\\<lparr>N\\<rparr>) = []", "by simp+"], ["proof (state)\nthis:\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* P\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* subject (M\\<lparr>N\\<rparr>)\n  bn (M\\<lparr>N\\<rparr>) = []\n\ngoal (1 subgoal):\n 1. Prop P'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>N\\<rparr>\n  x \\<sharp> P'\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* P\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* subject (M\\<lparr>N\\<rparr>)\n  bn (M\\<lparr>N\\<rparr>) = []", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> M\\<lparr>N\\<rparr>\n  x \\<sharp> P'\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* \\<Psi>\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* P\n  bn (M\\<lparr>N\\<rparr>) \\<sharp>* subject (M\\<lparr>N\\<rparr>)\n  bn (M\\<lparr>N\\<rparr>) = []\n\ngoal (1 subgoal):\n 1. Prop P'", "by(induct rule: resCases) (auto intro: rScope)"], ["proof (state)\nthis:\n  Prop P'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma scopeExtLeft:\n  fixes x   :: name\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"x \\<sharp> P\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R. (\\<Psi>', R, R) \\<in> Rel\"\n  and     C2: \"\\<And>y \\<Psi>' R S zvec. \\<lbrakk>y \\<sharp> \\<Psi>'; y \\<sharp> R; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> S)), \\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> \\<lparr>\\<nu>y\\<rparr>S)) \\<in> Rel\"\n  and     C3: \"\\<And>\\<Psi>' zvec R y. \\<lbrakk>y \\<sharp> \\<Psi>'; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>R), \\<lparr>\\<nu>*zvec\\<rparr>(\\<lparr>\\<nu>y\\<rparr>R)) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "from \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P", "have \"x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "proof(induct rule: simIFresh[of _ _ _ _ _ x])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> PQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* x\n  x \\<sharp> \\<alpha>\n  x \\<sharp> PQ\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)", "have \"bn \\<alpha> \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> PQ\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)", "have \"bn \\<alpha> \\<sharp>* P\" and \"bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&&\n    bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* x; x \\<sharp> \\<alpha>; x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQ) \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> PQ\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> PQ\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQ) \\<in> Rel", "proof(induct rule: parCases[where C=x])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar1 P' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* x\n  x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<sharp> P'", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have FrxQ: \"\\<lparr>\\<nu>x\\<rparr>(extractFrame Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "obtain y A\\<^sub>Q' where A: \"A\\<^sub>Q = y#A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>y A\\<^sub>Q'.\n        A\\<^sub>Q = y # A\\<^sub>Q' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(case_tac A\\<^sub>Q) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q = y # A\\<^sub>Q'", "have \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* P\" and \"A\\<^sub>Q' \\<sharp>* \\<alpha>\"\n        and \"y \\<sharp> \\<Psi>\" and \"y \\<sharp> P\" and \"y \\<sharp> \\<alpha>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q' \\<sharp>* \\<Psi> &&&\n     A\\<^sub>Q' \\<sharp>* P &&& A\\<^sub>Q' \\<sharp>* \\<alpha>) &&&\n    y \\<sharp> \\<Psi> &&& y \\<sharp> P &&& y \\<sharp> \\<alpha>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>Q' \\<sharp>* \\<alpha>\n  y \\<sharp> \\<Psi>\n  y \\<sharp> P\n  y \\<sharp> \\<alpha>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from PTrans \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> P\n  y \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)", "have \"y \\<sharp> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  y \\<sharp> P\n  y \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n\ngoal (1 subgoal):\n 1. y \\<sharp> P'", "by(auto intro: freeFreshDerivative)"], ["proof (state)\nthis:\n  y \\<sharp> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note PTrans"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close> FrxQ"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"extractFrame([(y, x)] \\<bullet> Q) = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame ([(y, x)] \\<bullet> Q) =\n    \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>", "by(simp add: frame.inject alpha' fresh_list_cons eqvts)"], ["proof (state)\nthis:\n  extractFrame ([(y, x)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame ([(y, x)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* Q", "have \"([(y, x)] \\<bullet> (bn \\<alpha>)) \\<sharp>* ([(y, x)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> bn \\<alpha>) \\<sharp>* ([(y, x)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> bn \\<alpha>) \\<sharp>* ([(y, x)] \\<bullet> Q)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close> A"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  ([(y, x)] \\<bullet> bn \\<alpha>) \\<sharp>* ([(y, x)] \\<bullet> Q)", "have \"bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  ([(y, x)] \\<bullet> bn \\<alpha>) \\<sharp>* ([(y, x)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame ([(y, x)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)", "have \"\\<Psi> \\<rhd> P \\<parallel> ([(y, x)] \\<bullet> Q) \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> ([(y, x)] \\<bullet> Q))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame ([(y, x)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(y, x)] \\<bullet>\n                   Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n               ([(y, x)] \\<bullet> Q)", "using \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* P\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame ([(y, x)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* ([(y, x)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>Q' \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(y, x)] \\<bullet>\n                   Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n               ([(y, x)] \\<bullet> Q)", "by(rule Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(y, x)] \\<bullet>\n                 Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n             ([(y, x)] \\<bullet> Q)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(y, x)] \\<bullet> Q)) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel> ([(y, x)] \\<bullet> Q))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(y, x)] \\<bullet>\n                 Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n             ([(y, x)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(y, x)] \\<bullet>\n    Q)) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                        ([(y, x)] \\<bullet> Q))", "using \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(y, x)] \\<bullet>\n                 Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n             ([(y, x)] \\<bullet> Q)\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(y, x)] \\<bullet>\n    Q)) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                        ([(y, x)] \\<bullet> Q))", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(y, x)] \\<bullet>\n  Q)) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                      ([(y, x)] \\<bullet> Q))\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"([(y, x)] \\<bullet> \\<Psi>) \\<rhd> ([(y, x)] \\<bullet> (\\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(y, x)] \\<bullet> Q)))) \\<longmapsto>([(y, x)] \\<bullet> (\\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel> ([(y, x)] \\<bullet> Q))))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(y, x)] \\<bullet>\n  Q)) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                      ([(y, x)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. [(y, x)] \\<bullet>\n    \\<Psi> \\<rhd> [(y, x)] \\<bullet>\n                  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(y, x)] \\<bullet>\n    Q)) \\<longmapsto> [(y, x)] \\<bullet>\n                      \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                        ([(y, x)] \\<bullet> Q))", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(y, x)] \\<bullet>\n  \\<Psi> \\<rhd> [(y, x)] \\<bullet>\n                \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(y, x)] \\<bullet>\n  Q)) \\<longmapsto> [(y, x)] \\<bullet>\n                    \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                      ([(y, x)] \\<bullet> Q))\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>y \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>y \\<sharp> P'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<sharp> \\<alpha>\n  y \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  y \\<sharp> P'\n  [(y, x)] \\<bullet>\n  \\<Psi> \\<rhd> [(y, x)] \\<bullet>\n                \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(y, x)] \\<bullet>\n  Q)) \\<longmapsto> [(y, x)] \\<bullet>\n                    \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                      ([(y, x)] \\<bullet> Q))", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<sharp> \\<alpha>\n  y \\<sharp> \\<alpha>\n  x \\<sharp> P'\n  y \\<sharp> P'\n  [(y, x)] \\<bullet>\n  \\<Psi> \\<rhd> [(y, x)] \\<bullet>\n                \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(y, x)] \\<bullet>\n  Q)) \\<longmapsto> [(y, x)] \\<bullet>\n                    \\<alpha> \\<prec> \\<lparr>\\<nu>y\\<rparr>(P' \\<parallel>\n                      ([(y, x)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel>\n                      Q)", "by(simp add: eqvts calc_atm)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>(P' \\<parallel> Q)), \\<lparr>\\<nu>*[]\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q),\n     \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n    \\<in> Rel", "by(rule_tac C2) auto"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q),\n   \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x;\n        x \\<sharp> P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q),\n   \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q),\n   \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q) \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar2 xQ' A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* xQ'\n  A\\<^sub>P \\<sharp>* x\n  x \\<sharp> P \\<parallel> xQ'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> xQ'\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* x\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"x \\<sharp> \\<Psi>\\<^sub>P\" and \"x \\<sharp> A\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* x\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P &&& x \\<sharp> A\\<^sub>P", "by(force dest: extractFrameFresh)+"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> A\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> A\\<^sub>P", "have \"x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> A\\<^sub>P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P", "by force"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> \\<alpha>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<alpha>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> P \\<parallel> xQ'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P \\<parallel> xQ'", "have \"x \\<sharp> xQ'\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> xQ'\n\ngoal (1 subgoal):\n 1. x \\<sharp> xQ'", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> xQ'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> xQ'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from FrP \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>", "have \"bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P", "have \"bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x; x \\<sharp> P \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xQ'\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xQ'\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> xQ') \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xQ'\n  bn \\<alpha> \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> xQ') \\<in> Rel", "proof(induct rule: resCases')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M xvec1 xvec2 y N Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> Q'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  xvec2 \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec1 \\<sharp>* Q\n  y \\<sharp> Q\n  xvec2 \\<sharp>* Q\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n y # xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> y\" and \"x \\<sharp> xvec2\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> xvec1 &&& x \\<noteq> y &&& x \\<sharp> xvec2", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> y\n  x \\<sharp> xvec2\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>", "have \"y \\<sharp> \\<Psi>\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y #\n                      xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. y \\<sharp> \\<Psi>", "by simp"], ["proof (state)\nthis:\n  y \\<sharp> \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> FrP"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>bn(M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P", "have \"(xvec1@xvec2) \\<sharp>* P\" and \"y \\<sharp> P\""], ["proof (prove)\nusing this:\n  bn (M\\<lparr>\\<nu>*(xvec1 @\n                      y # xvec2)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* P &&& y \\<sharp> P", "by simp+"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n y # xvec2)\\<rparr>\\<langle>N\\<rangle>)", "have \"A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle>)\" and \"y \\<sharp> A\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n y # xvec2)\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n   xvec2)\\<rparr>\\<langle>N\\<rangle>) &&&\n    y \\<sharp> A\\<^sub>P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>x \\<sharp> A\\<^sub>P\\<close> \\<open>y \\<sharp> A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q\n  x \\<sharp> A\\<^sub>P\n  y \\<sharp> A\\<^sub>P", "have \"A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n  x \\<sharp> A\\<^sub>P\n  y \\<sharp> A\\<^sub>P\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> A\\<^sub>P\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"\\<Psi> \\<rhd> P \\<parallel> ([(x, y)] \\<bullet> Q) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> A\\<^sub>P\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n              xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec1 @\n xvec2)\\<rparr>\\<langle>N\\<rangle>)\n  y \\<sharp> A\\<^sub>P\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>P \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n              xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'", "by(rule_tac Par2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(x, y)] \\<bullet>\n    Q)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\ny # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'", "using \\<open>y \\<in> supp N\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(x, y)] \\<bullet>\n    Q)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\ny # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel> Q'", "by(rule Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n  Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n  Q'", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n  Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                    y #\n                                    xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n  Q'", "by(subst alphaRes[where y=y]) (simp add: fresh_left calc_atm eqvts)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "have \"(\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                                yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xvec \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xvec \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y # yvec)\\<rparr>\\<langle>N\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* (M\\<lparr>\\<nu>*(xvec @\n       y # yvec)\\<rparr>\\<langle>N\\<rangle>);\n        bn (M\\<lparr>\\<nu>*(xvec @\n                            y #\n                            yvec)\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                      y #\n                      yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P \\<parallel> P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                     y #\n                                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> FrP \\<open>bn \\<alpha> \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'", "by(rule Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                      Q')", "using \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                      Q')", "by(rule Scope)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>(P \\<parallel> Q')), \\<lparr>\\<nu>*[]\\<rparr>(P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'),\n     \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n    \\<in> Rel", "by(rule_tac C2) auto"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'),\n   \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>; bn \\<alpha> \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; bn \\<alpha> \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P \\<parallel> \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'),\n   \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'),\n   \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> xQ') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec xQ' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* xQ'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* xQ'\n  A\\<^sub>Q \\<sharp>* x\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* x\n  x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\" and FrQ: \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ' &&&\n    extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> N\" and \"x \\<sharp> xQ'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<sharp> N &&& x \\<sharp> xQ'", "using \\<open>xvec \\<sharp>* x\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n  xvec \\<sharp>* x\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. x \\<sharp> N &&& x \\<sharp> xQ'", "by(force intro: outputFreshDerivative)+"], ["proof (state)\nthis:\n  x \\<sharp> N\n  x \\<sharp> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from PTrans \\<open>x \\<sharp> P\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> P\n  x \\<sharp> N", "have \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> P\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> P'", "by(rule inputFreshDerivative)"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\\<close> FrQ \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* x", "have \"x \\<sharp> \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>Q", "by(drule_tac extractFrameFresh) auto"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* x", "have \"x \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFresh) auto"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* x", "have \"A\\<^sub>Q \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from PTrans FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>  \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>P \\<sharp>* xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* xvec", "obtain M' where \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\" and \"x \\<sharp> M'\" and \"A\\<^sub>Q \\<sharp>* M'\" and \"xvec \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M';\n         x \\<sharp> M'; A\\<^sub>Q \\<sharp>* M'; xvec \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"x#xvec@A\\<^sub>Q\" in obtainPrefix) (assumption | force simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n  xvec \\<sharp>* M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence MeqM': \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n  xvec \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(blast intro: chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with QTrans FrQ \\<open>distinct A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'", "by(force intro: outputRenameSubject)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P", "have \"x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P", "by force"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* x", "have \"x \\<sharp> xvec\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<sharp> xvec", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> xvec\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>x \\<sharp> M'\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M'\n  x \\<sharp> N\n  x \\<sharp> xvec", "have \"x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\""], ["proof (prove)\nusing this:\n  x \\<sharp> M'\n  x \\<sharp> N\n  x \\<sharp> xvec\n\ngoal (1 subgoal):\n 1. x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>x \\<sharp> xQ'\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> xQ'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                              \\<Psi>\\<^sub>P)", "by force"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                            \\<Psi>\\<^sub>P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                            \\<Psi>\\<^sub>P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>x \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> xvec", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> xvec\n\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* P", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* N", "have \"A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* N\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"object(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N", "by simp"], ["proof (state)\nthis:\n  object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec", "by simp"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"subject(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'", "by simp"], ["proof (state)\nthis:\n  subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* M'", "have \"bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                              (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)", "by simp"], ["proof (state)\nthis:\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                            (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> xQ'\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                            \\<Psi>\\<^sub>P)\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                            (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> xQ'\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                            \\<Psi>\\<^sub>P)\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                            (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ') \\<in> Rel", "using \\<open>x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\\<close> \\<open>bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\\<close> \\<open>bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\\<close> \\<open>object(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N\\<close>\n              \\<open>bn(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec\\<close> \\<open>subject(M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  x \\<sharp> xQ'\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* (\\<Psi> \\<otimes>\n                            \\<Psi>\\<^sub>P)\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* Q\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* subject\n                            (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec\n  subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'\n  A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ') \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "case(cOpen M'' xvec1 xvec2 y N' Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  y \\<in> supp N'\n  x \\<sharp> N'\n  x \\<sharp> Q'\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M''\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  xvec2 \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)\n  xvec1 \\<sharp>* Q\n  y \\<sharp> Q\n  xvec2 \\<sharp>* Q\n  xvec1 \\<sharp>* M''\n  y \\<sharp> M''\n  xvec2 \\<sharp>* M''\n  xvec1 \\<sharp>* xvec2\n  x \\<sharp> M''\\<lparr>\\<nu>*(xvec1 @\n                               y # xvec2)\\<rparr>\\<langle>N'\\<rangle>\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* P\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y #\n                        xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* \\<Psi>\n  object\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N\n  bn (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  xvec\n  subject\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M'\n  A\\<^sub>Q \\<sharp>* (M''\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N'\\<rangle>)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M''\\<lparr>\\<nu>*(xvec1 @\n                               y # xvec2)\\<rparr>\\<langle>N'\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> y\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M''\""], ["proof (prove)\nusing this:\n  x \\<sharp> M''\\<lparr>\\<nu>*(xvec1 @\n                               y # xvec2)\\<rparr>\\<langle>N'\\<rangle>\n\ngoal (1 subgoal):\n 1. (x \\<sharp> xvec1 &&& x \\<noteq> y) &&&\n    x \\<sharp> xvec2 &&& x \\<sharp> M''", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> y\n  x \\<sharp> xvec2\n  x \\<sharp> M''\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>bn(M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* P", "have \"(xvec1@xvec2) \\<sharp>* P\" and \"y \\<sharp> P\""], ["proof (prove)\nusing this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* P &&& y \\<sharp> P", "by simp+"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n  y \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* (M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (M''\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N'\\<rangle>)", "have \"(xvec1@xvec2) \\<sharp>* A\\<^sub>Q\" and \"y \\<sharp> A\\<^sub>Q\" and \"A\\<^sub>Q \\<sharp>* M''\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (M''\\<lparr>\\<nu>*(xvec1 @\n   y # xvec2)\\<rparr>\\<langle>N'\\<rangle>)\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q &&&\n    y \\<sharp> A\\<^sub>Q &&& A\\<^sub>Q \\<sharp>* M''", "by simp+"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  y \\<sharp> A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M''\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>bn(M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y #\n                        xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* \\<Psi>", "have \"(xvec1@xvec2) \\<sharp>* \\<Psi>\" and \"y \\<sharp> \\<Psi>\""], ["proof (prove)\nusing this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @\n                        y #\n                        xvec2)\\<rparr>\\<langle>N'\\<rangle>) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* \\<Psi> &&& y \\<sharp> \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>object(M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) = Some N\\<close>"], ["proof (chain)\npicking this:\n  object\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N", "have \"N = N'\""], ["proof (prove)\nusing this:\n  object\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some N\n\ngoal (1 subgoal):\n 1. N = N'", "by simp"], ["proof (state)\nthis:\n  N = N'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>bn(M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) = xvec\\<close>"], ["proof (chain)\npicking this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  xvec", "have \"xvec = xvec1@y#xvec2\""], ["proof (prove)\nusing this:\n  bn (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  xvec\n\ngoal (1 subgoal):\n 1. xvec = xvec1 @ y # xvec2", "by simp"], ["proof (state)\nthis:\n  xvec = xvec1 @ y # xvec2\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>subject(M''\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N'\\<rangle>) = Some M'\\<close>"], ["proof (chain)\npicking this:\n  subject\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M'", "have \"M' = M''\""], ["proof (prove)\nusing this:\n  subject\n   (M''\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N'\\<rangle>) =\n  Some M'\n\ngoal (1 subgoal):\n 1. M' = M''", "by simp"], ["proof (state)\nthis:\n  M' = M''\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>x \\<noteq> y\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<noteq> y\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>([(y, x)] \\<bullet> N)\\<rparr> \\<prec> ([(y, x)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<noteq> y\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n              N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'", "by(rule_tac xvec=\"[y]\" in inputAlpha) (auto simp add: calc_atm)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n            N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "hence PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>([(x, y)] \\<bullet> N)\\<rparr> \\<prec> ([(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n            N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n              N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'", "by(simp add: name_swap)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M''\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N')\\<rangle> \\<prec> ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                      xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n        N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* x\\<close> \\<open>y \\<sharp> A\\<^sub>Q\\<close> \\<open>distinct xvec1\\<close> \\<open>distinct xvec2\\<close> \\<open>xvec1 \\<sharp>* xvec2\\<close> \\<open>xvec1 \\<sharp>* M''\\<close> \\<open>xvec2 \\<sharp>* M''\\<close>\n             \\<open>(xvec1@xvec2) \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* x\n  y \\<sharp> A\\<^sub>Q\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* xvec2\n  xvec1 \\<sharp>* M''\n  xvec2 \\<sharp>* M''\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "have \"A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* x\n  y \\<sharp> A\\<^sub>Q\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* xvec2\n  xvec1 \\<sharp>* M''\n  xvec2 \\<sharp>* M''\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')", "using \\<open>A\\<^sub>Q \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* x\n  y \\<sharp> A\\<^sub>Q\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* xvec2\n  xvec1 \\<sharp>* M''\n  xvec2 \\<sharp>* M''\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')", "by(rule_tac outputFreshChainDerivative(2)) (assumption | simp)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have FrxQ: \"\\<lparr>\\<nu>x\\<rparr>(extractFrame Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "obtain z A\\<^sub>Q' where A: \"A\\<^sub>Q = z#A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>z A\\<^sub>Q'.\n        A\\<^sub>Q = z # A\\<^sub>Q' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(case_tac A\\<^sub>Q) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>(xvec1@xvec2) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* M''\\<close> \\<open>A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')\\<close> \\<open>y \\<sharp> A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M''\n  A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')\n  y \\<sharp> A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q = z # A\\<^sub>Q'", "have \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* P\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>Q' \\<sharp>* Q\"\n          and \"z \\<sharp> \\<Psi>\" and \"z \\<sharp> P\" and \"z \\<sharp> P'\" and \"z \\<sharp> \\<Psi>\\<^sub>P\" and \"z \\<sharp> Q\" and \"z \\<sharp> xvec1\" and \"z \\<sharp> xvec2\"\n          and \"z \\<sharp> M''\" and \"z \\<sharp> ([(x, y)] \\<bullet> Q')\" and \"A\\<^sub>Q' \\<sharp>* M''\" and \"z \\<noteq> y\" and \"z \\<sharp> (xvec1@xvec2)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  (xvec1 @ xvec2) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M''\n  A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q')\n  y \\<sharp> A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q = z # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. (((A\\<^sub>Q' \\<sharp>* \\<Psi> &&& A\\<^sub>Q' \\<sharp>* P) &&&\n      A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>Q' \\<sharp>* Q) &&&\n     (z \\<sharp> \\<Psi> &&& z \\<sharp> P) &&&\n     z \\<sharp> P' &&& z \\<sharp> \\<Psi>\\<^sub>P) &&&\n    ((z \\<sharp> Q &&& z \\<sharp> xvec1) &&&\n     z \\<sharp> xvec2 &&& z \\<sharp> M'') &&&\n    (z \\<sharp> [(x, y)] \\<bullet> Q' &&& A\\<^sub>Q' \\<sharp>* M'') &&&\n    z \\<noteq> y &&& z \\<sharp> (xvec1 @ xvec2)", "by auto"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q' \\<sharp>* Q\n  z \\<sharp> \\<Psi>\n  z \\<sharp> P\n  z \\<sharp> P'\n  z \\<sharp> \\<Psi>\\<^sub>P\n  z \\<sharp> Q\n  z \\<sharp> xvec1\n  z \\<sharp> xvec2\n  z \\<sharp> M''\n  z \\<sharp> [(x, y)] \\<bullet> Q'\n  A\\<^sub>Q' \\<sharp>* M''\n  z \\<noteq> y\n  z \\<sharp> (xvec1 @ xvec2)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>P \\<sharp>* A\\<^sub>Q'\" and \"z \\<sharp> A\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* A\\<^sub>Q' &&& z \\<sharp> A\\<^sub>P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  z \\<sharp> A\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x", "have \"x \\<noteq> z\" and \"x \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<noteq> z &&& x \\<sharp> A\\<^sub>Q'", "by simp+"], ["proof (state)\nthis:\n  x \\<noteq> z\n  x \\<sharp> A\\<^sub>Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>distinct A\\<^sub>Q\\<close> A"], ["proof (chain)\npicking this:\n  distinct A\\<^sub>Q\n  A\\<^sub>Q = z # A\\<^sub>Q'", "have \"z \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  distinct A\\<^sub>Q\n  A\\<^sub>Q = z # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. z \\<sharp> A\\<^sub>Q'", "by(induct A\\<^sub>Q') (auto simp add: fresh_list_nil fresh_list_cons)"], ["proof (state)\nthis:\n  z \\<sharp> A\\<^sub>Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from PTrans \\<open>x \\<sharp> P\\<close> \\<open>z \\<sharp> P\\<close> \\<open>x \\<noteq> z\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n  x \\<sharp> P\n  z \\<sharp> P\n  x \\<noteq> z", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> N)\\<rparr> \\<prec> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> P')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n  x \\<sharp> P\n  z \\<sharp> P\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n              [(x, y)] \\<bullet>\n              N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'", "by(rule_tac xvec=\"[x]\" in inputAlpha) (auto simp add: calc_atm)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "note FrP"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "have \"([(x, z)] \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)) \\<rhd> ([(x, z)] \\<bullet> Q) \\<longmapsto>([(x, z)] \\<bullet> (M''\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N')\\<rangle> \\<prec> ([(x, y)] \\<bullet> Q')))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. [(x, z)] \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                          Q \\<longmapsto> [(x, z)] \\<bullet>\n    M''\\<lparr>\\<nu>*(xvec1 @\n                      xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n        N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, z)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> [(x, z)] \\<bullet>\n  M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>z \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>z \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M''\\<close> \\<open>z \\<sharp> M''\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>z \\<sharp> xvec1\\<close> \\<open>z \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  z \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  z \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M''\n  z \\<sharp> M''\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  z \\<sharp> xvec1\n  z \\<sharp> xvec2\n  [(x, z)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> [(x, z)] \\<bullet>\n  M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> ([(x, z)] \\<bullet> Q) \\<longmapsto>M''\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet> [(x, y)] \\<bullet> N')\\<rangle> \\<prec> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  z \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  z \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M''\n  z \\<sharp> M''\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  z \\<sharp> xvec1\n  z \\<sharp> xvec2\n  [(x, z)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> [(x, z)] \\<bullet>\n  M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                          Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                      xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n        [(x, y)] \\<bullet>\n        N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n      [(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n      [(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close> FrxQ"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"extractFrame([(x, z)] \\<bullet> Q) = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = z # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame ([(x, z)] \\<bullet> Q) =\n    \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>", "by(clarsimp simp add: alpha' eqvts frame.inject fresh_list_cons name_swap)"], ["proof (state)\nthis:\n  extractFrame ([(x, z)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame ([(x, z)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"([(x, z)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, z)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, z)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, z)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, z)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>z \\<sharp> A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* x\n  z \\<sharp> A\\<^sub>P\n  ([(x, z)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, z)] \\<bullet> Q)", "have \"A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* x\n  z \\<sharp> A\\<^sub>P\n  ([(x, z)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q' \\<sharp>* Q", "have \"([(x, z)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, z)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q' \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, z)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, z)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, z)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> A\\<^sub>Q'\\<close> \\<open>z \\<sharp> A\\<^sub>Q'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> A\\<^sub>Q'\n  z \\<sharp> A\\<^sub>Q'\n  ([(x, z)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, z)] \\<bullet> Q)", "have \"A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> A\\<^sub>Q'\n  z \\<sharp> A\\<^sub>Q'\n  ([(x, z)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n      [(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, z)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)", "have \"\\<Psi> \\<rhd> (P \\<parallel> ([(x, z)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n      [(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, z)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, z)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1 @\n                            xvec2)\\<rparr>([(x, z)] \\<bullet>\n     [(x, y)] \\<bullet> P') \\<parallel>\n    ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')", "using MeqM' \\<open>M'=M''\\<close> \\<open>N=N'\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>  \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q'\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* P\\<close> \\<open>(xvec1@xvec2) \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* M''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, z)] \\<bullet>\n                        Q \\<longmapsto> M''\\<lparr>\\<nu>*(xvec1 @\n                    xvec2)\\<rparr>\\<langle>([(x, z)] \\<bullet>\n      [(x, y)] \\<bullet>\n      N')\\<rangle> \\<prec> [(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, z)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, z)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, z)] \\<bullet> Q)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  M' = M''\n  N = N'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  (xvec1 @ xvec2) \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* M''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, z)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1 @\n                            xvec2)\\<rparr>([(x, z)] \\<bullet>\n     [(x, y)] \\<bullet> P') \\<parallel>\n    ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, z)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1 @\n                          xvec2)\\<rparr>([(x, z)] \\<bullet>\n   [(x, y)] \\<bullet> P') \\<parallel>\n  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with\\<open>z \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  z \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, z)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1 @\n                          xvec2)\\<rparr>([(x, z)] \\<bullet>\n   [(x, y)] \\<bullet> P') \\<parallel>\n  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')))\""], ["proof (prove)\nusing this:\n  z \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, z)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(xvec1 @\n                          xvec2)\\<rparr>([(x, z)] \\<bullet>\n   [(x, y)] \\<bullet> P') \\<parallel>\n  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel>\n   ([(x, z)] \\<bullet>\n    Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                     xvec2)\\<rparr>([(x, z)] \\<bullet>\n              [(x, y)] \\<bullet> P') \\<parallel>\n             ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel>\n ([(x, z)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                   xvec2)\\<rparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet> P') \\<parallel>\n           ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel>\n ([(x, z)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                   xvec2)\\<rparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet> P') \\<parallel>\n           ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>z \\<sharp> P\\<close> \\<open>z \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  z \\<sharp> P\n  z \\<sharp> Q", "have \"\\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet> (P \\<parallel> ([(x, z)] \\<bullet> Q)))\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  z \\<sharp> P\n  z \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                           P \\<parallel> ([(x, z)] \\<bullet> Q))", "by(subst alphaRes[of x]) (auto simp add: calc_atm fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         P \\<parallel> ([(x, z)] \\<bullet> Q))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>z \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  z \\<sharp> P\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         P \\<parallel> ([(x, z)] \\<bullet> Q))", "have \"\\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  z \\<sharp> P\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         P \\<parallel> ([(x, z)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>z \\<noteq> y\\<close> \\<open>x \\<noteq> z\\<close> \\<open>z \\<sharp> P'\\<close> \\<open>z \\<sharp> [(x, y)] \\<bullet> Q'\\<close>"], ["proof (chain)\npicking this:\n  z \\<noteq> y\n  x \\<noteq> z\n  z \\<sharp> P'\n  z \\<sharp> [(x, y)] \\<bullet> Q'", "have \"\\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))) = \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet> (\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))))\""], ["proof (prove)\nusing this:\n  z \\<noteq> y\n  x \\<noteq> z\n  z \\<sharp> P'\n  z \\<sharp> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n    \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                           \\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))", "by(subst alphaRes[of x]) (auto simp add: resChainFresh fresh_left calc_atm name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         \\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>z \\<sharp> xvec1\\<close> \\<open>z \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  z \\<sharp> xvec1\n  z \\<sharp> xvec2\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         \\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))", "have \"\\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel> ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))) = \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q')))\""], ["proof (prove)\nusing this:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  z \\<sharp> xvec1\n  z \\<sharp> xvec2\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, z)] \\<bullet>\n                         \\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                  ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n    \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel>\n                  ([(x, y)] \\<bullet> Q'))", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> P'\\<close> \\<open>x \\<sharp> Q'\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P'\n  x \\<sharp> Q'\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2", "have \"\\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))) =  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  x \\<sharp> P'\n  x \\<sharp> Q'\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel>\n                  ([(x, y)] \\<bullet> Q')) =\n    \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n    xvec2)\\<rparr>P' \\<parallel> Q')", "by(subst alphaRes[of y]) (auto simp add: resChainFresh calc_atm eqvts fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>P' \\<parallel> Q')\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel>\n ([(x, z)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                   xvec2)\\<rparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet> P') \\<parallel>\n           ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>P' \\<parallel> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>z\\<rparr>(P \\<parallel>\n ([(x, z)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                   xvec2)\\<rparr>([(x, z)] \\<bullet>\n            [(x, y)] \\<bullet> P') \\<parallel>\n           ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>z\\<rparr>(P \\<parallel> ([(x, z)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>z\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, z)] \\<bullet> [(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, z)] \\<bullet> [(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>([(x, y)] \\<bullet> P') \\<parallel>\n                ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n  xvec2)\\<rparr>P' \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                   xvec2)\\<rparr>P' \\<parallel> Q')", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                 xvec2)\\<rparr>P' \\<parallel> Q')\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                 xvec2)\\<rparr>P' \\<parallel> Q')\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>(xvec1@xvec2) \\<sharp>* \\<Psi>\\<close> \\<open>xvec=xvec1@y#xvec2\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> \\<Psi>\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n  xvec = xvec1 @ y # xvec2", "have \"(\\<Psi>, \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>(P' \\<parallel> Q')), \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  y \\<sharp> \\<Psi>\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n  xvec = xvec1 @ y # xvec2\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n     xvec2)\\<rparr>P' \\<parallel> Q'),\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n    \\<in> Rel", "by(force intro: C3 simp add: resChainAppend)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n   xvec2)\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>M xveca yvec y Na P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*(xveca @\n                                yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                 Na)\\<rangle> \\<prec> [(x, y)] \\<bullet> P'a;\n        y \\<in> supp Na; x \\<sharp> Na; x \\<sharp> P'a; x \\<noteq> y;\n        y \\<sharp> xveca; y \\<sharp> yvec; y \\<sharp> M; distinct xveca;\n        distinct yvec; xveca \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P);\n        y \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P;\n        yvec \\<sharp>* (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P); xveca \\<sharp>* Q;\n        y \\<sharp> Q; yvec \\<sharp>* Q; xveca \\<sharp>* M; y \\<sharp> M;\n        yvec \\<sharp>* M; xveca \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xveca @\n                                   y # yvec)\\<rparr>\\<langle>Na\\<rangle>;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* P;\n        bn (M\\<lparr>\\<nu>*(xveca @\n                            y #\n                            yvec)\\<rparr>\\<langle>Na\\<rangle>) \\<sharp>* \\<Psi>;\n        object\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some N;\n        bn (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        xvec;\n        subject\n         (M\\<lparr>\\<nu>*(xveca @ y # yvec)\\<rparr>\\<langle>Na\\<rangle>) =\n        Some M';\n        A\\<^sub>Q \\<sharp>* (M\\<lparr>\\<nu>*(xveca @\n       y # yvec)\\<rparr>\\<langle>Na\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> P'a)\n                            \\<in> Rel\n 2. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                 xvec2)\\<rparr>P' \\<parallel> Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n   xvec2)\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n                                 xvec2)\\<rparr>P' \\<parallel> Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*(xvec1 @\n   xvec2)\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>\n  object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N\n  bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec\n  subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M'\n  A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M'\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  xvec \\<sharp>* M'\n  distinct xvec\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"A\\<^sub>Q \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  xvec \\<sharp>* M'\n  distinct xvec\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* Q'", "by(force dest: outputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* Q'", "have FrxQ: \"\\<lparr>\\<nu>x\\<rparr>(extractFrame Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "obtain y A\\<^sub>Q' where A: \"A\\<^sub>Q = y#A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>y A\\<^sub>Q'.\n        A\\<^sub>Q = y # A\\<^sub>Q' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(case_tac A\\<^sub>Q) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q'\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q = y # A\\<^sub>Q'", "have \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* P\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>Q' \\<sharp>* Q\" and \"A\\<^sub>Q \\<sharp>* xvec\" and \"A\\<^sub>Q \\<sharp>* Q'\"\n          and \"y \\<sharp> \\<Psi>\" and \"y \\<sharp> P\" and \"y \\<sharp> P'\" and \"y \\<sharp> \\<Psi>\\<^sub>P\" and \"y \\<sharp> Q\" and \"y \\<sharp> xvec\" and \"y \\<sharp> M'\" and \"y \\<sharp> Q'\"\n          and \"A\\<^sub>Q' \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>Q' \\<sharp>* \\<Psi> &&&\n      A\\<^sub>Q' \\<sharp>* P &&& A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P) &&&\n     (A\\<^sub>Q' \\<sharp>* Q &&& A\\<^sub>Q \\<sharp>* xvec) &&&\n     A\\<^sub>Q \\<sharp>* Q' &&& y \\<sharp> \\<Psi>) &&&\n    ((y \\<sharp> P &&& y \\<sharp> P') &&&\n     y \\<sharp> \\<Psi>\\<^sub>P &&& y \\<sharp> Q) &&&\n    (y \\<sharp> xvec &&& y \\<sharp> M') &&&\n    y \\<sharp> Q' &&& A\\<^sub>Q' \\<sharp>* M'", "by(simp)+"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q' \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> P\n  y \\<sharp> P'\n  y \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> Q\n  y \\<sharp> xvec\n  y \\<sharp> M'\n  y \\<sharp> Q'\n  A\\<^sub>Q' \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>P \\<sharp>* A\\<^sub>Q'\" and \"y \\<sharp> A\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* A\\<^sub>Q' &&& y \\<sharp> A\\<^sub>P", "by(simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x", "have \"x \\<noteq> y\" and \"x \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<noteq> y &&& x \\<sharp> A\\<^sub>Q'", "by(simp add: fresh_list_cons)+"], ["proof (state)\nthis:\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with A \\<open>distinct A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  distinct A\\<^sub>Q\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'", "have \"y \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  distinct A\\<^sub>Q\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. y \\<sharp> A\\<^sub>Q'", "by(induct A\\<^sub>Q') (auto simp add: fresh_list_nil fresh_list_cons)"], ["proof (state)\nthis:\n  y \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>x \\<noteq> y\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<noteq> y\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>([(y, x)] \\<bullet> N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<noteq> y\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n              N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'", "by(rule_tac xvec=\"[y]\" in inputAlpha) (auto simp add: calc_atm)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n            N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>([(x, y)] \\<bullet> N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(y, x)] \\<bullet>\n            N)\\<rparr> \\<prec> [(y, x)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n              N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'", "by(simp add: name_swap)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "note FrP"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from  \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"([(x, y)] \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)) \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>([(x, y)] \\<bullet> (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                          Q \\<longmapsto> [(x, y)] \\<bullet>\n    M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>y \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M'\\<close> \\<open>y \\<sharp> M'\\<close> \\<open>x \\<sharp> xvec\\<close> \\<open>y \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  y \\<sharp> M'\n  x \\<sharp> xvec\n  y \\<sharp> xvec\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  y \\<sharp> M'\n  x \\<sharp> xvec\n  y \\<sharp> xvec\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                          Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n      y)] \\<bullet>\n    N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n    y)] \\<bullet>\n  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n    y)] \\<bullet>\n  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close> FrxQ"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have FrQ: \"extractFrame([(x, y)] \\<bullet> Q) = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame ([(x, y)] \\<bullet> Q) =\n    \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>", "by(clarsimp simp add: alpha' eqvts frame.inject fresh_list_cons name_swap)"], ["proof (state)\nthis:\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>y \\<sharp> A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* x\n  y \\<sharp> A\\<^sub>P\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* x\n  y \\<sharp> A\\<^sub>P\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q' \\<sharp>* Q", "have \"([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q' \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> A\\<^sub>Q'\\<close> \\<open>y \\<sharp> A\\<^sub>Q'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>Q'\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>Q'\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n    y)] \\<bullet>\n  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"\\<Psi> \\<rhd> (P \\<parallel> ([(x, y)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n    y)] \\<bullet>\n  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x,\n    y)] \\<bullet>\n  P') \\<parallel>\n ([(x, y)] \\<bullet> Q')", "using MeqM' \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>  \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q'\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* M'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>([(x, y)] \\<bullet>\n            N)\\<rparr> \\<prec> [(x, y)] \\<bullet> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>([(x,\n    y)] \\<bullet>\n  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x,\n    y)] \\<bullet>\n  P') \\<parallel>\n ([(x, y)] \\<bullet> Q')", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x,\n  y)] \\<bullet>\nP') \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with\\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x,\n  y)] \\<bullet>\nP') \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q')))\""], ["proof (prove)\nusing this:\n  y \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>([(x,\n  y)] \\<bullet>\nP') \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(x, y)] \\<bullet>\n    Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x,\n             y)] \\<bullet>\n           P') \\<parallel>\n          ([(x, y)] \\<bullet> Q'))", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x,\n           y)] \\<bullet>\n         P') \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x,\n           y)] \\<bullet>\n         P') \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q", "have \"\\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet> (P \\<parallel> ([(x, y)] \\<bullet> Q)))\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                           P \\<parallel> ([(x, y)] \\<bullet> Q))", "by(subst alphaRes[of x]) (auto simp add: calc_atm fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))", "have \"\\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>y \\<sharp> P'\\<close> \\<open>y \\<sharp> Q'\\<close> \\<open>x \\<sharp> xvec\\<close> \\<open>y \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> P'\n  y \\<sharp> Q'\n  x \\<sharp> xvec\n  y \\<sharp> xvec", "have \"\\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(([(x, y)] \\<bullet> P') \\<parallel> ([(x, y)] \\<bullet> Q'))) =  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  y \\<sharp> P'\n  y \\<sharp> Q'\n  x \\<sharp> xvec\n  y \\<sharp> xvec\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x, y)] \\<bullet>\n                P') \\<parallel>\n               ([(x, y)] \\<bullet> Q')) =\n    \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')", "by(subst alphaRes[of y]) (auto simp add: resChainFresh calc_atm eqvts fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x, y)] \\<bullet>\n              P') \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x,\n           y)] \\<bullet>\n         P') \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x, y)] \\<bullet>\n              P') \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x,\n           y)] \\<bullet>\n         P') \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>([(x, y)] \\<bullet>\n              P') \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        Q')", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')), \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a;\n        x \\<sharp> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* P;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) \\<sharp>* \\<Psi>;\n        object (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some N;\n        bn (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = xvec;\n        subject (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>) = Some M';\n        A\\<^sub>Q \\<sharp>* (M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'b.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n                            (\\<Psi>, P'b,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                 \\<lparr>\\<nu>x\\<rparr>P'a)\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K xQ' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* xQ'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* xQ'\n  A\\<^sub>Q \\<sharp>* x\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* x\n  x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> xQ'\" and FrQ: \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ' &&&\n    extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from PTrans \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> P", "have \"x \\<sharp> N\" and \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> N &&& x \\<sharp> P'", "using \\<open>xvec \\<sharp>* x\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> P\n  xvec \\<sharp>* x\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. x \\<sharp> N &&& x \\<sharp> P'", "by(force intro: outputFreshDerivative)+"], ["proof (state)\nthis:\n  x \\<sharp> N\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with FrQ \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* x\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q", "have \"x \\<sharp> \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* x\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>Q", "by(drule_tac extractFrameFresh) auto"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* x", "have \"x \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFresh) auto"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* x", "have \"A\\<^sub>Q \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* x\\<close> \\<open>xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* x\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "have \"xvec \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* x\n  xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from PTrans FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>  \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  xvec \\<sharp>* M\n  distinct xvec", "obtain M' where \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\" and \"x \\<sharp> M'\" and \"A\\<^sub>Q \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M';\n         x \\<sharp> M'; A\\<^sub>Q \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"x#A\\<^sub>Q\" in obtainPrefix) (assumption | force simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence MeqM': \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(blast intro: chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "with QTrans FrQ \\<open>distinct A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> xQ'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> xQ'", "by(force intro: inputRenameSubject)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> xQ'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> xQ'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P", "have \"x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P", "by force"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>x \\<sharp> M'\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (state)\nthis:\n  x \\<sharp> M'\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> M'\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from QTrans \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  x \\<sharp> N", "have \"x \\<sharp> xQ'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> xQ'\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> xQ'", "by(force dest: inputFreshDerivative simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> xQ'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q;\n        xvec \\<sharp>* \\<Psi>\\<^sub>Q; xvec \\<sharp>* x;\n        x \\<sharp> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n                           Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  x \\<sharp> N\n  x \\<sharp> xQ'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> xQ'\n  x \\<sharp> \\<Psi> \\<otimes> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  x \\<sharp> N\n  x \\<sharp> xQ'\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ') \\<in> Rel", "proof(induct rule: resInputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'", "have \"A\\<^sub>Q \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* Q'", "by(rule_tac inputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* Q'", "have FrxQ: \"\\<lparr>\\<nu>x\\<rparr>(extractFrame Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n    \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "then"], ["proof (chain)\npicking this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "obtain y A\\<^sub>Q' where A: \"A\\<^sub>Q = y#A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>y A\\<^sub>Q'.\n        A\\<^sub>Q = y # A\\<^sub>Q' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(case_tac A\\<^sub>Q) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q'\\<close> \\<open>A\\<^sub>Q \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q = y # A\\<^sub>Q'", "have \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* P\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\" and \"A\\<^sub>Q' \\<sharp>* Q\" and \"A\\<^sub>Q \\<sharp>* xvec\" and \"A\\<^sub>Q \\<sharp>* Q'\"\n          and \"y \\<sharp> \\<Psi>\" and \"y \\<sharp> P\" and \"y \\<sharp> P'\" and \"y \\<sharp> \\<Psi>\\<^sub>P\" and \"y \\<sharp> Q\" and \"y \\<sharp> xvec\" and \"y \\<sharp> M'\" and \"y \\<sharp> Q'\" and \"y \\<sharp> N\"\n          and \"A\\<^sub>Q' \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* M'\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q = y # A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. (((A\\<^sub>Q' \\<sharp>* \\<Psi> &&& A\\<^sub>Q' \\<sharp>* P) &&&\n      A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>Q' \\<sharp>* Q) &&&\n     (A\\<^sub>Q \\<sharp>* xvec &&& A\\<^sub>Q \\<sharp>* Q') &&&\n     y \\<sharp> \\<Psi> &&& y \\<sharp> P) &&&\n    ((y \\<sharp> P' &&& y \\<sharp> \\<Psi>\\<^sub>P) &&&\n     y \\<sharp> Q &&& y \\<sharp> xvec) &&&\n    (y \\<sharp> M' &&& y \\<sharp> Q') &&&\n    y \\<sharp> N &&& A\\<^sub>Q' \\<sharp>* M'", "by(simp)+"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q' \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  y \\<sharp> \\<Psi>\n  y \\<sharp> P\n  y \\<sharp> P'\n  y \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> Q\n  y \\<sharp> xvec\n  y \\<sharp> M'\n  y \\<sharp> Q'\n  y \\<sharp> N\n  A\\<^sub>Q' \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from A \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>P \\<sharp>* A\\<^sub>Q'\" and \"y \\<sharp> A\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* A\\<^sub>Q' &&& y \\<sharp> A\\<^sub>P", "by(simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x", "have \"x \\<noteq> y\" and \"x \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (1 subgoal):\n 1. x \\<noteq> y &&& x \\<sharp> A\\<^sub>Q'", "by(simp add: fresh_list_cons)+"], ["proof (state)\nthis:\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with A \\<open>distinct A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  distinct A\\<^sub>Q\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'", "have \"y \\<sharp> A\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  distinct A\\<^sub>Q\n  x \\<noteq> y\n  x \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. y \\<sharp> A\\<^sub>Q'", "by(induct A\\<^sub>Q') (auto simp add: fresh_list_nil fresh_list_cons)"], ["proof (state)\nthis:\n  y \\<sharp> A\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "note PTrans FrP"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from  \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'", "have \"([(x, y)] \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P)) \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>([(x, y)] \\<bullet> (M'\\<lparr>N\\<rparr> \\<prec> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                          Q \\<longmapsto> [(x, y)] \\<bullet>\n    M'\\<lparr>N\\<rparr> \\<prec> Q'", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>y \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M'\\<close> \\<open>y \\<sharp> M'\\<close> \\<open>x \\<sharp> N\\<close> \\<open>y \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  y \\<sharp> M'\n  x \\<sharp> N\n  y \\<sharp> N\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>N\\<rparr> \\<prec> Q'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  y \\<sharp> M'\n  x \\<sharp> N\n  y \\<sharp> N\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> [(x, y)] \\<bullet>\n  M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                          Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                  y)] \\<bullet>\n                                Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                y)] \\<bullet>\n                              Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                y)] \\<bullet>\n                              Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from A \\<open>A\\<^sub>Q \\<sharp>* x\\<close> FrxQ"], ["proof (chain)\npicking this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have FrQ: \"extractFrame([(x, y)] \\<bullet> Q) = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\" and \"y \\<sharp> extractFrame Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q = y # A\\<^sub>Q'\n  A\\<^sub>Q \\<sharp>* x\n  \\<lparr>\\<nu>x\\<rparr>extractFrame Q =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame ([(x, y)] \\<bullet> Q) =\n    \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle> &&&\n    y \\<sharp> extractFrame Q", "by(clarsimp simp add: alpha' eqvts frame.inject fresh_list_cons name_swap)+"], ["proof (state)\nthis:\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  y \\<sharp> extractFrame Q\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  y \\<sharp> extractFrame Q\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>y \\<sharp> A\\<^sub>P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* x\n  y \\<sharp> A\\<^sub>P\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* x\n  y \\<sharp> A\\<^sub>P\n  ([(x, y)] \\<bullet> A\\<^sub>P) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>A\\<^sub>Q' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q' \\<sharp>* Q", "have \"([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q' \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>x \\<sharp> A\\<^sub>Q'\\<close> \\<open>y \\<sharp> A\\<^sub>Q'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>Q'\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> A\\<^sub>Q'\n  y \\<sharp> A\\<^sub>Q'\n  ([(x, y)] \\<bullet> A\\<^sub>Q') \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q", "have \"([(x, y)] \\<bullet> xvec) \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> xvec) \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> xvec) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>xvec \\<sharp>* x\\<close> \\<open>y \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* x\n  y \\<sharp> xvec\n  ([(x, y)] \\<bullet> xvec) \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"xvec \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* x\n  y \\<sharp> xvec\n  ([(x, y)] \\<bullet> xvec) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* ([(x, y)] \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  xvec \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                y)] \\<bullet>\n                              Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  y \\<sharp> extractFrame Q\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n  xvec \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"\\<Psi> \\<rhd> (P \\<parallel> ([(x, y)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> ([(x, y)] \\<bullet> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                y)] \\<bullet>\n                              Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  y \\<sharp> extractFrame Q\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n  xvec \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n ([(x, y)] \\<bullet> Q')", "using MeqM' \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>  \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q'\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* M'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> [(x,\n                                y)] \\<bullet>\n                              Q'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q\\<rangle>\n  y \\<sharp> extractFrame Q\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q' \\<sharp>* ([(x, y)] \\<bullet> Q)\n  xvec \\<sharp>* ([(x, y)] \\<bullet> Q)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q'\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n ([(x, y)] \\<bullet> Q')", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with\\<open>y \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> ([(x, y)] \\<bullet> Q')))\""], ["proof (prove)\nusing this:\n  y \\<sharp> \\<Psi>\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     ([(x, y)] \\<bullet> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n   ([(x, y)] \\<bullet>\n    Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n          ([(x, y)] \\<bullet> Q'))", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q", "have \"\\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet> (P \\<parallel> ([(x, y)] \\<bullet> Q)))\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  y \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                           P \\<parallel> ([(x, y)] \\<bullet> Q))", "by(subst alphaRes[of x]) (auto simp add: calc_atm fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  y \\<sharp> P\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))", "have \"\\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) = \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  y \\<sharp> P\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>([(x, y)] \\<bullet>\n                         P \\<parallel> ([(x, y)] \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n    \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>x \\<sharp> P'\\<close> \\<open>y \\<sharp> P'\\<close> \\<open>y \\<sharp> Q'\\<close> \\<open>xvec \\<sharp>* x\\<close> \\<open>y \\<sharp> xvec\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P'\n  y \\<sharp> P'\n  y \\<sharp> Q'\n  xvec \\<sharp>* x\n  y \\<sharp> xvec", "have \"\\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> ([(x, y)] \\<bullet> Q'))) =  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  x \\<sharp> P'\n  y \\<sharp> P'\n  y \\<sharp> Q'\n  xvec \\<sharp>* x\n  y \\<sharp> xvec\n\ngoal (1 subgoal):\n 1. \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n               ([(x, y)] \\<bullet> Q')) =\n    \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')", "by(subst alphaRes[of y]) (auto simp add: resChainFresh calc_atm eqvts fresh_left name_swap)"], ["proof (state)\nthis:\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>y\\<rparr>(P \\<parallel>\n ([(x, y)] \\<bullet>\n  Q)) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        ([(x, y)] \\<bullet> Q'))\n  \\<lparr>\\<nu>y\\<rparr>(P \\<parallel> ([(x, y)] \\<bullet> Q)) =\n  \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n             ([(x, y)] \\<bullet> Q')) =\n  \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n        Q')", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')), \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'a.\n       \\<Psi> \\<otimes>\n       \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> P'a \\<Longrightarrow>\n       \\<exists>P'b.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n         Q) \\<longmapsto> \\<tau> \\<prec> P'b \\<and>\n          (\\<Psi>, P'b,\n           \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     \\<lparr>\\<nu>x\\<rparr>P'a)\n          \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n      Q')\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n      Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> xQ') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n    Q) \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', PQ) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<leadsto>[Rel] P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma scopeExtRight:\n  fixes x   :: name\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   \\<Psi>   :: 'b\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes \"x \\<sharp> P\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R. (\\<Psi>, R, R) \\<in> Rel\"\n  and     C2: \"\\<And>y \\<Psi>' R S zvec. \\<lbrakk>y \\<sharp> \\<Psi>'; y \\<sharp> R; zvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> \\<lparr>\\<nu>y\\<rparr>S), \\<lparr>\\<nu>y\\<rparr>(\\<lparr>\\<nu>*zvec\\<rparr>(R \\<parallel> S))) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "from \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P", "have \"x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "moreover"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "from \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P", "have \"x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "by(simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "ultimately"], ["proof (chain)\npicking this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q\n  x \\<sharp> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n     Q)", "proof(induct rule: simIFresh[of _ _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> xPQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* ()\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  x \\<sharp> \\<alpha>", "have \"bn \\<alpha>  \\<sharp>* P\" and \"bn \\<alpha>  \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P &&& bn \\<alpha> \\<sharp>* Q", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "note \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q) \\<longmapsto>\\<alpha> \\<prec> xPQ\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>x \\<sharp> xPQ\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q", "have \"bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* (P \\<parallel> Q)", "by simp"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n               Q) \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q);\n        bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* \\<Psi>;\n        bn \\<alpha> \\<sharp>* subject \\<alpha>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* (); x \\<sharp> \\<alpha>;\n        x \\<sharp> Q'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', xPQ) \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n Q) \\<longmapsto> \\<alpha> \\<prec> xPQ\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<alpha>\n  x \\<sharp> xPQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', xPQ) \\<in> Rel", "proof(induct rule: resCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cOpen M xvec1 xvec2 y N PQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ\n  y \\<in> supp N\n  x \\<sharp> N\n  x \\<sharp> PQ\n  x \\<noteq> y\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  y \\<sharp> M\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* \\<Psi>\n  y \\<sharp> \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n  xvec1 \\<sharp>* (P \\<parallel> Q)\n  y \\<sharp> P \\<parallel> Q\n  xvec2 \\<sharp>* (P \\<parallel> Q)\n  xvec1 \\<sharp>* M\n  y \\<sharp> M\n  xvec2 \\<sharp>* M\n  xvec1 \\<sharp>* xvec2\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>x \\<sharp> M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>", "have \"x \\<sharp> xvec1\" and \"x \\<noteq> y\" and \"x \\<sharp> xvec2\" and \"x \\<sharp> M\""], ["proof (prove)\nusing this:\n  x \\<sharp> M\\<lparr>\\<nu>*(xvec1 @ y # xvec2)\\<rparr>\\<langle>N\\<rangle>\n\ngoal (1 subgoal):\n 1. (x \\<sharp> xvec1 &&& x \\<noteq> y) &&&\n    x \\<sharp> xvec2 &&& x \\<sharp> M", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> xvec1\n  x \\<noteq> y\n  x \\<sharp> xvec2\n  x \\<sharp> M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>xvec1 \\<sharp>* (P \\<parallel> Q)\\<close> \\<open>xvec2 \\<sharp>* (P \\<parallel> Q)\\<close> \\<open>y \\<sharp> (P \\<parallel> Q)\\<close>"], ["proof (chain)\npicking this:\n  xvec1 \\<sharp>* (P \\<parallel> Q)\n  xvec2 \\<sharp>* (P \\<parallel> Q)\n  y \\<sharp> P \\<parallel> Q", "have \"(xvec1@xvec2) \\<sharp>* P\" and \"(xvec1@xvec2) \\<sharp>* Q\" and \"y \\<sharp> P\" and \"y \\<sharp> Q\""], ["proof (prove)\nusing this:\n  xvec1 \\<sharp>* (P \\<parallel> Q)\n  xvec2 \\<sharp>* (P \\<parallel> Q)\n  y \\<sharp> P \\<parallel> Q\n\ngoal (1 subgoal):\n 1. ((xvec1 @ xvec2) \\<sharp>* P &&& (xvec1 @ xvec2) \\<sharp>* Q) &&&\n    y \\<sharp> P &&& y \\<sharp> Q", "by simp+"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n  (xvec1 @ xvec2) \\<sharp>* Q\n  y \\<sharp> P\n  y \\<sharp> Q\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> PQ)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ", "have \"([(x, y)] \\<bullet> \\<Psi>) \\<rhd> ([(x, y)] \\<bullet> (P \\<parallel> Q)) \\<longmapsto> ([(x, y)] \\<bullet> (M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet> N)\\<rangle> \\<prec> ([(x, y)] \\<bullet> PQ)))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ\n\ngoal (1 subgoal):\n 1. [(x, y)] \\<bullet>\n    \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                  P \\<parallel>\n                  Q \\<longmapsto> [(x, y)] \\<bullet>\n                                  M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                    N)\\<rangle> \\<prec> [(x, y)] \\<bullet>\n                  PQ", "by(rule semantics.eqvt)"], ["proof (state)\nthis:\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<parallel>\n                Q \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P\\<close> \\<open>y \\<sharp> P\\<close> \\<open>x \\<sharp> M\\<close> \\<open>y \\<sharp> M\\<close> \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<parallel>\n                Q \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ", "have \"\\<Psi> \\<rhd> P \\<parallel> ([(x, y)] \\<bullet> Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\n  x \\<sharp> P\n  y \\<sharp> P\n  x \\<sharp> M\n  y \\<sharp> M\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  [(x, y)] \\<bullet>\n  \\<Psi> \\<rhd> [(x, y)] \\<bullet>\n                P \\<parallel>\n                Q \\<longmapsto> [(x, y)] \\<bullet>\n                                M\\<lparr>\\<nu>*(xvec1 @\n          xvec2)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n                                  N)\\<rangle> \\<prec> [(x, y)] \\<bullet> PQ\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  ([(x, y)] \\<bullet>\n                   Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n              xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>xvec1 \\<sharp>* \\<Psi>\\<close> \\<open>xvec2 \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>", "have \"(xvec1@xvec2) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec1 \\<sharp>* \\<Psi>\n  xvec2 \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "note \\<open>(xvec1@xvec2) \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>(xvec1@xvec2) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  (xvec1 @ xvec2) \\<sharp>* Q", "have \"([(x, y)] \\<bullet> (xvec1@xvec2)) \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  (xvec1 @ xvec2) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. ([(x, y)] \\<bullet> (xvec1 @ xvec2)) \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  ([(x, y)] \\<bullet> (xvec1 @ xvec2)) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "with \\<open>x \\<sharp> xvec1\\<close> \\<open>x \\<sharp> xvec2\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  ([(x, y)] \\<bullet> (xvec1 @ xvec2)) \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"(xvec1@xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  x \\<sharp> xvec1\n  x \\<sharp> xvec2\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n  ([(x, y)] \\<bullet> (xvec1 @ xvec2)) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)", "by(auto simp add: eqvts)"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>xvec1 \\<sharp>* M\\<close> \\<open>xvec2 \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  xvec1 \\<sharp>* M\n  xvec2 \\<sharp>* M", "have \"(xvec1@xvec2) \\<sharp>* M\""], ["proof (prove)\nusing this:\n  xvec1 \\<sharp>* M\n  xvec2 \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (xvec1 @ xvec2) \\<sharp>* M", "by simp"], ["proof (state)\nthis:\n  (xvec1 @ xvec2) \\<sharp>* M\n\ngoal (2 subgoals):\n 1. \\<And>M xvec yvec y N P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                        yvec)\\<rparr>\\<langle>([(x, y)] \\<bullet>\n         N)\\<rangle> \\<prec> [(x, y)] \\<bullet> P';\n        y \\<in> supp N; x \\<sharp> N; x \\<sharp> P'; x \\<noteq> y;\n        y \\<sharp> xvec; y \\<sharp> yvec; y \\<sharp> M; distinct xvec;\n        distinct yvec; xvec \\<sharp>* \\<Psi>; y \\<sharp> \\<Psi>;\n        yvec \\<sharp>* \\<Psi>; xvec \\<sharp>* (P \\<parallel> Q);\n        y \\<sharp> P \\<parallel> Q; yvec \\<sharp>* (P \\<parallel> Q);\n        xvec \\<sharp>* M; y \\<sharp> M; yvec \\<sharp>* M;\n        xvec \\<sharp>* yvec;\n        x \\<sharp> M\\<lparr>\\<nu>*(xvec @\n                                   y #\n                                   yvec)\\<rparr>\\<langle>N\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec @\n                    y # yvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P') \\<in> Rel\n 2. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n  (xvec1 @ xvec2) \\<sharp>* P\n  (xvec1 @ xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)\n  (xvec1 @ xvec2) \\<sharp>* M", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                ([(x, y)] \\<bullet>\n                 Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n            xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> PQ\n  (xvec1 @ xvec2) \\<sharp>* \\<Psi>\n  (xvec1 @ xvec2) \\<sharp>* P\n  (xvec1 @ xvec2) \\<sharp>* ([(x, y)] \\<bullet> Q)\n  (xvec1 @ xvec2) \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                     y #\n                                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQ) \\<in> Rel", "proof(induct rule: parOutputCases[where C=y])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame ([(x, y)] \\<bullet> Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>Q \\<sharp>* M; A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>Q \\<sharp>* N; A\\<^sub>Q \\<sharp>* y;\n        A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> ([(x, y)] \\<bullet> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "case(cPar1 P' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame ([(x, y)] \\<bullet> Q) =\n  \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2)\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* y\n  A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2)\n  distinct (xvec1 @ xvec2)\n\ngoal (2 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame ([(x, y)] \\<bullet> Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>Q \\<sharp>* M; A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>Q \\<sharp>* N; A\\<^sub>Q \\<sharp>* y;\n        A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> ([(x, y)] \\<bullet> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "from \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2", "have \"y \\<sharp> (xvec1@xvec2)\""], ["proof (prove)\nusing this:\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. y \\<sharp> (xvec1 @ xvec2)", "by(auto simp add: fresh_list_append)"], ["proof (state)\nthis:\n  y \\<sharp> (xvec1 @ xvec2)\n\ngoal (2 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame ([(x, y)] \\<bullet> Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>Q \\<sharp>* M; A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>Q \\<sharp>* N; A\\<^sub>Q \\<sharp>* y;\n        A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> ([(x, y)] \\<bullet> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<close> \\<open>(xvec1@xvec2) \\<sharp>* M\\<close> \\<open>y \\<sharp> P\\<close> \n             \\<open>distinct xvec1\\<close> \\<open>distinct xvec2\\<close> \\<open>xvec1 \\<sharp>* xvec2\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (xvec1 @ xvec2) \\<sharp>* M\n  y \\<sharp> P\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* xvec2\n  y \\<sharp> (xvec1 @ xvec2)", "have \"y \\<sharp> N\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (xvec1 @ xvec2) \\<sharp>* M\n  y \\<sharp> P\n  distinct xvec1\n  distinct xvec2\n  xvec1 \\<sharp>* xvec2\n  y \\<sharp> (xvec1 @ xvec2)\n\ngoal (1 subgoal):\n 1. y \\<sharp> N", "by(force intro: outputFreshDerivative)"], ["proof (state)\nthis:\n  y \\<sharp> N\n\ngoal (2 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame ([(x, y)] \\<bullet> Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>Q \\<sharp>* M; A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>Q \\<sharp>* N; A\\<^sub>Q \\<sharp>* y;\n        A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> ([(x, y)] \\<bullet> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "with \\<open>y \\<in> supp N\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> supp N\n  y \\<sharp> N", "have False"], ["proof (prove)\nusing this:\n  y \\<in> supp N\n  y \\<sharp> N\n\ngoal (1 subgoal):\n 1. False", "by(simp add: fresh_def)"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame ([(x, y)] \\<bullet> Q) =\n        \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>Q \\<sharp>* M; A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>Q \\<sharp>* N; A\\<^sub>Q \\<sharp>* y;\n        A\\<^sub>Q \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             P' \\<parallel> ([(x, y)] \\<bullet> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                     y #\n                                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, P' \\<parallel> ([(x, y)] \\<bullet> Q)) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                   y #\n                                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, P' \\<parallel> ([(x, y)] \\<bullet> Q)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "case(cPar2 Q' A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* (xvec1 @ xvec2)\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* y\n  A\\<^sub>P \\<sharp>* (xvec1 @ xvec2)\n  distinct (xvec1 @ xvec2)\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "have FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "with \\<open>y \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* y\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* y\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"y \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* y\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. y \\<sharp> \\<Psi>\\<^sub>P", "apply(drule_tac extractFrameFresh)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A\\<^sub>P \\<sharp>* y;\n     extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n     y \\<sharp> extractFrame P\\<rbrakk>\n    \\<Longrightarrow> y \\<sharp> \\<Psi>\\<^sub>P", "by(simp add: frameResChainFresh) (simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  y \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> ([(x, y)] \\<bullet> Q) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>y \\<in> supp N\\<close> \\<open>y \\<sharp> \\<Psi>\\<close> \\<open>y \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>y \\<sharp> M\\<close> \\<open>y \\<sharp> xvec1\\<close> \\<open>y \\<sharp> xvec2\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>y\\<rparr>(([(x, y)] \\<bullet> Q)) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\n                        Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  y \\<in> supp N\n  y \\<sharp> \\<Psi>\n  y \\<sharp> \\<Psi>\\<^sub>P\n  y \\<sharp> M\n  y \\<sharp> xvec1\n  y \\<sharp> xvec2\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n           Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n      y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(force intro: Open)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n         Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "with \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n         Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  y \\<sharp> Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet>\n         Q) \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(simp add: alphaRes)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q)", "by(auto simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "with \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> Q\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q)", "have \"A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\nusing this:\n  y \\<sharp> Q\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>y\\<rparr>([(x, y)] \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: alphaRes)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "have \"\\<Psi> \\<rhd> P \\<parallel> (\\<lparr>\\<nu>x\\<rparr>Q) \\<longmapsto>M\\<lparr>\\<nu>*(xvec1@y#xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'", "using FrP \\<open>(xvec1@xvec2) \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>y \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* (xvec1@xvec2)\\<close> \\<open>A\\<^sub>P \\<sharp>* y\\<close> \\<open>A\\<^sub>P \\<sharp>* N\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n  y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  (xvec1 @ xvec2) \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* M\n  y \\<sharp> P\n  A\\<^sub>P \\<sharp>* (xvec1 @ xvec2)\n  A\\<^sub>P \\<sharp>* y\n  A\\<^sub>P \\<sharp>* N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                  y #\n                                  xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\nQ'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                                    Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                                    Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "have \"(\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> [(x, y)] \\<bullet>\nQ \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* ([(x, y)] \\<bullet> Q);\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        A\\<^sub>P \\<sharp>* N; A\\<^sub>P \\<sharp>* y;\n        A\\<^sub>P \\<sharp>* (xvec1 @ xvec2);\n        distinct (xvec1 @ xvec2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                    y # xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n                            (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                                    Q'\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                y #\n                                xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P \\<parallel>\n                                    Q'\n  (\\<Psi>, P \\<parallel> Q', P \\<parallel> Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                     y #\n                                     xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n       (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                   y #\n                                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', P \\<parallel> Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M\\<lparr>\\<nu>*(xvec1 @\n                                   y #\n                                   xvec2)\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<and>\n     (\\<Psi>, P', PQ) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "case(cRes PQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<parallel>\n                              Q \\<longmapsto> \\<alpha> \\<prec> P';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> PQ\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>  \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>PQ) \\<in> Rel", "proof(induct rule: parCases[where C=x])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "case(cPar1 P' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* x\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close> \\<open>distinct(bn \\<alpha>)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'", "have \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  x \\<sharp> \\<alpha>\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  distinct (bn \\<alpha>)\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. x \\<sharp> P'", "by(force dest: freeFreshDerivative)"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  x \\<sharp> P'", "have \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>(x#A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* Q", "have \"bn \\<alpha> \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"(x#A\\<^sub>Q) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P", "have \"(x#A\\<^sub>Q) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<alpha>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>", "have \"(x#A\\<^sub>Q) \\<sharp>* \\<alpha>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<alpha>\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<alpha>", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<alpha>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* \\<alpha>", "have \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                                   \\<lparr>\\<nu>x\\<rparr>Q", "by(rule Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> P'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P'\n  x \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>(P' \\<parallel> (\\<lparr>\\<nu>x\\<rparr>Q)), \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>(P' \\<parallel> Q))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q))\n    \\<in> Rel", "by(rule_tac C2) auto"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q))\n  \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q))\n                            \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P' \\<parallel> Q))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)) \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>(P' \\<parallel> Q)) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "case(cPar2 Q' A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* x\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "have FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* x\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"x \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* x\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P", "apply(drule_tac extractFrameFresh)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A\\<^sub>P \\<sharp>* x;\n     extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n     x \\<sharp> extractFrame P\\<rbrakk>\n    \\<Longrightarrow> x \\<sharp> \\<Psi>\\<^sub>P", "by(simp add: frameResChainFresh) (simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> \\<alpha>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule_tac Scope) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "note FrP \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "have \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<alpha> \\<prec> (P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                   \\<lparr>\\<nu>x\\<rparr>Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                   \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  x \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>(P \\<parallel> (\\<lparr>\\<nu>x\\<rparr>Q')), \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>(P \\<parallel> Q'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'))\n    \\<in> Rel", "by(rule_tac C2) auto"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* P; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P',\n                             \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel>\n                                 \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>, \\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*[]\\<rparr>P \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')) \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>(P \\<parallel> Q')) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* x\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* x\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\" and FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q' &&&\n    extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from FrP \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  x \\<sharp> P", "have \"x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by(drule_tac extractFrameFresh) simp"], ["proof (state)\nthis:\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* x\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"x \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* x\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P", "by(simp add: frameResChainFresh) (simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from PTrans FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "obtain M' where MeqM': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\" and \"x \\<sharp> M'\" and \"A\\<^sub>Q \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M';\n         x \\<sharp> M'; A\\<^sub>Q \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"x#A\\<^sub>Q\" in obtainPrefix) (assumption | force simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from MeqM'"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'", "have MeqM': \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Composition Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(blast intro: chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Composition Commutativity)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with QTrans FrQ \\<open>distinct A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "using \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(rule_tac outputRenameSubject) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "proof(case_tac \"x \\<in> supp N\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "note PTrans FrP"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "assume \"x \\<in> supp N\""], ["proof (state)\nthis:\n  x \\<in> supp N\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>\\<nu>*([]@(x#xvec))\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  x \\<in> supp N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*([] @\n     x # xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "using QTrans \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M'\\<close> \\<open>xvec \\<sharp>* x\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> supp N\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  xvec \\<sharp>* x\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*([] @\n     x # xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by(rule_tac Open) (assumption | force simp add: fresh_list_nil)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*([] @\n   x # xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "hence QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>\\<nu>*(x#xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*([] @\n   x # xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n     xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>(x#A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "note MeqM' \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from  \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"A\\<^sub>P \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* (x#A\\<^sub>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)", "by(simp add: fresh_star_def fresh_list_cons) (auto simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"(x#A\\<^sub>Q) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P", "have \"(x#A\\<^sub>Q) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'", "have \"(x#A\\<^sub>Q) \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* M'", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* Q", "have \"(x#A\\<^sub>Q) \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  xvec \\<sharp>* P", "have \"(x#xvec) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # xvec) \\<sharp>* P", "by(simp)"], ["proof (state)\nthis:\n  (x # xvec) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(x#xvec)\\<rparr>(P' \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n          xvec)\\<rparr>P' \\<parallel> Q'", "using \\<open>A\\<^sub>P \\<sharp>* M\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*(x #\n   xvec)\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n          xvec)\\<rparr>P' \\<parallel> Q'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n        xvec)\\<rparr>P' \\<parallel> Q'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n        xvec)\\<rparr>P' \\<parallel> Q'\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')), \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n    \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. x \\<in> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel\n 2. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n        xvec)\\<rparr>P' \\<parallel> Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*(x #\n        xvec)\\<rparr>P' \\<parallel> Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'),\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "by force"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n     \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "note PTrans FrP"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "assume \"x \\<notin> supp N\""], ["proof (state)\nthis:\n  x \\<notin> supp N\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "hence \"x \\<sharp> N\""], ["proof (prove)\nusing this:\n  x \\<notin> supp N\n\ngoal (1 subgoal):\n 1. x \\<sharp> N", "by(simp add: fresh_def)"], ["proof (state)\nthis:\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "with QTrans \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M'\\<close> \\<open>xvec \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  xvec \\<sharp>* x\n  x \\<sharp> N", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  xvec \\<sharp>* x\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule_tac Scope) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from PTrans \\<open>x \\<sharp> P\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> P\n  x \\<sharp> N", "have \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  x \\<sharp> P\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. x \\<sharp> P'", "by(rule inputFreshDerivative)"], ["proof (state)\nthis:\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "with \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  x \\<sharp> P'", "have \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>(x#A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "note MeqM' \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from  \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"A\\<^sub>P \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* (x#A\\<^sub>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)", "by(simp add: fresh_star_def fresh_list_cons) (auto simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"(x#A\\<^sub>Q) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P", "have \"(x#A\\<^sub>Q) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'", "have \"(x#A\\<^sub>Q) \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* M'", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* Q", "have \"(x#A\\<^sub>Q) \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  xvec \\<sharp>* P", "have \"(x#xvec) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # xvec) \\<sharp>* P", "by(simp)"], ["proof (state)\nthis:\n  (x # xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q'", "using \\<open>A\\<^sub>P \\<sharp>* M\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q'), \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<notin> supp N \\<Longrightarrow>\n    \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n     \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* x\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* P\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* x\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "have PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' &&&\n    extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\" and FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q' &&&\n    extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from FrP \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  x \\<sharp> P", "have \"x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "by(drule_tac extractFrameFresh) simp"], ["proof (state)\nthis:\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* x\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>", "have \"x \\<sharp> \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* x\n  x \\<sharp> \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi>\\<^sub>P", "by(simp add: frameResChainFresh) (simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\\<^sub>P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from PTrans FrP \\<open>distinct A\\<^sub>P\\<close> \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  xvec \\<sharp>* M\n  distinct xvec", "obtain M' where MeqM': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\" and \"x \\<sharp> M'\" and \"A\\<^sub>Q \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  x \\<sharp> P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                 \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M';\n         x \\<sharp> M'; A\\<^sub>Q \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac B=\"x#A\\<^sub>Q\" in obtainPrefix) (assumption | force simp add: fresh_star_list_cons)+"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from MeqM'"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'", "have MeqM': \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n  \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(blast intro: chanEqTrans chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "by(metis statEqEnt Associativity Commutativity Composition)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with QTrans FrQ \\<open>distinct A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'", "using \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P) \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'", "by(rule_tac inputRenameSubject) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from PTrans \\<open>x \\<sharp> P\\<close> \\<open>xvec \\<sharp>* x\\<close> \\<open>distinct xvec\\<close> \\<open>xvec \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> P\n  xvec \\<sharp>* x\n  distinct xvec\n  xvec \\<sharp>* M", "have \"x \\<sharp> N\" and \"x \\<sharp> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  x \\<sharp> P\n  xvec \\<sharp>* x\n  distinct xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. x \\<sharp> N &&& x \\<sharp> P'", "by(force intro: outputFreshDerivative)+"], ["proof (state)\nthis:\n  x \\<sharp> N\n  x \\<sharp> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from QTrans \\<open>x \\<sharp> \\<Psi>\\<close>  \\<open>x \\<sharp> \\<Psi>\\<^sub>P\\<close> \\<open>x \\<sharp> M'\\<close> \\<open>x \\<sharp> N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  x \\<sharp> N", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> \\<Psi>\\<^sub>P\n  x \\<sharp> M'\n  x \\<sharp> N\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule_tac Scope) (assumption | force)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "note PTrans FrP QTrans"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "with \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'", "have \"extractFrame(\\<lparr>\\<nu>x\\<rparr>Q) = \\<langle>(x#A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n    \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>", "by simp"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "note MeqM' \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from  \\<open>A\\<^sub>P \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* Q", "have \"A\\<^sub>P \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>P \\<sharp>* x\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x", "have \"A\\<^sub>P \\<sharp>* (x#A\\<^sub>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* x\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)", "by(simp add: fresh_star_def fresh_list_cons) (auto simp add: fresh_def name_list_supp)"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>", "have \"(x#A\\<^sub>Q) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P", "have \"(x#A\\<^sub>Q) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  A\\<^sub>Q \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> M'\\<close> \\<open>A\\<^sub>Q \\<sharp>* M'\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'", "have \"(x#A\\<^sub>Q) \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  x \\<sharp> M'\n  A\\<^sub>Q \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* M'", "by simp"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>A\\<^sub>Q \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* Q", "have \"(x#A\\<^sub>Q) \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: fresh_star_def abs_fresh)"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q", "have \"(x#xvec) \\<sharp>* (\\<lparr>\\<nu>x\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (x # xvec) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "by(simp add: abs_fresh fresh_star_def)"], ["proof (state)\nthis:\n  (x # xvec) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q", "have \"\\<Psi> \\<rhd> P \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q'", "using \\<open>A\\<^sub>P \\<sharp>* M\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> \\<lparr>\\<nu>x\\<rparr>Q'\n  extractFrame (\\<lparr>\\<nu>x\\<rparr>Q) =\n  \\<langle>(x # A\\<^sub>Q), \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes>\n  \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> M'\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* (x # A\\<^sub>Q)\n  (x # A\\<^sub>Q) \\<sharp>* \\<Psi>\n  (x # A\\<^sub>Q) \\<sharp>* P\n  (x # A\\<^sub>Q) \\<sharp>* M'\n  (x # A\\<^sub>Q) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<lparr>\\<nu>x\\<rparr>Q\n  A\\<^sub>P \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q'", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "from \\<open>x \\<sharp> \\<Psi>\\<close> \\<open>x \\<sharp> P'\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q'), \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'))) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> \\<Psi>\n  x \\<sharp> P'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n     \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* x;\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* P; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* x; xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* P; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n  Q'))\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q'\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> \\<lparr>\\<nu>x\\<rparr>Q',\n   \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a,\n        \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n       \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a,\n      \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q'))\n     \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>PQ) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', xPQ) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                \\<lparr>\\<nu>x\\<rparr>Q \\<leadsto>[Rel] \\<lparr>\\<nu>x\\<rparr>(P \\<parallel>\n   Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma simParComm:\n  fixes \\<Psi>   :: 'b\n  and   P   :: \"('a, 'b, 'c) psi\"\n  and   Q   :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes \"eqvt Rel\"\n  and     C1: \"\\<And>\\<Psi>' R S. (\\<Psi>', R \\<parallel> S, S \\<parallel> R) \\<in> Rel\"\n  and     C2: \"\\<And>\\<Psi>' R S xvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>R, \\<lparr>\\<nu>*xvec\\<rparr>S) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> Q \\<leadsto>[Rel] Q \\<parallel> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<leadsto>[Rel] Q \\<parallel> P", "using \\<open>eqvt Rel\\<close>"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> Q \\<leadsto>[Rel] Q \\<parallel> P", "proof(induct rule: simI[of _ _ _ _ \"()\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> P);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cSim \\<alpha> PQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<parallel> P \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n  bn \\<alpha> \\<sharp>* (Q \\<parallel> P)\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  distinct (bn \\<alpha>)\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n  bn \\<alpha> \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> P);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)", "have \"bn \\<alpha> \\<sharp>* Q\" and \"bn \\<alpha> \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (P \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* Q &&& bn \\<alpha> \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Q \\<parallel>\n                              P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* (P \\<parallel> Q);\n        bn \\<alpha> \\<sharp>* (Q \\<parallel> P);\n        bn \\<alpha> \\<sharp>* \\<Psi>; distinct (bn \\<alpha>);\n        bn \\<alpha> \\<sharp>* subject \\<alpha>;\n        bn \\<alpha> \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "with \\<open>\\<Psi> \\<rhd> Q \\<parallel> P \\<longmapsto>\\<alpha> \\<prec> PQ\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<parallel> P \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* P", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> P \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQ) \\<in> Rel", "using \\<open>bn \\<alpha> \\<sharp>* subject \\<alpha>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> P \\<longmapsto> \\<alpha> \\<prec> PQ\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* Q\n  bn \\<alpha> \\<sharp>* P\n  bn \\<alpha> \\<sharp>* subject \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', PQ) \\<in> Rel", "proof(induct rule: parCases[where C=\"()\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> P) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar1 Q' A\\<^sub>P \\<Psi>\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<alpha>\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* ()\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> P) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>\\<alpha>\\<prec> Q'\\<close> \\<open>extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\\<close> \\<open>bn \\<alpha> \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>", "have \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> (P \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  bn \\<alpha> \\<sharp>* P\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'", "by(rule Par2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> P) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> P) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, P \\<parallel> Q', Q' \\<parallel> P) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P \\<parallel> Q', Q' \\<parallel> P) \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P \\<parallel> Q', Q' \\<parallel> P) \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> P';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* \\<alpha>; A\\<^sub>Q \\<sharp>* P';\n        A\\<^sub>Q \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> P) \\<in> Rel\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n  (\\<Psi>, P \\<parallel> Q', Q' \\<parallel> P) \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> Q'\n  (\\<Psi>, P \\<parallel> Q', Q' \\<parallel> P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (\\<Psi>, P', Q' \\<parallel> P) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', Q' \\<parallel> P) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cPar2 P' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* ()\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>\\<alpha> \\<prec> P'\\<close> \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close> \\<open>bn \\<alpha> \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<alpha>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>", "have \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<alpha> \\<prec> (P' \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  bn \\<alpha> \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q", "by(rule Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> Q, Q \\<parallel> P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> Q, Q \\<parallel> P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> Q, Q \\<parallel> P') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* \\<alpha>; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n  (\\<Psi>, P' \\<parallel> Q, Q \\<parallel> P') \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> Q\n  (\\<Psi>, P' \\<parallel> Q, Q \\<parallel> P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, Q \\<parallel> P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, Q \\<parallel> P') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm1 \\<Psi>\\<^sub>P M N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K xvec P' A\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* ()\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* ()\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* ()\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<close> \\<open>extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\\<close>\n         \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\\<close> \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M", "by(blast intro: statEqEnt compositionSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M", "have \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>A\\<^sub>P \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  xvec \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q'", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> P')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "case(cComm2 \\<Psi>\\<^sub>P M xvec N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K P' A\\<^sub>P)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  distinct A\\<^sub>P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* ()\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>P \\<sharp>* N\n  A\\<^sub>P \\<sharp>* Q'\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* xvec\n  A\\<^sub>P \\<sharp>* P'\n  A\\<^sub>P \\<sharp>* ()\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* P\n  xvec \\<sharp>* \\<Psi>\\<^sub>P\n  xvec \\<sharp>* ()\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "note \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> P'\\<close> \\<open>extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\\<close>\n         \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>P \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P \\<otimes>\n    \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M", "by(blast intro: statEqEnt compositionSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M", "have \"\\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q'", "using \\<open>A\\<^sub>P \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>P\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>A\\<^sub>P \\<sharp>* K\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> P'\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> K \\<leftrightarrow> M\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* P\n  A\\<^sub>P \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>P\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* Q\n  xvec \\<sharp>* P\n  A\\<^sub>P \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     Q'", "by(rule_tac Comm1) (assumption | simp add: freshChainSym)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> Q'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> P')) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, P' \\<parallel> Q', Q' \\<parallel> P') \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n    \\<in> Rel", "by(rule C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> P \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame P = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* P;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* ();\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* P;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* P; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                Q \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                   Q'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P')\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'a.\n       \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n       (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'a.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n     (\\<Psi>, P'a, \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> Q \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (\\<Psi>, P', PQ) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bangExtLeft:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes \"guarded P\"\n  and     \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> !P \\<leadsto>[Rel] P \\<parallel> !P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> !P \\<leadsto>[Rel] P \\<parallel> !P", "using assms"], ["proof (prove)\nusing this:\n  guarded P\n  (?\\<Psi>', ?Q, ?Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> !P \\<leadsto>[Rel] P \\<parallel> !P", "by(auto simp add: simulation_def dest: Bang)"], ["", "lemma bangExtRight:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n\n  assumes C1: \"\\<And>\\<Psi>' Q. (\\<Psi>', Q, Q) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> !P \\<leadsto>[Rel] !P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> !P \\<leadsto>[Rel] !P", "proof(auto simp add: simulation_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "fix \\<alpha> P'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "assume \"\\<Psi> \\<rhd> !P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "hence \"\\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<Longrightarrow>\n    \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'", "by(ind_cases \"\\<Psi> \\<rhd> !P \\<longmapsto>\\<alpha> \\<prec> P'\") (auto simp add: psi.inject)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "have \"(\\<Psi>, P', P') \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, P', P') \\<in> Rel", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> !P \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel", "show \"\\<exists>P''. \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto>\\<alpha> \\<prec> P'' \\<and> (\\<Psi>, P'', P') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P'\n  (\\<Psi>, P', P') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     !P \\<longmapsto> \\<alpha> \\<prec> P'' \\<and>\n       (\\<Psi>, P'', P') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> \\<rhd> P \\<parallel>\n                   !P \\<longmapsto> \\<alpha> \\<prec> P'' \\<and>\n     (\\<Psi>, P'', P') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}