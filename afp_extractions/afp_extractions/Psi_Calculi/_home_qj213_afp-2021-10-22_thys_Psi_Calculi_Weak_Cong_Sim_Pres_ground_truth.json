{"file_name": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi/Weak_Cong_Sim_Pres.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Psi_Calculi", "problem_names": ["lemma caseWeakSimPres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> Eq \\<Psi> P Q\"\n  and     Sim:   \"\\<And>\\<Psi>' P Q. (\\<Psi>', P, Q) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto><Rel> Q\"\n  and     EqRel: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> (\\<Psi>', P, Q) \\<in> Rel\"\n  and     EqSim: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto><Rel> Cases CsQ\"", "lemma weakCongSimCasePres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> Eq \\<Psi> P Q\"\n  and     EqSim: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Cases CsQ\"", "lemma weakCongSimResPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1: \"\\<And>\\<Psi>' R S x. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; x \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>x\\<rparr>R, \\<lparr>\\<nu>x\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>Q\"", "lemma weakCongSimResChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S xvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>R, \\<lparr>\\<nu>*xvec\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\"", "lemma weakCongSimParPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PSimQ: \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     PSimQ': \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> P \\<leadsto><Rel> Q\"\n  and     StatImp: \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> Q \\<lessapprox><Rel> P\"\n\n  and            \"eqvt Rel\"\n  and            \"eqvt Rel'\"\n\n  and     Sym:    \"\\<And>\\<Psi>' S T. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     Ext:    \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> Q \\<parallel> R\"", "lemma weakCongSimBangPres:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PEqQ:   \"Eq P Q\"\n  and     PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     Rel'Rel: \"Rel' \\<subseteq> Rel\"\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel''\"\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Closed': \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel'\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     StatEq': \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel'\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Trans': \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; (\\<Psi>', T, U) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel'\"\n  and     EqSim: \"\\<And>\\<Psi>' S T. Eq S T \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> T\"\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     cSym': \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel'\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cExt': \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel'\"\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     ParPres': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel'\"\n  and     ParPres2: \"\\<And>\\<Psi>' S T. Eq S T \\<Longrightarrow> Eq (S \\<parallel> S) (T \\<parallel> T)\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ResPres': \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     Assoc': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel'\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     ScopeExt': \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel'\"\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel''; (\\<Psi>', U, O) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel''\"\n  and     rBangActE: \"\\<And>\\<Psi>' S \\<alpha> S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; guarded S; bn \\<alpha> \\<sharp>* S; \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<longmapsto>\\<alpha> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauE: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<tau> \\<prec> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<parallel> S \\<longmapsto>\\<tau> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauI: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> S \\<parallel> S \\<Longrightarrow>\\<^sub>\\<tau> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> !S \\<Longrightarrow>\\<^sub>\\<tau> T \\<and> (\\<Psi>', T, S' \\<parallel> !S) \\<in> Rel'\"\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>\\<guillemotleft>Rel''\\<guillemotright> R \\<parallel> !Q\""], "translations": [["", "lemma caseWeakSimPres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> Eq \\<Psi> P Q\"\n  and     Sim:   \"\\<And>\\<Psi>' P Q. (\\<Psi>', P, Q) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto><Rel> Q\"\n  and     EqRel: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> (\\<Psi>', P, Q) \\<in> Rel\"\n  and     EqSim: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto><Rel> Cases CsQ\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<leadsto><Rel> Cases CsQ", "proof(induct rule: weakSimI2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* (Cases CsP);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cAct \\<Psi>' \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* (Cases CsP)\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* (Cases CsP);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>bn \\<alpha> \\<sharp>* (Cases CsP)\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* (Cases CsP)", "have \"bn \\<alpha> \\<sharp>* CsP\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* (Cases CsP)\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* CsP", "by auto"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* CsP\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>' \\<alpha> Q'.\n       \\<lbrakk>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q';\n        bn \\<alpha> \\<sharp>* \\<Psi>; bn \\<alpha> \\<sharp>* (Cases CsP);\n        \\<alpha> \\<noteq> \\<tau>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)\n 2. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto>\\<alpha> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "case(cCase \\<phi> Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (\\<phi>, Q) mem CsQ\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "from \\<open>(\\<phi>, Q) mem CsQ\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, Q) mem CsQ", "obtain P where \"(\\<phi>, P) mem CsP\" and \"guarded P\" and \"Eq \\<Psi> P Q\""], ["proof (prove)\nusing this:\n  (\\<phi>, Q) mem CsQ\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>(\\<phi>, P) mem CsP; guarded P; Eq \\<Psi> P Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis PRelQ)"], ["proof (state)\nthis:\n  (\\<phi>, P) mem CsP\n  guarded P\n  Eq \\<Psi> P Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "from \\<open>Eq \\<Psi> P Q\\<close>"], ["proof (chain)\npicking this:\n  Eq \\<Psi> P Q", "have \"\\<Psi> \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\nusing this:\n  Eq \\<Psi> P Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<leadsto><Rel> Q", "by(metis EqRel Sim)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "note \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<alpha> \\<prec> Q'\\<close> \\<open>bn \\<alpha> \\<sharp>* \\<Psi>\\<close>"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "from \\<open>bn \\<alpha> \\<sharp>* CsP\\<close> \\<open>(\\<phi>, P) mem CsP\\<close>"], ["proof (chain)\npicking this:\n  bn \\<alpha> \\<sharp>* CsP\n  (\\<phi>, P) mem CsP", "have \"bn \\<alpha> \\<sharp>* P\""], ["proof (prove)\nusing this:\n  bn \\<alpha> \\<sharp>* CsP\n  (\\<phi>, P) mem CsP\n\ngoal (1 subgoal):\n 1. bn \\<alpha> \\<sharp>* P", "by(auto dest: memFreshChain)"], ["proof (state)\nthis:\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P", "obtain P'' P' where PTrans: \"\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\"\n                               and P''Chain: \"\\<Psi> \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>\\<alpha> \\<noteq> \\<tau>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto><Rel> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  bn \\<alpha> \\<sharp>* \\<Psi>\n  bn \\<alpha> \\<sharp>* P\n  \\<alpha> \\<noteq> \\<tau>\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P'';\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "note PTrans \\<open>(\\<phi>, P) mem CsP\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "from \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  guarded Q", "have \"insertAssertion (extractFrame Q) \\<Psi> \\<simeq>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi> \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  guarded Q\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame Q)\n     \\<Psi> \\<simeq>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi> \\<otimes>\n            \\<one>\\<rangle>", "by(rule insertGuardedAssertion)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame Q)\n   \\<Psi> \\<simeq>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi> \\<otimes>\n          \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "hence \"insertAssertion (extractFrame(Cases CsQ)) \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   \\<Psi> \\<simeq>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi> \\<otimes>\n          \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Cases CsQ))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q)\n \\<Psi>", "by(auto simp add: FrameStatEq_def)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "moreover"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "from Identity"], ["proof (chain)\npicking this:\n  ?\\<Psi> \\<otimes> \\<one> \\<simeq> ?\\<Psi>", "have \"insertAssertion (extractFrame(Cases CsQ)) \\<Psi> \\<hookrightarrow>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi>\\<rangle>\""], ["proof (prove)\nusing this:\n  ?\\<Psi> \\<otimes> \\<one> \\<simeq> ?\\<Psi>\n\ngoal (1 subgoal):\n 1. insertAssertion (extractFrame (Cases CsQ))\n     \\<Psi> \\<hookrightarrow>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi>\\<rangle>", "by(auto simp add: AssertionStatEq_def)"], ["proof (state)\nthis:\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi>\\<rangle>", "have \"\\<Psi> : (Cases CsQ) \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> : Q \\<rhd> P \\<Longrightarrow>\\<alpha> \\<prec> P''\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame Q) \\<Psi>\n  insertAssertion (extractFrame (Cases CsQ))\n   \\<Psi> \\<hookrightarrow>\\<^sub>F \\<langle>\\<epsilon>, \\<Psi>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P''", "by(rule weakCase)"], ["proof (state)\nthis:\n  \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<alpha> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P''.\n                            \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n                            (\\<exists>P'.\n                                \\<Psi> \\<otimes>\n                                \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                                (\\<Psi> \\<otimes> \\<Psi>', P', Q')\n                                \\<in> Rel)", "with P''Chain P'RelQ'"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<exists>P''.\n       \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n       (\\<exists>P'.\n           \\<Psi> \\<otimes>\n           \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n           (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P''.\n     \\<Psi> : Cases CsQ \\<rhd> Cases CsP \\<Longrightarrow>\\<alpha> \\<prec> P'' \\<and>\n     (\\<exists>P'.\n         \\<Psi> \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n         (\\<Psi> \\<otimes> \\<Psi>', P', Q') \\<in> Rel)\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cCase \\<phi> Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  (\\<phi>, Q) mem CsQ\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>(\\<phi>, Q) mem CsQ\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, Q) mem CsQ", "obtain P where \"(\\<phi>, P) mem CsP\" and \"guarded P\" and \"Eq \\<Psi> P Q\""], ["proof (prove)\nusing this:\n  (\\<phi>, Q) mem CsQ\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>(\\<phi>, P) mem CsP; guarded P; Eq \\<Psi> P Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis PRelQ)"], ["proof (state)\nthis:\n  (\\<phi>, P) mem CsP\n  guarded P\n  Eq \\<Psi> P Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>Eq \\<Psi> P Q\\<close> \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  Eq \\<Psi> P Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Eq \\<Psi> P Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: EqSim weakCongSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from PChain \\<open>(\\<phi>, P) mem CsP\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P", "have \"\\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'", "by(rule tauStepChainCase)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "hence \"\\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(simp add: trancl_into_rtrancl)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "with P'RelQ'"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakCongSimCasePres:\n  fixes \\<Psi>    :: 'b\n  and   CsP  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   CsQ  :: \"('c \\<times> ('a, 'b, 'c) psi) list\"\n  and   M    :: 'a\n  and   N    :: 'a\n\n  assumes PRelQ: \"\\<And>\\<phi> Q. (\\<phi>, Q) mem CsQ \\<Longrightarrow> \\<exists>P. (\\<phi>, P) mem CsP \\<and> guarded P \\<and> Eq \\<Psi> P Q\"\n  and     EqSim: \"\\<And>\\<Psi>' P Q. Eq \\<Psi>' P Q \\<Longrightarrow> \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n\n  shows \"\\<Psi> \\<rhd> Cases CsP \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Cases CsQ\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Cases CsQ", "proof(induct rule: weakCongSimI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>\\<Psi> \\<rhd> Cases CsQ \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Cases CsQ \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "proof(induct rule: caseCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "case(cCase \\<phi> Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  (\\<phi>, Q) mem CsQ\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>(\\<phi>, Q) mem CsQ\\<close>"], ["proof (chain)\npicking this:\n  (\\<phi>, Q) mem CsQ", "obtain P where \"(\\<phi>, P) mem CsP\" and \"guarded P\" and \"Eq \\<Psi> P Q\""], ["proof (prove)\nusing this:\n  (\\<phi>, Q) mem CsQ\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>(\\<phi>, P) mem CsP; guarded P; Eq \\<Psi> P Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis PRelQ)"], ["proof (state)\nthis:\n  (\\<phi>, P) mem CsP\n  guarded P\n  Eq \\<Psi> P Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from \\<open>Eq \\<Psi> P Q\\<close> \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  Eq \\<Psi> P Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Eq \\<Psi> P Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: EqSim weakCongSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "from PChain \\<open>(\\<phi>, P) mem CsP\\<close> \\<open>\\<Psi> \\<turnstile> \\<phi>\\<close> \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P", "have \"\\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<phi>, P) mem CsP\n  \\<Psi> \\<turnstile> \\<phi>\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'", "by(rule tauStepChainCase)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi> P.\n       \\<lbrakk>\\<Psi> \\<rhd> P \\<longmapsto> \\<tau> \\<prec> Q';\n        (\\<phi>, P) mem CsQ; \\<Psi> \\<turnstile> \\<phi>; guarded P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q') \\<in> Rel", "with P'RelQ'"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> Cases CsP \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakCongSimResPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   x    :: name\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     \"eqvt Rel'\"\n  and     \"x \\<sharp> \\<Psi>\"\n  and     \"Rel \\<subseteq> Rel'\"\n  and     C1: \"\\<And>\\<Psi>' R S x. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; x \\<sharp> \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>x\\<rparr>R, \\<lparr>\\<nu>x\\<rparr>S) \\<in> Rel'\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>Q", "proof(induct rule: weakCongSimI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "case(cTau Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'", "have \"x \\<sharp> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. x \\<sharp> Q'", "by(auto dest: tauFreshDerivative simp add: abs_fresh)"], ["proof (state)\nthis:\n  x \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "with  \\<open>\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Q'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>Q \\<longmapsto> \\<tau> \\<prec> Q'\n  x \\<sharp> \\<Psi>\n  x \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q') \\<in> Rel'", "proof(induct rule: resTauCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "case(cRes Q')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from PSimQ \\<open>\\<Psi> \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi>, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n  \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P';\n         (\\<Psi>, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: weakCongSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<Psi>, P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from PChain \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'", "by(rule tauStepChainResPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "from P'RelQ' \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>", "have \"(\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P', Q') \\<in> Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P'.\n       \\<Psi> \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n          (\\<Psi>, P'a, \\<lparr>\\<nu>x\\<rparr>P') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>x\\<rparr>P'\n  (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>x\\<rparr>Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakCongSimResChainPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   xvec :: \"name list\"\n\n  assumes PSimQ: \"\\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     \"eqvt Rel\"\n  and     \"xvec \\<sharp>* \\<Psi>\"\n  and     C1:    \"\\<And>\\<Psi>' R S xvec. \\<lbrakk>(\\<Psi>', R, S) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>R, \\<lparr>\\<nu>*xvec\\<rparr>S) \\<in> Rel\"\n\n  shows   \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q", "proof(induct xvec)"], ["proof (state)\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "case Nil"], ["proof (state)\nthis:\n  [] \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. [] \\<sharp>* \\<Psi> \\<Longrightarrow>\n    \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*[]\\<rparr>Q\n 2. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "from PSimQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*[]\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*[]\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*[]\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "case(Cons x xvec)"], ["proof (state)\nthis:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "from \\<open>(x#xvec) \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  (x # xvec) \\<sharp>* \\<Psi>", "have \"x \\<sharp> \\<Psi>\" and \"xvec \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  (x # xvec) \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. x \\<sharp> \\<Psi> &&& xvec \\<sharp>* \\<Psi>", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> \\<Psi>\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "from \\<open>xvec \\<sharp>* \\<Psi> \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "note \\<open>eqvt Rel\\<close> \\<open>x \\<sharp> \\<Psi>\\<close>"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "have \"Rel \\<subseteq> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Rel \\<subseteq> Rel", "by simp"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "moreover"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "have \"\\<And>\\<Psi> P Q x. \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk> \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>*[x]\\<rparr>P, \\<lparr>\\<nu>*[x]\\<rparr>Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi> P Q x.\n       \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>*[x]\\<rparr>P,\n                          \\<lparr>\\<nu>*[x]\\<rparr>Q)\n                         \\<in> Rel", "by(rule_tac xvec=\"[x]\" in C1) auto"], ["proof (state)\nthis:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>*[?x]\\<rparr>?P,\n                     \\<lparr>\\<nu>*[?x]\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "hence \"\\<And>\\<Psi> P Q x. \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk> \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P, \\<lparr>\\<nu>x\\<rparr>Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>*[?x]\\<rparr>?P,\n                     \\<lparr>\\<nu>*[?x]\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi> P Q x.\n       \\<lbrakk>(\\<Psi>, P, Q) \\<in> Rel; x \\<sharp> \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> (\\<Psi>, \\<lparr>\\<nu>x\\<rparr>P,\n                          \\<lparr>\\<nu>x\\<rparr>Q)\n                         \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel", "have \"\\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q\n  eqvt Rel\n  x \\<sharp> \\<Psi>\n  Rel \\<subseteq> Rel\n  \\<lbrakk>(?\\<Psi>, ?P, ?Q) \\<in> Rel; ?x \\<sharp> ?\\<Psi>\\<rbrakk>\n  \\<Longrightarrow> (?\\<Psi>, \\<lparr>\\<nu>?x\\<rparr>?P,\n                     \\<lparr>\\<nu>?x\\<rparr>?Q)\n                    \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)", "by(rule weakCongSimResPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<And>a xvec.\n       \\<lbrakk>xvec \\<sharp>* \\<Psi> \\<Longrightarrow>\n                \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*xvec\\<rparr>Q;\n        (a # xvec) \\<sharp>* \\<Psi>\\<rbrakk>\n       \\<Longrightarrow> \\<Psi> \\<rhd> \\<lparr>\\<nu>*(a #\n                xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(a #\n                 xvec)\\<rparr>Q", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>P) \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>x\\<rparr>(\\<lparr>\\<nu>*xvec\\<rparr>Q)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                                 xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(x #\n                                  xvec)\\<rparr>Q", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*(x #\n                               xvec)\\<rparr>P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> \\<lparr>\\<nu>*(x #\n                                xvec)\\<rparr>Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma weakCongSimParPres:\n  fixes \\<Psi>    :: 'b\n  and   P    :: \"('a, 'b, 'c) psi\"\n  and   Rel  :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Q    :: \"('a, 'b, 'c) psi\"\n  and   R    :: \"('a, 'b, 'c) psi\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  \n  assumes PSimQ: \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\"\n  and     PSimQ': \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> P \\<leadsto><Rel> Q\"\n  and     StatImp: \"\\<And>\\<Psi>'. \\<Psi>' \\<rhd> Q \\<lessapprox><Rel> P\"\n\n  and            \"eqvt Rel\"\n  and            \"eqvt Rel'\"\n\n  and     Sym:    \"\\<And>\\<Psi>' S T. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     Ext:    \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n\n  and     C1: \"\\<And>\\<Psi>' S T A\\<^sub>U \\<Psi>\\<^sub>U U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel'\"\n  and     C2: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     C3: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n\n  shows \"\\<Psi> \\<rhd> P \\<parallel> R \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> Q \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<leadsto>\\<guillemotleft>Rel'\\<guillemotright> Q \\<parallel>\n                              R", "proof(induct rule: weakCongSimI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "case(cTau QR)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> Q \\<parallel>\n                     R \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> P \\<parallel>\n                        R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel'", "from \\<open>\\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto>\\<tau> \\<prec> QR\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> Q \\<parallel> R \\<longmapsto> \\<tau> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', QR) \\<in> Rel'", "proof(induct rule: parTauCases[where C=\"(P, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar1 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrR: \" extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q", "by(rule_tac PSimQ)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>\\<tau> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'", "obtain P' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\" and P'RelQ': \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> Q\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakCongSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain QTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "have \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> Q'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* Q'", "by(force dest: freeFreshChainDerivative tauStepChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> (P' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<parallel> R", "by(rule tauStepChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'", "have \"(\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P', Q') \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* Q'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> R) \\<in> Rel'\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<parallel> R\n  (\\<Psi>, P' \\<parallel> R, Q' \\<parallel> R) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q' \\<parallel> R) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cPar2 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P \\<Psi>\\<^sub>P where FrP: \"extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\" and \"A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P \\<Psi>\\<^sub>P.\n        \\<lbrakk>extractFrame P =\n                 \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n         A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P \\<sharp>* \\<Psi>\" and \"A\\<^sub>P \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, R)\n\ngoal (1 subgoal):\n 1. (A\\<^sub>P \\<sharp>* \\<Psi> &&& A\\<^sub>P \\<sharp>* A\\<^sub>Q) &&&\n    A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q &&& A\\<^sub>P \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* P\\<close> FrP \\<open>A\\<^sub>P \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* P\n  extractFrame P = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>\n  A\\<^sub>P \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>R \\<Psi>\\<^sub>R where FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\" and \"A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, R)\" and \"distinct A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R \\<Psi>\\<^sub>R.\n        \\<lbrakk>extractFrame R =\n                 \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>;\n         A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P,\n                              \\<Psi>\\<^sub>Q, \\<Psi>\\<^sub>P, R);\n         distinct A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "then"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\" and \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* A\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* A\\<^sub>P\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and  \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\"\n          and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* (\\<Psi>, P, Q, A\\<^sub>Q, A\\<^sub>P, \\<Psi>\\<^sub>Q,\n                       \\<Psi>\\<^sub>P, R)\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>R \\<sharp>* \\<Psi> &&& A\\<^sub>R \\<sharp>* P) &&&\n     A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* A\\<^sub>Q) &&&\n    (A\\<^sub>R \\<sharp>* A\\<^sub>P &&&\n     A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q) &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  FrR \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* R\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>P \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>P\\<close> FrR"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* R\n  A\\<^sub>R \\<sharp>* A\\<^sub>P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                         and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q, R)\" in expandTauFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q", "obtain P' P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                    and QimpP': \"insertAssertion(extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion(extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                    and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                    and P'RelQ: \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<And>P' P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n                (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P'', Q)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(metis StatImp weakStatImp_def Sym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P'', Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P' \\<Psi>\\<^sub>P' where FrP': \"extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\"\n                      and \"A\\<^sub>P' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P' \\<sharp>* R\" and \"A\\<^sub>P' \\<sharp>* A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P' \\<Psi>\\<^sub>P'.\n        \\<lbrakk>extractFrame P' =\n                 \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>;\n         A\\<^sub>P' \\<sharp>* \\<Psi>; A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>Q; A\\<^sub>P' \\<sharp>* R;\n         A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, \\<Psi>\\<^sub>Q, A\\<^sub>Q, R, A\\<^sub>R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain P'Chain \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>Q \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P", "have \"A\\<^sub>Q \\<sharp>* P'\" and \"A\\<^sub>R \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* P'\" and \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (A\\<^sub>Q \\<sharp>* P' &&& A\\<^sub>R \\<sharp>* P') &&&\n    A\\<^sub>R' \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* P''", "by(force intro: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>Q\\<close> FrP'"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>", "have \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\" and \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* P'\n  A\\<^sub>P' \\<sharp>* A\\<^sub>Q\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P' &&&\n    A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'", "by(force dest: extractFrameFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "by fact"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym FrameStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "with FrP' FrQ QimpP' \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n             \\<Psi>\\<^sub>P') \\<otimes>\n            \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameIntAssociativity Commutativity FrameStatEqTrans frameIntCompositionSym frameIntAssociativity[THEN FrameStatEqSym])"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>R) \\<otimes>\n                 \\<Psi>\\<^sub>P'\\<rangle>\n  \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>P'\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>P') \\<otimes>\n          \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "using \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close> \n              \\<open>A\\<^sub>P' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P', (\\<Psi> \\<otimes>\n                  \\<Psi>\\<^sub>P') \\<otimes>\n                 \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>P' \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>P' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P'\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'", "by(force intro: transferTauFrame)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P' \\<parallel> R \\<longmapsto>\\<tau> \\<prec> (P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'", "using FrP' \\<open>A\\<^sub>P' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P' \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>P' \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame P' = \\<langle>A\\<^sub>P', \\<Psi>\\<^sub>P'\\<rangle>\n  A\\<^sub>P' \\<sharp>* \\<Psi>\n  A\\<^sub>P' \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'", "by(rule_tac Par2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(metis tauChainStatEq Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "by(rule_tac tauChainStatEq, auto) (metis compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel>\n                      R'", "by(rule_tac tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> (P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>R\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'\n  \\<Psi> \\<rhd> P' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> R'", "by(drule_tac tauActTauStepChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> R'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P'', Q) \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P'', Q) \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "by(blast intro: C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel", "have \"(\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P'', Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', Q \\<parallel> Q') \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> R'\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> R'\n  (\\<Psi>, P'' \\<parallel> R', Q \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', Q \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm1 \\<Psi>\\<^sub>R M N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K xvec R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> Q'\" and RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\"\n      and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow>K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close>\n                    \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close>\n                     \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  xvec \\<sharp>* K\n  distinct xvec", "obtain p \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\"\n                           and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\"\n                           and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\" and \"(p \\<bullet> xvec) \\<sharp>* K\" and \"(p \\<bullet> xvec) \\<sharp>* R\"\n                           and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* N\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* R\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  xvec \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>;\n         (p \\<bullet> xvec) \\<sharp>* Q;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q;\n         (p \\<bullet> xvec) \\<sharp>* K; (p \\<bullet> xvec) \\<sharp>* R;\n         (p \\<bullet> xvec) \\<sharp>* P;\n         (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>Q)\"  and C'=\"(\\<Psi>, Q, \\<Psi>\\<^sub>Q, K, R, P, A\\<^sub>Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* \\<Psi>", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> \\<Psi>)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* P", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* P\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* P", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* Q", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* Q", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* R\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* R", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> R)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* R", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* K", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)", "have \"(p \\<bullet> A\\<^sub>R) \\<sharp>* K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. (p \\<bullet> A\\<^sub>R) \\<sharp>* K", "by simp"], ["proof (state)\nthis:\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* M\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* M\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (p \\<bullet> M)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from QTrans S \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(rule_tac inputPermFrameSubject) (assumption | auto simp add: fresh_star_def)+"], ["proof (state)\nthis:\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'", "have QTrans: \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<rhd> Q \\<longmapsto> (p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> Q'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> (p \\<bullet>\n   M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n       M)\\<lparr>N\\<rparr> \\<prec> Q'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from FrR"], ["proof (chain)\npicking this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have \"(p \\<bullet> extractFrame R) = p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. p \\<bullet> extractFrame R =\n    p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* R\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "have FrR: \"extractFrame R = \\<langle>(p \\<bullet> A\\<^sub>R), (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* R\n  (p \\<bullet> xvec) \\<sharp>* R\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  p \\<bullet> extractFrame R =\n  p \\<bullet> \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame R =\n    \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from MeqK"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "have \"(p \\<bullet> (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R)) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> (p \\<bullet> K)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. (p \\<bullet>\n     \\<Psi> \\<otimes>\n     \\<Psi>\\<^sub>Q \\<otimes>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                   M) \\<leftrightarrow> (p \\<bullet> K)", "by(rule chanEqClosed)"], ["proof (state)\nthis:\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* K\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)", "have MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* K\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   \\<Psi> \\<otimes>\n   \\<Psi>\\<^sub>Q \\<otimes>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet>\n                                 M) \\<leftrightarrow> (p \\<bullet> K)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q", "by(rule PSimQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q", "obtain P' P'' where PTrans: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> P''\"\n                                and P''Chain: \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                                and P'RelQ': \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  \\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 (p \\<bullet>\n                  \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n                           M)\\<lparr>N\\<rparr> \\<prec> P'';\n         (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n          P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans QTrans \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N", "have \"A\\<^sub>R' \\<sharp>* P''\" and \"A\\<^sub>R' \\<sharp>* Q'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> Q \\<longmapsto> (p \\<bullet>\n     M)\\<lparr>N\\<rparr> \\<prec> Q'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'' &&& A\\<^sub>R' \\<sharp>* Q'", "by(blast dest: weakInputFreshChainDerivative inputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P''\n  A\\<^sub>R' \\<sharp>* Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''", "obtain P''' where PChain: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\"\n                              and QimpP''': \"insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P''') (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\"\n                              and P'''Trans: \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto>(p \\<bullet> M)\\<lparr>N\\<rparr> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) : Q \\<rhd> P \\<Longrightarrow>(p \\<bullet>\n            M)\\<lparr>N\\<rparr> \\<prec> P''\n\ngoal (1 subgoal):\n 1. (\\<And>P'''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 (p \\<bullet>\n                  \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           (p \\<bullet>\n            \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n                  (extractFrame P''')\n                  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R));\n         \\<Psi> \\<otimes>\n         (p \\<bullet>\n          \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n               M)\\<lparr>N\\<rparr> \\<prec> P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakTransitionE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P''')\n           (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  xvec \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P", "have \"xvec \\<sharp>* P'''\" and \"(p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\" and \"A\\<^sub>R' \\<sharp>* P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  xvec \\<sharp>* P\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P''' &&&\n    (p \\<bullet> A\\<^sub>R) \\<sharp>* P''' &&& A\\<^sub>R' \\<sharp>* P'''", "by(force intro: tauChainFreshChain)+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P'''\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\n  A\\<^sub>R' \\<sharp>* P'''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'''Trans \\<open>A\\<^sub>R' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R' \\<sharp>* N\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  A\\<^sub>R' \\<sharp>* P'''\n  A\\<^sub>R' \\<sharp>* N", "have \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  A\\<^sub>R' \\<sharp>* P'''\n  A\\<^sub>R' \\<sharp>* N\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P''", "by(force dest: inputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P''' \\<Psi>\\<^sub>P''' where FrP''': \"extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\" and \"A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R, p \\<bullet> M, N, K, R, P''', xvec)\" and \"distinct A\\<^sub>P'''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P''' \\<Psi>\\<^sub>P'''.\n        \\<lbrakk>extractFrame P''' =\n                 \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>;\n         A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q,\n                                 p \\<bullet> A\\<^sub>R,\n                                 p \\<bullet> \\<Psi>\\<^sub>R, p \\<bullet> M,\n                                 N, K, R, P''', xvec);\n         distinct A\\<^sub>P'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q,\n                          p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R,\n                          p \\<bullet> M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P''' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\" and \"A\\<^sub>P''' \\<sharp>* R\"\n      and \"A\\<^sub>P''' \\<sharp>* N\" and \"A\\<^sub>P''' \\<sharp>* K\" and \"A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\" and \"A\\<^sub>P''' \\<sharp>* P'''\" and \"A\\<^sub>P''' \\<sharp>* xvec\" and \"A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\""], ["proof (prove)\nusing this:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q,\n                          p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R,\n                          p \\<bullet> M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>P''' \\<sharp>* \\<Psi> &&&\n      A\\<^sub>P''' \\<sharp>* A\\<^sub>Q) &&&\n     A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q &&&\n     A\\<^sub>P''' \\<sharp>* (p \\<bullet> M) &&&\n     A\\<^sub>P''' \\<sharp>* R) &&&\n    (A\\<^sub>P''' \\<sharp>* N &&&\n     A\\<^sub>P''' \\<sharp>* K &&&\n     A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)) &&&\n    A\\<^sub>P''' \\<sharp>* P''' &&&\n    A\\<^sub>P''' \\<sharp>* xvec &&&\n    A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* N\n  A\\<^sub>P''' \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* xvec\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n            (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n           \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QimpP''' FrP''' FrQ \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* xvec\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\\<close> S"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P''')\n           (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P''')\n           (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                         (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    (p \\<bullet>\n     \\<Psi>\\<^sub>R)) \\<hookrightarrow>\\<^sub>F insertAssertion\n           (extractFrame P''')\n           (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R))\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> \\<Psi>\\<^sub>R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* xvec\n  (p \\<bullet> xvec) \\<sharp>* A\\<^sub>Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                         (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                            (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                           \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P''') \\<otimes>\n                  (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "have QImpP''': \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                          (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        (p \\<bullet>\n                         \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                        \\<Psi>\\<^sub>P''') \\<otimes>\n                       (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P''') \\<otimes>\n                     (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel>\n                     R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR P'''Trans MeqK QImpP''' FrP''' FrQ \\<open>distinct A\\<^sub>P'''\\<close> \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\\<close> \\<open>A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\\<close>\n      \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* Q\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* R\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* K\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close>\n      \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  \\<open>A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P''') \\<otimes>\n                     (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)", "obtain K' where \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto>K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\" and \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\" and \"(p \\<bullet> A\\<^sub>R) \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      (p \\<bullet>\n                       \\<Psi>\\<^sub>R)\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P''') \\<otimes>\n                     (p \\<bullet> \\<Psi>\\<^sub>R)\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> A\\<^sub>R)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* Q\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* (p \\<bullet> M)\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R';\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>P''' \\<otimes>\n         (p \\<bullet>\n          \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K';\n         (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac comm1Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P'''Trans FrP'''"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'", "have \"\\<Psi> \\<rhd> P''' \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "using FrR \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* R\\<close>\n      \\<open>xvec \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\\<close> \\<open>(p \\<bullet> A\\<^sub>R) \\<sharp>* K'\\<close> \\<open>A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<rhd> P''' \\<longmapsto> (p \\<bullet>\n        M)\\<lparr>N\\<rparr> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  (p \\<bullet>\n   \\<Psi>\\<^sub>R) \\<turnstile> (p \\<bullet> M) \\<leftrightarrow> K'\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n  extractFrame R =\n  \\<langle>p \\<bullet> A\\<^sub>R, p \\<bullet> \\<Psi>\\<^sub>R\\<rangle>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* \\<Psi>\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* P'''\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* R\n  xvec \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> M)\n  (p \\<bullet> A\\<^sub>R) \\<sharp>* K'\n  A\\<^sub>P''' \\<sharp>* (p \\<bullet> A\\<^sub>R)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "by(rule_tac Comm1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P''Chain \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\""], ["proof (prove)\nusing this:\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "by(metis Associativity AssertionStatEqTrans AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(rule tauChainStatEq)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P'' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n R'", "by(drule_tac tauActTauStepChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', P',\n   Q')\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "case(cComm2 \\<Psi>\\<^sub>R M xvec N Q' A\\<^sub>Q \\<Psi>\\<^sub>Q K R' A\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* Q\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* (P, R)\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* (P, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>Q \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>Q \\<sharp>* (P, R)", "have \"A\\<^sub>Q \\<sharp>* P\" and \"A\\<^sub>Q \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>Q \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q \\<sharp>* P &&& A\\<^sub>Q \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q \\<sharp>* P\n  A\\<^sub>Q \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have  FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>A\\<^sub>R \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>xvec \\<sharp>* (P, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\" and RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> R'\"\n     and MeqK: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow>K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R' &&&\n    \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by fact+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K", "obtain \\<Psi>' A\\<^sub>R' \\<Psi>\\<^sub>R' where  ReqR': \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" \n                         and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q'\" and \"A\\<^sub>R' \\<sharp>* N\" and \"A\\<^sub>R' \\<sharp>* xvec\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>\\<Psi>' \\<Psi>\\<^sub>R' A\\<^sub>R'.\n        \\<lbrakk>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         A\\<^sub>R' \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q'; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* xvec\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q', N, xvec)\" and C'=\"(\\<Psi>, P, Q', N, xvec)\" in expandFrame) auto"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "by(rule PSimQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QTrans \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q", "obtain P'' P' where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\"\n                    and P''Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\"\n                    and P'RelQ': \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<leadsto><Rel> Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'' P'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P';\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q')\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''", "obtain P''' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\"\n                              and QimpP''': \"insertAssertion (extractFrame Q) (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                              and P'''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. (\\<And>P'''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''';\n         insertAssertion (extractFrame Q)\n          (\\<Psi> \\<otimes>\n           \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n                (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule weakTransitionE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P'''", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "obtain A\\<^sub>P''' \\<Psi>\\<^sub>P''' where FrP''': \"extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\" and \"A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R, \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\" and \"distinct A\\<^sub>P'''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P''' \\<Psi>\\<^sub>P'''.\n        \\<lbrakk>extractFrame P''' =\n                 \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>;\n         A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q,\n                                 A\\<^sub>R, \\<Psi>\\<^sub>R, M, N, K, R,\n                                 P''', xvec);\n         distinct A\\<^sub>P'''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule freshFrame)"], ["proof (state)\nthis:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                          \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"A\\<^sub>P''' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>P''' \\<sharp>* M\" and \"A\\<^sub>P''' \\<sharp>* R\"\n      and \"A\\<^sub>P''' \\<sharp>* N\" and \"A\\<^sub>P''' \\<sharp>* K\" and \"A\\<^sub>P''' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>P''' \\<sharp>* P'''\" and \"A\\<^sub>P''' \\<sharp>* xvec\" and \"A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\""], ["proof (prove)\nusing this:\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  A\\<^sub>P''' \\<sharp>* (\\<Psi>, A\\<^sub>Q, \\<Psi>\\<^sub>Q, A\\<^sub>R,\n                          \\<Psi>\\<^sub>R, M, N, K, R, P''', xvec)\n  distinct A\\<^sub>P'''\n\ngoal (1 subgoal):\n 1. ((A\\<^sub>P''' \\<sharp>* \\<Psi> &&&\n      A\\<^sub>P''' \\<sharp>* A\\<^sub>Q) &&&\n     A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q &&&\n     A\\<^sub>P''' \\<sharp>* M &&& A\\<^sub>P''' \\<sharp>* R) &&&\n    (A\\<^sub>P''' \\<sharp>* N &&&\n     A\\<^sub>P''' \\<sharp>* K &&& A\\<^sub>P''' \\<sharp>* A\\<^sub>R) &&&\n    A\\<^sub>P''' \\<sharp>* P''' &&&\n    A\\<^sub>P''' \\<sharp>* xvec &&& A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* N\n  A\\<^sub>P''' \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* xvec\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with QimpP''' FrP''' FrQ \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle>\""], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "using freshCompChain"], ["proof (prove)\nusing this:\n  insertAssertion (extractFrame Q)\n   (\\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R) \\<hookrightarrow>\\<^sub>F insertAssertion\n         (extractFrame P''') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>R) \\<otimes>\n                     \\<Psi>\\<^sub>P'''\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "have \"\\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                           \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                   \\<Psi>\\<^sub>P''') \\<otimes>\n                  \\<Psi>\\<^sub>R\\<rangle>", "by(metis frameResChainPres frameNilStatEq Commutativity AssertionStatEqTrans Composition Associativity)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>", "have QImpP''': \"\\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''') \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>R) \\<otimes>\n       \\<Psi>\\<^sub>Q\\<rangle>\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>Q\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>R) \\<otimes>\n                   \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>P'''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''') \\<otimes>\n                \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                        \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P''') \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel>\n                     R", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from RTrans FrR P'''Trans MeqK QImpP''' FrP''' FrQ \\<open>distinct A\\<^sub>P'''\\<close> \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<close>\n      \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* K\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close>\n      \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* M\\<close> \\<open>A\\<^sub>Q \\<sharp>* R\\<close>  \\<open>A\\<^sub>Q \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M", "obtain K' where \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto>K'\\<lparr>N\\<rparr> \\<prec> R'\" and \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P''' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\" and \"A\\<^sub>R \\<sharp>* K'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n  \\<langle>A\\<^sub>Q, (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q) \\<otimes>\n                      \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P''', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P''') \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>P'''\n  distinct A\\<^sub>R\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* K\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* M\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>K'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>P''' \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K';\n         A\\<^sub>R \\<sharp>* K'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac comm2Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P'''Trans FrP'''"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'", "have \"\\<Psi> \\<rhd> P''' \\<parallel> R \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>\n      \\<open>xvec \\<sharp>* R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P''' \\<sharp>* P'''\\<close> \\<open>A\\<^sub>P''' \\<sharp>* R\\<close> \\<open>A\\<^sub>P''' \\<sharp>* M\\<close> \\<open>A\\<^sub>R \\<sharp>* K'\\<close> \\<open>A\\<^sub>P''' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  extractFrame P''' = \\<langle>A\\<^sub>P''', \\<Psi>\\<^sub>P'''\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<rhd> R \\<longmapsto> K'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P''' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K'\n  A\\<^sub>R \\<sharp>* K'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* R\n  xvec \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* \\<Psi>\n  A\\<^sub>P''' \\<sharp>* P'''\n  A\\<^sub>P''' \\<sharp>* R\n  A\\<^sub>P''' \\<sharp>* M\n  A\\<^sub>R \\<sharp>* K'\n  A\\<^sub>P''' \\<sharp>* A\\<^sub>R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P''' \\<parallel>\n                  R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                     R'", "by(rule_tac Comm2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'''Trans \\<open>A\\<^sub>R \\<sharp>* P'''\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  A\\<^sub>R \\<sharp>* P'''\n  A\\<^sub>R \\<sharp>* xvec\n  xvec \\<sharp>* M\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from PChain \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R' \\<sharp>* P", "have \"A\\<^sub>R' \\<sharp>* P'''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'''\n  A\\<^sub>R' \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'''", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P'''Trans \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R' \\<sharp>* P'''", "have \"A\\<^sub>R' \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R' \\<sharp>* P'''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P''", "using \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P''' \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P''\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R' \\<sharp>* P'''\n  A\\<^sub>R' \\<sharp>* xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P''", "by(rule_tac outputFreshChainDerivative) auto"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(rule tauChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "by(metis Associativity AssertionStatEqTrans AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with P''Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<simeq> \\<Psi> \\<otimes> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'", "by(rule tauChainStatEq)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> P'' \\<parallel> R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P''\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P'' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P'' \\<parallel>\n                  R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel>\n                      R'", "by(rule tauChainPar1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(P'' \\<parallel> R') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P'' \\<parallel>\n                R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P' \\<parallel> R'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n      R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                    R'", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'", "have \"\\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''' \\<parallel> R\n  \\<Psi> \\<rhd> P''' \\<parallel>\n                R \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n                                   R'\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>P'' \\<parallel>\n    R' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                  R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> P \\<parallel>\n                  R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n R'", "by(drule_tac tauActTauStepChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "from P'RelQ' \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', P', Q') \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "by(metis C3 Associativity compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* Q'\\<close> \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel", "have \"(\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* Q'\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "by(rule_tac C1)"], ["proof (state)\nthis:\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(P' \\<parallel> R'), \\<lparr>\\<nu>*xvec\\<rparr>(Q' \\<parallel> R')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (\\<Psi>, P' \\<parallel> R', Q' \\<parallel> R') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n     \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n    \\<in> Rel'", "by(rule_tac C2)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> Q \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame Q = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> R \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* Q;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* Q; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* R;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* Q; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* R; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> P \\<parallel>\n    R \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> P \\<parallel>\n                R \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel>\n                                     R'\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> R',\n   \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> P \\<parallel>\n                     R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>Q' \\<parallel> R') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> P \\<parallel> R \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', QR) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "no_notation relcomp (infixr \"O\" 75)"], ["", "lemma weakCongSimBangPres:\n  fixes \\<Psi> :: 'b\n  and   P :: \"('a, 'b, 'c) psi\"\n  and   Q :: \"('a, 'b, 'c) psi\"\n  and   Rel :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n  and   Rel'' :: \"('b \\<times> ('a, 'b, 'c) psi \\<times> ('a, 'b, 'c) psi) set\"\n\n  assumes PEqQ:   \"Eq P Q\"\n  and     PRelQ: \"(\\<Psi>, P, Q) \\<in> Rel\"\n  and     \"guarded P\"\n  and     \"guarded Q\"\n  and     Rel'Rel: \"Rel' \\<subseteq> Rel\"\n  and     FrameParPres: \"\\<And>\\<Psi>' \\<Psi>\\<^sub>U S T U A\\<^sub>U. \\<lbrakk>(\\<Psi>' \\<otimes> \\<Psi>\\<^sub>U, S, T) \\<in> Rel; extractFrame U = \\<langle>A\\<^sub>U, \\<Psi>\\<^sub>U\\<rangle>; A\\<^sub>U \\<sharp>* \\<Psi>'; A\\<^sub>U \\<sharp>* S; A\\<^sub>U \\<sharp>* T\\<rbrakk> \\<Longrightarrow>\n                                            (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel\"\n  and     C1: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; guarded S; guarded T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', U \\<parallel> !S, U \\<parallel> !T) \\<in> Rel''\"\n  and     Closed: \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel\"\n  and     Closed': \"\\<And>\\<Psi>' S T p. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> ((p::name prm) \\<bullet> \\<Psi>', p \\<bullet> S, p \\<bullet> T) \\<in> Rel'\"\n  and     StatEq: \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel\"\n  and     StatEq': \"\\<And>\\<Psi>' S T \\<Psi>''. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; \\<Psi>' \\<simeq> \\<Psi>''\\<rbrakk> \\<Longrightarrow> (\\<Psi>'', S, T) \\<in> Rel'\"\n  and     Trans: \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel\"\n  and     Trans': \"\\<And>\\<Psi>' S T U. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; (\\<Psi>', T, U) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, U) \\<in> Rel'\"\n  and     EqSim: \"\\<And>\\<Psi>' S T. Eq S T \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto>\\<guillemotleft>Rel\\<guillemotright> T\"\n  and     cSim: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> \\<Psi>' \\<rhd> S \\<leadsto><Rel> T\"\n  and     cSym: \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel\"\n  and     cSym': \"\\<And>\\<Psi>' S T. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', T, S) \\<in> Rel'\"\n  and     cExt: \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel\"\n  and     cExt': \"\\<And>\\<Psi>' S T \\<Psi>''. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>' \\<otimes> \\<Psi>'', S, T) \\<in> Rel'\"\n  and     ParPres: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel \\<Longrightarrow> (\\<Psi>', S \\<parallel> U, T \\<parallel> U) \\<in> Rel\"\n  and     ParPres': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S, T) \\<in> Rel' \\<Longrightarrow> (\\<Psi>', U \\<parallel> S, U \\<parallel> T) \\<in> Rel'\"\n  and     ParPres2: \"\\<And>\\<Psi>' S T. Eq S T \\<Longrightarrow> Eq (S \\<parallel> S) (T \\<parallel> T)\"\n  and     ResPres: \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel\"\n  and     ResPres': \"\\<And>\\<Psi>' S T xvec. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel'; xvec \\<sharp>* \\<Psi>'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>S, \\<lparr>\\<nu>*xvec\\<rparr>T) \\<in> Rel'\"\n  and     Assoc: \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel\"\n  and     Assoc': \"\\<And>\\<Psi>' S T U. (\\<Psi>', S \\<parallel> (T \\<parallel> U), (S \\<parallel> T) \\<parallel> U) \\<in> Rel'\"\n  and     ScopeExt: \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel\"\n  and     ScopeExt': \"\\<And>xvec \\<Psi>' T S. \\<lbrakk>xvec \\<sharp>* \\<Psi>'; xvec \\<sharp>* T\\<rbrakk> \\<Longrightarrow> (\\<Psi>', \\<lparr>\\<nu>*xvec\\<rparr>(S \\<parallel> T), (\\<lparr>\\<nu>*xvec\\<rparr>S) \\<parallel> T) \\<in> Rel'\"\n  and     Compose: \"\\<And>\\<Psi>' S T U O. \\<lbrakk>(\\<Psi>', S, T) \\<in> Rel; (\\<Psi>', T, U) \\<in> Rel''; (\\<Psi>', U, O) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (\\<Psi>', S, O) \\<in> Rel''\"\n  and     rBangActE: \"\\<And>\\<Psi>' S \\<alpha> S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<alpha> \\<prec> S'; guarded S; bn \\<alpha> \\<sharp>* S; \\<alpha> \\<noteq> \\<tau>; bn \\<alpha> \\<sharp>* subject \\<alpha>\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<longmapsto>\\<alpha> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauE: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> !S \\<longmapsto>\\<tau> \\<prec> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> S \\<parallel> S \\<longmapsto>\\<tau> \\<prec> T \\<and> (\\<one>, S', T \\<parallel> !S) \\<in> Rel'\"\n  and     rBangTauI: \"\\<And>\\<Psi>' S S'. \\<lbrakk>\\<Psi>' \\<rhd> S \\<parallel> S \\<Longrightarrow>\\<^sub>\\<tau> S'; guarded S\\<rbrakk> \\<Longrightarrow> \\<exists>T. \\<Psi>' \\<rhd> !S \\<Longrightarrow>\\<^sub>\\<tau> T \\<and> (\\<Psi>', T, S' \\<parallel> !S) \\<in> Rel'\"\n  shows \"\\<Psi> \\<rhd> R \\<parallel> !P \\<leadsto>\\<guillemotleft>Rel''\\<guillemotright> R \\<parallel> !Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<leadsto>\\<guillemotleft>Rel''\\<guillemotright> R \\<parallel>\n                                !Q", "proof(induct rule: weakCongSimI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "case(cTau RQ')"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !Q \\<longmapsto> \\<tau> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<Psi> \\<rhd> R \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n          (\\<Psi>, P', Q') \\<in> Rel''", "from \\<open>\\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto>\\<tau> \\<prec> RQ'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel> !Q \\<longmapsto> \\<tau> \\<prec> RQ'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', RQ') \\<in> Rel''", "proof(induct rule: parTauCases[where C=\"(P, Q, R)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cPar1 R' A\\<^sub>Q \\<Psi>\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"A\\<^sub>Q = []\" and \"\\<Psi>\\<^sub>Q = SBottom'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q = [] &&& \\<Psi>\\<^sub>Q = \\<one>", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>\\<tau> \\<prec> R'\\<close> \\<open>\\<Psi>\\<^sub>Q = SBottom'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> (R' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> R'\n  \\<Psi>\\<^sub>Q = \\<one>\n  A\\<^sub>Q = []\n  \\<Psi>\\<^sub>Q = \\<one>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P", "by(rule_tac Par1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> R' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''", "using \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (4 subgoals):\n 1. \\<And>P' A\\<^sub>Q \\<Psi>\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> \\<tau> \\<prec> P';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q; A\\<^sub>Q \\<sharp>* \\<Psi>;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a, P' \\<parallel> !Q) \\<in> Rel''\n 2. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 4. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R' \\<parallel> !P\n  (\\<Psi>, R' \\<parallel> !P, R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R' \\<parallel> !Q) \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cPar2 Q' A\\<^sub>R \\<Psi>\\<^sub>R)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q \\<Psi>\\<^sub>Q where FrQ: \"extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q \\<sharp>* A\\<^sub>R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q \\<Psi>\\<^sub>Q.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n         A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q \\<sharp>* A\\<^sub>R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* A\\<^sub>R\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\" and \"A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q &&&\n    A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>Q\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>\\<tau> \\<prec> Q'\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  guarded Q", "obtain T where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto>\\<tau> \\<prec> T\" and \"(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q'\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel>\n Q \\<longmapsto> \\<tau> \\<prec> T;\n         (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: rBangTauE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>Eq P Q\\<close>"], ["proof (chain)\npicking this:\n  Eq P Q", "have \"Eq (P \\<parallel> P) (Q \\<parallel> Q)\""], ["proof (prove)\nusing this:\n  Eq P Q\n\ngoal (1 subgoal):\n 1. Eq (P \\<parallel> P) (Q \\<parallel> Q)", "by(rule ParPres2)"], ["proof (state)\nthis:\n  Eq (P \\<parallel> P) (Q \\<parallel> Q)\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with QTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  Eq (P \\<parallel> P) (Q \\<parallel> Q)", "obtain S where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\" and SRelT: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  Eq (P \\<parallel> P) (Q \\<parallel> Q)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n P \\<Longrightarrow>\\<^sub>\\<tau> S;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: EqSim weakCongSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>guarded P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\n  guarded P", "obtain U where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\" and \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\n  guarded P\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U;\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P)\n         \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: rBangTauI)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* U\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* U", "by(force dest: tauStepChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\\<close> FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> U\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U", "by(rule_tac tauStepChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> P \\<Longrightarrow>\\<^sub>\\<tau> S\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* S", "by(force dest: tauStepChainFreshChain)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* S\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R \\<sharp>* Q\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q", "have \"A\\<^sub>R \\<sharp>* T\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<parallel> Q \\<longmapsto> \\<tau> \\<prec> T\n  A\\<^sub>R \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* T", "by(force dest: tauFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* T\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\\<close> Rel'Rel"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n  Rel' \\<subseteq> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel'\n  Rel' \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel", "by auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* U\\<close> \\<open>A\\<^sub>R \\<sharp>* S\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, U, S \\<parallel> !P) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* U\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\\<close> FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* S\\<close> \\<open>A\\<^sub>R \\<sharp>* T\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T", "have \"(\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, S, T) \\<in> Rel\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* S\n  A\\<^sub>R \\<sharp>* T\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> S, R \\<parallel> T) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> S) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> T, R \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> S) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(rule cSym)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> (S \\<parallel> !P), (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> S \\<parallel> !P, R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> (S \\<parallel> !P),\n     R \\<parallel> T \\<parallel> !P)\n    \\<in> Rel", "by(metis Trans Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel", "have \"(\\<Psi>, R \\<parallel> U, (R \\<parallel> T) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> (S \\<parallel> !P)) \\<in> Rel\n  (\\<Psi>, R \\<parallel> (S \\<parallel> !P), R \\<parallel> T \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel", "by(rule Trans)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !P, (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "using \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "from \\<open>(\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'", "have \"(\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, R \\<parallel> Q', (R \\<parallel> T) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> (T \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "hence \"(\\<Psi>, (R \\<parallel> T) \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> Q', R \\<parallel> T \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> T \\<parallel> !P) \\<in> Rel\n  (\\<Psi>, R \\<parallel> T \\<parallel> !P, R \\<parallel> T \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, R \\<parallel> T \\<parallel> !Q, R \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>Q' A\\<^sub>P \\<Psi>\\<^sub>P.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> \\<tau> \\<prec> Q';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* R; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n                            (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 3. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> U\n  (\\<Psi>, R \\<parallel> U, R \\<parallel> Q') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', R \\<parallel> Q') \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cComm1 \\<Psi>\\<^sub>Q M N R' A\\<^sub>R \\<Psi>\\<^sub>R K xvec Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>xvec \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, Q, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrQ: \"extractFrame(!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* M", "obtain A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>' where FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, xvec, P, Q)\" and C'=\"(\\<Psi>, xvec, P, Q)\" in expandFrame) auto"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\\<close> \\<open>guarded Q\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* K\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  guarded Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* K", "obtain S where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\" and \"(\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q'\n  guarded Q\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S;\n         (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: rBangActE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'", "obtain P' T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\" and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\" and \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>R \\<sharp>* P'\" and  \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P' &&& A\\<^sub>R' \\<sharp>* P'", "by(force dest: weakOutputFreshChainDerivative)+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'", "have \"A\\<^sub>R' \\<sharp>* T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* T", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* T\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec", "have \"A\\<^sub>R' \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* xvec\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* S", "by(force dest: outputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* S\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q' \\<Psi>\\<^sub>Q' where FrQ': \"extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* M\" and \"A\\<^sub>Q' \\<sharp>* R\" and \"A\\<^sub>Q' \\<sharp>* K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q' \\<Psi>\\<^sub>Q'.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>;\n         A\\<^sub>Q' \\<sharp>* \\<Psi>; A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q' \\<sharp>* A\\<^sub>R; A\\<^sub>Q' \\<sharp>* M;\n         A\\<^sub>Q' \\<sharp>* R; A\\<^sub>Q' \\<sharp>* K\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R, K, M, R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ' \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q' = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q' \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q' = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "obtain P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                             and NilImpP'': \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                             and P''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrQ' \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac weakTransitionE) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "proof(induct rule: tauChainCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "case TauBase"], ["proof (state)\nthis:\n  P = P''\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans \\<open>P = P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  P = P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  P = P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<^sub>R\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(force intro: Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(rule Bang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "by(force intro: Comm1)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "by(rule tauActTauStepChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "case TauStep"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "obtain A\\<^sub>P'' \\<Psi>\\<^sub>P'' where FrP'': \"extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P'' \\<sharp>* K\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P'' \\<sharp>* R\" and \"A\\<^sub>P'' \\<sharp>* P''\" and \"A\\<^sub>P'' \\<sharp>* P\"\n                          and \"A\\<^sub>P'' \\<sharp>* A\\<^sub>R\" and \"distinct A\\<^sub>P''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P'' \\<Psi>\\<^sub>P''.\n        \\<lbrakk>extractFrame P'' =\n                 \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>; A\\<^sub>P'' \\<sharp>* K;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R; A\\<^sub>P'' \\<sharp>* R;\n         A\\<^sub>P'' \\<sharp>* P''; A\\<^sub>P'' \\<sharp>* P;\n         A\\<^sub>P'' \\<sharp>* A\\<^sub>R; distinct A\\<^sub>P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, K, A\\<^sub>R, \\<Psi>\\<^sub>R, R, P'', P)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* K\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  distinct A\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(drule_tac tauChainFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "with FrP'' \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "by(rule tauStepChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule_tac tauStepChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule tauStepChainBang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence  \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "by(rule_tac tauStepChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> (P'' \\<parallel> !P) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto>M\\<lparr>N\\<rparr> \\<prec> R'\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'", "by simp (metis statEqTransition AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P'' \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence P''PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel> !P \\<longmapsto>K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "using \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P'\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                      !P", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrP''"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>", "have FrP''P: \"extractFrame(P'' \\<parallel> !P) = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame (P'' \\<parallel> !P) =\n    \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by simp (metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>)) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n            \\<Psi>\\<^sub>R) \\<otimes>\n           \\<Psi>\\<^sub>Q'\\<rangle>", "by(rule_tac frameResChainPres, simp)\n              (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "from NilImpP'' FrQ FrP'' \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P''\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                          \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n               \\<Psi>\\<^sub>R\\<rangle>", "by(rule frameResChainPres, simp) \n              (metis Identity AssertionStatEqSym Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "obtain M' where RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M'\\<lparr>N\\<rparr> \\<prec> R'\" and \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\" and \"A\\<^sub>R \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrR FrQ' \\<open>distinct A\\<^sub>R\\<close> \\<open>distinct A\\<^sub>P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>  \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q' \\<sharp>* K\\<close> \\<open>A\\<^sub>Q' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close>\n                     \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close>  \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* K\\<close> \\<open>distinct xvec\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  distinct A\\<^sub>R\n  distinct A\\<^sub>P''\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* K\n  xvec \\<sharp>* K\n  distinct xvec\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac A\\<^sub>Q=\"A\\<^sub>Q'\" and Q=\"Q\" in comm2Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>R \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "note RTrans FrR P''PTrans FrP''P"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "by(metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M'\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>xvec \\<sharp>* R\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>N\\<rparr> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P' \\<parallel>\n                    !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M'\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* K\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "by(rule_tac Comm1) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (P' \\<parallel> !P)", "by(drule_tac tauActTauStepChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "have \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes> \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n    \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "by(rule tauChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> P' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                       !P", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<rhd> P' \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>' \\<rhd> P' \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                       !P", "by(rule tauChainStatEq) (metis Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel> !P\\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                               !P", "using \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>' \\<rhd> P' \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel> !P\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                               !P", "by(rule_tac tauChainStatEq) (auto intro: compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R' \\<parallel> (P' \\<parallel> !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> (T \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  (P' \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        (T \\<parallel> !P)", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> P' \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T \\<parallel>\n                             !P\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  (P' \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        (T \\<parallel> !P)", "by(rule_tac tauChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (P' \\<parallel> !P)) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      (P' \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                (P' \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      (T \\<parallel> !P)\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      (P' \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(P' \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    (P' \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    (T \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  (T \\<parallel> !P)", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P)), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel", "by(rule StatEq) (metis Associativity)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "using \\<open>\\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>', T, S) \\<in> Rel\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "by(rule_tac StatEq) (auto dest: compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* S\\<close> \\<open>A\\<^sub>R' \\<sharp>* T\\<close>"], ["proof (chain)\npicking this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel", "have \"(\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', T, S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> T) \\<parallel> !P, (R' \\<parallel> S) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T, R' \\<parallel> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> T \\<parallel> !P,\n     R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> T) \\<parallel> !P), \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> S) \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> T \\<parallel> !P, R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n    \\<in> Rel", "by(rule ResPres)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> T) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "by(force intro: Trans ScopeExt)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (T \\<parallel> !P)), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> T \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n    \\<in> Rel", "by(force intro: Trans ResPres Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'", "have \"(\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q))\n    \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (S \\<parallel> !Q)) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> S) \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> S) \\<parallel> !Q), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> S \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule ResPres')"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> S)) \\<parallel> !Q, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(force intro: Trans' ScopeExt'[THEN cSym'])"], ["proof (state)\nthis:\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P)\n  \\<in> Rel\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q)\n  \\<in> Rel''\n  (\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>\\<Psi>\\<^sub>Q M N P' A\\<^sub>P \\<Psi>\\<^sub>P K xvec Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>N\\<rparr> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''\n 2. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n(T \\<parallel> !P)\n  (\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (T \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "case(cComm2 \\<Psi>\\<^sub>Q M xvec N R' A\\<^sub>R \\<Psi>\\<^sub>R K Q' A\\<^sub>Q)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  distinct A\\<^sub>Q\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  distinct xvec\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* R'\n  A\\<^sub>R \\<sharp>* !Q\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* Q'\n  A\\<^sub>R \\<sharp>* A\\<^sub>Q\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n  A\\<^sub>Q \\<sharp>* \\<Psi>\n  A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q \\<sharp>* R\n  A\\<^sub>Q \\<sharp>* K\n  A\\<^sub>Q \\<sharp>* N\n  A\\<^sub>Q \\<sharp>* R'\n  A\\<^sub>Q \\<sharp>* !Q\n  A\\<^sub>Q \\<sharp>* xvec\n  A\\<^sub>Q \\<sharp>* Q'\n  A\\<^sub>Q \\<sharp>* (P, Q, R)\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* \\<Psi>\\<^sub>R\n  xvec \\<sharp>* R\n  xvec \\<sharp>* M\n  xvec \\<sharp>* K\n  xvec \\<sharp>* !Q\n  xvec \\<sharp>* \\<Psi>\\<^sub>Q\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)", "have \"A\\<^sub>R \\<sharp>* P\" and \"A\\<^sub>R \\<sharp>* Q\" and \"A\\<^sub>R \\<sharp>* R\""], ["proof (prove)\nusing this:\n  A\\<^sub>R \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P &&&\n    A\\<^sub>R \\<sharp>* Q &&& A\\<^sub>R \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>xvec \\<sharp>* (P, Q, R)\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* (P, Q, R)", "have \"xvec \\<sharp>* P\" and \"xvec \\<sharp>* Q\" and \"xvec \\<sharp>* R\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* (P, Q, R)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P &&& xvec \\<sharp>* Q &&& xvec \\<sharp>* R", "by simp+"], ["proof (state)\nthis:\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* R\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrQ: \"extractFrame(!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have FrR: \"extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>", "by fact"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close> FrR \\<open>distinct A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* N\\<close> \\<open>A\\<^sub>R \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* R\\<close> \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* M\\<close> \\<open>distinct xvec\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R \\<sharp>* M", "obtain p A\\<^sub>R' \\<Psi>\\<^sub>R' \\<Psi>' where FrR': \"extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\" and \"(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* P\" and \"A\\<^sub>R' \\<sharp>* Q\" and \"A\\<^sub>R' \\<sharp>* \\<Psi>\" and S: \"set p \\<subseteq> set xvec \\<times> set(p \\<bullet> xvec)\" and \"distinctPerm p\" and \"(p \\<bullet> xvec) \\<sharp>* N\" and \"(p \\<bullet> xvec) \\<sharp>* Q\" and \"(p \\<bullet> xvec) \\<sharp>* R'\" and \"(p \\<bullet> xvec) \\<sharp>* P\" and \"(p \\<bullet> xvec) \\<sharp>* \\<Psi>\" and \"A\\<^sub>R' \\<sharp>* N\" and \"A\\<^sub>R' \\<sharp>* xvec\" and \"A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  distinct A\\<^sub>R\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* N\n  A\\<^sub>R \\<sharp>* xvec\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  xvec \\<sharp>* R\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n  xvec \\<sharp>* Q\n  xvec \\<sharp>* M\n  distinct xvec\n  A\\<^sub>R \\<sharp>* M\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>R' \\<Psi>\\<^sub>R' p \\<Psi>'.\n        \\<lbrakk>extractFrame R' =\n                 \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>;\n         (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R';\n         A\\<^sub>R' \\<sharp>* xvec; A\\<^sub>R' \\<sharp>* P;\n         A\\<^sub>R' \\<sharp>* Q; A\\<^sub>R' \\<sharp>* \\<Psi>;\n         set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec);\n         distinctPerm p; (p \\<bullet> xvec) \\<sharp>* N;\n         (p \\<bullet> xvec) \\<sharp>* Q; (p \\<bullet> xvec) \\<sharp>* R';\n         (p \\<bullet> xvec) \\<sharp>* P;\n         (p \\<bullet> xvec) \\<sharp>* \\<Psi>; A\\<^sub>R' \\<sharp>* N;\n         A\\<^sub>R' \\<sharp>* xvec;\n         A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, P, Q)\"  and C'=\"(\\<Psi>, P, Q)\" in expandFrame) (assumption | simp)+"], ["proof (state)\nthis:\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* R'\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\\<close> S \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'", "have  RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* N\n  (p \\<bullet> xvec) \\<sharp>* R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                    xvec)\\<rparr>\\<langle>(p \\<bullet>\n     N)\\<rangle> \\<prec> p \\<bullet> R'", "by(simp add: boundOutputChainAlpha'' residualInject)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel", "by(rule cExt)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>N\\<rparr> \\<prec> Q'\\<close> S \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> \\<open>xvec \\<sharp>* Q\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* Q\n  xvec \\<sharp>* Q\n  distinctPerm p", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (p \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet> xvec) \\<sharp>* Q\n  xvec \\<sharp>* Q\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> p \\<bullet> Q'", "by(rule_tac inputAlpha) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'", "obtain S where QTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> S\" and \"(\\<one>, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n                           N)\\<rparr> \\<prec> S;\n         (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>guarded Q\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> p \\<bullet> Q'\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n                           N)\\<rparr> \\<prec> S;\n         (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: rBangActE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'", "obtain P' T where PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\" \n                             and P'Chain: \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\" \n                             and \"((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R, P, Q) \\<in> Rel\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<And>P' T.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                                  N)\\<rparr> \\<prec> P';\n         (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n         (p \\<bullet>\n          \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T;\n         ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n          T, S)\n         \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: cSim weakSimE)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>A\\<^sub>R' \\<sharp>* N\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R' \\<sharp>* N\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "by(simp add: freshChainSimps)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with PTrans \\<open>A\\<^sub>R' \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "have \"A\\<^sub>R' \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* P'", "by(force dest: weakInputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R' \\<sharp>* P'", "have \"A\\<^sub>R' \\<sharp>* T\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n  A\\<^sub>R' \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* T", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from QTrans \\<open>A\\<^sub>R' \\<sharp>* Q\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)", "have \"A\\<^sub>R' \\<sharp>* S\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> Q \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> S\n  A\\<^sub>R' \\<sharp>* Q\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* S", "by(force dest: inputFreshChainDerivative)"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "obtain A\\<^sub>Q' \\<Psi>\\<^sub>Q' where FrQ': \"extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\" and \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* A\\<^sub>R\" and \"A\\<^sub>Q' \\<sharp>* M\" and \"A\\<^sub>Q' \\<sharp>* R\" and \"A\\<^sub>Q' \\<sharp>* K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>Q' \\<Psi>\\<^sub>Q'.\n        \\<lbrakk>extractFrame Q =\n                 \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>;\n         A\\<^sub>Q' \\<sharp>* \\<Psi>; A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R;\n         A\\<^sub>Q' \\<sharp>* A\\<^sub>R; A\\<^sub>Q' \\<sharp>* M;\n         A\\<^sub>Q' \\<sharp>* R; A\\<^sub>Q' \\<sharp>* K\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, \\<Psi>\\<^sub>R, A\\<^sub>R, K, M, R)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>Q' \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from FrQ' \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q", "have \"\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\" and \"supp \\<Psi>\\<^sub>Q' = ({}::name set)\""], ["proof (prove)\nusing this:\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  guarded Q\n\ngoal (1 subgoal):\n 1. \\<Psi>\\<^sub>Q' \\<simeq> \\<one> &&& supp \\<Psi>\\<^sub>Q' = {}", "by(blast dest: guardedStatEq)+"], ["proof (state)\nthis:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\""], ["proof (prove)\nusing this:\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  supp \\<Psi>\\<^sub>Q' = {}\n\ngoal (1 subgoal):\n 1. A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'", "by(auto simp add: fresh_star_def fresh_def)"], ["proof (state)\nthis:\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PTrans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'", "obtain P'' where PChain: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\"\n                             and NilImpP'': \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\"\n                             and P''Trans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n                     N)\\<rparr> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrQ' \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R : Q \\<rhd> P \\<Longrightarrow>K\\<lparr>(p \\<bullet>\n                   N)\\<rparr> \\<prec> P'\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\n  A\\<^sub>Q' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>P''.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P'';\n         \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                              \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n      (extractFrame P'') (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R);\n         \\<Psi> \\<otimes>\n         \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n                     N)\\<rparr> \\<prec> P'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac weakTransitionE) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>xvec \\<sharp>* P\\<close> PChain"], ["proof (chain)\npicking this:\n  (p \\<bullet> xvec) \\<sharp>* P\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"(p \\<bullet> xvec) \\<sharp>* P''\" and \"xvec \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  (p \\<bullet> xvec) \\<sharp>* P\n  xvec \\<sharp>* P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* P'' &&& xvec \\<sharp>* P''", "by(force dest: tauChainFreshChain)+"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* P''\n  xvec \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from \\<open>(p \\<bullet> xvec) \\<sharp>* N\\<close> \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  (p \\<bullet> xvec) \\<sharp>* N\n  distinctPerm p", "have \"xvec \\<sharp>* (p \\<bullet> N)\""], ["proof (prove)\nusing this:\n  (p \\<bullet> xvec) \\<sharp>* N\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* (p \\<bullet> N)", "by(subst pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst, where pi=p, symmetric]) simp"], ["proof (state)\nthis:\n  xvec \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with P''Trans \\<open>xvec \\<sharp>* P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  xvec \\<sharp>* P''\n  xvec \\<sharp>* (p \\<bullet> N)", "have \"xvec \\<sharp>* P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  xvec \\<sharp>* P''\n  xvec \\<sharp>* (p \\<bullet> N)\n\ngoal (1 subgoal):\n 1. xvec \\<sharp>* P'", "by(force dest: inputFreshChainDerivative)"], ["proof (state)\nthis:\n  xvec \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* P'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')", "by(simp add: pt_fresh_star_bij[OF pt_name_inst, OF at_name_inst])"], ["proof (state)\nthis:\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from PChain"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "proof(induct rule: tauChainCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "case TauBase"], ["proof (state)\nthis:\n  P = P''\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from RTrans FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n            xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                   N)\\<rangle> \\<prec> p \\<bullet> R'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "note FrR"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans \\<open>P = P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  P = P''", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr>\\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n  P = P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n            N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<longmapsto> K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(force intro: Par1)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(rule Bang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close> FrQ"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "by simp"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n          xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                 N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<one> \\<turnstile> M \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M\n  (p \\<bullet> xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "by(force intro: Comm2)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (2 subgoals):\n 1. P = P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)\n 2. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                        xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n                                    (P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "by(rule tauActTauStepChain)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "case TauStep"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "obtain A\\<^sub>P'' \\<Psi>\\<^sub>P'' where FrP'': \"extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\" and \"A\\<^sub>P'' \\<sharp>* K\" and \"A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\" and \"A\\<^sub>P'' \\<sharp>* R\" and \"A\\<^sub>P'' \\<sharp>* P''\" and \"A\\<^sub>P'' \\<sharp>* P\"\n                          and \"A\\<^sub>P'' \\<sharp>* A\\<^sub>R\" and \"distinct A\\<^sub>P''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>P'' \\<Psi>\\<^sub>P''.\n        \\<lbrakk>extractFrame P'' =\n                 \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>; A\\<^sub>P'' \\<sharp>* K;\n         A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R; A\\<^sub>P'' \\<sharp>* R;\n         A\\<^sub>P'' \\<sharp>* P''; A\\<^sub>P'' \\<sharp>* P;\n         A\\<^sub>P'' \\<sharp>* A\\<^sub>R; distinct A\\<^sub>P''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac C=\"(\\<Psi>, K, A\\<^sub>R, \\<Psi>\\<^sub>R, R, P'', P)\" in freshFrame) auto"], ["proof (state)\nthis:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* K\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  distinct A\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from PChain \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P", "have \"A\\<^sub>R \\<sharp>* P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> P''\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* P''", "by(drule_tac tauChainFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "with FrP'' \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close>"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''", "have \"A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P''\n\ngoal (1 subgoal):\n 1. A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''", "by(drule_tac extractFrameFreshChain) auto"], ["proof (state)\nthis:\n  A\\<^sub>R \\<sharp>* \\<Psi>\\<^sub>P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''", "by(rule tauStepChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P''\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                          !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule_tac tauStepChainPar1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "using \\<open>guarded P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P \\<parallel>\n                        !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  guarded P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel>\n                      !P", "by(rule tauStepChainBang)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence  \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel> (P'' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "using FrR \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> !P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<parallel> !P\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n              (P'' \\<parallel> !P)", "by(rule_tac tauStepChainPar2) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> (P'' \\<parallel> !P) \\<longmapsto>\\<tau> \\<prec> \\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>((p \\<bullet> R') \\<parallel> (P' \\<parallel> !P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> RTrans"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto>M\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                  xvec)\\<rparr>\\<langle>(p \\<bullet>\n   N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                     xvec)\\<rparr>\\<langle>(p \\<bullet>\n      N)\\<rangle> \\<prec> p \\<bullet> R'", "by simp (metis statEqTransition AssertionStatEqSym compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from P''Trans"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'", "have \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<one> \\<rhd> P'' \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> P'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n              N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n        N)\\<rparr> \\<prec> P'", "by(rule statEqTransition) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence P''PTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel> !P \\<longmapsto>K\\<lparr>(p \\<bullet> N)\\<rparr> \\<prec> (P' \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<one> \\<rhd> P'' \\<longmapsto> K\\<lparr>(p \\<bullet>\n      N)\\<rparr> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                          !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n               N)\\<rparr> \\<prec> P' \\<parallel> !P", "by(rule_tac Par1) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrP''"], ["proof (chain)\npicking this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>", "have FrP''P: \"extractFrame(P'' \\<parallel> !P) = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\""], ["proof (prove)\nusing this:\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. extractFrame (P'' \\<parallel> !P) =\n    \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>", "by auto"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from FrQ \\<open>\\<Psi>\\<^sub>Q' \\<simeq> \\<one>\\<close> \\<open>\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\\<close>"], ["proof (chain)\npicking this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K", "have \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  \\<Psi>\\<^sub>Q' \\<simeq> \\<one>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K", "by simp (metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q' \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>Q' \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>)) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes> \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n            \\<Psi>\\<^sub>R) \\<otimes>\n           \\<Psi>\\<^sub>Q'\\<rangle>", "by(rule_tac frameResChainPres, simp)\n              (metis Associativity Commutativity Composition AssertionStatEqTrans AssertionStatEqSym)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "from NilImpP'' FrQ FrP'' \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\\<close> freshCompChain"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')", "have \"\\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F insertAssertion\n                                     (extractFrame P'')\n                                     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R)\n  extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>\n  extractFrame P'' = \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P''\\<rangle>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\\<^sub>R\n  \\<lbrakk>?xvec \\<sharp>* ?\\<Psi>; ?xvec \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?xvec \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n  \\<lbrakk>?Xs \\<sharp>* ?\\<Psi>; ?Xs \\<sharp>* ?\\<Psi>'\\<rbrakk>\n  \\<Longrightarrow> ?Xs \\<sharp>* (?\\<Psi> \\<otimes> ?\\<Psi>')\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                         \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                       \\<Psi>\\<^sub>R) \\<otimes>\n                      \\<Psi>\\<^sub>P''\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "have \"\\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                          \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n               \\<Psi>\\<^sub>R\\<rangle>", "by(rule frameResChainPres, simp) \n              (metis Identity AssertionStatEqSym Associativity Commutativity Composition AssertionStatEqTrans)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes>\n          \\<Psi>\\<^sub>R) \\<otimes>\n         \\<Psi>\\<^sub>Q'\\<rangle>\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                       \\<Psi>\\<^sub>Q'\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                     \\<Psi>\\<^sub>R) \\<otimes>\n                    \\<Psi>\\<^sub>P''\\<rangle>\n  \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n                        \\<Psi>\\<^sub>P''\\<rangle> \\<simeq>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n              \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n             \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                         \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                      \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                     \\<Psi>\\<^sub>R\\<rangle>", "by(rule FrameStatEqImpCompose)"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>", "obtain M' where RTrans: \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<rhd> R \\<longmapsto>M'\\<lparr>\\<nu>*(p \\<bullet> xvec)\\<rparr>\\<langle>(p \\<bullet> N)\\<rangle> \\<prec> (p \\<bullet> R')\" and \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\" and \"A\\<^sub>R \\<sharp>* M'\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n                          xvec)\\<rparr>\\<langle>(p \\<bullet>\n           N)\\<rangle> \\<prec> p \\<bullet> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using FrR FrQ' \\<open>distinct A\\<^sub>R\\<close> \\<open>distinct A\\<^sub>P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* Q\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close>  \\<open>A\\<^sub>R \\<sharp>* M\\<close> \\<open>A\\<^sub>Q' \\<sharp>* R\\<close> \\<open>A\\<^sub>Q' \\<sharp>* K\\<close> \\<open>A\\<^sub>Q' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close>\n                     \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close>  \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*(p \\<bullet>\n                   xvec)\\<rparr>\\<langle>(p \\<bullet>\n    N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>Q' \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M\n  \\<langle>A\\<^sub>Q', (\\<Psi> \\<otimes> \\<Psi>\\<^sub>Q') \\<otimes>\n                       \\<Psi>\\<^sub>R\\<rangle> \\<hookrightarrow>\\<^sub>F \\<langle>A\\<^sub>P'', (\\<Psi> \\<otimes>\n                    \\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n                   \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  extractFrame Q = \\<langle>A\\<^sub>Q', \\<Psi>\\<^sub>Q'\\<rangle>\n  distinct A\\<^sub>R\n  distinct A\\<^sub>P''\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* Q\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* M\n  A\\<^sub>Q' \\<sharp>* R\n  A\\<^sub>Q' \\<sharp>* K\n  A\\<^sub>Q' \\<sharp>* A\\<^sub>R\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* K\n\ngoal (1 subgoal):\n 1. (\\<And>M'.\n        \\<lbrakk>\\<Psi> \\<otimes>\n                 \\<Psi>\\<^sub>P'' \\<otimes>\n                 \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n                          xvec)\\<rparr>\\<langle>(p \\<bullet>\n           N)\\<rangle> \\<prec> p \\<bullet> R';\n         \\<Psi> \\<otimes>\n         (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n         \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M';\n         A\\<^sub>R \\<sharp>* M'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(rule_tac A\\<^sub>Q=\"A\\<^sub>Q'\" and Q=\"Q\" in comm1Aux) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n  A\\<^sub>R \\<sharp>* M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "note RTrans FrR P''PTrans FrP''P"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "from \\<open>\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\\<close>"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'", "have \"\\<Psi> \\<otimes> (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes> \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> K \\<leftrightarrow> M'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n    \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K", "by(rule chanEqSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R \\<otimes> \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (\\<Psi>\\<^sub>P'' \\<otimes> \\<one>) \\<otimes>\n  \\<Psi>\\<^sub>R \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<otimes>\n    \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "by(metis statEqEnt Composition AssertionStatEqSym Commutativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "using \\<open>A\\<^sub>R \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R \\<sharp>* R\\<close> \\<open>A\\<^sub>R \\<sharp>* P''\\<close> \\<open>A\\<^sub>R \\<sharp>* P\\<close> \\<open>A\\<^sub>R \\<sharp>* M'\\<close> \\<open>A\\<^sub>P'' \\<sharp>* A\\<^sub>R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>P'' \\<sharp>* R\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P''\\<close> \\<open>A\\<^sub>P'' \\<sharp>* P\\<close> \\<open>A\\<^sub>P'' \\<sharp>* K\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P''\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes>\n  \\<one> \\<rhd> R \\<longmapsto> M'\\<lparr>\\<nu>*(p \\<bullet>\n           xvec)\\<rparr>\\<langle>(p \\<bullet>\n                                  N)\\<rangle> \\<prec> p \\<bullet> R'\n  extractFrame R = \\<langle>A\\<^sub>R, \\<Psi>\\<^sub>R\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<rhd> P'' \\<parallel>\n                        !P \\<longmapsto> K\\<lparr>(p \\<bullet>\n             N)\\<rparr> \\<prec> P' \\<parallel> !P\n  extractFrame (P'' \\<parallel> !P) =\n  \\<langle>A\\<^sub>P'', \\<Psi>\\<^sub>P'' \\<otimes> \\<one>\\<rangle>\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R \\<otimes>\n  \\<Psi>\\<^sub>P'' \\<otimes> \\<one> \\<turnstile> M' \\<leftrightarrow> K\n  A\\<^sub>R \\<sharp>* \\<Psi>\n  A\\<^sub>R \\<sharp>* R\n  A\\<^sub>R \\<sharp>* P''\n  A\\<^sub>R \\<sharp>* P\n  A\\<^sub>R \\<sharp>* M'\n  A\\<^sub>P'' \\<sharp>* A\\<^sub>R\n  A\\<^sub>P'' \\<sharp>* \\<Psi>\n  A\\<^sub>P'' \\<sharp>* R\n  A\\<^sub>P'' \\<sharp>* P''\n  A\\<^sub>P'' \\<sharp>* P\n  A\\<^sub>P'' \\<sharp>* K\n  (p \\<bullet> xvec) \\<sharp>* P''\n  (p \\<bullet> xvec) \\<sharp>* P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  (P'' \\<parallel>\n                   !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "by(rule_tac Comm2) (assumption | simp)+"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R \\<rhd> P \\<Longrightarrow>\\<^sub>\\<tau> P'' \\<Longrightarrow>\n    \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> R \\<parallel>\n            (P'' \\<parallel> !P)\n  \\<Psi> \\<rhd> R \\<parallel>\n                (P'' \\<parallel>\n                 !P) \\<longmapsto> \\<tau> \\<prec> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                            xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n  (P' \\<parallel> !P)", "by(drule_tac tauActTauStepChain) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  ((p \\<bullet> P') \\<parallel> !P)", "using \\<open>xvec \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* P\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* R'\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*p \\<bullet>\n                          xvec\\<rparr>(p \\<bullet> R') \\<parallel>\n(P' \\<parallel> !P)\n  xvec \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* P\n  (p \\<bullet> xvec) \\<sharp>* (p \\<bullet> P')\n  (p \\<bullet> xvec) \\<sharp>* R'\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  ((p \\<bullet> P') \\<parallel> !P)", "by(subst resChainAlpha[where p=p]) auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> P') \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> P') \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "from P'Chain"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'))) \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet> \\<Psi>') \\<rhd> P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> T\n\ngoal (1 subgoal):\n 1. p \\<bullet>\n    (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n    (p \\<bullet>\n     \\<Psi>') \\<rhd> p \\<bullet>\n                     P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(rule tauChainEqvt)"], ["proof (state)\nthis:\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "have \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  p \\<bullet>\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes>\n  (p \\<bullet>\n   \\<Psi>') \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<rhd> p \\<bullet>\n                   P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>') \\<otimes> \\<one> \\<rhd> (p \\<bullet> P') \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> p \\<bullet>\n                 P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n     \\<Psi>') \\<otimes>\n    \\<one> \\<rhd> p \\<bullet>\n                  P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T", "by(rule tauChainStatEq) (metis Identity AssertionStatEqSym)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> p \\<bullet>\n                P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n   \\<Psi>') \\<otimes>\n  \\<one> \\<rhd> p \\<bullet>\n                P' \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> p \\<bullet> T\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n    \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                        T) \\<parallel>\n                       !P", "by(rule_tac tauChainPar1) auto"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n    \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                   !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                        T) \\<parallel>\n                       !P", "by(rule tauChainStatEq) (metis Associativity)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<otimes> \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel> !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet> T) \\<parallel> !P\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                                T) \\<parallel>\n                               !P", "using \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq>  \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes>\n  \\<Psi>' \\<rhd> (p \\<bullet> P') \\<parallel>\n                 !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                      T) \\<parallel>\n                     !P\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<otimes>\n    \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                           !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                                T) \\<parallel>\n                               !P", "by(rule_tac tauChainStatEq) (auto intro: compositionSym)"], ["proof (state)\nthis:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  ((p \\<bullet> P') \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        ((p \\<bullet> T) \\<parallel> !P)", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close> \\<open>A\\<^sub>R' \\<sharp>* P\\<close> \\<open>A\\<^sub>R' \\<sharp>* P'\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (prove)\nusing this:\n  \\<Psi> \\<otimes>\n  \\<Psi>\\<^sub>R' \\<rhd> (p \\<bullet> P') \\<parallel>\n                         !P \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> (p \\<bullet>\n                              T) \\<parallel>\n                             !P\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n  A\\<^sub>R' \\<sharp>* P\n  A\\<^sub>R' \\<sharp>* P'\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R' \\<parallel>\n                  ((p \\<bullet> P') \\<parallel>\n                   !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                        ((p \\<bullet> T) \\<parallel> !P)", "by(rule_tac tauChainPar2) (auto simp add: freshChainSimps)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "hence \"\\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> P') \\<parallel> !P)) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      ((p \\<bullet> P') \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R' \\<parallel>\n                ((p \\<bullet> P') \\<parallel>\n                 !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> R' \\<parallel>\n                      ((p \\<bullet> T) \\<parallel> !P)\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n      ((p \\<bullet> P') \\<parallel>\n       !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)", "by(rule tauChainResChainPres)"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> P') \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)", "have \"\\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P))\""], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> P') \\<parallel> !P)\n  \\<Psi> \\<rhd> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n    ((p \\<bullet> P') \\<parallel>\n     !P) \\<Longrightarrow>\\<^sup>^\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                                    ((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<Psi> \\<rhd> R \\<parallel>\n                  !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n  ((p \\<bullet> T) \\<parallel> !P)", "by auto"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "have \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S) \\<in> Rel\\<close>"], ["proof (chain)\npicking this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel", "have \"(p \\<bullet> ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>')), (p \\<bullet> T), (p \\<bullet> S)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'), T, S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (p \\<bullet>\n     (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule Closed)"], ["proof (state)\nthis:\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* \\<Psi>\\<close> \\<open>distinctPerm p\\<close> S"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel", "have \"((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* \\<Psi>\n  (p \\<bullet> xvec) \\<sharp>* \\<Psi>\n  distinctPerm p\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  (p \\<bullet>\n   (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R) \\<otimes> (p \\<bullet> \\<Psi>'),\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  ((\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R)) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n     p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule StatEq) (metis Associativity)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "using \\<open>(p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>',\n   p \\<bullet> T, p \\<bullet> S)\n  \\<in> Rel\n  (p \\<bullet> \\<Psi>\\<^sub>R) \\<otimes> \\<Psi>' \\<simeq> \\<Psi>\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S)\n    \\<in> Rel", "by(rule_tac StatEq) (auto dest: compositionSym)"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>A\\<^sub>R' \\<sharp>* S\\<close> \\<open>A\\<^sub>R' \\<sharp>* T\\<close> \\<open>A\\<^sub>R' \\<sharp>* xvec\\<close> \\<open>A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\\<close> S"], ["proof (chain)\npicking this:\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)", "have \"A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\" and \"A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\""], ["proof (prove)\nusing this:\n  A\\<^sub>R' \\<sharp>* S\n  A\\<^sub>R' \\<sharp>* T\n  A\\<^sub>R' \\<sharp>* xvec\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> xvec)\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n\ngoal (1 subgoal):\n 1. A\\<^sub>R' \\<sharp>* (p \\<bullet> S) &&&\n    A\\<^sub>R' \\<sharp>* (p \\<bullet> T)", "by(simp add: freshChainSimps)+"], ["proof (state)\nthis:\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)", "have \"(\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n    \\<in> Rel", "using FrR' \\<open>A\\<^sub>R' \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi> \\<otimes> \\<Psi>\\<^sub>R', p \\<bullet> T, p \\<bullet> S) \\<in> Rel\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> S)\n  A\\<^sub>R' \\<sharp>* (p \\<bullet> T)\n  extractFrame R' = \\<langle>A\\<^sub>R', \\<Psi>\\<^sub>R'\\<rangle>\n  A\\<^sub>R' \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n    \\<in> Rel", "by(rule_tac FrameParPres) auto"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P, (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T), R' \\<parallel> (p \\<bullet> S))\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n     R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n    \\<in> Rel", "by(rule ParPres)"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P), \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> S)) \\<parallel> !P)) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !P)\n    \\<in> Rel", "by(rule ResPres)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> T)) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* P\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* P\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel>\n                               !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "by(force intro: Trans ScopeExt)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> ((p \\<bullet> T) \\<parallel> !P)), (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> T) \\<parallel> !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P)\n    \\<in> Rel", "by(force intro: Trans ResPres Assoc)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<Psi>, P, Q) \\<in> Rel\\<close> \\<open>guarded P\\<close> \\<open>guarded Q\\<close>"], ["proof (chain)\npicking this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q", "have \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !P, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !Q) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (\\<Psi>, P, Q) \\<in> Rel\n  guarded P\n  guarded Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !P,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q)\n    \\<in> Rel''", "by(rule C1)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "from \\<open>(\\<one>, (p \\<bullet> Q'), S \\<parallel> !Q) \\<in> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'", "have \"(p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q', p \\<bullet> (S \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, p \\<bullet> Q', S \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n     p \\<bullet> S \\<parallel> !Q)\n    \\<in> Rel'", "by(rule Closed')"], ["proof (state)\nthis:\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "with \\<open>xvec \\<sharp>* Q\\<close> \\<open>(p \\<bullet> xvec) \\<sharp>* Q\\<close> S \\<open>distinctPerm p\\<close>"], ["proof (chain)\npicking this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'", "have \"(\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  xvec \\<sharp>* Q\n  (p \\<bullet> xvec) \\<sharp>* Q\n  set p \\<subseteq> set xvec \\<times> set (p \\<bullet> xvec)\n  distinctPerm p\n  (p \\<bullet> \\<one>, p \\<bullet> p \\<bullet> Q',\n   p \\<bullet> S \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(simp add: eqvts)"], ["proof (state)\nthis:\n  (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(rule cExt')"], ["proof (state)\nthis:\n  (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<one> \\<otimes> \\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'", "by(rule StatEq') (metis Identity AssertionStatEqSym Commutativity AssertionStatEqTrans)"], ["proof (state)\nthis:\n  (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q)) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, Q', (p \\<bullet> S) \\<parallel> !Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n    \\<in> Rel'", "by(rule ParPres')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, R' \\<parallel> Q', (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q',\n   R' \\<parallel> ((p \\<bullet> S) \\<parallel> !Q))\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> Q',\n     R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n    \\<in> Rel'", "by(metis Trans' Assoc')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q, R' \\<parallel> Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> Q', R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q)\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n     R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule cSym')"], ["proof (state)\nthis:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, \\<lparr>\\<nu>*xvec\\<rparr>((R' \\<parallel> (p \\<bullet> S)) \\<parallel> !Q), \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>, R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q, R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel>\n                               !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(rule ResPres')"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "hence \"(\\<Psi>, (\\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> (p \\<bullet> S))) \\<parallel> !Q, \\<lparr>\\<nu>*xvec\\<rparr>(R' \\<parallel> Q')) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "using \\<open>xvec \\<sharp>* \\<Psi>\\<close> \\<open>xvec \\<sharp>* Q\\<close>"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S) \\<parallel> !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n  xvec \\<sharp>* \\<Psi>\n  xvec \\<sharp>* Q\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n     !Q,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel'", "by(force intro: Trans' ScopeExt'[THEN cSym'])"], ["proof (state)\nthis:\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P)\n  \\<in> Rel\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !P,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q)\n  \\<in> Rel''\n  (\\<Psi>,\n   (\\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> (p \\<bullet> S)) \\<parallel>\n   !Q,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (\\<Psi>,\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                               ((p \\<bullet> T) \\<parallel> !P),\n     \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n    \\<in> Rel''", "by(rule_tac Compose)"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>\\<Psi>\\<^sub>Q M xvec N P' A\\<^sub>P \\<Psi>\\<^sub>P K Q'\n       A\\<^sub>Q.\n       \\<lbrakk>\\<Psi> \\<otimes>\n                \\<Psi>\\<^sub>Q \\<rhd> R \\<longmapsto> M\\<lparr>\\<nu>*xvec\\<rparr>\\<langle>N\\<rangle> \\<prec> P';\n        extractFrame R = \\<langle>A\\<^sub>P, \\<Psi>\\<^sub>P\\<rangle>;\n        distinct A\\<^sub>P;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<rhd> !Q \\<longmapsto> K\\<lparr>N\\<rparr> \\<prec> Q';\n        extractFrame (!Q) = \\<langle>A\\<^sub>Q, \\<Psi>\\<^sub>Q\\<rangle>;\n        distinct A\\<^sub>Q;\n        \\<Psi> \\<otimes>\n        \\<Psi>\\<^sub>P \\<otimes>\n        \\<Psi>\\<^sub>Q \\<turnstile> M \\<leftrightarrow> K;\n        distinct xvec; A\\<^sub>P \\<sharp>* \\<Psi>;\n        A\\<^sub>P \\<sharp>* \\<Psi>\\<^sub>Q; A\\<^sub>P \\<sharp>* R;\n        A\\<^sub>P \\<sharp>* M; A\\<^sub>P \\<sharp>* N;\n        A\\<^sub>P \\<sharp>* P'; A\\<^sub>P \\<sharp>* !Q;\n        A\\<^sub>P \\<sharp>* xvec; A\\<^sub>P \\<sharp>* Q';\n        A\\<^sub>P \\<sharp>* A\\<^sub>Q; A\\<^sub>P \\<sharp>* (P, Q, R);\n        A\\<^sub>Q \\<sharp>* \\<Psi>; A\\<^sub>Q \\<sharp>* \\<Psi>\\<^sub>P;\n        A\\<^sub>Q \\<sharp>* R; A\\<^sub>Q \\<sharp>* K; A\\<^sub>Q \\<sharp>* N;\n        A\\<^sub>Q \\<sharp>* P'; A\\<^sub>Q \\<sharp>* !Q;\n        A\\<^sub>Q \\<sharp>* xvec; A\\<^sub>Q \\<sharp>* Q';\n        A\\<^sub>Q \\<sharp>* (P, Q, R); xvec \\<sharp>* \\<Psi>;\n        xvec \\<sharp>* \\<Psi>\\<^sub>P; xvec \\<sharp>* R; xvec \\<sharp>* M;\n        xvec \\<sharp>* K; xvec \\<sharp>* !Q; xvec \\<sharp>* \\<Psi>\\<^sub>Q;\n        xvec \\<sharp>* (P, Q, R)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            \\<Psi> \\<rhd> R \\<parallel>\n    !P \\<Longrightarrow>\\<^sub>\\<tau> P'a \\<and>\n                            (\\<Psi>, P'a,\n                             \\<lparr>\\<nu>*xvec\\<rparr>P' \\<parallel> Q')\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  \\<Psi> \\<rhd> R \\<parallel>\n                !P \\<Longrightarrow>\\<^sub>\\<tau> \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n((p \\<bullet> T) \\<parallel> !P)\n  (\\<Psi>,\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel>\n                             ((p \\<bullet> T) \\<parallel> !P),\n   \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q')\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<Psi> \\<rhd> R \\<parallel>\n                     !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n       (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', \\<lparr>\\<nu>*xvec\\<rparr>R' \\<parallel> Q') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<Psi> \\<rhd> R \\<parallel> !P \\<Longrightarrow>\\<^sub>\\<tau> P' \\<and>\n     (\\<Psi>, P', RQ') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["", "notation relcomp (infixr \"O\" 75)"], ["", "end"], ["", "end"]]}